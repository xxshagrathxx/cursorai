function YS(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var zn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var oE={exports:{}},Gd={},aE={exports:{}},be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ru=Symbol.for("react.element"),XS=Symbol.for("react.portal"),JS=Symbol.for("react.fragment"),ZS=Symbol.for("react.strict_mode"),eC=Symbol.for("react.profiler"),tC=Symbol.for("react.provider"),nC=Symbol.for("react.context"),rC=Symbol.for("react.forward_ref"),iC=Symbol.for("react.suspense"),sC=Symbol.for("react.memo"),oC=Symbol.for("react.lazy"),v0=Symbol.iterator;function aC(t){return t===null||typeof t!="object"?null:(t=v0&&t[v0]||t["@@iterator"],typeof t=="function"?t:null)}var lE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uE=Object.assign,cE={};function na(t,e,n){this.props=t,this.context=e,this.refs=cE,this.updater=n||lE}na.prototype.isReactComponent={};na.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};na.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function dE(){}dE.prototype=na.prototype;function eg(t,e,n){this.props=t,this.context=e,this.refs=cE,this.updater=n||lE}var tg=eg.prototype=new dE;tg.constructor=eg;uE(tg,na.prototype);tg.isPureReactComponent=!0;var w0=Array.isArray,hE=Object.prototype.hasOwnProperty,ng={current:null},fE={key:!0,ref:!0,__self:!0,__source:!0};function pE(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)hE.call(e,r)&&!fE.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ru,type:t,key:s,ref:o,props:i,_owner:ng.current}}function lC(t,e){return{$$typeof:ru,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function rg(t){return typeof t=="object"&&t!==null&&t.$$typeof===ru}function uC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var _0=/\/+/g;function wf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?uC(""+t.key):e.toString(36)}function Ec(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ru:case XS:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+wf(o,0):r,w0(i)?(n="",t!=null&&(n=t.replace(_0,"$&/")+"/"),Ec(i,e,n,"",function(c){return c})):i!=null&&(rg(i)&&(i=lC(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(_0,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",w0(t))for(var a=0;a<t.length;a++){s=t[a];var u=r+wf(s,a);o+=Ec(s,e,n,u,i)}else if(u=aC(t),typeof u=="function")for(t=u.call(t),a=0;!(s=t.next()).done;)s=s.value,u=r+wf(s,a++),o+=Ec(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Gu(t,e,n){if(t==null)return t;var r=[],i=0;return Ec(t,r,"","",function(s){return e.call(n,s,i++)}),r}function cC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var fn={current:null},Tc={transition:null},dC={ReactCurrentDispatcher:fn,ReactCurrentBatchConfig:Tc,ReactCurrentOwner:ng};function mE(){throw Error("act(...) is not supported in production builds of React.")}be.Children={map:Gu,forEach:function(t,e,n){Gu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Gu(t,function(){e++}),e},toArray:function(t){return Gu(t,function(e){return e})||[]},only:function(t){if(!rg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};be.Component=na;be.Fragment=JS;be.Profiler=eC;be.PureComponent=eg;be.StrictMode=ZS;be.Suspense=iC;be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dC;be.act=mE;be.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=uE({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ng.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)hE.call(e,u)&&!fE.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:ru,type:t.type,key:i,ref:s,props:r,_owner:o}};be.createContext=function(t){return t={$$typeof:nC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:tC,_context:t},t.Consumer=t};be.createElement=pE;be.createFactory=function(t){var e=pE.bind(null,t);return e.type=t,e};be.createRef=function(){return{current:null}};be.forwardRef=function(t){return{$$typeof:rC,render:t}};be.isValidElement=rg;be.lazy=function(t){return{$$typeof:oC,_payload:{_status:-1,_result:t},_init:cC}};be.memo=function(t,e){return{$$typeof:sC,type:t,compare:e===void 0?null:e}};be.startTransition=function(t){var e=Tc.transition;Tc.transition={};try{t()}finally{Tc.transition=e}};be.unstable_act=mE;be.useCallback=function(t,e){return fn.current.useCallback(t,e)};be.useContext=function(t){return fn.current.useContext(t)};be.useDebugValue=function(){};be.useDeferredValue=function(t){return fn.current.useDeferredValue(t)};be.useEffect=function(t,e){return fn.current.useEffect(t,e)};be.useId=function(){return fn.current.useId()};be.useImperativeHandle=function(t,e,n){return fn.current.useImperativeHandle(t,e,n)};be.useInsertionEffect=function(t,e){return fn.current.useInsertionEffect(t,e)};be.useLayoutEffect=function(t,e){return fn.current.useLayoutEffect(t,e)};be.useMemo=function(t,e){return fn.current.useMemo(t,e)};be.useReducer=function(t,e,n){return fn.current.useReducer(t,e,n)};be.useRef=function(t){return fn.current.useRef(t)};be.useState=function(t){return fn.current.useState(t)};be.useSyncExternalStore=function(t,e,n){return fn.current.useSyncExternalStore(t,e,n)};be.useTransition=function(){return fn.current.useTransition()};be.version="18.3.1";aE.exports=be;var O=aE.exports;const Te=sE(O),hC=YS({__proto__:null,default:Te},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fC=O,pC=Symbol.for("react.element"),mC=Symbol.for("react.fragment"),gC=Object.prototype.hasOwnProperty,yC=fC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vC={key:!0,ref:!0,__self:!0,__source:!0};function gE(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)gC.call(e,r)&&!vC.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:pC,type:t,key:s,ref:o,props:i,_owner:yC.current}}Gd.Fragment=mC;Gd.jsx=gE;Gd.jsxs=gE;oE.exports=Gd;var ig=oE.exports;const Rn=ig.Fragment,p=ig.jsx,x=ig.jsxs;var wp={},yE={exports:{}},Ln={},vE={exports:{}},wE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Q,se){var K=Q.length;Q.push(se);e:for(;0<K;){var ae=K-1>>>1,le=Q[ae];if(0<i(le,se))Q[ae]=se,Q[K]=le,K=ae;else break e}}function n(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var se=Q[0],K=Q.pop();if(K!==se){Q[0]=K;e:for(var ae=0,le=Q.length,fe=le>>>1;ae<fe;){var Ee=2*(ae+1)-1,ye=Q[Ee],Be=Ee+1,ve=Q[Be];if(0>i(ye,K))Be<le&&0>i(ve,ye)?(Q[ae]=ve,Q[Be]=K,ae=Be):(Q[ae]=ye,Q[Ee]=K,ae=Ee);else if(Be<le&&0>i(ve,K))Q[ae]=ve,Q[Be]=K,ae=Be;else break e}}return se}function i(Q,se){var K=Q.sortIndex-se.sortIndex;return K!==0?K:Q.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],c=[],d=1,h=null,m=3,w=!1,b=!1,P=!1,N=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(Q){for(var se=n(c);se!==null;){if(se.callback===null)r(c);else if(se.startTime<=Q)r(c),se.sortIndex=se.expirationTime,e(u,se);else break;se=n(c)}}function D(Q){if(P=!1,A(Q),!b)if(n(u)!==null)b=!0,de(M);else{var se=n(c);se!==null&&ge(D,se.startTime-Q)}}function M(Q,se){b=!1,P&&(P=!1,_(y),y=-1),w=!0;var K=m;try{for(A(se),h=n(u);h!==null&&(!(h.expirationTime>se)||Q&&!R());){var ae=h.callback;if(typeof ae=="function"){h.callback=null,m=h.priorityLevel;var le=ae(h.expirationTime<=se);se=t.unstable_now(),typeof le=="function"?h.callback=le:h===n(u)&&r(u),A(se)}else r(u);h=n(u)}if(h!==null)var fe=!0;else{var Ee=n(c);Ee!==null&&ge(D,Ee.startTime-se),fe=!1}return fe}finally{h=null,m=K,w=!1}}var V=!1,E=null,y=-1,S=5,k=-1;function R(){return!(t.unstable_now()-k<S)}function T(){if(E!==null){var Q=t.unstable_now();k=Q;var se=!0;try{se=E(!0,Q)}finally{se?I():(V=!1,E=null)}}else V=!1}var I;if(typeof v=="function")I=function(){v(T)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,H=W.port2;W.port1.onmessage=T,I=function(){H.postMessage(null)}}else I=function(){N(T,0)};function de(Q){E=Q,V||(V=!0,I())}function ge(Q,se){y=N(function(){Q(t.unstable_now())},se)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Q){Q.callback=null},t.unstable_continueExecution=function(){b||w||(b=!0,de(M))},t.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<Q?Math.floor(1e3/Q):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(Q){switch(m){case 1:case 2:case 3:var se=3;break;default:se=m}var K=m;m=se;try{return Q()}finally{m=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Q,se){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var K=m;m=Q;try{return se()}finally{m=K}},t.unstable_scheduleCallback=function(Q,se,K){var ae=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?ae+K:ae):K=ae,Q){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=K+le,Q={id:d++,callback:se,priorityLevel:Q,startTime:K,expirationTime:le,sortIndex:-1},K>ae?(Q.sortIndex=K,e(c,Q),n(u)===null&&Q===n(c)&&(P?(_(y),y=-1):P=!0,ge(D,K-ae))):(Q.sortIndex=le,e(u,Q),b||w||(b=!0,de(M))),Q},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(Q){var se=m;return function(){var K=m;m=se;try{return Q.apply(this,arguments)}finally{m=K}}}})(wE);vE.exports=wE;var wC=vE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _C=O,On=wC;function q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _E=new Set,xl={};function zs(t,e){Uo(t,e),Uo(t+"Capture",e)}function Uo(t,e){for(xl[t]=e,t=0;t<e.length;t++)_E.add(e[t])}var Kr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_p=Object.prototype.hasOwnProperty,EC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E0={},T0={};function TC(t){return _p.call(T0,t)?!0:_p.call(E0,t)?!1:EC.test(t)?T0[t]=!0:(E0[t]=!0,!1)}function bC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function IC(t,e,n,r){if(e===null||typeof e>"u"||bC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function pn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var qt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){qt[t]=new pn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];qt[e]=new pn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){qt[t]=new pn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){qt[t]=new pn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){qt[t]=new pn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){qt[t]=new pn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){qt[t]=new pn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){qt[t]=new pn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){qt[t]=new pn(t,5,!1,t.toLowerCase(),null,!1,!1)});var sg=/[\-:]([a-z])/g;function og(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(sg,og);qt[e]=new pn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(sg,og);qt[e]=new pn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(sg,og);qt[e]=new pn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){qt[t]=new pn(t,1,!1,t.toLowerCase(),null,!1,!1)});qt.xlinkHref=new pn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){qt[t]=new pn(t,1,!1,t.toLowerCase(),null,!0,!0)});function ag(t,e,n,r){var i=qt.hasOwnProperty(e)?qt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(IC(e,n,i,r)&&(n=null),r||i===null?TC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ii=_C.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ku=Symbol.for("react.element"),fo=Symbol.for("react.portal"),po=Symbol.for("react.fragment"),lg=Symbol.for("react.strict_mode"),Ep=Symbol.for("react.profiler"),EE=Symbol.for("react.provider"),TE=Symbol.for("react.context"),ug=Symbol.for("react.forward_ref"),Tp=Symbol.for("react.suspense"),bp=Symbol.for("react.suspense_list"),cg=Symbol.for("react.memo"),yi=Symbol.for("react.lazy"),bE=Symbol.for("react.offscreen"),b0=Symbol.iterator;function Na(t){return t===null||typeof t!="object"?null:(t=b0&&t[b0]||t["@@iterator"],typeof t=="function"?t:null)}var st=Object.assign,_f;function Wa(t){if(_f===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);_f=e&&e[1]||""}return`
`+_f+t}var Ef=!1;function Tf(t,e){if(!t||Ef)return"";Ef=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{Ef=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Wa(t):""}function PC(t){switch(t.tag){case 5:return Wa(t.type);case 16:return Wa("Lazy");case 13:return Wa("Suspense");case 19:return Wa("SuspenseList");case 0:case 2:case 15:return t=Tf(t.type,!1),t;case 11:return t=Tf(t.type.render,!1),t;case 1:return t=Tf(t.type,!0),t;default:return""}}function Ip(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case po:return"Fragment";case fo:return"Portal";case Ep:return"Profiler";case lg:return"StrictMode";case Tp:return"Suspense";case bp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case TE:return(t.displayName||"Context")+".Consumer";case EE:return(t._context.displayName||"Context")+".Provider";case ug:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case cg:return e=t.displayName||null,e!==null?e:Ip(t.type)||"Memo";case yi:e=t._payload,t=t._init;try{return Ip(t(e))}catch{}}return null}function xC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ip(e);case 8:return e===lg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Hi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function IE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function SC(t){var e=IE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Qu(t){t._valueTracker||(t._valueTracker=SC(t))}function PE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=IE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function qc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Pp(t,e){var n=e.checked;return st({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function I0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Hi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function xE(t,e){e=e.checked,e!=null&&ag(t,"checked",e,!1)}function xp(t,e){xE(t,e);var n=Hi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Sp(t,e.type,n):e.hasOwnProperty("defaultValue")&&Sp(t,e.type,Hi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function P0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Sp(t,e,n){(e!=="number"||qc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ha=Array.isArray;function xo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Hi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Cp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return st({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function x0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(q(92));if(Ha(n)){if(1<n.length)throw Error(q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Hi(n)}}function SE(t,e){var n=Hi(e.value),r=Hi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function S0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function CE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?CE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Yu,kE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Yu=Yu||document.createElement("div"),Yu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Yu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Sl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var rl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},CC=["Webkit","ms","Moz","O"];Object.keys(rl).forEach(function(t){CC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),rl[e]=rl[t]})});function AE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||rl.hasOwnProperty(t)&&rl[t]?(""+e).trim():e+"px"}function NE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=AE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var kC=st({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ap(t,e){if(e){if(kC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function Np(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rp=null;function dg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Dp=null,So=null,Co=null;function C0(t){if(t=ou(t)){if(typeof Dp!="function")throw Error(q(280));var e=t.stateNode;e&&(e=Jd(e),Dp(t.stateNode,t.type,e))}}function RE(t){So?Co?Co.push(t):Co=[t]:So=t}function DE(){if(So){var t=So,e=Co;if(Co=So=null,C0(t),e)for(t=0;t<e.length;t++)C0(e[t])}}function OE(t,e){return t(e)}function LE(){}var bf=!1;function ME(t,e,n){if(bf)return t(e,n);bf=!0;try{return OE(t,e,n)}finally{bf=!1,(So!==null||Co!==null)&&(LE(),DE())}}function Cl(t,e){var n=t.stateNode;if(n===null)return null;var r=Jd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(q(231,e,typeof n));return n}var Op=!1;if(Kr)try{var Ra={};Object.defineProperty(Ra,"passive",{get:function(){Op=!0}}),window.addEventListener("test",Ra,Ra),window.removeEventListener("test",Ra,Ra)}catch{Op=!1}function AC(t,e,n,r,i,s,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var il=!1,Gc=null,Kc=!1,Lp=null,NC={onError:function(t){il=!0,Gc=t}};function RC(t,e,n,r,i,s,o,a,u){il=!1,Gc=null,AC.apply(NC,arguments)}function DC(t,e,n,r,i,s,o,a,u){if(RC.apply(this,arguments),il){if(il){var c=Gc;il=!1,Gc=null}else throw Error(q(198));Kc||(Kc=!0,Lp=c)}}function Ws(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function VE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function k0(t){if(Ws(t)!==t)throw Error(q(188))}function OC(t){var e=t.alternate;if(!e){if(e=Ws(t),e===null)throw Error(q(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return k0(i),t;if(s===r)return k0(i),e;s=s.sibling}throw Error(q(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?t:e}function FE(t){return t=OC(t),t!==null?UE(t):null}function UE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=UE(t);if(e!==null)return e;t=t.sibling}return null}var $E=On.unstable_scheduleCallback,A0=On.unstable_cancelCallback,LC=On.unstable_shouldYield,MC=On.unstable_requestPaint,mt=On.unstable_now,VC=On.unstable_getCurrentPriorityLevel,hg=On.unstable_ImmediatePriority,jE=On.unstable_UserBlockingPriority,Qc=On.unstable_NormalPriority,FC=On.unstable_LowPriority,BE=On.unstable_IdlePriority,Kd=null,br=null;function UC(t){if(br&&typeof br.onCommitFiberRoot=="function")try{br.onCommitFiberRoot(Kd,t,void 0,(t.current.flags&128)===128)}catch{}}var or=Math.clz32?Math.clz32:BC,$C=Math.log,jC=Math.LN2;function BC(t){return t>>>=0,t===0?32:31-($C(t)/jC|0)|0}var Xu=64,Ju=4194304;function qa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Yc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=qa(a):(s&=o,s!==0&&(r=qa(s)))}else o=n&~i,o!==0?r=qa(o):s!==0&&(r=qa(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-or(e),i=1<<n,r|=t[n],e&=~i;return r}function zC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function WC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-or(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=zC(a,e)):u<=e&&(t.expiredLanes|=a),s&=~a}}function Mp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function zE(){var t=Xu;return Xu<<=1,!(Xu&4194240)&&(Xu=64),t}function If(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function iu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-or(e),t[e]=n}function HC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-or(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function fg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-or(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var je=0;function WE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var HE,pg,qE,GE,KE,Vp=!1,Zu=[],Ri=null,Di=null,Oi=null,kl=new Map,Al=new Map,wi=[],qC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function N0(t,e){switch(t){case"focusin":case"focusout":Ri=null;break;case"dragenter":case"dragleave":Di=null;break;case"mouseover":case"mouseout":Oi=null;break;case"pointerover":case"pointerout":kl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Al.delete(e.pointerId)}}function Da(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ou(e),e!==null&&pg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function GC(t,e,n,r,i){switch(e){case"focusin":return Ri=Da(Ri,t,e,n,r,i),!0;case"dragenter":return Di=Da(Di,t,e,n,r,i),!0;case"mouseover":return Oi=Da(Oi,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return kl.set(s,Da(kl.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Al.set(s,Da(Al.get(s)||null,t,e,n,r,i)),!0}return!1}function QE(t){var e=ws(t.target);if(e!==null){var n=Ws(e);if(n!==null){if(e=n.tag,e===13){if(e=VE(n),e!==null){t.blockedOn=e,KE(t.priority,function(){qE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function bc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Fp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Rp=r,n.target.dispatchEvent(r),Rp=null}else return e=ou(n),e!==null&&pg(e),t.blockedOn=n,!1;e.shift()}return!0}function R0(t,e,n){bc(t)&&n.delete(e)}function KC(){Vp=!1,Ri!==null&&bc(Ri)&&(Ri=null),Di!==null&&bc(Di)&&(Di=null),Oi!==null&&bc(Oi)&&(Oi=null),kl.forEach(R0),Al.forEach(R0)}function Oa(t,e){t.blockedOn===e&&(t.blockedOn=null,Vp||(Vp=!0,On.unstable_scheduleCallback(On.unstable_NormalPriority,KC)))}function Nl(t){function e(i){return Oa(i,t)}if(0<Zu.length){Oa(Zu[0],t);for(var n=1;n<Zu.length;n++){var r=Zu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ri!==null&&Oa(Ri,t),Di!==null&&Oa(Di,t),Oi!==null&&Oa(Oi,t),kl.forEach(e),Al.forEach(e),n=0;n<wi.length;n++)r=wi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<wi.length&&(n=wi[0],n.blockedOn===null);)QE(n),n.blockedOn===null&&wi.shift()}var ko=ii.ReactCurrentBatchConfig,Xc=!0;function QC(t,e,n,r){var i=je,s=ko.transition;ko.transition=null;try{je=1,mg(t,e,n,r)}finally{je=i,ko.transition=s}}function YC(t,e,n,r){var i=je,s=ko.transition;ko.transition=null;try{je=4,mg(t,e,n,r)}finally{je=i,ko.transition=s}}function mg(t,e,n,r){if(Xc){var i=Fp(t,e,n,r);if(i===null)Of(t,e,r,Jc,n),N0(t,r);else if(GC(i,t,e,n,r))r.stopPropagation();else if(N0(t,r),e&4&&-1<qC.indexOf(t)){for(;i!==null;){var s=ou(i);if(s!==null&&HE(s),s=Fp(t,e,n,r),s===null&&Of(t,e,r,Jc,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Of(t,e,r,null,n)}}var Jc=null;function Fp(t,e,n,r){if(Jc=null,t=dg(r),t=ws(t),t!==null)if(e=Ws(t),e===null)t=null;else if(n=e.tag,n===13){if(t=VE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Jc=t,null}function YE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(VC()){case hg:return 1;case jE:return 4;case Qc:case FC:return 16;case BE:return 536870912;default:return 16}default:return 16}}var xi=null,gg=null,Ic=null;function XE(){if(Ic)return Ic;var t,e=gg,n=e.length,r,i="value"in xi?xi.value:xi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Ic=i.slice(t,1<r?1-r:void 0)}function Pc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ec(){return!0}function D0(){return!1}function Mn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ec:D0,this.isPropagationStopped=D0,this}return st(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ec)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ec)},persist:function(){},isPersistent:ec}),e}var ra={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yg=Mn(ra),su=st({},ra,{view:0,detail:0}),XC=Mn(su),Pf,xf,La,Qd=st({},su,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==La&&(La&&t.type==="mousemove"?(Pf=t.screenX-La.screenX,xf=t.screenY-La.screenY):xf=Pf=0,La=t),Pf)},movementY:function(t){return"movementY"in t?t.movementY:xf}}),O0=Mn(Qd),JC=st({},Qd,{dataTransfer:0}),ZC=Mn(JC),ek=st({},su,{relatedTarget:0}),Sf=Mn(ek),tk=st({},ra,{animationName:0,elapsedTime:0,pseudoElement:0}),nk=Mn(tk),rk=st({},ra,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ik=Mn(rk),sk=st({},ra,{data:0}),L0=Mn(sk),ok={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ak={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=lk[t])?!!e[t]:!1}function vg(){return uk}var ck=st({},su,{key:function(t){if(t.key){var e=ok[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Pc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ak[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vg,charCode:function(t){return t.type==="keypress"?Pc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),dk=Mn(ck),hk=st({},Qd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),M0=Mn(hk),fk=st({},su,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vg}),pk=Mn(fk),mk=st({},ra,{propertyName:0,elapsedTime:0,pseudoElement:0}),gk=Mn(mk),yk=st({},Qd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),vk=Mn(yk),wk=[9,13,27,32],wg=Kr&&"CompositionEvent"in window,sl=null;Kr&&"documentMode"in document&&(sl=document.documentMode);var _k=Kr&&"TextEvent"in window&&!sl,JE=Kr&&(!wg||sl&&8<sl&&11>=sl),V0=String.fromCharCode(32),F0=!1;function ZE(t,e){switch(t){case"keyup":return wk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var mo=!1;function Ek(t,e){switch(t){case"compositionend":return eT(e);case"keypress":return e.which!==32?null:(F0=!0,V0);case"textInput":return t=e.data,t===V0&&F0?null:t;default:return null}}function Tk(t,e){if(mo)return t==="compositionend"||!wg&&ZE(t,e)?(t=XE(),Ic=gg=xi=null,mo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return JE&&e.locale!=="ko"?null:e.data;default:return null}}var bk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function U0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!bk[t.type]:e==="textarea"}function tT(t,e,n,r){RE(r),e=Zc(e,"onChange"),0<e.length&&(n=new yg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ol=null,Rl=null;function Ik(t){hT(t,0)}function Yd(t){var e=vo(t);if(PE(e))return t}function Pk(t,e){if(t==="change")return e}var nT=!1;if(Kr){var Cf;if(Kr){var kf="oninput"in document;if(!kf){var $0=document.createElement("div");$0.setAttribute("oninput","return;"),kf=typeof $0.oninput=="function"}Cf=kf}else Cf=!1;nT=Cf&&(!document.documentMode||9<document.documentMode)}function j0(){ol&&(ol.detachEvent("onpropertychange",rT),Rl=ol=null)}function rT(t){if(t.propertyName==="value"&&Yd(Rl)){var e=[];tT(e,Rl,t,dg(t)),ME(Ik,e)}}function xk(t,e,n){t==="focusin"?(j0(),ol=e,Rl=n,ol.attachEvent("onpropertychange",rT)):t==="focusout"&&j0()}function Sk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Yd(Rl)}function Ck(t,e){if(t==="click")return Yd(e)}function kk(t,e){if(t==="input"||t==="change")return Yd(e)}function Ak(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ur=typeof Object.is=="function"?Object.is:Ak;function Dl(t,e){if(ur(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!_p.call(e,i)||!ur(t[i],e[i]))return!1}return!0}function B0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function z0(t,e){var n=B0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=B0(n)}}function iT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?iT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function sT(){for(var t=window,e=qc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=qc(t.document)}return e}function _g(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Nk(t){var e=sT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&iT(n.ownerDocument.documentElement,n)){if(r!==null&&_g(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=z0(n,s);var o=z0(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Rk=Kr&&"documentMode"in document&&11>=document.documentMode,go=null,Up=null,al=null,$p=!1;function W0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$p||go==null||go!==qc(r)||(r=go,"selectionStart"in r&&_g(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),al&&Dl(al,r)||(al=r,r=Zc(Up,"onSelect"),0<r.length&&(e=new yg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=go)))}function tc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var yo={animationend:tc("Animation","AnimationEnd"),animationiteration:tc("Animation","AnimationIteration"),animationstart:tc("Animation","AnimationStart"),transitionend:tc("Transition","TransitionEnd")},Af={},oT={};Kr&&(oT=document.createElement("div").style,"AnimationEvent"in window||(delete yo.animationend.animation,delete yo.animationiteration.animation,delete yo.animationstart.animation),"TransitionEvent"in window||delete yo.transitionend.transition);function Xd(t){if(Af[t])return Af[t];if(!yo[t])return t;var e=yo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in oT)return Af[t]=e[n];return t}var aT=Xd("animationend"),lT=Xd("animationiteration"),uT=Xd("animationstart"),cT=Xd("transitionend"),dT=new Map,H0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ns(t,e){dT.set(t,e),zs(e,[t])}for(var Nf=0;Nf<H0.length;Nf++){var Rf=H0[Nf],Dk=Rf.toLowerCase(),Ok=Rf[0].toUpperCase()+Rf.slice(1);ns(Dk,"on"+Ok)}ns(aT,"onAnimationEnd");ns(lT,"onAnimationIteration");ns(uT,"onAnimationStart");ns("dblclick","onDoubleClick");ns("focusin","onFocus");ns("focusout","onBlur");ns(cT,"onTransitionEnd");Uo("onMouseEnter",["mouseout","mouseover"]);Uo("onMouseLeave",["mouseout","mouseover"]);Uo("onPointerEnter",["pointerout","pointerover"]);Uo("onPointerLeave",["pointerout","pointerover"]);zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zs("onBeforeInput",["compositionend","keypress","textInput","paste"]);zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ga="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ga));function q0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,DC(r,e,void 0,t),t.currentTarget=null}function hT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;q0(i,a,c),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;q0(i,a,c),s=u}}}if(Kc)throw t=Lp,Kc=!1,Lp=null,t}function Ke(t,e){var n=e[Hp];n===void 0&&(n=e[Hp]=new Set);var r=t+"__bubble";n.has(r)||(fT(e,t,2,!1),n.add(r))}function Df(t,e,n){var r=0;e&&(r|=4),fT(n,t,r,e)}var nc="_reactListening"+Math.random().toString(36).slice(2);function Ol(t){if(!t[nc]){t[nc]=!0,_E.forEach(function(n){n!=="selectionchange"&&(Lk.has(n)||Df(n,!1,t),Df(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[nc]||(e[nc]=!0,Df("selectionchange",!1,e))}}function fT(t,e,n,r){switch(YE(e)){case 1:var i=QC;break;case 4:i=YC;break;default:i=mg}n=i.bind(null,e,n,t),i=void 0,!Op||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Of(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ws(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}ME(function(){var c=s,d=dg(n),h=[];e:{var m=dT.get(t);if(m!==void 0){var w=yg,b=t;switch(t){case"keypress":if(Pc(n)===0)break e;case"keydown":case"keyup":w=dk;break;case"focusin":b="focus",w=Sf;break;case"focusout":b="blur",w=Sf;break;case"beforeblur":case"afterblur":w=Sf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=O0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=ZC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=pk;break;case aT:case lT:case uT:w=nk;break;case cT:w=gk;break;case"scroll":w=XC;break;case"wheel":w=vk;break;case"copy":case"cut":case"paste":w=ik;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=M0}var P=(e&4)!==0,N=!P&&t==="scroll",_=P?m!==null?m+"Capture":null:m;P=[];for(var v=c,A;v!==null;){A=v;var D=A.stateNode;if(A.tag===5&&D!==null&&(A=D,_!==null&&(D=Cl(v,_),D!=null&&P.push(Ll(v,D,A)))),N)break;v=v.return}0<P.length&&(m=new w(m,b,null,n,d),h.push({event:m,listeners:P}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",m&&n!==Rp&&(b=n.relatedTarget||n.fromElement)&&(ws(b)||b[Qr]))break e;if((w||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,w?(b=n.relatedTarget||n.toElement,w=c,b=b?ws(b):null,b!==null&&(N=Ws(b),b!==N||b.tag!==5&&b.tag!==6)&&(b=null)):(w=null,b=c),w!==b)){if(P=O0,D="onMouseLeave",_="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(P=M0,D="onPointerLeave",_="onPointerEnter",v="pointer"),N=w==null?m:vo(w),A=b==null?m:vo(b),m=new P(D,v+"leave",w,n,d),m.target=N,m.relatedTarget=A,D=null,ws(d)===c&&(P=new P(_,v+"enter",b,n,d),P.target=A,P.relatedTarget=N,D=P),N=D,w&&b)t:{for(P=w,_=b,v=0,A=P;A;A=ro(A))v++;for(A=0,D=_;D;D=ro(D))A++;for(;0<v-A;)P=ro(P),v--;for(;0<A-v;)_=ro(_),A--;for(;v--;){if(P===_||_!==null&&P===_.alternate)break t;P=ro(P),_=ro(_)}P=null}else P=null;w!==null&&G0(h,m,w,P,!1),b!==null&&N!==null&&G0(h,N,b,P,!0)}}e:{if(m=c?vo(c):window,w=m.nodeName&&m.nodeName.toLowerCase(),w==="select"||w==="input"&&m.type==="file")var M=Pk;else if(U0(m))if(nT)M=kk;else{M=Sk;var V=xk}else(w=m.nodeName)&&w.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(M=Ck);if(M&&(M=M(t,c))){tT(h,M,n,d);break e}V&&V(t,m,c),t==="focusout"&&(V=m._wrapperState)&&V.controlled&&m.type==="number"&&Sp(m,"number",m.value)}switch(V=c?vo(c):window,t){case"focusin":(U0(V)||V.contentEditable==="true")&&(go=V,Up=c,al=null);break;case"focusout":al=Up=go=null;break;case"mousedown":$p=!0;break;case"contextmenu":case"mouseup":case"dragend":$p=!1,W0(h,n,d);break;case"selectionchange":if(Rk)break;case"keydown":case"keyup":W0(h,n,d)}var E;if(wg)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else mo?ZE(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(JE&&n.locale!=="ko"&&(mo||y!=="onCompositionStart"?y==="onCompositionEnd"&&mo&&(E=XE()):(xi=d,gg="value"in xi?xi.value:xi.textContent,mo=!0)),V=Zc(c,y),0<V.length&&(y=new L0(y,t,null,n,d),h.push({event:y,listeners:V}),E?y.data=E:(E=eT(n),E!==null&&(y.data=E)))),(E=_k?Ek(t,n):Tk(t,n))&&(c=Zc(c,"onBeforeInput"),0<c.length&&(d=new L0("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=E))}hT(h,e)})}function Ll(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Zc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Cl(t,n),s!=null&&r.unshift(Ll(t,s,i)),s=Cl(t,e),s!=null&&r.push(Ll(t,s,i))),t=t.return}return r}function ro(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function G0(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,i?(u=Cl(n,s),u!=null&&o.unshift(Ll(n,u,a))):i||(u=Cl(n,s),u!=null&&o.push(Ll(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Mk=/\r\n?/g,Vk=/\u0000|\uFFFD/g;function K0(t){return(typeof t=="string"?t:""+t).replace(Mk,`
`).replace(Vk,"")}function rc(t,e,n){if(e=K0(e),K0(t)!==e&&n)throw Error(q(425))}function ed(){}var jp=null,Bp=null;function zp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Wp=typeof setTimeout=="function"?setTimeout:void 0,Fk=typeof clearTimeout=="function"?clearTimeout:void 0,Q0=typeof Promise=="function"?Promise:void 0,Uk=typeof queueMicrotask=="function"?queueMicrotask:typeof Q0<"u"?function(t){return Q0.resolve(null).then(t).catch($k)}:Wp;function $k(t){setTimeout(function(){throw t})}function Lf(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Nl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Nl(e)}function Li(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Y0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ia=Math.random().toString(36).slice(2),vr="__reactFiber$"+ia,Ml="__reactProps$"+ia,Qr="__reactContainer$"+ia,Hp="__reactEvents$"+ia,jk="__reactListeners$"+ia,Bk="__reactHandles$"+ia;function ws(t){var e=t[vr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Qr]||n[vr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Y0(t);t!==null;){if(n=t[vr])return n;t=Y0(t)}return e}t=n,n=t.parentNode}return null}function ou(t){return t=t[vr]||t[Qr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function vo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(q(33))}function Jd(t){return t[Ml]||null}var qp=[],wo=-1;function rs(t){return{current:t}}function Xe(t){0>wo||(t.current=qp[wo],qp[wo]=null,wo--)}function qe(t,e){wo++,qp[wo]=t.current,t.current=e}var qi={},nn=rs(qi),Tn=rs(!1),ks=qi;function $o(t,e){var n=t.type.contextTypes;if(!n)return qi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function bn(t){return t=t.childContextTypes,t!=null}function td(){Xe(Tn),Xe(nn)}function X0(t,e,n){if(nn.current!==qi)throw Error(q(168));qe(nn,e),qe(Tn,n)}function pT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(q(108,xC(t)||"Unknown",i));return st({},n,r)}function nd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qi,ks=nn.current,qe(nn,t),qe(Tn,Tn.current),!0}function J0(t,e,n){var r=t.stateNode;if(!r)throw Error(q(169));n?(t=pT(t,e,ks),r.__reactInternalMemoizedMergedChildContext=t,Xe(Tn),Xe(nn),qe(nn,t)):Xe(Tn),qe(Tn,n)}var Fr=null,Zd=!1,Mf=!1;function mT(t){Fr===null?Fr=[t]:Fr.push(t)}function zk(t){Zd=!0,mT(t)}function is(){if(!Mf&&Fr!==null){Mf=!0;var t=0,e=je;try{var n=Fr;for(je=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Fr=null,Zd=!1}catch(i){throw Fr!==null&&(Fr=Fr.slice(t+1)),$E(hg,is),i}finally{je=e,Mf=!1}}return null}var _o=[],Eo=0,rd=null,id=0,$n=[],jn=0,As=null,Ur=1,$r="";function ps(t,e){_o[Eo++]=id,_o[Eo++]=rd,rd=t,id=e}function gT(t,e,n){$n[jn++]=Ur,$n[jn++]=$r,$n[jn++]=As,As=t;var r=Ur;t=$r;var i=32-or(r)-1;r&=~(1<<i),n+=1;var s=32-or(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ur=1<<32-or(e)+i|n<<i|r,$r=s+t}else Ur=1<<s|n<<i|r,$r=t}function Eg(t){t.return!==null&&(ps(t,1),gT(t,1,0))}function Tg(t){for(;t===rd;)rd=_o[--Eo],_o[Eo]=null,id=_o[--Eo],_o[Eo]=null;for(;t===As;)As=$n[--jn],$n[jn]=null,$r=$n[--jn],$n[jn]=null,Ur=$n[--jn],$n[jn]=null}var Dn=null,An=null,Ze=!1,tr=null;function yT(t,e){var n=Wn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Z0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Dn=t,An=Li(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Dn=t,An=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=As!==null?{id:Ur,overflow:$r}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Wn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Dn=t,An=null,!0):!1;default:return!1}}function Gp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Kp(t){if(Ze){var e=An;if(e){var n=e;if(!Z0(t,e)){if(Gp(t))throw Error(q(418));e=Li(n.nextSibling);var r=Dn;e&&Z0(t,e)?yT(r,n):(t.flags=t.flags&-4097|2,Ze=!1,Dn=t)}}else{if(Gp(t))throw Error(q(418));t.flags=t.flags&-4097|2,Ze=!1,Dn=t}}}function ew(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Dn=t}function ic(t){if(t!==Dn)return!1;if(!Ze)return ew(t),Ze=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!zp(t.type,t.memoizedProps)),e&&(e=An)){if(Gp(t))throw vT(),Error(q(418));for(;e;)yT(t,e),e=Li(e.nextSibling)}if(ew(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){An=Li(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}An=null}}else An=Dn?Li(t.stateNode.nextSibling):null;return!0}function vT(){for(var t=An;t;)t=Li(t.nextSibling)}function jo(){An=Dn=null,Ze=!1}function bg(t){tr===null?tr=[t]:tr.push(t)}var Wk=ii.ReactCurrentBatchConfig;function Ma(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,t))}return t}function sc(t,e){throw t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function tw(t){var e=t._init;return e(t._payload)}function wT(t){function e(_,v){if(t){var A=_.deletions;A===null?(_.deletions=[v],_.flags|=16):A.push(v)}}function n(_,v){if(!t)return null;for(;v!==null;)e(_,v),v=v.sibling;return null}function r(_,v){for(_=new Map;v!==null;)v.key!==null?_.set(v.key,v):_.set(v.index,v),v=v.sibling;return _}function i(_,v){return _=Ui(_,v),_.index=0,_.sibling=null,_}function s(_,v,A){return _.index=A,t?(A=_.alternate,A!==null?(A=A.index,A<v?(_.flags|=2,v):A):(_.flags|=2,v)):(_.flags|=1048576,v)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,v,A,D){return v===null||v.tag!==6?(v=zf(A,_.mode,D),v.return=_,v):(v=i(v,A),v.return=_,v)}function u(_,v,A,D){var M=A.type;return M===po?d(_,v,A.props.children,D,A.key):v!==null&&(v.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===yi&&tw(M)===v.type)?(D=i(v,A.props),D.ref=Ma(_,v,A),D.return=_,D):(D=Rc(A.type,A.key,A.props,null,_.mode,D),D.ref=Ma(_,v,A),D.return=_,D)}function c(_,v,A,D){return v===null||v.tag!==4||v.stateNode.containerInfo!==A.containerInfo||v.stateNode.implementation!==A.implementation?(v=Wf(A,_.mode,D),v.return=_,v):(v=i(v,A.children||[]),v.return=_,v)}function d(_,v,A,D,M){return v===null||v.tag!==7?(v=Ps(A,_.mode,D,M),v.return=_,v):(v=i(v,A),v.return=_,v)}function h(_,v,A){if(typeof v=="string"&&v!==""||typeof v=="number")return v=zf(""+v,_.mode,A),v.return=_,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ku:return A=Rc(v.type,v.key,v.props,null,_.mode,A),A.ref=Ma(_,null,v),A.return=_,A;case fo:return v=Wf(v,_.mode,A),v.return=_,v;case yi:var D=v._init;return h(_,D(v._payload),A)}if(Ha(v)||Na(v))return v=Ps(v,_.mode,A,null),v.return=_,v;sc(_,v)}return null}function m(_,v,A,D){var M=v!==null?v.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return M!==null?null:a(_,v,""+A,D);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Ku:return A.key===M?u(_,v,A,D):null;case fo:return A.key===M?c(_,v,A,D):null;case yi:return M=A._init,m(_,v,M(A._payload),D)}if(Ha(A)||Na(A))return M!==null?null:d(_,v,A,D,null);sc(_,A)}return null}function w(_,v,A,D,M){if(typeof D=="string"&&D!==""||typeof D=="number")return _=_.get(A)||null,a(v,_,""+D,M);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Ku:return _=_.get(D.key===null?A:D.key)||null,u(v,_,D,M);case fo:return _=_.get(D.key===null?A:D.key)||null,c(v,_,D,M);case yi:var V=D._init;return w(_,v,A,V(D._payload),M)}if(Ha(D)||Na(D))return _=_.get(A)||null,d(v,_,D,M,null);sc(v,D)}return null}function b(_,v,A,D){for(var M=null,V=null,E=v,y=v=0,S=null;E!==null&&y<A.length;y++){E.index>y?(S=E,E=null):S=E.sibling;var k=m(_,E,A[y],D);if(k===null){E===null&&(E=S);break}t&&E&&k.alternate===null&&e(_,E),v=s(k,v,y),V===null?M=k:V.sibling=k,V=k,E=S}if(y===A.length)return n(_,E),Ze&&ps(_,y),M;if(E===null){for(;y<A.length;y++)E=h(_,A[y],D),E!==null&&(v=s(E,v,y),V===null?M=E:V.sibling=E,V=E);return Ze&&ps(_,y),M}for(E=r(_,E);y<A.length;y++)S=w(E,_,y,A[y],D),S!==null&&(t&&S.alternate!==null&&E.delete(S.key===null?y:S.key),v=s(S,v,y),V===null?M=S:V.sibling=S,V=S);return t&&E.forEach(function(R){return e(_,R)}),Ze&&ps(_,y),M}function P(_,v,A,D){var M=Na(A);if(typeof M!="function")throw Error(q(150));if(A=M.call(A),A==null)throw Error(q(151));for(var V=M=null,E=v,y=v=0,S=null,k=A.next();E!==null&&!k.done;y++,k=A.next()){E.index>y?(S=E,E=null):S=E.sibling;var R=m(_,E,k.value,D);if(R===null){E===null&&(E=S);break}t&&E&&R.alternate===null&&e(_,E),v=s(R,v,y),V===null?M=R:V.sibling=R,V=R,E=S}if(k.done)return n(_,E),Ze&&ps(_,y),M;if(E===null){for(;!k.done;y++,k=A.next())k=h(_,k.value,D),k!==null&&(v=s(k,v,y),V===null?M=k:V.sibling=k,V=k);return Ze&&ps(_,y),M}for(E=r(_,E);!k.done;y++,k=A.next())k=w(E,_,y,k.value,D),k!==null&&(t&&k.alternate!==null&&E.delete(k.key===null?y:k.key),v=s(k,v,y),V===null?M=k:V.sibling=k,V=k);return t&&E.forEach(function(T){return e(_,T)}),Ze&&ps(_,y),M}function N(_,v,A,D){if(typeof A=="object"&&A!==null&&A.type===po&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Ku:e:{for(var M=A.key,V=v;V!==null;){if(V.key===M){if(M=A.type,M===po){if(V.tag===7){n(_,V.sibling),v=i(V,A.props.children),v.return=_,_=v;break e}}else if(V.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===yi&&tw(M)===V.type){n(_,V.sibling),v=i(V,A.props),v.ref=Ma(_,V,A),v.return=_,_=v;break e}n(_,V);break}else e(_,V);V=V.sibling}A.type===po?(v=Ps(A.props.children,_.mode,D,A.key),v.return=_,_=v):(D=Rc(A.type,A.key,A.props,null,_.mode,D),D.ref=Ma(_,v,A),D.return=_,_=D)}return o(_);case fo:e:{for(V=A.key;v!==null;){if(v.key===V)if(v.tag===4&&v.stateNode.containerInfo===A.containerInfo&&v.stateNode.implementation===A.implementation){n(_,v.sibling),v=i(v,A.children||[]),v.return=_,_=v;break e}else{n(_,v);break}else e(_,v);v=v.sibling}v=Wf(A,_.mode,D),v.return=_,_=v}return o(_);case yi:return V=A._init,N(_,v,V(A._payload),D)}if(Ha(A))return b(_,v,A,D);if(Na(A))return P(_,v,A,D);sc(_,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,v!==null&&v.tag===6?(n(_,v.sibling),v=i(v,A),v.return=_,_=v):(n(_,v),v=zf(A,_.mode,D),v.return=_,_=v),o(_)):n(_,v)}return N}var Bo=wT(!0),_T=wT(!1),sd=rs(null),od=null,To=null,Ig=null;function Pg(){Ig=To=od=null}function xg(t){var e=sd.current;Xe(sd),t._currentValue=e}function Qp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ao(t,e){od=t,Ig=To=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_n=!0),t.firstContext=null)}function qn(t){var e=t._currentValue;if(Ig!==t)if(t={context:t,memoizedValue:e,next:null},To===null){if(od===null)throw Error(q(308));To=t,od.dependencies={lanes:0,firstContext:t}}else To=To.next=t;return e}var _s=null;function Sg(t){_s===null?_s=[t]:_s.push(t)}function ET(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Sg(e)):(n.next=i.next,i.next=n),e.interleaved=n,Yr(t,r)}function Yr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var vi=!1;function Cg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function TT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Hr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Mi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Re&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Yr(t,n)}return i=r.interleaved,i===null?(e.next=e,Sg(r)):(e.next=i.next,i.next=e),r.interleaved=e,Yr(t,n)}function xc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fg(t,n)}}function nw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ad(t,e,n,r){var i=t.updateQueue;vi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=u))}if(s!==null){var h=i.baseState;o=0,d=c=u=null,a=s;do{var m=a.lane,w=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:w,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var b=t,P=a;switch(m=e,w=n,P.tag){case 1:if(b=P.payload,typeof b=="function"){h=b.call(w,h,m);break e}h=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=P.payload,m=typeof b=="function"?b.call(w,h,m):b,m==null)break e;h=st({},h,m);break e;case 2:vi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else w={eventTime:w,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=w,u=h):d=d.next=w,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(1);if(d===null&&(u=h),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Rs|=o,t.lanes=o,t.memoizedState=h}}function rw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(q(191,i));i.call(r)}}}var au={},Ir=rs(au),Vl=rs(au),Fl=rs(au);function Es(t){if(t===au)throw Error(q(174));return t}function kg(t,e){switch(qe(Fl,e),qe(Vl,t),qe(Ir,au),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:kp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=kp(e,t)}Xe(Ir),qe(Ir,e)}function zo(){Xe(Ir),Xe(Vl),Xe(Fl)}function bT(t){Es(Fl.current);var e=Es(Ir.current),n=kp(e,t.type);e!==n&&(qe(Vl,t),qe(Ir,n))}function Ag(t){Vl.current===t&&(Xe(Ir),Xe(Vl))}var tt=rs(0);function ld(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Vf=[];function Ng(){for(var t=0;t<Vf.length;t++)Vf[t]._workInProgressVersionPrimary=null;Vf.length=0}var Sc=ii.ReactCurrentDispatcher,Ff=ii.ReactCurrentBatchConfig,Ns=0,it=null,xt=null,Mt=null,ud=!1,ll=!1,Ul=0,Hk=0;function Yt(){throw Error(q(321))}function Rg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ur(t[n],e[n]))return!1;return!0}function Dg(t,e,n,r,i,s){if(Ns=s,it=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Sc.current=t===null||t.memoizedState===null?Qk:Yk,t=n(r,i),ll){s=0;do{if(ll=!1,Ul=0,25<=s)throw Error(q(301));s+=1,Mt=xt=null,e.updateQueue=null,Sc.current=Xk,t=n(r,i)}while(ll)}if(Sc.current=cd,e=xt!==null&&xt.next!==null,Ns=0,Mt=xt=it=null,ud=!1,e)throw Error(q(300));return t}function Og(){var t=Ul!==0;return Ul=0,t}function mr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?it.memoizedState=Mt=t:Mt=Mt.next=t,Mt}function Gn(){if(xt===null){var t=it.alternate;t=t!==null?t.memoizedState:null}else t=xt.next;var e=Mt===null?it.memoizedState:Mt.next;if(e!==null)Mt=e,xt=t;else{if(t===null)throw Error(q(310));xt=t,t={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},Mt===null?it.memoizedState=Mt=t:Mt=Mt.next=t}return Mt}function $l(t,e){return typeof e=="function"?e(t):e}function Uf(t){var e=Gn(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=xt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,c=s;do{var d=c.lane;if((Ns&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=h,o=r):u=u.next=h,it.lanes|=d,Rs|=d}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=a,ur(r,e.memoizedState)||(_n=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,it.lanes|=s,Rs|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function $f(t){var e=Gn(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);ur(s,e.memoizedState)||(_n=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function IT(){}function PT(t,e){var n=it,r=Gn(),i=e(),s=!ur(r.memoizedState,i);if(s&&(r.memoizedState=i,_n=!0),r=r.queue,Lg(CT.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Mt!==null&&Mt.memoizedState.tag&1){if(n.flags|=2048,jl(9,ST.bind(null,n,r,i,e),void 0,null),Ft===null)throw Error(q(349));Ns&30||xT(n,e,i)}return i}function xT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ST(t,e,n,r){e.value=n,e.getSnapshot=r,kT(e)&&AT(t)}function CT(t,e,n){return n(function(){kT(e)&&AT(t)})}function kT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ur(t,n)}catch{return!0}}function AT(t){var e=Yr(t,1);e!==null&&ar(e,t,1,-1)}function iw(t){var e=mr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$l,lastRenderedState:t},e.queue=t,t=t.dispatch=Kk.bind(null,it,t),[e.memoizedState,t]}function jl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function NT(){return Gn().memoizedState}function Cc(t,e,n,r){var i=mr();it.flags|=t,i.memoizedState=jl(1|e,n,void 0,r===void 0?null:r)}function eh(t,e,n,r){var i=Gn();r=r===void 0?null:r;var s=void 0;if(xt!==null){var o=xt.memoizedState;if(s=o.destroy,r!==null&&Rg(r,o.deps)){i.memoizedState=jl(e,n,s,r);return}}it.flags|=t,i.memoizedState=jl(1|e,n,s,r)}function sw(t,e){return Cc(8390656,8,t,e)}function Lg(t,e){return eh(2048,8,t,e)}function RT(t,e){return eh(4,2,t,e)}function DT(t,e){return eh(4,4,t,e)}function OT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function LT(t,e,n){return n=n!=null?n.concat([t]):null,eh(4,4,OT.bind(null,e,t),n)}function Mg(){}function MT(t,e){var n=Gn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Rg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function VT(t,e){var n=Gn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Rg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function FT(t,e,n){return Ns&21?(ur(n,e)||(n=zE(),it.lanes|=n,Rs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_n=!0),t.memoizedState=n)}function qk(t,e){var n=je;je=n!==0&&4>n?n:4,t(!0);var r=Ff.transition;Ff.transition={};try{t(!1),e()}finally{je=n,Ff.transition=r}}function UT(){return Gn().memoizedState}function Gk(t,e,n){var r=Fi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$T(t))jT(e,n);else if(n=ET(t,e,n,r),n!==null){var i=un();ar(n,t,r,i),BT(n,e,r)}}function Kk(t,e,n){var r=Fi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($T(t))jT(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ur(a,o)){var u=e.interleaved;u===null?(i.next=i,Sg(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=ET(t,e,i,r),n!==null&&(i=un(),ar(n,t,r,i),BT(n,e,r))}}function $T(t){var e=t.alternate;return t===it||e!==null&&e===it}function jT(t,e){ll=ud=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function BT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fg(t,n)}}var cd={readContext:qn,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useInsertionEffect:Yt,useLayoutEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useMutableSource:Yt,useSyncExternalStore:Yt,useId:Yt,unstable_isNewReconciler:!1},Qk={readContext:qn,useCallback:function(t,e){return mr().memoizedState=[t,e===void 0?null:e],t},useContext:qn,useEffect:sw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Cc(4194308,4,OT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Cc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Cc(4,2,t,e)},useMemo:function(t,e){var n=mr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=mr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Gk.bind(null,it,t),[r.memoizedState,t]},useRef:function(t){var e=mr();return t={current:t},e.memoizedState=t},useState:iw,useDebugValue:Mg,useDeferredValue:function(t){return mr().memoizedState=t},useTransition:function(){var t=iw(!1),e=t[0];return t=qk.bind(null,t[1]),mr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=it,i=mr();if(Ze){if(n===void 0)throw Error(q(407));n=n()}else{if(n=e(),Ft===null)throw Error(q(349));Ns&30||xT(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,sw(CT.bind(null,r,s,t),[t]),r.flags|=2048,jl(9,ST.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=mr(),e=Ft.identifierPrefix;if(Ze){var n=$r,r=Ur;n=(r&~(1<<32-or(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ul++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Hk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Yk={readContext:qn,useCallback:MT,useContext:qn,useEffect:Lg,useImperativeHandle:LT,useInsertionEffect:RT,useLayoutEffect:DT,useMemo:VT,useReducer:Uf,useRef:NT,useState:function(){return Uf($l)},useDebugValue:Mg,useDeferredValue:function(t){var e=Gn();return FT(e,xt.memoizedState,t)},useTransition:function(){var t=Uf($l)[0],e=Gn().memoizedState;return[t,e]},useMutableSource:IT,useSyncExternalStore:PT,useId:UT,unstable_isNewReconciler:!1},Xk={readContext:qn,useCallback:MT,useContext:qn,useEffect:Lg,useImperativeHandle:LT,useInsertionEffect:RT,useLayoutEffect:DT,useMemo:VT,useReducer:$f,useRef:NT,useState:function(){return $f($l)},useDebugValue:Mg,useDeferredValue:function(t){var e=Gn();return xt===null?e.memoizedState=t:FT(e,xt.memoizedState,t)},useTransition:function(){var t=$f($l)[0],e=Gn().memoizedState;return[t,e]},useMutableSource:IT,useSyncExternalStore:PT,useId:UT,unstable_isNewReconciler:!1};function Jn(t,e){if(t&&t.defaultProps){e=st({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Yp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:st({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var th={isMounted:function(t){return(t=t._reactInternals)?Ws(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=un(),i=Fi(t),s=Hr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Mi(t,s,i),e!==null&&(ar(e,t,i,r),xc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=un(),i=Fi(t),s=Hr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Mi(t,s,i),e!==null&&(ar(e,t,i,r),xc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=un(),r=Fi(t),i=Hr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Mi(t,i,r),e!==null&&(ar(e,t,r,n),xc(e,t,r))}};function ow(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Dl(n,r)||!Dl(i,s):!0}function zT(t,e,n){var r=!1,i=qi,s=e.contextType;return typeof s=="object"&&s!==null?s=qn(s):(i=bn(e)?ks:nn.current,r=e.contextTypes,s=(r=r!=null)?$o(t,i):qi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=th,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function aw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&th.enqueueReplaceState(e,e.state,null)}function Xp(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Cg(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=qn(s):(s=bn(e)?ks:nn.current,i.context=$o(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Yp(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&th.enqueueReplaceState(i,i.state,null),ad(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Wo(t,e){try{var n="",r=e;do n+=PC(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function jf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Jp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Jk=typeof WeakMap=="function"?WeakMap:Map;function WT(t,e,n){n=Hr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){hd||(hd=!0,lm=r),Jp(t,e)},n}function HT(t,e,n){n=Hr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Jp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Jp(t,e),typeof r!="function"&&(Vi===null?Vi=new Set([this]):Vi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function lw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Jk;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=hA.bind(null,t,e,n),e.then(t,t))}function uw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function cw(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Hr(-1,1),e.tag=2,Mi(n,e,1))),n.lanes|=1),t)}var Zk=ii.ReactCurrentOwner,_n=!1;function on(t,e,n,r){e.child=t===null?_T(e,null,n,r):Bo(e,t.child,n,r)}function dw(t,e,n,r,i){n=n.render;var s=e.ref;return Ao(e,i),r=Dg(t,e,n,r,s,i),n=Og(),t!==null&&!_n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Xr(t,e,i)):(Ze&&n&&Eg(e),e.flags|=1,on(t,e,r,i),e.child)}function hw(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Wg(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,qT(t,e,s,r,i)):(t=Rc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Dl,n(o,r)&&t.ref===e.ref)return Xr(t,e,i)}return e.flags|=1,t=Ui(s,r),t.ref=e.ref,t.return=e,e.child=t}function qT(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Dl(s,r)&&t.ref===e.ref)if(_n=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(_n=!0);else return e.lanes=t.lanes,Xr(t,e,i)}return Zp(t,e,n,r,i)}function GT(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(Io,kn),kn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,qe(Io,kn),kn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,qe(Io,kn),kn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,qe(Io,kn),kn|=r;return on(t,e,i,n),e.child}function KT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Zp(t,e,n,r,i){var s=bn(n)?ks:nn.current;return s=$o(e,s),Ao(e,i),n=Dg(t,e,n,r,s,i),r=Og(),t!==null&&!_n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Xr(t,e,i)):(Ze&&r&&Eg(e),e.flags|=1,on(t,e,n,i),e.child)}function fw(t,e,n,r,i){if(bn(n)){var s=!0;nd(e)}else s=!1;if(Ao(e,i),e.stateNode===null)kc(t,e),zT(e,n,r),Xp(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=qn(c):(c=bn(n)?ks:nn.current,c=$o(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&aw(e,o,r,c),vi=!1;var m=e.memoizedState;o.state=m,ad(e,r,o,i),u=e.memoizedState,a!==r||m!==u||Tn.current||vi?(typeof d=="function"&&(Yp(e,n,d,r),u=e.memoizedState),(a=vi||ow(e,n,a,r,m,u,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,TT(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Jn(e.type,a),o.props=c,h=e.pendingProps,m=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=qn(u):(u=bn(n)?ks:nn.current,u=$o(e,u));var w=n.getDerivedStateFromProps;(d=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||m!==u)&&aw(e,o,r,u),vi=!1,m=e.memoizedState,o.state=m,ad(e,r,o,i);var b=e.memoizedState;a!==h||m!==b||Tn.current||vi?(typeof w=="function"&&(Yp(e,n,w,r),b=e.memoizedState),(c=vi||ow(e,n,c,r,m,b,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return em(t,e,n,r,s,i)}function em(t,e,n,r,i,s){KT(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&J0(e,n,!1),Xr(t,e,s);r=e.stateNode,Zk.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Bo(e,t.child,null,s),e.child=Bo(e,null,a,s)):on(t,e,a,s),e.memoizedState=r.state,i&&J0(e,n,!0),e.child}function QT(t){var e=t.stateNode;e.pendingContext?X0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&X0(t,e.context,!1),kg(t,e.containerInfo)}function pw(t,e,n,r,i){return jo(),bg(i),e.flags|=256,on(t,e,n,r),e.child}var tm={dehydrated:null,treeContext:null,retryLane:0};function nm(t){return{baseLanes:t,cachePool:null,transitions:null}}function YT(t,e,n){var r=e.pendingProps,i=tt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),qe(tt,i&1),t===null)return Kp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ih(o,r,0,null),t=Ps(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=nm(n),e.memoizedState=tm,t):Vg(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return eA(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Ui(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ui(a,s):(s=Ps(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?nm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=tm,r}return s=t.child,t=s.sibling,r=Ui(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Vg(t,e){return e=ih({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function oc(t,e,n,r){return r!==null&&bg(r),Bo(e,t.child,null,n),t=Vg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function eA(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=jf(Error(q(422))),oc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=ih({mode:"visible",children:r.children},i,0,null),s=Ps(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Bo(e,t.child,null,o),e.child.memoizedState=nm(o),e.memoizedState=tm,s);if(!(e.mode&1))return oc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(q(419)),r=jf(s,r,void 0),oc(t,e,o,r)}if(a=(o&t.childLanes)!==0,_n||a){if(r=Ft,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Yr(t,i),ar(r,t,i,-1))}return zg(),r=jf(Error(q(421))),oc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=fA.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,An=Li(i.nextSibling),Dn=e,Ze=!0,tr=null,t!==null&&($n[jn++]=Ur,$n[jn++]=$r,$n[jn++]=As,Ur=t.id,$r=t.overflow,As=e),e=Vg(e,r.children),e.flags|=4096,e)}function mw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Qp(t.return,e,n)}function Bf(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function XT(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(on(t,e,r.children,n),r=tt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&mw(t,n,e);else if(t.tag===19)mw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(qe(tt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ld(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Bf(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ld(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Bf(e,!0,n,null,s);break;case"together":Bf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function kc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Rs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,n=Ui(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ui(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function tA(t,e,n){switch(e.tag){case 3:QT(e),jo();break;case 5:bT(e);break;case 1:bn(e.type)&&nd(e);break;case 4:kg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;qe(sd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(qe(tt,tt.current&1),e.flags|=128,null):n&e.child.childLanes?YT(t,e,n):(qe(tt,tt.current&1),t=Xr(t,e,n),t!==null?t.sibling:null);qe(tt,tt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return XT(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),qe(tt,tt.current),r)break;return null;case 22:case 23:return e.lanes=0,GT(t,e,n)}return Xr(t,e,n)}var JT,rm,ZT,eb;JT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};rm=function(){};ZT=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Es(Ir.current);var s=null;switch(n){case"input":i=Pp(t,i),r=Pp(t,r),s=[];break;case"select":i=st({},i,{value:void 0}),r=st({},r,{value:void 0}),s=[];break;case"textarea":i=Cp(t,i),r=Cp(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ed)}Ap(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(xl.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(xl.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Ke("scroll",t),s||a===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};eb=function(t,e,n,r){n!==r&&(e.flags|=4)};function Va(t,e){if(!Ze)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Xt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function nA(t,e,n){var r=e.pendingProps;switch(Tg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xt(e),null;case 1:return bn(e.type)&&td(),Xt(e),null;case 3:return r=e.stateNode,zo(),Xe(Tn),Xe(nn),Ng(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ic(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,tr!==null&&(dm(tr),tr=null))),rm(t,e),Xt(e),null;case 5:Ag(e);var i=Es(Fl.current);if(n=e.type,t!==null&&e.stateNode!=null)ZT(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(q(166));return Xt(e),null}if(t=Es(Ir.current),ic(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[vr]=e,r[Ml]=s,t=(e.mode&1)!==0,n){case"dialog":Ke("cancel",r),Ke("close",r);break;case"iframe":case"object":case"embed":Ke("load",r);break;case"video":case"audio":for(i=0;i<Ga.length;i++)Ke(Ga[i],r);break;case"source":Ke("error",r);break;case"img":case"image":case"link":Ke("error",r),Ke("load",r);break;case"details":Ke("toggle",r);break;case"input":I0(r,s),Ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ke("invalid",r);break;case"textarea":x0(r,s),Ke("invalid",r)}Ap(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&rc(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&rc(r.textContent,a,t),i=["children",""+a]):xl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ke("scroll",r)}switch(n){case"input":Qu(r),P0(r,s,!0);break;case"textarea":Qu(r),S0(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ed)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=CE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[vr]=e,t[Ml]=r,JT(t,e,!1,!1),e.stateNode=t;e:{switch(o=Np(n,r),n){case"dialog":Ke("cancel",t),Ke("close",t),i=r;break;case"iframe":case"object":case"embed":Ke("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ga.length;i++)Ke(Ga[i],t);i=r;break;case"source":Ke("error",t),i=r;break;case"img":case"image":case"link":Ke("error",t),Ke("load",t),i=r;break;case"details":Ke("toggle",t),i=r;break;case"input":I0(t,r),i=Pp(t,r),Ke("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=st({},r,{value:void 0}),Ke("invalid",t);break;case"textarea":x0(t,r),i=Cp(t,r),Ke("invalid",t);break;default:i=r}Ap(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?NE(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&kE(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Sl(t,u):typeof u=="number"&&Sl(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(xl.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Ke("scroll",t):u!=null&&ag(t,s,u,o))}switch(n){case"input":Qu(t),P0(t,r,!1);break;case"textarea":Qu(t),S0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Hi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?xo(t,!!r.multiple,s,!1):r.defaultValue!=null&&xo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ed)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Xt(e),null;case 6:if(t&&e.stateNode!=null)eb(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(q(166));if(n=Es(Fl.current),Es(Ir.current),ic(e)){if(r=e.stateNode,n=e.memoizedProps,r[vr]=e,(s=r.nodeValue!==n)&&(t=Dn,t!==null))switch(t.tag){case 3:rc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&rc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[vr]=e,e.stateNode=r}return Xt(e),null;case 13:if(Xe(tt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ze&&An!==null&&e.mode&1&&!(e.flags&128))vT(),jo(),e.flags|=98560,s=!1;else if(s=ic(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(q(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(q(317));s[vr]=e}else jo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Xt(e),s=!1}else tr!==null&&(dm(tr),tr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||tt.current&1?kt===0&&(kt=3):zg())),e.updateQueue!==null&&(e.flags|=4),Xt(e),null);case 4:return zo(),rm(t,e),t===null&&Ol(e.stateNode.containerInfo),Xt(e),null;case 10:return xg(e.type._context),Xt(e),null;case 17:return bn(e.type)&&td(),Xt(e),null;case 19:if(Xe(tt),s=e.memoizedState,s===null)return Xt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Va(s,!1);else{if(kt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ld(t),o!==null){for(e.flags|=128,Va(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return qe(tt,tt.current&1|2),e.child}t=t.sibling}s.tail!==null&&mt()>Ho&&(e.flags|=128,r=!0,Va(s,!1),e.lanes=4194304)}else{if(!r)if(t=ld(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Va(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ze)return Xt(e),null}else 2*mt()-s.renderingStartTime>Ho&&n!==1073741824&&(e.flags|=128,r=!0,Va(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=mt(),e.sibling=null,n=tt.current,qe(tt,r?n&1|2:n&1),e):(Xt(e),null);case 22:case 23:return Bg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?kn&1073741824&&(Xt(e),e.subtreeFlags&6&&(e.flags|=8192)):Xt(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function rA(t,e){switch(Tg(e),e.tag){case 1:return bn(e.type)&&td(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return zo(),Xe(Tn),Xe(nn),Ng(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ag(e),null;case 13:if(Xe(tt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));jo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Xe(tt),null;case 4:return zo(),null;case 10:return xg(e.type._context),null;case 22:case 23:return Bg(),null;case 24:return null;default:return null}}var ac=!1,en=!1,iA=typeof WeakSet=="function"?WeakSet:Set,ie=null;function bo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ct(t,e,r)}else n.current=null}function im(t,e,n){try{n()}catch(r){ct(t,e,r)}}var gw=!1;function sA(t,e){if(jp=Xc,t=sT(),_g(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,c=0,d=0,h=t,m=null;t:for(;;){for(var w;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(u=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(w=h.firstChild)!==null;)m=h,h=w;for(;;){if(h===t)break t;if(m===n&&++c===i&&(a=o),m===s&&++d===r&&(u=o),(w=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=w}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bp={focusedElem:t,selectionRange:n},Xc=!1,ie=e;ie!==null;)if(e=ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ie=t;else for(;ie!==null;){e=ie;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var P=b.memoizedProps,N=b.memoizedState,_=e.stateNode,v=_.getSnapshotBeforeUpdate(e.elementType===e.type?P:Jn(e.type,P),N);_.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(D){ct(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}return b=gw,gw=!1,b}function ul(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&im(e,n,s)}i=i.next}while(i!==r)}}function nh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function sm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function tb(t){var e=t.alternate;e!==null&&(t.alternate=null,tb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[vr],delete e[Ml],delete e[Hp],delete e[jk],delete e[Bk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function nb(t){return t.tag===5||t.tag===3||t.tag===4}function yw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||nb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function om(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ed));else if(r!==4&&(t=t.child,t!==null))for(om(t,e,n),t=t.sibling;t!==null;)om(t,e,n),t=t.sibling}function am(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(am(t,e,n),t=t.sibling;t!==null;)am(t,e,n),t=t.sibling}var jt=null,Zn=!1;function fi(t,e,n){for(n=n.child;n!==null;)rb(t,e,n),n=n.sibling}function rb(t,e,n){if(br&&typeof br.onCommitFiberUnmount=="function")try{br.onCommitFiberUnmount(Kd,n)}catch{}switch(n.tag){case 5:en||bo(n,e);case 6:var r=jt,i=Zn;jt=null,fi(t,e,n),jt=r,Zn=i,jt!==null&&(Zn?(t=jt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):jt.removeChild(n.stateNode));break;case 18:jt!==null&&(Zn?(t=jt,n=n.stateNode,t.nodeType===8?Lf(t.parentNode,n):t.nodeType===1&&Lf(t,n),Nl(t)):Lf(jt,n.stateNode));break;case 4:r=jt,i=Zn,jt=n.stateNode.containerInfo,Zn=!0,fi(t,e,n),jt=r,Zn=i;break;case 0:case 11:case 14:case 15:if(!en&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&im(n,e,o),i=i.next}while(i!==r)}fi(t,e,n);break;case 1:if(!en&&(bo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ct(n,e,a)}fi(t,e,n);break;case 21:fi(t,e,n);break;case 22:n.mode&1?(en=(r=en)||n.memoizedState!==null,fi(t,e,n),en=r):fi(t,e,n);break;default:fi(t,e,n)}}function vw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new iA),e.forEach(function(r){var i=pA.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Yn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:jt=a.stateNode,Zn=!1;break e;case 3:jt=a.stateNode.containerInfo,Zn=!0;break e;case 4:jt=a.stateNode.containerInfo,Zn=!0;break e}a=a.return}if(jt===null)throw Error(q(160));rb(s,o,i),jt=null,Zn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){ct(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ib(e,t),e=e.sibling}function ib(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Yn(e,t),hr(t),r&4){try{ul(3,t,t.return),nh(3,t)}catch(P){ct(t,t.return,P)}try{ul(5,t,t.return)}catch(P){ct(t,t.return,P)}}break;case 1:Yn(e,t),hr(t),r&512&&n!==null&&bo(n,n.return);break;case 5:if(Yn(e,t),hr(t),r&512&&n!==null&&bo(n,n.return),t.flags&32){var i=t.stateNode;try{Sl(i,"")}catch(P){ct(t,t.return,P)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&xE(i,s),Np(a,o);var c=Np(a,s);for(o=0;o<u.length;o+=2){var d=u[o],h=u[o+1];d==="style"?NE(i,h):d==="dangerouslySetInnerHTML"?kE(i,h):d==="children"?Sl(i,h):ag(i,d,h,c)}switch(a){case"input":xp(i,s);break;case"textarea":SE(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var w=s.value;w!=null?xo(i,!!s.multiple,w,!1):m!==!!s.multiple&&(s.defaultValue!=null?xo(i,!!s.multiple,s.defaultValue,!0):xo(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ml]=s}catch(P){ct(t,t.return,P)}}break;case 6:if(Yn(e,t),hr(t),r&4){if(t.stateNode===null)throw Error(q(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(P){ct(t,t.return,P)}}break;case 3:if(Yn(e,t),hr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Nl(e.containerInfo)}catch(P){ct(t,t.return,P)}break;case 4:Yn(e,t),hr(t);break;case 13:Yn(e,t),hr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||($g=mt())),r&4&&vw(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(en=(c=en)||d,Yn(e,t),en=c):Yn(e,t),hr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(ie=t,d=t.child;d!==null;){for(h=ie=d;ie!==null;){switch(m=ie,w=m.child,m.tag){case 0:case 11:case 14:case 15:ul(4,m,m.return);break;case 1:bo(m,m.return);var b=m.stateNode;if(typeof b.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(P){ct(r,n,P)}}break;case 5:bo(m,m.return);break;case 22:if(m.memoizedState!==null){_w(h);continue}}w!==null?(w.return=m,ie=w):_w(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,u=h.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=AE("display",o))}catch(P){ct(t,t.return,P)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(P){ct(t,t.return,P)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Yn(e,t),hr(t),r&4&&vw(t);break;case 21:break;default:Yn(e,t),hr(t)}}function hr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(nb(n)){var r=n;break e}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Sl(i,""),r.flags&=-33);var s=yw(t);am(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=yw(t);om(t,a,o);break;default:throw Error(q(161))}}catch(u){ct(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function oA(t,e,n){ie=t,sb(t)}function sb(t,e,n){for(var r=(t.mode&1)!==0;ie!==null;){var i=ie,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ac;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||en;a=ac;var c=en;if(ac=o,(en=u)&&!c)for(ie=i;ie!==null;)o=ie,u=o.child,o.tag===22&&o.memoizedState!==null?Ew(i):u!==null?(u.return=o,ie=u):Ew(i);for(;s!==null;)ie=s,sb(s),s=s.sibling;ie=i,ac=a,en=c}ww(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ie=s):ww(t)}}function ww(t){for(;ie!==null;){var e=ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:en||nh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!en)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Jn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&rw(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}rw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Nl(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}en||e.flags&512&&sm(e)}catch(m){ct(e,e.return,m)}}if(e===t){ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,ie=n;break}ie=e.return}}function _w(t){for(;ie!==null;){var e=ie;if(e===t){ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ie=n;break}ie=e.return}}function Ew(t){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{nh(4,e)}catch(u){ct(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){ct(e,i,u)}}var s=e.return;try{sm(e)}catch(u){ct(e,s,u)}break;case 5:var o=e.return;try{sm(e)}catch(u){ct(e,o,u)}}}catch(u){ct(e,e.return,u)}if(e===t){ie=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ie=a;break}ie=e.return}}var aA=Math.ceil,dd=ii.ReactCurrentDispatcher,Fg=ii.ReactCurrentOwner,Hn=ii.ReactCurrentBatchConfig,Re=0,Ft=null,_t=null,Ht=0,kn=0,Io=rs(0),kt=0,Bl=null,Rs=0,rh=0,Ug=0,cl=null,yn=null,$g=0,Ho=1/0,Vr=null,hd=!1,lm=null,Vi=null,lc=!1,Si=null,fd=0,dl=0,um=null,Ac=-1,Nc=0;function un(){return Re&6?mt():Ac!==-1?Ac:Ac=mt()}function Fi(t){return t.mode&1?Re&2&&Ht!==0?Ht&-Ht:Wk.transition!==null?(Nc===0&&(Nc=zE()),Nc):(t=je,t!==0||(t=window.event,t=t===void 0?16:YE(t.type)),t):1}function ar(t,e,n,r){if(50<dl)throw dl=0,um=null,Error(q(185));iu(t,n,r),(!(Re&2)||t!==Ft)&&(t===Ft&&(!(Re&2)&&(rh|=n),kt===4&&_i(t,Ht)),In(t,r),n===1&&Re===0&&!(e.mode&1)&&(Ho=mt()+500,Zd&&is()))}function In(t,e){var n=t.callbackNode;WC(t,e);var r=Yc(t,t===Ft?Ht:0);if(r===0)n!==null&&A0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&A0(n),e===1)t.tag===0?zk(Tw.bind(null,t)):mT(Tw.bind(null,t)),Uk(function(){!(Re&6)&&is()}),n=null;else{switch(WE(r)){case 1:n=hg;break;case 4:n=jE;break;case 16:n=Qc;break;case 536870912:n=BE;break;default:n=Qc}n=fb(n,ob.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ob(t,e){if(Ac=-1,Nc=0,Re&6)throw Error(q(327));var n=t.callbackNode;if(No()&&t.callbackNode!==n)return null;var r=Yc(t,t===Ft?Ht:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=pd(t,r);else{e=r;var i=Re;Re|=2;var s=lb();(Ft!==t||Ht!==e)&&(Vr=null,Ho=mt()+500,Is(t,e));do try{cA();break}catch(a){ab(t,a)}while(1);Pg(),dd.current=s,Re=i,_t!==null?e=0:(Ft=null,Ht=0,e=kt)}if(e!==0){if(e===2&&(i=Mp(t),i!==0&&(r=i,e=cm(t,i))),e===1)throw n=Bl,Is(t,0),_i(t,r),In(t,mt()),n;if(e===6)_i(t,r);else{if(i=t.current.alternate,!(r&30)&&!lA(i)&&(e=pd(t,r),e===2&&(s=Mp(t),s!==0&&(r=s,e=cm(t,s))),e===1))throw n=Bl,Is(t,0),_i(t,r),In(t,mt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(q(345));case 2:ms(t,yn,Vr);break;case 3:if(_i(t,r),(r&130023424)===r&&(e=$g+500-mt(),10<e)){if(Yc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){un(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Wp(ms.bind(null,t,yn,Vr),e);break}ms(t,yn,Vr);break;case 4:if(_i(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-or(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=mt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*aA(r/1960))-r,10<r){t.timeoutHandle=Wp(ms.bind(null,t,yn,Vr),r);break}ms(t,yn,Vr);break;case 5:ms(t,yn,Vr);break;default:throw Error(q(329))}}}return In(t,mt()),t.callbackNode===n?ob.bind(null,t):null}function cm(t,e){var n=cl;return t.current.memoizedState.isDehydrated&&(Is(t,e).flags|=256),t=pd(t,e),t!==2&&(e=yn,yn=n,e!==null&&dm(e)),t}function dm(t){yn===null?yn=t:yn.push.apply(yn,t)}function lA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ur(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function _i(t,e){for(e&=~Ug,e&=~rh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-or(e),r=1<<n;t[n]=-1,e&=~r}}function Tw(t){if(Re&6)throw Error(q(327));No();var e=Yc(t,0);if(!(e&1))return In(t,mt()),null;var n=pd(t,e);if(t.tag!==0&&n===2){var r=Mp(t);r!==0&&(e=r,n=cm(t,r))}if(n===1)throw n=Bl,Is(t,0),_i(t,e),In(t,mt()),n;if(n===6)throw Error(q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ms(t,yn,Vr),In(t,mt()),null}function jg(t,e){var n=Re;Re|=1;try{return t(e)}finally{Re=n,Re===0&&(Ho=mt()+500,Zd&&is())}}function Ds(t){Si!==null&&Si.tag===0&&!(Re&6)&&No();var e=Re;Re|=1;var n=Hn.transition,r=je;try{if(Hn.transition=null,je=1,t)return t()}finally{je=r,Hn.transition=n,Re=e,!(Re&6)&&is()}}function Bg(){kn=Io.current,Xe(Io)}function Is(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Fk(n)),_t!==null)for(n=_t.return;n!==null;){var r=n;switch(Tg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&td();break;case 3:zo(),Xe(Tn),Xe(nn),Ng();break;case 5:Ag(r);break;case 4:zo();break;case 13:Xe(tt);break;case 19:Xe(tt);break;case 10:xg(r.type._context);break;case 22:case 23:Bg()}n=n.return}if(Ft=t,_t=t=Ui(t.current,null),Ht=kn=e,kt=0,Bl=null,Ug=rh=Rs=0,yn=cl=null,_s!==null){for(e=0;e<_s.length;e++)if(n=_s[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}_s=null}return t}function ab(t,e){do{var n=_t;try{if(Pg(),Sc.current=cd,ud){for(var r=it.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ud=!1}if(Ns=0,Mt=xt=it=null,ll=!1,Ul=0,Fg.current=null,n===null||n.return===null){kt=1,Bl=e,_t=null;break}e:{var s=t,o=n.return,a=n,u=e;if(e=Ht,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var w=uw(o);if(w!==null){w.flags&=-257,cw(w,o,a,s,e),w.mode&1&&lw(s,c,e),e=w,u=c;var b=e.updateQueue;if(b===null){var P=new Set;P.add(u),e.updateQueue=P}else b.add(u);break e}else{if(!(e&1)){lw(s,c,e),zg();break e}u=Error(q(426))}}else if(Ze&&a.mode&1){var N=uw(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),cw(N,o,a,s,e),bg(Wo(u,a));break e}}s=u=Wo(u,a),kt!==4&&(kt=2),cl===null?cl=[s]:cl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=WT(s,u,e);nw(s,_);break e;case 1:a=u;var v=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Vi===null||!Vi.has(A)))){s.flags|=65536,e&=-e,s.lanes|=e;var D=HT(s,a,e);nw(s,D);break e}}s=s.return}while(s!==null)}cb(n)}catch(M){e=M,_t===n&&n!==null&&(_t=n=n.return);continue}break}while(1)}function lb(){var t=dd.current;return dd.current=cd,t===null?cd:t}function zg(){(kt===0||kt===3||kt===2)&&(kt=4),Ft===null||!(Rs&268435455)&&!(rh&268435455)||_i(Ft,Ht)}function pd(t,e){var n=Re;Re|=2;var r=lb();(Ft!==t||Ht!==e)&&(Vr=null,Is(t,e));do try{uA();break}catch(i){ab(t,i)}while(1);if(Pg(),Re=n,dd.current=r,_t!==null)throw Error(q(261));return Ft=null,Ht=0,kt}function uA(){for(;_t!==null;)ub(_t)}function cA(){for(;_t!==null&&!LC();)ub(_t)}function ub(t){var e=hb(t.alternate,t,kn);t.memoizedProps=t.pendingProps,e===null?cb(t):_t=e,Fg.current=null}function cb(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=rA(n,e),n!==null){n.flags&=32767,_t=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{kt=6,_t=null;return}}else if(n=nA(n,e,kn),n!==null){_t=n;return}if(e=e.sibling,e!==null){_t=e;return}_t=e=t}while(e!==null);kt===0&&(kt=5)}function ms(t,e,n){var r=je,i=Hn.transition;try{Hn.transition=null,je=1,dA(t,e,n,r)}finally{Hn.transition=i,je=r}return null}function dA(t,e,n,r){do No();while(Si!==null);if(Re&6)throw Error(q(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(q(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(HC(t,s),t===Ft&&(_t=Ft=null,Ht=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||lc||(lc=!0,fb(Qc,function(){return No(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Hn.transition,Hn.transition=null;var o=je;je=1;var a=Re;Re|=4,Fg.current=null,sA(t,n),ib(n,t),Nk(Bp),Xc=!!jp,Bp=jp=null,t.current=n,oA(n),MC(),Re=a,je=o,Hn.transition=s}else t.current=n;if(lc&&(lc=!1,Si=t,fd=i),s=t.pendingLanes,s===0&&(Vi=null),UC(n.stateNode),In(t,mt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(hd)throw hd=!1,t=lm,lm=null,t;return fd&1&&t.tag!==0&&No(),s=t.pendingLanes,s&1?t===um?dl++:(dl=0,um=t):dl=0,is(),null}function No(){if(Si!==null){var t=WE(fd),e=Hn.transition,n=je;try{if(Hn.transition=null,je=16>t?16:t,Si===null)var r=!1;else{if(t=Si,Si=null,fd=0,Re&6)throw Error(q(331));var i=Re;for(Re|=4,ie=t.current;ie!==null;){var s=ie,o=s.child;if(ie.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(ie=c;ie!==null;){var d=ie;switch(d.tag){case 0:case 11:case 15:ul(8,d,s)}var h=d.child;if(h!==null)h.return=d,ie=h;else for(;ie!==null;){d=ie;var m=d.sibling,w=d.return;if(tb(d),d===c){ie=null;break}if(m!==null){m.return=w,ie=m;break}ie=w}}}var b=s.alternate;if(b!==null){var P=b.child;if(P!==null){b.child=null;do{var N=P.sibling;P.sibling=null,P=N}while(P!==null)}}ie=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ie=o;else e:for(;ie!==null;){if(s=ie,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ul(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,ie=_;break e}ie=s.return}}var v=t.current;for(ie=v;ie!==null;){o=ie;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,ie=A;else e:for(o=v;ie!==null;){if(a=ie,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:nh(9,a)}}catch(M){ct(a,a.return,M)}if(a===o){ie=null;break e}var D=a.sibling;if(D!==null){D.return=a.return,ie=D;break e}ie=a.return}}if(Re=i,is(),br&&typeof br.onPostCommitFiberRoot=="function")try{br.onPostCommitFiberRoot(Kd,t)}catch{}r=!0}return r}finally{je=n,Hn.transition=e}}return!1}function bw(t,e,n){e=Wo(n,e),e=WT(t,e,1),t=Mi(t,e,1),e=un(),t!==null&&(iu(t,1,e),In(t,e))}function ct(t,e,n){if(t.tag===3)bw(t,t,n);else for(;e!==null;){if(e.tag===3){bw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Vi===null||!Vi.has(r))){t=Wo(n,t),t=HT(e,t,1),e=Mi(e,t,1),t=un(),e!==null&&(iu(e,1,t),In(e,t));break}}e=e.return}}function hA(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=un(),t.pingedLanes|=t.suspendedLanes&n,Ft===t&&(Ht&n)===n&&(kt===4||kt===3&&(Ht&130023424)===Ht&&500>mt()-$g?Is(t,0):Ug|=n),In(t,e)}function db(t,e){e===0&&(t.mode&1?(e=Ju,Ju<<=1,!(Ju&130023424)&&(Ju=4194304)):e=1);var n=un();t=Yr(t,e),t!==null&&(iu(t,e,n),In(t,n))}function fA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),db(t,n)}function pA(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(e),db(t,n)}var hb;hb=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Tn.current)_n=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return _n=!1,tA(t,e,n);_n=!!(t.flags&131072)}else _n=!1,Ze&&e.flags&1048576&&gT(e,id,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;kc(t,e),t=e.pendingProps;var i=$o(e,nn.current);Ao(e,n),i=Dg(null,e,r,t,i,n);var s=Og();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,bn(r)?(s=!0,nd(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Cg(e),i.updater=th,e.stateNode=i,i._reactInternals=e,Xp(e,r,t,n),e=em(null,e,r,!0,s,n)):(e.tag=0,Ze&&s&&Eg(e),on(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(kc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=gA(r),t=Jn(r,t),i){case 0:e=Zp(null,e,r,t,n);break e;case 1:e=fw(null,e,r,t,n);break e;case 11:e=dw(null,e,r,t,n);break e;case 14:e=hw(null,e,r,Jn(r.type,t),n);break e}throw Error(q(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Jn(r,i),Zp(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Jn(r,i),fw(t,e,r,i,n);case 3:e:{if(QT(e),t===null)throw Error(q(387));r=e.pendingProps,s=e.memoizedState,i=s.element,TT(t,e),ad(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Wo(Error(q(423)),e),e=pw(t,e,r,n,i);break e}else if(r!==i){i=Wo(Error(q(424)),e),e=pw(t,e,r,n,i);break e}else for(An=Li(e.stateNode.containerInfo.firstChild),Dn=e,Ze=!0,tr=null,n=_T(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(jo(),r===i){e=Xr(t,e,n);break e}on(t,e,r,n)}e=e.child}return e;case 5:return bT(e),t===null&&Kp(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,zp(r,i)?o=null:s!==null&&zp(r,s)&&(e.flags|=32),KT(t,e),on(t,e,o,n),e.child;case 6:return t===null&&Kp(e),null;case 13:return YT(t,e,n);case 4:return kg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Bo(e,null,r,n):on(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Jn(r,i),dw(t,e,r,i,n);case 7:return on(t,e,e.pendingProps,n),e.child;case 8:return on(t,e,e.pendingProps.children,n),e.child;case 12:return on(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,qe(sd,r._currentValue),r._currentValue=o,s!==null)if(ur(s.value,o)){if(s.children===i.children&&!Tn.current){e=Xr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Hr(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Qp(s.return,n,e),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(q(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Qp(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}on(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ao(e,n),i=qn(i),r=r(i),e.flags|=1,on(t,e,r,n),e.child;case 14:return r=e.type,i=Jn(r,e.pendingProps),i=Jn(r.type,i),hw(t,e,r,i,n);case 15:return qT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Jn(r,i),kc(t,e),e.tag=1,bn(r)?(t=!0,nd(e)):t=!1,Ao(e,n),zT(e,r,i),Xp(e,r,i,n),em(null,e,r,!0,t,n);case 19:return XT(t,e,n);case 22:return GT(t,e,n)}throw Error(q(156,e.tag))};function fb(t,e){return $E(t,e)}function mA(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(t,e,n,r){return new mA(t,e,n,r)}function Wg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function gA(t){if(typeof t=="function")return Wg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ug)return 11;if(t===cg)return 14}return 2}function Ui(t,e){var n=t.alternate;return n===null?(n=Wn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Rc(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Wg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case po:return Ps(n.children,i,s,e);case lg:o=8,i|=8;break;case Ep:return t=Wn(12,n,e,i|2),t.elementType=Ep,t.lanes=s,t;case Tp:return t=Wn(13,n,e,i),t.elementType=Tp,t.lanes=s,t;case bp:return t=Wn(19,n,e,i),t.elementType=bp,t.lanes=s,t;case bE:return ih(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case EE:o=10;break e;case TE:o=9;break e;case ug:o=11;break e;case cg:o=14;break e;case yi:o=16,r=null;break e}throw Error(q(130,t==null?t:typeof t,""))}return e=Wn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ps(t,e,n,r){return t=Wn(7,t,r,e),t.lanes=n,t}function ih(t,e,n,r){return t=Wn(22,t,r,e),t.elementType=bE,t.lanes=n,t.stateNode={isHidden:!1},t}function zf(t,e,n){return t=Wn(6,t,null,e),t.lanes=n,t}function Wf(t,e,n){return e=Wn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function yA(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=If(0),this.expirationTimes=If(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=If(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Hg(t,e,n,r,i,s,o,a,u){return t=new yA(t,e,n,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Wn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cg(s),t}function vA(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function pb(t){if(!t)return qi;t=t._reactInternals;e:{if(Ws(t)!==t||t.tag!==1)throw Error(q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(bn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(t.tag===1){var n=t.type;if(bn(n))return pT(t,n,e)}return e}function mb(t,e,n,r,i,s,o,a,u){return t=Hg(n,r,!0,t,i,s,o,a,u),t.context=pb(null),n=t.current,r=un(),i=Fi(n),s=Hr(r,i),s.callback=e??null,Mi(n,s,i),t.current.lanes=i,iu(t,i,r),In(t,r),t}function sh(t,e,n,r){var i=e.current,s=un(),o=Fi(i);return n=pb(n),e.context===null?e.context=n:e.pendingContext=n,e=Hr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Mi(i,e,o),t!==null&&(ar(t,i,o,s),xc(t,i,o)),o}function md(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Iw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function qg(t,e){Iw(t,e),(t=t.alternate)&&Iw(t,e)}function wA(){return null}var gb=typeof reportError=="function"?reportError:function(t){console.error(t)};function Gg(t){this._internalRoot=t}oh.prototype.render=Gg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));sh(t,e,null,null)};oh.prototype.unmount=Gg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ds(function(){sh(null,t,null,null)}),e[Qr]=null}};function oh(t){this._internalRoot=t}oh.prototype.unstable_scheduleHydration=function(t){if(t){var e=GE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<wi.length&&e!==0&&e<wi[n].priority;n++);wi.splice(n,0,t),n===0&&QE(t)}};function Kg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ah(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Pw(){}function _A(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=md(o);s.call(c)}}var o=mb(e,r,t,0,null,!1,!1,"",Pw);return t._reactRootContainer=o,t[Qr]=o.current,Ol(t.nodeType===8?t.parentNode:t),Ds(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=md(u);a.call(c)}}var u=Hg(t,0,!1,null,null,!1,!1,"",Pw);return t._reactRootContainer=u,t[Qr]=u.current,Ol(t.nodeType===8?t.parentNode:t),Ds(function(){sh(e,u,n,r)}),u}function lh(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=md(o);a.call(u)}}sh(e,o,t,i)}else o=_A(n,e,t,i,r);return md(o)}HE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=qa(e.pendingLanes);n!==0&&(fg(e,n|1),In(e,mt()),!(Re&6)&&(Ho=mt()+500,is()))}break;case 13:Ds(function(){var r=Yr(t,1);if(r!==null){var i=un();ar(r,t,1,i)}}),qg(t,1)}};pg=function(t){if(t.tag===13){var e=Yr(t,134217728);if(e!==null){var n=un();ar(e,t,134217728,n)}qg(t,134217728)}};qE=function(t){if(t.tag===13){var e=Fi(t),n=Yr(t,e);if(n!==null){var r=un();ar(n,t,e,r)}qg(t,e)}};GE=function(){return je};KE=function(t,e){var n=je;try{return je=t,e()}finally{je=n}};Dp=function(t,e,n){switch(e){case"input":if(xp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Jd(r);if(!i)throw Error(q(90));PE(r),xp(r,i)}}}break;case"textarea":SE(t,n);break;case"select":e=n.value,e!=null&&xo(t,!!n.multiple,e,!1)}};OE=jg;LE=Ds;var EA={usingClientEntryPoint:!1,Events:[ou,vo,Jd,RE,DE,jg]},Fa={findFiberByHostInstance:ws,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},TA={bundleType:Fa.bundleType,version:Fa.version,rendererPackageName:Fa.rendererPackageName,rendererConfig:Fa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ii.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=FE(t),t===null?null:t.stateNode},findFiberByHostInstance:Fa.findFiberByHostInstance||wA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uc.isDisabled&&uc.supportsFiber)try{Kd=uc.inject(TA),br=uc}catch{}}Ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EA;Ln.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kg(e))throw Error(q(200));return vA(t,e,null,n)};Ln.createRoot=function(t,e){if(!Kg(t))throw Error(q(299));var n=!1,r="",i=gb;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Hg(t,1,!1,null,null,n,!1,r,i),t[Qr]=e.current,Ol(t.nodeType===8?t.parentNode:t),new Gg(e)};Ln.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=FE(e),t=t===null?null:t.stateNode,t};Ln.flushSync=function(t){return Ds(t)};Ln.hydrate=function(t,e,n){if(!ah(e))throw Error(q(200));return lh(null,t,e,!0,n)};Ln.hydrateRoot=function(t,e,n){if(!Kg(t))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=gb;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=mb(e,null,t,1,n??null,i,!1,s,o),t[Qr]=e.current,Ol(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new oh(e)};Ln.render=function(t,e,n){if(!ah(e))throw Error(q(200));return lh(null,t,e,!1,n)};Ln.unmountComponentAtNode=function(t){if(!ah(t))throw Error(q(40));return t._reactRootContainer?(Ds(function(){lh(null,null,t,!1,function(){t._reactRootContainer=null,t[Qr]=null})}),!0):!1};Ln.unstable_batchedUpdates=jg;Ln.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ah(n))throw Error(q(200));if(t==null||t._reactInternals===void 0)throw Error(q(38));return lh(t,e,n,!1,r)};Ln.version="18.3.1-next-f1338f8080-20240426";function yb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yb)}catch(t){console.error(t)}}yb(),yE.exports=Ln;var vb=yE.exports,xw=vb;wp.createRoot=xw.createRoot,wp.hydrateRoot=xw.hydrateRoot;/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zl(){return zl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zl.apply(this,arguments)}var Ci;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ci||(Ci={}));const Sw="popstate";function bA(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return hm("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:_b(i)}return PA(e,n,null,t)}function At(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function wb(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function IA(){return Math.random().toString(36).substr(2,8)}function Cw(t,e){return{usr:t.state,key:t.key,idx:e}}function hm(t,e,n,r){return n===void 0&&(n=null),zl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?sa(e):e,{state:n,key:e&&e.key||r||IA()})}function _b(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function sa(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function PA(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Ci.Pop,u=null,c=d();c==null&&(c=0,o.replaceState(zl({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Ci.Pop;let N=d(),_=N==null?null:N-c;c=N,u&&u({action:a,location:P.location,delta:_})}function m(N,_){a=Ci.Push;let v=hm(P.location,N,_);n&&n(v,N),c=d()+1;let A=Cw(v,c),D=P.createHref(v);try{o.pushState(A,"",D)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(D)}s&&u&&u({action:a,location:P.location,delta:1})}function w(N,_){a=Ci.Replace;let v=hm(P.location,N,_);n&&n(v,N),c=d();let A=Cw(v,c),D=P.createHref(v);o.replaceState(A,"",D),s&&u&&u({action:a,location:P.location,delta:0})}function b(N){let _=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof N=="string"?N:_b(N);return v=v.replace(/ $/,"%20"),At(_,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,_)}let P={get action(){return a},get location(){return t(i,o)},listen(N){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Sw,h),u=N,()=>{i.removeEventListener(Sw,h),u=null}},createHref(N){return e(i,N)},createURL:b,encodeLocation(N){let _=b(N);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:m,replace:w,go(N){return o.go(N)}};return P}var kw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(kw||(kw={}));function xA(t,e,n){return n===void 0&&(n="/"),SA(t,e,n,!1)}function SA(t,e,n,r){let i=typeof e=="string"?sa(e):e,s=bb(i.pathname||"/",n);if(s==null)return null;let o=Eb(t);CA(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let c=UA(s);a=VA(o[u],c,r)}return a}function Eb(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(At(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=xs([r,u.relativePath]),d=n.concat(u);s.children&&s.children.length>0&&(At(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Eb(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:LA(c,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of Tb(s.path))i(s,o,u)}),e}function Tb(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Tb(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function CA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:MA(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const kA=/^:[\w-]+$/,AA=3,NA=2,RA=1,DA=10,OA=-2,Aw=t=>t==="*";function LA(t,e){let n=t.split("/"),r=n.length;return n.some(Aw)&&(r+=OA),e&&(r+=NA),n.filter(i=>!Aw(i)).reduce((i,s)=>i+(kA.test(s)?AA:s===""?RA:DA),r)}function MA(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function VA(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],c=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=Nw({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},d),m=u.route;if(!h&&c&&n&&!r[r.length-1].route.index&&(h=Nw({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},d)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:xs([s,h.pathname]),pathnameBase:HA(xs([s,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(s=xs([s,h.pathnameBase]))}return o}function Nw(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=FA(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:m,isOptional:w}=d;if(m==="*"){let P=a[h]||"";o=s.slice(0,s.length-P.length).replace(/(.)\/+$/,"$1")}const b=a[h];return w&&!b?c[m]=void 0:c[m]=(b||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function FA(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),wb(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function UA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return wb(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function bb(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function $A(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?sa(t):t;return{pathname:n?n.startsWith("/")?n:jA(n,e):e,search:qA(r),hash:GA(i)}}function jA(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Hf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function BA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function zA(t,e){let n=BA(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function WA(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=sa(t):(i=zl({},t),At(!i.pathname||!i.pathname.includes("?"),Hf("?","pathname","search",i)),At(!i.pathname||!i.pathname.includes("#"),Hf("#","pathname","hash",i)),At(!i.search||!i.search.includes("#"),Hf("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;i.pathname=m.join("/")}a=h>=0?e[h]:"/"}let u=$A(i,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||d)&&(u.pathname+="/"),u}const xs=t=>t.join("/").replace(/\/\/+/g,"/"),HA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),qA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,GA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function KA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Ib=["post","put","patch","delete"];new Set(Ib);const QA=["get",...Ib];new Set(QA);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wl(){return Wl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wl.apply(this,arguments)}const Qg=O.createContext(null),YA=O.createContext(null),uh=O.createContext(null),ch=O.createContext(null),Hs=O.createContext({outlet:null,matches:[],isDataRoute:!1}),Pb=O.createContext(null);function dh(){return O.useContext(ch)!=null}function hh(){return dh()||At(!1),O.useContext(ch).location}function xb(t){O.useContext(uh).static||O.useLayoutEffect(t)}function xn(){let{isDataRoute:t}=O.useContext(Hs);return t?uN():XA()}function XA(){dh()||At(!1);let t=O.useContext(Qg),{basename:e,future:n,navigator:r}=O.useContext(uh),{matches:i}=O.useContext(Hs),{pathname:s}=hh(),o=JSON.stringify(zA(i,n.v7_relativeSplatPath)),a=O.useRef(!1);return xb(()=>{a.current=!0}),O.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=WA(c,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:xs([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,s,t])}function Yg(){let{matches:t}=O.useContext(Hs),e=t[t.length-1];return e?e.params:{}}function JA(t,e){return ZA(t,e)}function ZA(t,e,n,r){dh()||At(!1);let{navigator:i}=O.useContext(uh),{matches:s}=O.useContext(Hs),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let c=hh(),d;if(e){var h;let N=typeof e=="string"?sa(e):e;u==="/"||(h=N.pathname)!=null&&h.startsWith(u)||At(!1),d=N}else d=c;let m=d.pathname||"/",w=m;if(u!=="/"){let N=u.replace(/^\//,"").split("/");w="/"+m.replace(/^\//,"").split("/").slice(N.length).join("/")}let b=xA(t,{pathname:w}),P=iN(b&&b.map(N=>Object.assign({},N,{params:Object.assign({},a,N.params),pathname:xs([u,i.encodeLocation?i.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?u:xs([u,i.encodeLocation?i.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),s,n,r);return e&&P?O.createElement(ch.Provider,{value:{location:Wl({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ci.Pop}},P):P}function eN(){let t=lN(),e=KA(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:i},n):null,s)}const tN=O.createElement(eN,null);class nN extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(Hs.Provider,{value:this.props.routeContext},O.createElement(Pb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function rN(t){let{routeContext:e,match:n,children:r}=t,i=O.useContext(Qg);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(Hs.Provider,{value:e},r)}function iN(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||At(!1),o=o.slice(0,Math.min(o.length,d+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:m,errors:w}=n,b=h.route.loader&&m[h.route.id]===void 0&&(!w||w[h.route.id]===void 0);if(h.route.lazy||b){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,m)=>{let w,b=!1,P=null,N=null;n&&(w=a&&h.route.id?a[h.route.id]:void 0,P=h.route.errorElement||tN,u&&(c<0&&m===0?(cN("route-fallback",!1),b=!0,N=null):c===m&&(b=!0,N=h.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,m+1)),v=()=>{let A;return w?A=P:b?A=N:h.route.Component?A=O.createElement(h.route.Component,null):h.route.element?A=h.route.element:A=d,O.createElement(rN,{match:h,routeContext:{outlet:d,matches:_,isDataRoute:n!=null},children:A})};return n&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?O.createElement(nN,{location:n.location,revalidation:n.revalidation,component:P,error:w,children:v(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):v()},null)}var Sb=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Sb||{}),gd=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(gd||{});function sN(t){let e=O.useContext(Qg);return e||At(!1),e}function oN(t){let e=O.useContext(YA);return e||At(!1),e}function aN(t){let e=O.useContext(Hs);return e||At(!1),e}function Cb(t){let e=aN(),n=e.matches[e.matches.length-1];return n.route.id||At(!1),n.route.id}function lN(){var t;let e=O.useContext(Pb),n=oN(gd.UseRouteError),r=Cb(gd.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function uN(){let{router:t}=sN(Sb.UseNavigateStable),e=Cb(gd.UseNavigateStable),n=O.useRef(!1);return xb(()=>{n.current=!0}),O.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Wl({fromRouteId:e},s)))},[t,e])}const Rw={};function cN(t,e,n){!e&&!Rw[t]&&(Rw[t]=!0)}function Xn(t){At(!1)}function dN(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Ci.Pop,navigator:s,static:o=!1,future:a}=t;dh()&&At(!1);let u=e.replace(/^\/*/,"/"),c=O.useMemo(()=>({basename:u,navigator:s,static:o,future:Wl({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=sa(r));let{pathname:d="/",search:h="",hash:m="",state:w=null,key:b="default"}=r,P=O.useMemo(()=>{let N=bb(d,u);return N==null?null:{location:{pathname:N,search:h,hash:m,state:w,key:b},navigationType:i}},[u,d,h,m,w,b,i]);return P==null?null:O.createElement(uh.Provider,{value:c},O.createElement(ch.Provider,{children:n,value:P}))}function hN(t){let{children:e,location:n}=t;return JA(fm(e),n)}new Promise(()=>{});function fm(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(r,i)=>{if(!O.isValidElement(r))return;let s=[...e,i];if(r.type===O.Fragment){n.push.apply(n,fm(r.props.children,s));return}r.type!==Xn&&At(!1),!r.props.index||!r.props.children||At(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=fm(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const fN="6";try{window.__reactRouterVersion=fN}catch{}const pN="startTransition",Dw=hC[pN];function mN(t){let{basename:e,children:n,future:r,window:i}=t,s=O.useRef();s.current==null&&(s.current=bA({window:i,v5Compat:!0}));let o=s.current,[a,u]=O.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=O.useCallback(h=>{c&&Dw?Dw(()=>u(h)):u(h)},[u,c]);return O.useLayoutEffect(()=>o.listen(d),[o,d]),O.createElement(dN,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var Ow;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Ow||(Ow={}));var Lw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Lw||(Lw={}));/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),kb=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var yN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=O.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},u)=>O.createElement("svg",{ref:u,...yN,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:kb("lucide",i),...a},[...o.map(([c,d])=>O.createElement(c,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=(t,e)=>{const n=O.forwardRef(({className:r,...i},s)=>O.createElement(vN,{ref:s,iconNode:e,className:kb(`lucide-${gN(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=Me("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gi=Me("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lu=Me("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mw=Me("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vw=Me("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fw=Me("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=Me("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=Me("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=Me("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=Me("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=Me("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ab=Me("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jg=Me("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=Me("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=Me("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uw=Me("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=Me("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fh=Me("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=Me("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $w=Me("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ph=Me("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yd=Me("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=Me("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=Me("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=Me("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=Me("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=Me("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=Me("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nb=Me("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ki=Me("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pm=Me("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=Me("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Rb=O.createContext(),AN=()=>{const t=O.useContext(Rb);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t},fl={blue:{name:"Ocean Blue",primary:"#2563eb",secondary:"#06b6d4",accent:"#3b82f6"},green:{name:"Medical Green",primary:"#059669",secondary:"#10b981",accent:"#34d399"},purple:{name:"Royal Purple",primary:"#7c3aed",secondary:"#8b5cf6",accent:"#a78bfa"},teal:{name:"Dental Teal",primary:"#0d9488",secondary:"#14b8a6",accent:"#5eead4"},indigo:{name:"Professional Indigo",primary:"#4f46e5",secondary:"#6366f1",accent:"#818cf8"},rose:{name:"Warm Rose",primary:"#e11d48",secondary:"#f43f5e",accent:"#fb7185"}},NN=({children:t})=>{const[e,n]=O.useState(!1),[r,i]=O.useState("blue"),[s,o]=O.useState(null);O.useEffect(()=>{const m=localStorage.getItem("dental-app-theme");if(m){const b=JSON.parse(m);n(b.isDarkMode||!1),i(b.currentColor||"blue"),o(b.customColor||null)}const w=window.matchMedia("(prefers-color-scheme: dark)").matches;m||n(w)},[]),O.useEffect(()=>{const m={isDarkMode:e,currentColor:r,customColor:s};localStorage.setItem("dental-app-theme",JSON.stringify(m));const w=document.documentElement;e?w.classList.add("dark"):w.classList.remove("dark");const b=s||fl[r];w.style.setProperty("--color-primary",b.primary),w.style.setProperty("--color-secondary",b.secondary),w.style.setProperty("--color-accent",b.accent);const P=document.querySelector('meta[name="theme-color"]');P&&P.setAttribute("content",b.primary)},[e,r,s]);const h={isDarkMode:e,currentColor:r,customColor:s,themeColors:fl,toggleDarkMode:()=>{n(!e)},changeColorTheme:m=>{i(m),o(null)},setCustomColorTheme:m=>{o(m),i("custom")},getCurrentColors:()=>s||fl[r]};return p(Rb.Provider,{value:h,children:t})},RN=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},DN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Ob={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let m=(a&15)<<2|c>>6,w=c&63;u||(w=64,o||(m=64)),r.push(n[d],n[h],n[m],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Db(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):DN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new ON;const m=s<<2|a>>4;if(r.push(m),c!==64){const w=a<<4&240|c>>2;if(r.push(w),h!==64){const b=c<<6&192|h;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ON extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const LN=function(t){const e=Db(t);return Ob.encodeByteArray(e,!0)},vd=function(t){return LN(t).replace(/\./g,"")},Lb=function(t){try{return Ob.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN=()=>MN().__FIREBASE_DEFAULTS__,FN=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},UN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Lb(t[1]);return e&&JSON.parse(e)},mh=()=>{try{return RN()||VN()||FN()||UN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Mb=t=>{var e,n;return(n=(e=mh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},$N=t=>{const e=Mb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Vb=()=>{var t;return(t=mh())===null||t===void 0?void 0:t.config},Fb=t=>{var e;return(e=mh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aa(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ub(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[vd(JSON.stringify(n)),vd(JSON.stringify(o)),a].join(".")}const pl={};function zN(){const t={prod:[],emulator:[]};for(const e of Object.keys(pl))pl[e]?t.emulator.push(e):t.prod.push(e);return t}function WN(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let jw=!1;function $b(t,e){if(typeof window>"u"||typeof document>"u"||!aa(window.location.host)||pl[t]===e||pl[t]||jw)return;pl[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",s=zN().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,w){m.setAttribute("width","24"),m.setAttribute("id",w),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function c(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{jw=!0,o()},m}function d(m,w){m.setAttribute("id",w),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function h(){const m=WN(r),w=n("text"),b=document.getElementById(w)||document.createElement("span"),P=n("learnmore"),N=document.getElementById(P)||document.createElement("a"),_=n("preprendIcon"),v=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const A=m.element;a(A),d(N,P);const D=c();u(v,_),A.append(v,b,N,D),document.body.appendChild(A)}s?(b.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function HN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())}function qN(){var t;const e=(t=mh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function GN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function KN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function QN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YN(){const t=rn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function XN(){return!qN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function JN(){try{return typeof indexedDB=="object"}catch{return!1}}function ZN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function z5(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2="FirebaseError";class si extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=e2,Object.setPrototypeOf(this,si.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cu.prototype.create)}}class cu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?t2(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new si(i,a,r)}}function t2(t,e){return t.replace(n2,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const n2=/\{\$([^}]+)}/g;function r2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Os(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Bw(s)&&Bw(o)){if(!Os(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Bw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function la(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ka(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Qa(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function i2(t,e){const n=new s2(t,e);return n.subscribe.bind(n)}class s2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");o2(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=qf),i.error===void 0&&(i.error=qf),i.complete===void 0&&(i.complete=qf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function o2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function qf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(t){return t&&t._delegate?t._delegate:t}class Ls{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new jN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(u2(e))try{this.getOrInitializeService({instanceIdentifier:gs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=gs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gs){return this.instances.has(e)}getOptions(e=gs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:l2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=gs){return this.component?this.component.multipleInstances?e:gs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function l2(t){return t===gs?void 0:t}function u2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new a2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ie||(Ie={}));const d2={debug:Ie.DEBUG,verbose:Ie.VERBOSE,info:Ie.INFO,warn:Ie.WARN,error:Ie.ERROR,silent:Ie.SILENT},h2=Ie.INFO,f2={[Ie.DEBUG]:"log",[Ie.VERBOSE]:"log",[Ie.INFO]:"info",[Ie.WARN]:"warn",[Ie.ERROR]:"error"},p2=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=f2[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ty{constructor(e){this.name=e,this._logLevel=h2,this._logHandler=p2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?d2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ie.DEBUG,...e),this._logHandler(this,Ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ie.VERBOSE,...e),this._logHandler(this,Ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ie.INFO,...e),this._logHandler(this,Ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ie.WARN,...e),this._logHandler(this,Ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ie.ERROR,...e),this._logHandler(this,Ie.ERROR,...e)}}const m2=(t,e)=>e.some(n=>t instanceof n);let zw,Ww;function g2(){return zw||(zw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function y2(){return Ww||(Ww=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jb=new WeakMap,mm=new WeakMap,Bb=new WeakMap,Gf=new WeakMap,ny=new WeakMap;function v2(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(qr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&jb.set(n,t)}).catch(()=>{}),ny.set(e,t),e}function w2(t){if(mm.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});mm.set(t,e)}let gm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return mm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Bb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function _2(t){gm=t(gm)}function E2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Kf(this),e,...n);return Bb.set(r,e.sort?e.sort():[e]),qr(r)}:y2().includes(t)?function(...e){return t.apply(Kf(this),e),qr(jb.get(this))}:function(...e){return qr(t.apply(Kf(this),e))}}function T2(t){return typeof t=="function"?E2(t):(t instanceof IDBTransaction&&w2(t),m2(t,g2())?new Proxy(t,gm):t)}function qr(t){if(t instanceof IDBRequest)return v2(t);if(Gf.has(t))return Gf.get(t);const e=T2(t);return e!==t&&(Gf.set(t,e),ny.set(e,t)),e}const Kf=t=>ny.get(t);function b2(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=qr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(qr(o.result),u.oldVersion,u.newVersion,qr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}function W5(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),qr(n).then(()=>{})}const I2=["get","getKey","getAll","getAllKeys","count"],P2=["put","add","delete","clear"],Qf=new Map;function Hw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Qf.get(e))return Qf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=P2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||I2.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&u.done]))[0]};return Qf.set(e,s),s}_2(t=>({...t,get:(e,n,r)=>Hw(e,n)||t.get(e,n,r),has:(e,n)=>!!Hw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(S2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function S2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ym="@firebase/app",qw="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr=new ty("@firebase/app"),C2="@firebase/app-compat",k2="@firebase/analytics-compat",A2="@firebase/analytics",N2="@firebase/app-check-compat",R2="@firebase/app-check",D2="@firebase/auth",O2="@firebase/auth-compat",L2="@firebase/database",M2="@firebase/data-connect",V2="@firebase/database-compat",F2="@firebase/functions",U2="@firebase/functions-compat",$2="@firebase/installations",j2="@firebase/installations-compat",B2="@firebase/messaging",z2="@firebase/messaging-compat",W2="@firebase/performance",H2="@firebase/performance-compat",q2="@firebase/remote-config",G2="@firebase/remote-config-compat",K2="@firebase/storage",Q2="@firebase/storage-compat",Y2="@firebase/firestore",X2="@firebase/ai",J2="@firebase/firestore-compat",Z2="firebase",eR="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm="[DEFAULT]",tR={[ym]:"fire-core",[C2]:"fire-core-compat",[A2]:"fire-analytics",[k2]:"fire-analytics-compat",[R2]:"fire-app-check",[N2]:"fire-app-check-compat",[D2]:"fire-auth",[O2]:"fire-auth-compat",[L2]:"fire-rtdb",[M2]:"fire-data-connect",[V2]:"fire-rtdb-compat",[F2]:"fire-fn",[U2]:"fire-fn-compat",[$2]:"fire-iid",[j2]:"fire-iid-compat",[B2]:"fire-fcm",[z2]:"fire-fcm-compat",[W2]:"fire-perf",[H2]:"fire-perf-compat",[q2]:"fire-rc",[G2]:"fire-rc-compat",[K2]:"fire-gcs",[Q2]:"fire-gcs-compat",[Y2]:"fire-fst",[J2]:"fire-fst-compat",[X2]:"fire-vertex","fire-js":"fire-js",[Z2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd=new Map,nR=new Map,wm=new Map;function Gw(t,e){try{t.container.addComponent(e)}catch(n){Jr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function qo(t){const e=t.name;if(wm.has(e))return Jr.debug(`There were multiple attempts to register component ${e}.`),!1;wm.set(e,t);for(const n of wd.values())Gw(n,t);for(const n of nR.values())Gw(n,t);return!0}function ry(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ct(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$i=new cu("app","Firebase",rR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ls("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $i.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua=eR;function zb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:vm,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw $i.create("bad-app-name",{appName:String(i)});if(n||(n=Vb()),!n)throw $i.create("no-options");const s=wd.get(i);if(s){if(Os(n,s.options)&&Os(r,s.config))return s;throw $i.create("duplicate-app",{appName:i})}const o=new c2(i);for(const u of wm.values())o.addComponent(u);const a=new iR(n,r,o);return wd.set(i,a),a}function Wb(t=vm){const e=wd.get(t);if(!e&&t===vm&&Vb())return zb();if(!e)throw $i.create("no-app",{appName:t});return e}function ji(t,e,n){var r;let i=(r=tR[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Jr.warn(a.join(" "));return}qo(new Ls(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR="firebase-heartbeat-database",oR=1,Hl="firebase-heartbeat-store";let Yf=null;function Hb(){return Yf||(Yf=b2(sR,oR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hl)}catch(n){console.warn(n)}}}}).catch(t=>{throw $i.create("idb-open",{originalErrorMessage:t.message})})),Yf}async function aR(t){try{const n=(await Hb()).transaction(Hl),r=await n.objectStore(Hl).get(qb(t));return await n.done,r}catch(e){if(e instanceof si)Jr.warn(e.message);else{const n=$i.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Jr.warn(n.message)}}}async function Kw(t,e){try{const r=(await Hb()).transaction(Hl,"readwrite");await r.objectStore(Hl).put(e,qb(t)),await r.done}catch(n){if(n instanceof si)Jr.warn(n.message);else{const r=$i.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Jr.warn(r.message)}}}function qb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR=1024,uR=30;class cR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new hR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Qw();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>uR){const o=fR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Jr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Qw(),{heartbeatsToSend:r,unsentEntries:i}=dR(this._heartbeatsCache.heartbeats),s=vd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Jr.warn(n),""}}}function Qw(){return new Date().toISOString().substring(0,10)}function dR(t,e=lR){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Yw(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Yw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class hR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return JN()?ZN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await aR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Kw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Kw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Yw(t){return vd(JSON.stringify({version:2,heartbeats:t})).length}function fR(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(t){qo(new Ls("platform-logger",e=>new x2(e),"PRIVATE")),qo(new Ls("heartbeat",e=>new cR(e),"PRIVATE")),ji(ym,qw,t),ji(ym,qw,"esm2017"),ji("fire-js","")}pR("");function iy(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Gb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mR=Gb,Kb=new cu("auth","Firebase",Gb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d=new ty("@firebase/auth");function gR(t,...e){_d.logLevel<=Ie.WARN&&_d.warn(`Auth (${ua}): ${t}`,...e)}function Dc(t,...e){_d.logLevel<=Ie.ERROR&&_d.error(`Auth (${ua}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(t,...e){throw oy(t,...e)}function Pn(t,...e){return oy(t,...e)}function sy(t,e,n){const r=Object.assign(Object.assign({},mR()),{[e]:n});return new cu("auth","Firebase",r).create(e,{appName:t.name})}function cn(t){return sy(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gh(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Kn(t,"argument-error"),sy(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function oy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Kb.create(t,...e)}function J(t,e,...n){if(!t)throw oy(e,...n)}function jr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Dc(e),new Error(e)}function Zr(t,e){t||jr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ql(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function ay(){return Xw()==="http:"||Xw()==="https:"}function Xw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ay()||KN()||"connection"in navigator)?navigator.onLine:!0}function vR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,n){this.shortDelay=e,this.longDelay=n,Zr(n>e,"Short delay should be less than long delay!"),this.isMobile=HN()||QN()}get(){return yR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ly(t,e){Zr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;jr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;jr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;jr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ER=new du(3e4,6e4);function Dt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ot(t,e,n,r,i={}){return Yb(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=la(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},s);return GN()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&aa(t.emulatorConfig.host)&&(c.credentials="include"),Qb.fetch()(await Xb(t,t.config.apiHost,n,a),c)})}async function Yb(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},wR),e);try{const i=new bR(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Ya(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ya(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Ya(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Ya(t,"user-disabled",o);const d=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw sy(t,d,c);Kn(t,d)}}catch(i){if(i instanceof si)throw i;Kn(t,"network-request-failed",{message:String(i)})}}async function oi(t,e,n,r,i={}){const s=await Ot(t,e,n,r,i);return"mfaPendingCredential"in s&&Kn(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function Xb(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?ly(t.config,i):`${t.config.apiScheme}://${i}`;return _R.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function TR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class bR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Pn(this.auth,"network-request-failed")),ER.get())})}}function Ya(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Pn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(t){return t!==void 0&&t.getResponse!==void 0}function Zw(t){return t!==void 0&&t.enterprise!==void 0}class Jb{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return TR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IR(t){return(await Ot(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function Zb(t,e){return Ot(t,"GET","/v2/recaptchaConfig",Dt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PR(t,e){return Ot(t,"POST","/v1/accounts:delete",e)}async function xR(t,e){return Ot(t,"POST","/v1/accounts:update",e)}async function Ed(t,e){return Ot(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ml(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function SR(t,e=!1){const n=_e(t),r=await n.getIdToken(e),i=yh(r);J(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ml(Xf(i.auth_time)),issuedAtTime:ml(Xf(i.iat)),expirationTime:ml(Xf(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Xf(t){return Number(t)*1e3}function yh(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Dc("JWT malformed, contained fewer than 3 sections"),null;try{const i=Lb(n);return i?JSON.parse(i):(Dc("Failed to decode base64 JWT payload"),null)}catch(i){return Dc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function e_(t){const e=yh(t);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ms(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof si&&CR(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function CR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ml(this.lastLoginAt),this.creationTime=ml(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gl(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Ms(t,Ed(n,{idToken:r}));J(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?eI(s.providerUserInfo):[],a=NR(t.providerData,o),u=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=u?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new _m(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function AR(t){const e=_e(t);await Gl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function NR(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function eI(t){return t.map(e=>{var{providerId:n}=e,r=iy(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RR(t,e){const n=await Yb(t,{},async()=>{const r=la({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await Xb(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:a,body:r};return t.emulatorConfig&&aa(t.emulatorConfig.host)&&(u.credentials="include"),Qb.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function DR(t,e){return Ot(t,"POST","/v2/accounts:revokeToken",Dt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):e_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){J(e.length!==0,"internal-error");const n=e_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await RR(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ro;return r&&(J(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(J(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(J(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ro,this.toJSON())}_performRefresh(){return jr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(t,e){J(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ir{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=iy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new kR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new _m(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ms(this,this.stsTokenManager.getToken(this.auth,e));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return SR(this,e)}reload(){return AR(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ir(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Gl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ct(this.auth.app))return Promise.reject(cn(this.auth));const e=await this.getIdToken();return await Ms(this,PR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,w=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,b=(o=n.photoURL)!==null&&o!==void 0?o:void 0,P=(a=n.tenantId)!==null&&a!==void 0?a:void 0,N=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,_=(c=n.createdAt)!==null&&c!==void 0?c:void 0,v=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:A,emailVerified:D,isAnonymous:M,providerData:V,stsTokenManager:E}=n;J(A&&E,e,"internal-error");const y=Ro.fromJSON(this.name,E);J(typeof A=="string",e,"internal-error"),pi(h,e.name),pi(m,e.name),J(typeof D=="boolean",e,"internal-error"),J(typeof M=="boolean",e,"internal-error"),pi(w,e.name),pi(b,e.name),pi(P,e.name),pi(N,e.name),pi(_,e.name),pi(v,e.name);const S=new ir({uid:A,auth:e,email:m,emailVerified:D,displayName:h,isAnonymous:M,photoURL:b,phoneNumber:w,tenantId:P,stsTokenManager:y,createdAt:_,lastLoginAt:v});return V&&Array.isArray(V)&&(S.providerData=V.map(k=>Object.assign({},k))),N&&(S._redirectEventId=N),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ro;i.updateFromServerResponse(n);const s=new ir({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Gl(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];J(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?eI(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Ro;a.updateFromIdToken(r);const u=new ir({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new _m(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_=new Map;function Br(t){Zr(t instanceof Function,"Expected a class definition");let e=t_.get(t);return e?(Zr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,t_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}tI.type="NONE";const n_=tI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(t,e,n){return`firebase:${t}:${e}:${n}`}class Do{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Oc(this.userKey,i.apiKey,s),this.fullPersistenceKey=Oc("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ed(this.auth,{idToken:e}).catch(()=>{});return n?ir._fromGetAccountInfoResponse(this.auth,n,e):null}return ir._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Do(Br(n_),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Br(n_);const o=Oc(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){let h;if(typeof d=="string"){const m=await Ed(e,{idToken:d}).catch(()=>{});if(!m)break;h=await ir._fromGetAccountInfoResponse(e,m,d)}else h=ir._fromJSON(e,d);c!==s&&(a=h),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Do(s,e,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Do(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(aI(e))return"Blackberry";if(lI(e))return"Webos";if(rI(e))return"Safari";if((e.includes("chrome/")||iI(e))&&!e.includes("edge/"))return"Chrome";if(oI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function nI(t=rn()){return/firefox\//i.test(t)}function rI(t=rn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function iI(t=rn()){return/crios\//i.test(t)}function sI(t=rn()){return/iemobile/i.test(t)}function oI(t=rn()){return/android/i.test(t)}function aI(t=rn()){return/blackberry/i.test(t)}function lI(t=rn()){return/webos/i.test(t)}function uy(t=rn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function OR(t=rn()){var e;return uy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function LR(){return YN()&&document.documentMode===10}function uI(t=rn()){return uy(t)||oI(t)||lI(t)||aI(t)||/windows phone/i.test(t)||sI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(t,e=[]){let n;switch(t){case"Browser":n=r_(rn());break;case"Worker":n=`${r_(rn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ua}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VR(t,e={}){return Ot(t,"GET","/v2/passwordPolicy",Dt(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=6;class UR{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:FR,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new i_(this),this.idTokenSubscription=new i_(this),this.beforeStateQueue=new MR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Kb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Br(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Do.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ed(this,{idToken:e}),r=await ir._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ct(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Gl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=vR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ct(this.app))return Promise.reject(cn(this));const n=e?_e(e):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ct(this.app)?Promise.reject(cn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ct(this.app)?Promise.reject(cn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Br(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await VR(this),n=new UR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new cu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await DR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Br(e)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await Do.create(this,[Br(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(Ct(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&gR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ut(t){return _e(t)}class i_{constructor(e){this.auth=e,this.observer=null,this.addObserver=i2(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jR(t){hu=t}function cy(t){return hu.loadJS(t)}function BR(){return hu.recaptchaV2Script}function zR(){return hu.recaptchaEnterpriseScript}function WR(){return hu.gapiScript}function dI(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=500,qR=6e4,cc=1e12;class GR{constructor(e){this.auth=e,this.counter=cc,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new YR(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||cc;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||cc;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||cc;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class KR{constructor(){this.enterprise=new QR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class QR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class YR{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;J(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=XR(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},qR)},HR))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function XR(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const JR="recaptcha-enterprise",gl="NO_RECAPTCHA";class hI{constructor(e){this.type=JR,this.auth=Ut(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{Zb(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new Jb(u);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(u=>{a(u)})})}function i(s,o,a){const u=window.grecaptcha;Zw(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(gl)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new KR().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&Zw(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=zR();u.length!==0&&(u+=a),cy(u).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Ua(t,e,n,r=!1,i=!1){const s=new hI(t);let o;if(i)o=gl;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const u=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Bi(t,e,n,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Ua(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await Ua(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){const a=await Ua(t,e,n);return r(t,a).catch(async u=>{var c;if(((c=t._getRecaptchaConfig())===null||c===void 0?void 0:c.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const d=await Ua(t,e,n,!1,!0);return r(t,d)}return Promise.reject(u)})}else{const a=await Ua(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")}async function ZR(t){const e=Ut(t),n=await Zb(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Jb(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new hI(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(t,e){const n=ry(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Os(s,e??{}))return i;Kn(i,"already-initialized")}return n.initialize({options:e})}function tD(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Br);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function nD(t,e,n){const r=Ut(t);J(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=fI(e),{host:o,port:a}=rD(e),u=a===null?"":`:${a}`,c={url:`${s}//${o}${u}/`},d=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){J(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),J(Os(c,r.config.emulator)&&Os(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,aa(o)?(Ub(`${s}//${o}${u}`),$b("Auth",!0)):i||iD()}function fI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function rD(t){const e=fI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:s_(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:s_(o)}}}function s_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function iD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return jr("not implemented")}_getIdTokenResponse(e){return jr("not implemented")}_linkToIdToken(e,n){return jr("not implemented")}_getReauthenticationResolver(e){return jr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sD(t,e){return Ot(t,"POST","/v1/accounts:resetPassword",Dt(t,e))}async function oD(t,e){return Ot(t,"POST","/v1/accounts:update",e)}async function aD(t,e){return Ot(t,"POST","/v1/accounts:signUp",e)}async function lD(t,e){return Ot(t,"POST","/v1/accounts:update",Dt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uD(t,e){return oi(t,"POST","/v1/accounts:signInWithPassword",Dt(t,e))}async function wh(t,e){return Ot(t,"POST","/v1/accounts:sendOobCode",Dt(t,e))}async function cD(t,e){return wh(t,e)}async function dD(t,e){return wh(t,e)}async function hD(t,e){return wh(t,e)}async function fD(t,e){return wh(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pD(t,e){return oi(t,"POST","/v1/accounts:signInWithEmailLink",Dt(t,e))}async function mD(t,e){return oi(t,"POST","/v1/accounts:signInWithEmailLink",Dt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl extends vh{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Kl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Kl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bi(e,n,"signInWithPassword",uD,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return pD(e,{email:this._email,oobCode:this._password});default:Kn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bi(e,r,"signUpPassword",aD,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return mD(e,{idToken:n,email:this._email,oobCode:this._password});default:Kn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oo(t,e){return oi(t,"POST","/v1/accounts:signInWithIdp",Dt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD="http://localhost";class ei extends vh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ei(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Kn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=iy(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new ei(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Oo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Oo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Oo(e,n)}buildRequest(){const e={requestUri:gD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=la(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o_(t,e){return Ot(t,"POST","/v1/accounts:sendVerificationCode",Dt(t,e))}async function yD(t,e){return oi(t,"POST","/v1/accounts:signInWithPhoneNumber",Dt(t,e))}async function vD(t,e){const n=await oi(t,"POST","/v1/accounts:signInWithPhoneNumber",Dt(t,e));if(n.temporaryProof)throw Ya(t,"account-exists-with-different-credential",n);return n}const wD={USER_NOT_FOUND:"user-not-found"};async function _D(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return oi(t,"POST","/v1/accounts:signInWithPhoneNumber",Dt(t,n),wD)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl extends vh{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new yl({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new yl({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return yD(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return vD(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return _D(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new yl({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function TD(t){const e=Ka(Qa(t)).link,n=e?Ka(Qa(e)).deep_link_id:null,r=Ka(Qa(t)).deep_link_id;return(r?Ka(Qa(r)).link:null)||r||n||e||t}class _h{constructor(e){var n,r,i,s,o,a;const u=Ka(Qa(e)),c=(n=u.apiKey)!==null&&n!==void 0?n:null,d=(r=u.oobCode)!==null&&r!==void 0?r:null,h=ED((i=u.mode)!==null&&i!==void 0?i:null);J(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=TD(e);try{return new _h(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(){this.providerId=qs.PROVIDER_ID}static credential(e,n){return Kl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=_h.parseLink(n);return J(r,"argument-error"),Kl._fromEmailAndCode(e,r.code,r.tenantId)}}qs.PROVIDER_ID="password";qs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";qs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da extends ca{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Lc extends da{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return J("providerId"in n&&"signInMethod"in n,"argument-error"),ei._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return J(e.idToken||e.accessToken,"argument-error"),ei._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Lc.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Lc.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new Lc(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends da{constructor(){super("facebook.com")}static credential(e){return ei._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ei.credential(e.oauthAccessToken)}catch{return null}}}Ei.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ei.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends da{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ei._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return wr.credential(n,r)}catch{return null}}}wr.GOOGLE_SIGN_IN_METHOD="google.com";wr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends da{constructor(){super("github.com")}static credential(e){return ei._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ti.credential(e.oauthAccessToken)}catch{return null}}}Ti.GITHUB_SIGN_IN_METHOD="github.com";Ti.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends da{constructor(){super("twitter.com")}static credential(e,n){return ei._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return bi.credential(n,r)}catch{return null}}}bi.TWITTER_SIGN_IN_METHOD="twitter.com";bi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pI(t,e){return oi(t,"POST","/v1/accounts:signUp",Dt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await ir._fromIdTokenResponse(e,r,i),o=a_(r);return new kr({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=a_(r);return new kr({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function a_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H5(t){var e;if(Ct(t.app))return Promise.reject(cn(t));const n=Ut(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new kr({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await pI(n,{returnSecureToken:!0}),i=await kr._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td extends si{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Td.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Td(e,n,r,i)}}function mI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Td._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q5(t,e){const n=_e(t);await Eh(!0,n,e);const{providerUserInfo:r}=await xR(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=gI(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function yI(t,e,n=!1){const r=await Ms(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return kr._forOperation(t,"link",r)}async function Eh(t,e,n){await Gl(e);const r=gI(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";J(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bD(t,e,n=!1){const{auth:r}=t;if(Ct(r.app))return Promise.reject(cn(r));const i="reauthenticate";try{const s=await Ms(t,mI(r,i,e,t),n);J(s.idToken,r,"internal-error");const o=yh(s.idToken);J(o,r,"internal-error");const{sub:a}=o;return J(t.uid===a,r,"user-mismatch"),kr._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Kn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vI(t,e,n=!1){if(Ct(t.app))return Promise.reject(cn(t));const r="signIn",i=await mI(t,r,e),s=await kr._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function Th(t,e){return vI(Ut(t),e)}async function ID(t,e){const n=_e(t);return await Eh(!1,n,e.providerId),yI(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PD(t,e){return oi(t,"POST","/v1/accounts:signInWithCustomToken",Dt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G5(t,e){if(Ct(t.app))return Promise.reject(cn(t));const n=Ut(t),r=await PD(n,{token:e,returnSecureToken:!0}),i=await kr._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bh(t,e,n){var r;J(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),J(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),J(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(J(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(J(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dy(t){const e=Ut(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function K5(t,e,n){const r=Ut(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&bh(r,i,n),await Bi(r,i,"getOobCode",dD,"EMAIL_PASSWORD_PROVIDER")}async function Q5(t,e,n){await sD(_e(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&dy(t),r})}async function Y5(t,e){await lD(_e(t),{oobCode:e})}async function xD(t,e,n){if(Ct(t.app))return Promise.reject(cn(t));const r=Ut(t),o=await Bi(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",pI,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&dy(t),u}),a=await kr._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function SD(t,e,n){return Ct(t.app)?Promise.reject(cn(t)):Th(_e(t),qs.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&dy(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X5(t,e,n){const r=Ut(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,a){J(a.handleCodeInApp,r,"argument-error"),a&&bh(r,o,a)}s(i,n),await Bi(r,i,"getOobCode",hD,"EMAIL_PASSWORD_PROVIDER")}function J5(t,e){const n=_h.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function Z5(t,e,n){if(Ct(t.app))return Promise.reject(cn(t));const r=_e(t),i=qs.credentialWithLink(e,n||ql());return J(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Th(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CD(t,e){return Ot(t,"POST","/v1/accounts:createAuthUri",Dt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e$(t,e){const n=ay()?ql():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await CD(_e(t),r);return i||[]}async function t$(t,e){const n=_e(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&bh(n.auth,i,e);const{email:s}=await cD(n.auth,i);s!==t.email&&await t.reload()}async function n$(t,e,n){const r=_e(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&bh(r.auth,s,n);const{email:o}=await fD(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kD(t,e){return Ot(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AD(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=_e(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Ms(r,kD(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:u})=>u==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function r$(t,e){const n=_e(t);return Ct(n.auth.app)?Promise.reject(cn(n.auth)):wI(n,e,null)}function i$(t,e){return wI(_e(t),null,e)}async function wI(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await Ms(t,oD(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ND(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const o=(n=(e=yh(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new Lo(s,a)}}if(!r)return null;switch(r){case"facebook.com":return new RD(s,i);case"github.com":return new DD(s,i);case"google.com":return new OD(s,i);case"twitter.com":return new LD(s,i,t.screenName||null);case"custom":case"anonymous":return new Lo(s,null);default:return new Lo(s,r,i)}}class Lo{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class _I extends Lo{constructor(e,n,r,i){super(e,n,r),this.username=i}}class RD extends Lo{constructor(e,n){super(e,"facebook.com",n)}}class DD extends _I{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class OD extends Lo{constructor(e,n){super(e,"google.com",n)}}class LD extends _I{constructor(e,n,r){super(e,"twitter.com",n,r)}}function s$(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:ND(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o$(t,e){return _e(t).setPersistence(e)}function MD(t,e,n,r){return _e(t).onIdTokenChanged(e,n,r)}function VD(t,e,n){return _e(t).beforeAuthStateChanged(e,n)}function EI(t,e,n,r){return _e(t).onAuthStateChanged(e,n,r)}function FD(t){return _e(t).signOut()}function a$(t,e){return Ut(t).revokeAccessToken(e)}async function l$(t){return _e(t).delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(t,e){return Ot(t,"POST","/v2/accounts/mfaEnrollment:start",Dt(t,e))}const bd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(bd,"1"),this.storage.removeItem(bd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD=1e3,$D=10;class bI extends TI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=uI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);LR()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,$D):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},UD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}bI.type="LOCAL";const jD=bI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II extends TI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}II.type="SESSION";const PI=II;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Ih(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),u=await BD(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ih.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const c=Ph("",20);i.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const m=h;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(d),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(){return window}function WD(t){wt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(){return typeof wt().WorkerGlobalScope<"u"&&typeof wt().importScripts=="function"}async function HD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function GD(){return hy()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI="firebaseLocalStorageDb",KD=1,Id="firebaseLocalStorage",SI="fbase_key";class fu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function xh(t,e){return t.transaction([Id],e?"readwrite":"readonly").objectStore(Id)}function QD(){const t=indexedDB.deleteDatabase(xI);return new fu(t).toPromise()}function Em(){const t=indexedDB.open(xI,KD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Id,{keyPath:SI})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Id)?e(r):(r.close(),await QD(),e(await Em()))})})}async function u_(t,e,n){const r=xh(t,!0).put({[SI]:e,value:n});return new fu(r).toPromise()}async function YD(t,e){const n=xh(t,!1).get(e),r=await new fu(n).toPromise();return r===void 0?null:r.value}function c_(t,e){const n=xh(t,!0).delete(e);return new fu(n).toPromise()}const XD=800,JD=3;class CI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Em(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>JD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hy()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ih._getInstance(GD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await HD(),!this.activeServiceWorker)return;this.sender=new zD(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||qD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Em();return await u_(e,bd,"1"),await c_(e,bd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>u_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>YD(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>c_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=xh(i,!1).getAll();return new fu(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),XD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}CI.type="LOCAL";const ZD=CI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_(t,e){return Ot(t,"POST","/v2/accounts/mfaSignIn:start",Dt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf=dI("rcb"),eO=new du(3e4,6e4);class tO{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=wt().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return J(nO(n),e,"argument-error"),this.shouldResolveImmediately(n)&&Jw(wt().grecaptcha)?Promise.resolve(wt().grecaptcha):new Promise((r,i)=>{const s=wt().setTimeout(()=>{i(Pn(e,"network-request-failed"))},eO.get());wt()[Jf]=()=>{wt().clearTimeout(s),delete wt()[Jf];const a=wt().grecaptcha;if(!a||!Jw(a)){i(Pn(e,"internal-error"));return}const u=a.render;a.render=(c,d)=>{const h=u(c,d);return this.counter++,h},this.hostLanguage=n,r(a)};const o=`${BR()}?${la({onload:Jf,render:"explicit",hl:n})}`;cy(o).catch(()=>{clearTimeout(s),i(Pn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=wt().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function nO(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class rO{async load(e){return new GR(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl="recaptcha",iO={theme:"light",type:"image"};class u${constructor(e,n,r=Object.assign({},iO)){this.parameters=r,this.type=vl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ut(e),this.isInvisible=this.parameters.size==="invisible",J(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;J(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new rO:new tO,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){J(!this.parameters.sitekey,this.auth,"argument-error"),J(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),J(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=wt()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){J(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){J(ay()&&!hy(),this.auth,"internal-error"),await sO(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await IR(this.auth);J(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return J(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function sO(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=yl._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function c$(t,e,n){if(Ct(t.app))return Promise.reject(cn(t));const r=Ut(t),i=await AI(r,e,_e(n));return new kI(i,s=>Th(r,s))}async function d$(t,e,n){const r=_e(t);await Eh(!1,r,"phone");const i=await AI(r.auth,e,_e(n));return new kI(i,s=>ID(r,s))}async function AI(t,e,n){var r;if(!t._getRecaptchaConfig())try{await ZR(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const s=i.session;if("phoneNumber"in i){J(s.type==="enroll",t,"internal-error");const o={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Bi(t,o,"mfaSmsEnrollment",async(d,h)=>{if(h.phoneEnrollmentInfo.captchaResponse===gl){J((n==null?void 0:n.type)===vl,d,"argument-error");const m=await Zf(d,h,n);return l_(d,m)}return l_(d,h)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).phoneSessionInfo.sessionInfo}else{J(s.type==="signin",t,"internal-error");const o=((r=i.multiFactorHint)===null||r===void 0?void 0:r.uid)||i.multiFactorUid;J(o,t,"missing-multi-factor-info");const a={mfaPendingCredential:s.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Bi(t,a,"mfaSmsSignIn",async(h,m)=>{if(m.phoneSignInInfo.captchaResponse===gl){J((n==null?void 0:n.type)===vl,h,"argument-error");const w=await Zf(h,m,n);return d_(h,w)}return d_(h,m)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Bi(t,s,"sendVerificationCode",async(c,d)=>{if(d.captchaResponse===gl){J((n==null?void 0:n.type)===vl,c,"argument-error");const h=await Zf(c,d,n);return o_(c,h)}return o_(c,d)},"PHONE_PROVIDER").catch(c=>Promise.reject(c))).sessionInfo}}finally{n==null||n._reset()}}async function Zf(t,e,n){J(n.type===vl,t,"argument-error");const r=await n.verify();J(typeof r=="string",t,"argument-error");const i=Object.assign({},e);if("phoneEnrollmentInfo"in i){const s=i.phoneEnrollmentInfo.phoneNumber,o=i.phoneEnrollmentInfo.captchaResponse,a=i.phoneEnrollmentInfo.clientType,u=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:r,captchaResponse:o,clientType:a,recaptchaVersion:u}}),i}else if("phoneSignInInfo"in i){const s=i.phoneSignInInfo.captchaResponse,o=i.phoneSignInInfo.clientType,a=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:s,clientType:o,recaptchaVersion:a}}),i}else return Object.assign(i,{recaptchaToken:r}),i}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(t,e){return e?Br(e):(J(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy extends vh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Oo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Oo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function oO(t){return vI(t.auth,new fy(t),t.bypassAuthState)}function aO(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),bD(n,new fy(t),t.bypassAuthState)}async function lO(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),yI(n,new fy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return oO;case"linkViaPopup":case"linkViaRedirect":return lO;case"reauthViaPopup":case"reauthViaRedirect":return aO;default:Kn(this.auth,"internal-error")}}resolve(e){Zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO=new du(2e3,1e4);async function cO(t,e,n){if(Ct(t.app))return Promise.reject(Pn(t,"operation-not-supported-in-this-environment"));const r=Ut(t);gh(t,e,ca);const i=pu(r,n);return new ki(r,"signInViaPopup",e,i).executeNotNull()}async function h$(t,e,n){const r=_e(t);gh(r.auth,e,ca);const i=pu(r.auth,n);return new ki(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class ki extends NI{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ki.currentPopupAction&&ki.currentPopupAction.cancel(),ki.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return J(e,this.auth,"internal-error"),e}async onExecution(){Zr(this.filter.length===1,"Popup operations only handle one event");const e=Ph();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Pn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Pn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ki.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,uO.get())};e()}}ki.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO="pendingRedirect",Mc=new Map;class hO extends NI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Mc.get(this.auth._key());if(!e){try{const r=await fO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Mc.set(this.auth._key(),e)}return this.bypassAuthState||Mc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function fO(t,e){const n=OI(e),r=DI(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function RI(t,e){return DI(t)._set(OI(e),"true")}function pO(t,e){Mc.set(t._key(),e)}function DI(t){return Br(t._redirectPersistence)}function OI(t){return Oc(dO,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mO(t,e,n){return gO(t,e,n)}async function gO(t,e,n){if(Ct(t.app))return Promise.reject(cn(t));const r=Ut(t);gh(t,e,ca),await r._initializationPromise;const i=pu(r,n);return await RI(i,r),i._openRedirect(r,e,"signInViaRedirect")}function f$(t,e,n){return yO(t,e,n)}async function yO(t,e,n){const r=_e(t);gh(r.auth,e,ca),await r.auth._initializationPromise;const i=pu(r.auth,n);await Eh(!1,r,e.providerId),await RI(i,r.auth);const s=await wO(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function vO(t,e){return await Ut(t)._initializationPromise,LI(t,e,!1)}async function LI(t,e,n=!1){if(Ct(t.app))return Promise.reject(cn(t));const r=Ut(t),i=pu(r,e),o=await new hO(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function wO(t){const e=Ph(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O=10*60*1e3;class EO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!TO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!MI(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Pn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_O&&this.cachedEventUids.clear(),this.cachedEventUids.has(h_(e))}saveEventToCache(e){this.cachedEventUids.add(h_(e)),this.lastProcessedEventTime=Date.now()}}function h_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function MI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function TO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return MI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bO(t,e={}){return Ot(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,PO=/^https?/;async function xO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await bO(t);for(const n of e)try{if(SO(n))return}catch{}Kn(t,"unauthorized-domain")}function SO(t){const e=ql(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!PO.test(n))return!1;if(IO.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO=new du(3e4,6e4);function f_(){const t=wt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function kO(t){return new Promise((e,n)=>{var r,i,s;function o(){f_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{f_(),n(Pn(t,"network-request-failed"))},timeout:CO.get()})}if(!((i=(r=wt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=wt().gapi)===null||s===void 0)&&s.load)o();else{const a=dI("iframefcb");return wt()[a]=()=>{gapi.load?o():n(Pn(t,"network-request-failed"))},cy(`${WR()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw Vc=null,e})}let Vc=null;function AO(t){return Vc=Vc||kO(t),Vc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO=new du(5e3,15e3),RO="__/auth/iframe",DO="emulator/auth/iframe",OO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function MO(t){const e=t.config;J(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ly(e,DO):`https://${t.config.authDomain}/${RO}`,r={apiKey:e.apiKey,appName:t.name,v:ua},i=LO.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${la(r).slice(1)}`}async function VO(t){const e=await AO(t),n=wt().gapi;return J(n,t,"internal-error"),e.open({where:document.body,url:MO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:OO,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Pn(t,"network-request-failed"),a=wt().setTimeout(()=>{s(o)},NO.get());function u(){wt().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},UO=500,$O=600,jO="_blank",BO="http://localhost";class p_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zO(t,e,n,r=UO,i=$O){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},FO),{width:r.toString(),height:i.toString(),top:s,left:o}),c=rn().toLowerCase();n&&(a=iI(c)?jO:n),nI(c)&&(e=e||BO,u.scrollbars="yes");const d=Object.entries(u).reduce((m,[w,b])=>`${m}${w}=${b},`,"");if(OR(c)&&a!=="_self")return WO(e||"",a),new p_(null);const h=window.open(e||"",a,d);J(h,t,"popup-blocked");try{h.focus()}catch{}return new p_(h)}function WO(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO="__/auth/handler",qO="emulator/auth/handler",GO=encodeURIComponent("fac");async function m_(t,e,n,r,i,s){J(t.config.authDomain,t,"auth-domain-config-required"),J(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ua,eventId:i};if(e instanceof ca){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",r2(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(s||{}))o[d]=h}if(e instanceof da){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const u=await t._getAppCheckToken(),c=u?`#${GO}=${encodeURIComponent(u)}`:"";return`${KO(t)}?${la(a).slice(1)}${c}`}function KO({config:t}){return t.emulator?ly(t,qO):`https://${t.authDomain}/${HO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep="webStorageSupport";class QO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=PI,this._completeRedirectFn=LI,this._overrideRedirectResult=pO}async _openPopup(e,n,r,i){var s;Zr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await m_(e,n,r,ql(),i);return zO(e,o,Ph())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await m_(e,n,r,ql(),i);return WD(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Zr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await VO(e),r=new EO(e);return n.register("authEvent",i=>(J(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ep,{type:ep},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[ep];o!==void 0&&n(!!o),Kn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=xO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return uI()||rI()||uy()}}const YO=QO;var g_="@firebase/auth",y_="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ZO(t){qo(new Ls("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;J(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cI(t)},c=new $R(r,i,s,u);return tD(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),qo(new Ls("auth-internal",e=>{const n=Ut(e.getProvider("auth").getImmediate());return(r=>new XO(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ji(g_,y_,JO(t)),ji(g_,y_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL=5*60,tL=Fb("authIdTokenMaxAge")||eL;let v_=null;const nL=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>tL)return;const i=n==null?void 0:n.token;v_!==i&&(v_=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function VI(t=Wb()){const e=ry(t,"auth");if(e.isInitialized())return e.getImmediate();const n=eD(t,{popupRedirectResolver:YO,persistence:[ZD,jD,PI]}),r=Fb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=nL(s.toString());VD(n,o,()=>o(n.currentUser)),MD(n,a=>o(a))}}const i=Mb("auth");return i&&nD(n,`http://${i}`),n}function rL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}jR({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Pn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",rL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ZO("Browser");var w_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zi,FI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,y){function S(){}S.prototype=y.prototype,E.D=y.prototype,E.prototype=new S,E.prototype.constructor=E,E.C=function(k,R,T){for(var I=Array(arguments.length-2),W=2;W<arguments.length;W++)I[W-2]=arguments[W];return y.prototype[R].apply(k,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,y,S){S||(S=0);var k=Array(16);if(typeof y=="string")for(var R=0;16>R;++R)k[R]=y.charCodeAt(S++)|y.charCodeAt(S++)<<8|y.charCodeAt(S++)<<16|y.charCodeAt(S++)<<24;else for(R=0;16>R;++R)k[R]=y[S++]|y[S++]<<8|y[S++]<<16|y[S++]<<24;y=E.g[0],S=E.g[1],R=E.g[2];var T=E.g[3],I=y+(T^S&(R^T))+k[0]+3614090360&4294967295;y=S+(I<<7&4294967295|I>>>25),I=T+(R^y&(S^R))+k[1]+3905402710&4294967295,T=y+(I<<12&4294967295|I>>>20),I=R+(S^T&(y^S))+k[2]+606105819&4294967295,R=T+(I<<17&4294967295|I>>>15),I=S+(y^R&(T^y))+k[3]+3250441966&4294967295,S=R+(I<<22&4294967295|I>>>10),I=y+(T^S&(R^T))+k[4]+4118548399&4294967295,y=S+(I<<7&4294967295|I>>>25),I=T+(R^y&(S^R))+k[5]+1200080426&4294967295,T=y+(I<<12&4294967295|I>>>20),I=R+(S^T&(y^S))+k[6]+2821735955&4294967295,R=T+(I<<17&4294967295|I>>>15),I=S+(y^R&(T^y))+k[7]+4249261313&4294967295,S=R+(I<<22&4294967295|I>>>10),I=y+(T^S&(R^T))+k[8]+1770035416&4294967295,y=S+(I<<7&4294967295|I>>>25),I=T+(R^y&(S^R))+k[9]+2336552879&4294967295,T=y+(I<<12&4294967295|I>>>20),I=R+(S^T&(y^S))+k[10]+4294925233&4294967295,R=T+(I<<17&4294967295|I>>>15),I=S+(y^R&(T^y))+k[11]+2304563134&4294967295,S=R+(I<<22&4294967295|I>>>10),I=y+(T^S&(R^T))+k[12]+1804603682&4294967295,y=S+(I<<7&4294967295|I>>>25),I=T+(R^y&(S^R))+k[13]+4254626195&4294967295,T=y+(I<<12&4294967295|I>>>20),I=R+(S^T&(y^S))+k[14]+2792965006&4294967295,R=T+(I<<17&4294967295|I>>>15),I=S+(y^R&(T^y))+k[15]+1236535329&4294967295,S=R+(I<<22&4294967295|I>>>10),I=y+(R^T&(S^R))+k[1]+4129170786&4294967295,y=S+(I<<5&4294967295|I>>>27),I=T+(S^R&(y^S))+k[6]+3225465664&4294967295,T=y+(I<<9&4294967295|I>>>23),I=R+(y^S&(T^y))+k[11]+643717713&4294967295,R=T+(I<<14&4294967295|I>>>18),I=S+(T^y&(R^T))+k[0]+3921069994&4294967295,S=R+(I<<20&4294967295|I>>>12),I=y+(R^T&(S^R))+k[5]+3593408605&4294967295,y=S+(I<<5&4294967295|I>>>27),I=T+(S^R&(y^S))+k[10]+38016083&4294967295,T=y+(I<<9&4294967295|I>>>23),I=R+(y^S&(T^y))+k[15]+3634488961&4294967295,R=T+(I<<14&4294967295|I>>>18),I=S+(T^y&(R^T))+k[4]+3889429448&4294967295,S=R+(I<<20&4294967295|I>>>12),I=y+(R^T&(S^R))+k[9]+568446438&4294967295,y=S+(I<<5&4294967295|I>>>27),I=T+(S^R&(y^S))+k[14]+3275163606&4294967295,T=y+(I<<9&4294967295|I>>>23),I=R+(y^S&(T^y))+k[3]+4107603335&4294967295,R=T+(I<<14&4294967295|I>>>18),I=S+(T^y&(R^T))+k[8]+1163531501&4294967295,S=R+(I<<20&4294967295|I>>>12),I=y+(R^T&(S^R))+k[13]+2850285829&4294967295,y=S+(I<<5&4294967295|I>>>27),I=T+(S^R&(y^S))+k[2]+4243563512&4294967295,T=y+(I<<9&4294967295|I>>>23),I=R+(y^S&(T^y))+k[7]+1735328473&4294967295,R=T+(I<<14&4294967295|I>>>18),I=S+(T^y&(R^T))+k[12]+2368359562&4294967295,S=R+(I<<20&4294967295|I>>>12),I=y+(S^R^T)+k[5]+4294588738&4294967295,y=S+(I<<4&4294967295|I>>>28),I=T+(y^S^R)+k[8]+2272392833&4294967295,T=y+(I<<11&4294967295|I>>>21),I=R+(T^y^S)+k[11]+1839030562&4294967295,R=T+(I<<16&4294967295|I>>>16),I=S+(R^T^y)+k[14]+4259657740&4294967295,S=R+(I<<23&4294967295|I>>>9),I=y+(S^R^T)+k[1]+2763975236&4294967295,y=S+(I<<4&4294967295|I>>>28),I=T+(y^S^R)+k[4]+1272893353&4294967295,T=y+(I<<11&4294967295|I>>>21),I=R+(T^y^S)+k[7]+4139469664&4294967295,R=T+(I<<16&4294967295|I>>>16),I=S+(R^T^y)+k[10]+3200236656&4294967295,S=R+(I<<23&4294967295|I>>>9),I=y+(S^R^T)+k[13]+681279174&4294967295,y=S+(I<<4&4294967295|I>>>28),I=T+(y^S^R)+k[0]+3936430074&4294967295,T=y+(I<<11&4294967295|I>>>21),I=R+(T^y^S)+k[3]+3572445317&4294967295,R=T+(I<<16&4294967295|I>>>16),I=S+(R^T^y)+k[6]+76029189&4294967295,S=R+(I<<23&4294967295|I>>>9),I=y+(S^R^T)+k[9]+3654602809&4294967295,y=S+(I<<4&4294967295|I>>>28),I=T+(y^S^R)+k[12]+3873151461&4294967295,T=y+(I<<11&4294967295|I>>>21),I=R+(T^y^S)+k[15]+530742520&4294967295,R=T+(I<<16&4294967295|I>>>16),I=S+(R^T^y)+k[2]+3299628645&4294967295,S=R+(I<<23&4294967295|I>>>9),I=y+(R^(S|~T))+k[0]+4096336452&4294967295,y=S+(I<<6&4294967295|I>>>26),I=T+(S^(y|~R))+k[7]+1126891415&4294967295,T=y+(I<<10&4294967295|I>>>22),I=R+(y^(T|~S))+k[14]+2878612391&4294967295,R=T+(I<<15&4294967295|I>>>17),I=S+(T^(R|~y))+k[5]+4237533241&4294967295,S=R+(I<<21&4294967295|I>>>11),I=y+(R^(S|~T))+k[12]+1700485571&4294967295,y=S+(I<<6&4294967295|I>>>26),I=T+(S^(y|~R))+k[3]+2399980690&4294967295,T=y+(I<<10&4294967295|I>>>22),I=R+(y^(T|~S))+k[10]+4293915773&4294967295,R=T+(I<<15&4294967295|I>>>17),I=S+(T^(R|~y))+k[1]+2240044497&4294967295,S=R+(I<<21&4294967295|I>>>11),I=y+(R^(S|~T))+k[8]+1873313359&4294967295,y=S+(I<<6&4294967295|I>>>26),I=T+(S^(y|~R))+k[15]+4264355552&4294967295,T=y+(I<<10&4294967295|I>>>22),I=R+(y^(T|~S))+k[6]+2734768916&4294967295,R=T+(I<<15&4294967295|I>>>17),I=S+(T^(R|~y))+k[13]+1309151649&4294967295,S=R+(I<<21&4294967295|I>>>11),I=y+(R^(S|~T))+k[4]+4149444226&4294967295,y=S+(I<<6&4294967295|I>>>26),I=T+(S^(y|~R))+k[11]+3174756917&4294967295,T=y+(I<<10&4294967295|I>>>22),I=R+(y^(T|~S))+k[2]+718787259&4294967295,R=T+(I<<15&4294967295|I>>>17),I=S+(T^(R|~y))+k[9]+3951481745&4294967295,E.g[0]=E.g[0]+y&4294967295,E.g[1]=E.g[1]+(R+(I<<21&4294967295|I>>>11))&4294967295,E.g[2]=E.g[2]+R&4294967295,E.g[3]=E.g[3]+T&4294967295}r.prototype.u=function(E,y){y===void 0&&(y=E.length);for(var S=y-this.blockSize,k=this.B,R=this.h,T=0;T<y;){if(R==0)for(;T<=S;)i(this,E,T),T+=this.blockSize;if(typeof E=="string"){for(;T<y;)if(k[R++]=E.charCodeAt(T++),R==this.blockSize){i(this,k),R=0;break}}else for(;T<y;)if(k[R++]=E[T++],R==this.blockSize){i(this,k),R=0;break}}this.h=R,this.o+=y},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var y=1;y<E.length-8;++y)E[y]=0;var S=8*this.o;for(y=E.length-8;y<E.length;++y)E[y]=S&255,S/=256;for(this.u(E),E=Array(16),y=S=0;4>y;++y)for(var k=0;32>k;k+=8)E[S++]=this.g[y]>>>k&255;return E};function s(E,y){var S=a;return Object.prototype.hasOwnProperty.call(S,E)?S[E]:S[E]=y(E)}function o(E,y){this.h=y;for(var S=[],k=!0,R=E.length-1;0<=R;R--){var T=E[R]|0;k&&T==y||(S[R]=T,k=!1)}this.g=S}var a={};function u(E){return-128<=E&&128>E?s(E,function(y){return new o([y|0],0>y?-1:0)}):new o([E|0],0>E?-1:0)}function c(E){if(isNaN(E)||!isFinite(E))return h;if(0>E)return N(c(-E));for(var y=[],S=1,k=0;E>=S;k++)y[k]=E/S|0,S*=4294967296;return new o(y,0)}function d(E,y){if(E.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(E.charAt(0)=="-")return N(d(E.substring(1),y));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=c(Math.pow(y,8)),k=h,R=0;R<E.length;R+=8){var T=Math.min(8,E.length-R),I=parseInt(E.substring(R,R+T),y);8>T?(T=c(Math.pow(y,T)),k=k.j(T).add(c(I))):(k=k.j(S),k=k.add(c(I)))}return k}var h=u(0),m=u(1),w=u(16777216);t=o.prototype,t.m=function(){if(P(this))return-N(this).m();for(var E=0,y=1,S=0;S<this.g.length;S++){var k=this.i(S);E+=(0<=k?k:4294967296+k)*y,y*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(b(this))return"0";if(P(this))return"-"+N(this).toString(E);for(var y=c(Math.pow(E,6)),S=this,k="";;){var R=D(S,y).g;S=_(S,R.j(y));var T=((0<S.g.length?S.g[0]:S.h)>>>0).toString(E);if(S=R,b(S))return T+k;for(;6>T.length;)T="0"+T;k=T+k}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function b(E){if(E.h!=0)return!1;for(var y=0;y<E.g.length;y++)if(E.g[y]!=0)return!1;return!0}function P(E){return E.h==-1}t.l=function(E){return E=_(this,E),P(E)?-1:b(E)?0:1};function N(E){for(var y=E.g.length,S=[],k=0;k<y;k++)S[k]=~E.g[k];return new o(S,~E.h).add(m)}t.abs=function(){return P(this)?N(this):this},t.add=function(E){for(var y=Math.max(this.g.length,E.g.length),S=[],k=0,R=0;R<=y;R++){var T=k+(this.i(R)&65535)+(E.i(R)&65535),I=(T>>>16)+(this.i(R)>>>16)+(E.i(R)>>>16);k=I>>>16,T&=65535,I&=65535,S[R]=I<<16|T}return new o(S,S[S.length-1]&-2147483648?-1:0)};function _(E,y){return E.add(N(y))}t.j=function(E){if(b(this)||b(E))return h;if(P(this))return P(E)?N(this).j(N(E)):N(N(this).j(E));if(P(E))return N(this.j(N(E)));if(0>this.l(w)&&0>E.l(w))return c(this.m()*E.m());for(var y=this.g.length+E.g.length,S=[],k=0;k<2*y;k++)S[k]=0;for(k=0;k<this.g.length;k++)for(var R=0;R<E.g.length;R++){var T=this.i(k)>>>16,I=this.i(k)&65535,W=E.i(R)>>>16,H=E.i(R)&65535;S[2*k+2*R]+=I*H,v(S,2*k+2*R),S[2*k+2*R+1]+=T*H,v(S,2*k+2*R+1),S[2*k+2*R+1]+=I*W,v(S,2*k+2*R+1),S[2*k+2*R+2]+=T*W,v(S,2*k+2*R+2)}for(k=0;k<y;k++)S[k]=S[2*k+1]<<16|S[2*k];for(k=y;k<2*y;k++)S[k]=0;return new o(S,0)};function v(E,y){for(;(E[y]&65535)!=E[y];)E[y+1]+=E[y]>>>16,E[y]&=65535,y++}function A(E,y){this.g=E,this.h=y}function D(E,y){if(b(y))throw Error("division by zero");if(b(E))return new A(h,h);if(P(E))return y=D(N(E),y),new A(N(y.g),N(y.h));if(P(y))return y=D(E,N(y)),new A(N(y.g),y.h);if(30<E.g.length){if(P(E)||P(y))throw Error("slowDivide_ only works with positive integers.");for(var S=m,k=y;0>=k.l(E);)S=M(S),k=M(k);var R=V(S,1),T=V(k,1);for(k=V(k,2),S=V(S,2);!b(k);){var I=T.add(k);0>=I.l(E)&&(R=R.add(S),T=I),k=V(k,1),S=V(S,1)}return y=_(E,R.j(y)),new A(R,y)}for(R=h;0<=E.l(y);){for(S=Math.max(1,Math.floor(E.m()/y.m())),k=Math.ceil(Math.log(S)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),T=c(S),I=T.j(y);P(I)||0<I.l(E);)S-=k,T=c(S),I=T.j(y);b(T)&&(T=m),R=R.add(T),E=_(E,I)}return new A(R,E)}t.A=function(E){return D(this,E).h},t.and=function(E){for(var y=Math.max(this.g.length,E.g.length),S=[],k=0;k<y;k++)S[k]=this.i(k)&E.i(k);return new o(S,this.h&E.h)},t.or=function(E){for(var y=Math.max(this.g.length,E.g.length),S=[],k=0;k<y;k++)S[k]=this.i(k)|E.i(k);return new o(S,this.h|E.h)},t.xor=function(E){for(var y=Math.max(this.g.length,E.g.length),S=[],k=0;k<y;k++)S[k]=this.i(k)^E.i(k);return new o(S,this.h^E.h)};function M(E){for(var y=E.g.length+1,S=[],k=0;k<y;k++)S[k]=E.i(k)<<1|E.i(k-1)>>>31;return new o(S,E.h)}function V(E,y){var S=y>>5;y%=32;for(var k=E.g.length-S,R=[],T=0;T<k;T++)R[T]=0<y?E.i(T+S)>>>y|E.i(T+S+1)<<32-y:E.i(T+S);return new o(R,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,FI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,zi=o}).apply(typeof w_<"u"?w_:typeof self<"u"?self:typeof window<"u"?window:{});var dc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var UI,Xa,$I,Fc,Tm,jI,BI,zI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,g){return l==Array.prototype||l==Object.prototype||(l[f]=g.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof dc=="object"&&dc];for(var f=0;f<l.length;++f){var g=l[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(l,f){if(f)e:{var g=r;l=l.split(".");for(var C=0;C<l.length-1;C++){var F=l[C];if(!(F in g))break e;g=g[F]}l=l[l.length-1],C=g[l],f=f(C),f!=C&&f!=null&&e(g,l,{configurable:!0,writable:!0,value:f})}}function s(l,f){l instanceof String&&(l+="");var g=0,C=!1,F={next:function(){if(!C&&g<l.length){var $=g++;return{value:f($,l[$]),done:!1}}return C=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}i("Array.prototype.values",function(l){return l||function(){return s(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function c(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function d(l,f,g){return l.call.apply(l.bind,arguments)}function h(l,f,g){if(!l)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,C),l.apply(f,F)}}return function(){return l.apply(f,arguments)}}function m(l,f,g){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,m.apply(null,arguments)}function w(l,f){var g=Array.prototype.slice.call(arguments,1);return function(){var C=g.slice();return C.push.apply(C,arguments),l.apply(this,C)}}function b(l,f){function g(){}g.prototype=f.prototype,l.aa=f.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(C,F,$){for(var Y=Array(arguments.length-2),We=2;We<arguments.length;We++)Y[We-2]=arguments[We];return f.prototype[F].apply(C,Y)}}function P(l){const f=l.length;if(0<f){const g=Array(f);for(let C=0;C<f;C++)g[C]=l[C];return g}return[]}function N(l,f){for(let g=1;g<arguments.length;g++){const C=arguments[g];if(u(C)){const F=l.length||0,$=C.length||0;l.length=F+$;for(let Y=0;Y<$;Y++)l[F+Y]=C[Y]}else l.push(C)}}class _{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function v(l){return/^[\s\xa0]*$/.test(l)}function A(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function D(l){return D[" "](l),l}D[" "]=function(){};var M=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function V(l,f,g){for(const C in l)f.call(g,l[C],C,l)}function E(l,f){for(const g in l)f.call(void 0,l[g],g,l)}function y(l){const f={};for(const g in l)f[g]=l[g];return f}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(l,f){let g,C;for(let F=1;F<arguments.length;F++){C=arguments[F];for(g in C)l[g]=C[g];for(let $=0;$<S.length;$++)g=S[$],Object.prototype.hasOwnProperty.call(C,g)&&(l[g]=C[g])}}function R(l){var f=1;l=l.split(":");const g=[];for(;0<f&&l.length;)g.push(l.shift()),f--;return l.length&&g.push(l.join(":")),g}function T(l){a.setTimeout(()=>{throw l},0)}function I(){var l=se;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class W{constructor(){this.h=this.g=null}add(f,g){const C=H.get();C.set(f,g),this.h?this.h.next=C:this.g=C,this.h=C}}var H=new _(()=>new de,l=>l.reset());class de{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let ge,Q=!1,se=new W,K=()=>{const l=a.Promise.resolve(void 0);ge=()=>{l.then(ae)}};var ae=()=>{for(var l;l=I();){try{l.h.call(l.g)}catch(g){T(g)}var f=H;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}Q=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var Ee=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return l}();function ye(l,f){if(fe.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,C=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(M){e:{try{D(f.nodeName);var F=!0;break e}catch{}F=!1}F||(f=null)}}else g=="mouseover"?f=l.fromElement:g=="mouseout"&&(f=l.toElement);this.relatedTarget=f,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Be[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&ye.aa.h.call(this)}}b(ye,fe);var Be={2:"touch",3:"pen",4:"mouse"};ye.prototype.h=function(){ye.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var ve="closure_listenable_"+(1e6*Math.random()|0),Je=0;function Ve(l,f,g,C,F){this.listener=l,this.proxy=null,this.src=f,this.type=g,this.capture=!!C,this.ha=F,this.key=++Je,this.da=this.fa=!1}function It(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Fn(l){this.src=l,this.g={},this.h=0}Fn.prototype.add=function(l,f,g,C,F){var $=l.toString();l=this.g[$],l||(l=this.g[$]=[],this.h++);var Y=Rr(l,f,C,F);return-1<Y?(f=l[Y],g||(f.fa=!1)):(f=new Ve(f,this.src,$,!!C,F),f.fa=g,l.push(f)),f};function li(l,f){var g=f.type;if(g in l.g){var C=l.g[g],F=Array.prototype.indexOf.call(C,f,void 0),$;($=0<=F)&&Array.prototype.splice.call(C,F,1),$&&(It(f),l.g[g].length==0&&(delete l.g[g],l.h--))}}function Rr(l,f,g,C){for(var F=0;F<l.length;++F){var $=l[F];if(!$.da&&$.listener==f&&$.capture==!!g&&$.ha==C)return F}return-1}var dr="closure_lm_"+(1e6*Math.random()|0),ls={};function Zh(l,f,g,C,F){if(C&&C.once)return U(l,f,g,C,F);if(Array.isArray(f)){for(var $=0;$<f.length;$++)Zh(l,f[$],g,C,F);return null}return g=lt(g),l&&l[ve]?l.K(f,g,c(C)?!!C.capture:!!C,F):ef(l,f,g,!1,C,F)}function ef(l,f,g,C,F,$){if(!f)throw Error("Invalid event type");var Y=c(F)?!!F.capture:!!F,We=ue(l);if(We||(l[dr]=We=new Fn(l)),g=We.add(f,g,C,Y,$),g.proxy)return g;if(C=L(),g.proxy=C,C.src=l,C.listener=g,l.addEventListener)Ee||(F=Y),F===void 0&&(F=!1),l.addEventListener(f.toString(),C,F);else if(l.attachEvent)l.attachEvent(X(f.toString()),C);else if(l.addListener&&l.removeListener)l.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return g}function L(){function l(g){return f.call(l.src,l.listener,g)}const f=G;return l}function U(l,f,g,C,F){if(Array.isArray(f)){for(var $=0;$<f.length;$++)U(l,f[$],g,C,F);return null}return g=lt(g),l&&l[ve]?l.L(f,g,c(C)?!!C.capture:!!C,F):ef(l,f,g,!0,C,F)}function j(l,f,g,C,F){if(Array.isArray(f))for(var $=0;$<f.length;$++)j(l,f[$],g,C,F);else C=c(C)?!!C.capture:!!C,g=lt(g),l&&l[ve]?(l=l.i,f=String(f).toString(),f in l.g&&($=l.g[f],g=Rr($,g,C,F),-1<g&&(It($[g]),Array.prototype.splice.call($,g,1),$.length==0&&(delete l.g[f],l.h--)))):l&&(l=ue(l))&&(f=l.g[f.toString()],l=-1,f&&(l=Rr(f,g,C,F)),(g=-1<l?f[l]:null)&&ee(g))}function ee(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[ve])li(f.i,l);else{var g=l.type,C=l.proxy;f.removeEventListener?f.removeEventListener(g,C,l.capture):f.detachEvent?f.detachEvent(X(g),C):f.addListener&&f.removeListener&&f.removeListener(C),(g=ue(f))?(li(g,l),g.h==0&&(g.src=null,f[dr]=null)):It(l)}}}function X(l){return l in ls?ls[l]:ls[l]="on"+l}function G(l,f){if(l.da)l=!0;else{f=new ye(f,this);var g=l.listener,C=l.ha||l.src;l.fa&&ee(l),l=g.call(C,f)}return l}function ue(l){return l=l[dr],l instanceof Fn?l:null}var ke="__closure_events_fn_"+(1e9*Math.random()>>>0);function lt(l){return typeof l=="function"?l:(l[ke]||(l[ke]=function(f){return l.handleEvent(f)}),l[ke])}function xe(){le.call(this),this.i=new Fn(this),this.M=this,this.F=null}b(xe,le),xe.prototype[ve]=!0,xe.prototype.removeEventListener=function(l,f,g,C){j(this,l,f,g,C)};function et(l,f){var g,C=l.F;if(C)for(g=[];C;C=C.F)g.push(C);if(l=l.M,C=f.type||f,typeof f=="string")f=new fe(f,l);else if(f instanceof fe)f.target=f.target||l;else{var F=f;f=new fe(C,l),k(f,F)}if(F=!0,g)for(var $=g.length-1;0<=$;$--){var Y=f.g=g[$];F=Ys(Y,C,!0,f)&&F}if(Y=f.g=l,F=Ys(Y,C,!0,f)&&F,F=Ys(Y,C,!1,f)&&F,g)for($=0;$<g.length;$++)Y=f.g=g[$],F=Ys(Y,C,!1,f)&&F}xe.prototype.N=function(){if(xe.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var g=l.g[f],C=0;C<g.length;C++)It(g[C]);delete l.g[f],l.h--}}this.F=null},xe.prototype.K=function(l,f,g,C){return this.i.add(String(l),f,!1,g,C)},xe.prototype.L=function(l,f,g,C){return this.i.add(String(l),f,!0,g,C)};function Ys(l,f,g,C){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var F=!0,$=0;$<f.length;++$){var Y=f[$];if(Y&&!Y.da&&Y.capture==g){var We=Y.listener,$t=Y.ha||Y.src;Y.fa&&li(l.i,Y),F=We.call($t,C)!==!1&&F}}return F&&!C.defaultPrevented}function Xs(l,f,g){if(typeof l=="function")g&&(l=m(l,g));else if(l&&typeof l.handleEvent=="function")l=m(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(l,f||0)}function Js(l){l.g=Xs(()=>{l.g=null,l.i&&(l.i=!1,Js(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class tf extends le{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Js(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ui(l){le.call(this),this.h=l,this.g={}}b(ui,le);var Nu=[];function va(l){V(l.g,function(f,g){this.g.hasOwnProperty(g)&&ee(f)},l),l.g={}}ui.prototype.N=function(){ui.aa.N.call(this),va(this)},ui.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var nf=a.JSON.stringify,PS=a.JSON.parse,xS=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function rf(){}rf.prototype.h=null;function Sv(l){return l.h||(l.h=l.i())}function Cv(){}var wa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function sf(){fe.call(this,"d")}b(sf,fe);function of(){fe.call(this,"c")}b(of,fe);var us={},kv=null;function Ru(){return kv=kv||new xe}us.La="serverreachability";function Av(l){fe.call(this,us.La,l)}b(Av,fe);function _a(l){const f=Ru();et(f,new Av(f))}us.STAT_EVENT="statevent";function Nv(l,f){fe.call(this,us.STAT_EVENT,l),this.stat=f}b(Nv,fe);function sn(l){const f=Ru();et(f,new Nv(f,l))}us.Ma="timingevent";function Rv(l,f){fe.call(this,us.Ma,l),this.size=f}b(Rv,fe);function Ea(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},f)}function Ta(){this.g=!0}Ta.prototype.xa=function(){this.g=!1};function SS(l,f,g,C,F,$){l.info(function(){if(l.g)if($)for(var Y="",We=$.split("&"),$t=0;$t<We.length;$t++){var Le=We[$t].split("=");if(1<Le.length){var Kt=Le[0];Le=Le[1];var Qt=Kt.split("_");Y=2<=Qt.length&&Qt[1]=="type"?Y+(Kt+"="+Le+"&"):Y+(Kt+"=redacted&")}}else Y=null;else Y=$;return"XMLHTTP REQ ("+C+") [attempt "+F+"]: "+f+`
`+g+`
`+Y})}function CS(l,f,g,C,F,$,Y){l.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+F+"]: "+f+`
`+g+`
`+$+" "+Y})}function Zs(l,f,g,C){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+AS(l,g)+(C?" "+C:"")})}function kS(l,f){l.info(function(){return"TIMEOUT: "+f})}Ta.prototype.info=function(){};function AS(l,f){if(!l.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var C=g[l];if(!(2>C.length)){var F=C[1];if(Array.isArray(F)&&!(1>F.length)){var $=F[0];if($!="noop"&&$!="stop"&&$!="close")for(var Y=1;Y<F.length;Y++)F[Y]=""}}}}return nf(g)}catch{return f}}var Du={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Dv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},af;function Ou(){}b(Ou,rf),Ou.prototype.g=function(){return new XMLHttpRequest},Ou.prototype.i=function(){return{}},af=new Ou;function ci(l,f,g,C){this.j=l,this.i=f,this.l=g,this.R=C||1,this.U=new ui(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ov}function Ov(){this.i=null,this.g="",this.h=!1}var Lv={},lf={};function uf(l,f,g){l.L=1,l.v=Fu(Dr(f)),l.m=g,l.P=!0,Mv(l,null)}function Mv(l,f){l.F=Date.now(),Lu(l),l.A=Dr(l.v);var g=l.A,C=l.R;Array.isArray(C)||(C=[String(C)]),Yv(g.i,"t",C),l.C=0,g=l.j.J,l.h=new Ov,l.g=p0(l.j,g?f:null,!l.m),0<l.O&&(l.M=new tf(m(l.Y,l,l.g),l.O)),f=l.U,g=l.g,C=l.ca;var F="readystatechange";Array.isArray(F)||(F&&(Nu[0]=F.toString()),F=Nu);for(var $=0;$<F.length;$++){var Y=Zh(g,F[$],C||f.handleEvent,!1,f.h||f);if(!Y)break;f.g[Y.key]=Y}f=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),_a(),SS(l.i,l.u,l.A,l.l,l.R,l.m)}ci.prototype.ca=function(l){l=l.target;const f=this.M;f&&Or(l)==3?f.j():this.Y(l)},ci.prototype.Y=function(l){try{if(l==this.g)e:{const Qt=Or(this.g);var f=this.g.Ba();const no=this.g.Z();if(!(3>Qt)&&(Qt!=3||this.g&&(this.h.h||this.g.oa()||r0(this.g)))){this.J||Qt!=4||f==7||(f==8||0>=no?_a(3):_a(2)),cf(this);var g=this.g.Z();this.X=g;t:if(Vv(this)){var C=r0(this.g);l="";var F=C.length,$=Or(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){cs(this),ba(this);var Y="";break t}this.h.i=new a.TextDecoder}for(f=0;f<F;f++)this.h.h=!0,l+=this.h.i.decode(C[f],{stream:!($&&f==F-1)});C.length=0,this.h.g+=l,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=g==200,CS(this.i,this.u,this.A,this.l,this.R,Qt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var We,$t=this.g;if((We=$t.g?$t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(We)){var Le=We;break t}}Le=null}if(g=Le)Zs(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,df(this,g);else{this.o=!1,this.s=3,sn(12),cs(this),ba(this);break e}}if(this.P){g=!0;let Qn;for(;!this.J&&this.C<Y.length;)if(Qn=NS(this,Y),Qn==lf){Qt==4&&(this.s=4,sn(14),g=!1),Zs(this.i,this.l,null,"[Incomplete Response]");break}else if(Qn==Lv){this.s=4,sn(15),Zs(this.i,this.l,Y,"[Invalid Chunk]"),g=!1;break}else Zs(this.i,this.l,Qn,null),df(this,Qn);if(Vv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qt!=4||Y.length!=0||this.h.h||(this.s=1,sn(16),g=!1),this.o=this.o&&g,!g)Zs(this.i,this.l,Y,"[Invalid Chunked Response]"),cs(this),ba(this);else if(0<Y.length&&!this.W){this.W=!0;var Kt=this.j;Kt.g==this&&Kt.ba&&!Kt.M&&(Kt.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),yf(Kt),Kt.M=!0,sn(11))}}else Zs(this.i,this.l,Y,null),df(this,Y);Qt==4&&cs(this),this.o&&!this.J&&(Qt==4?c0(this.j,this):(this.o=!1,Lu(this)))}else KS(this.g),g==400&&0<Y.indexOf("Unknown SID")?(this.s=3,sn(12)):(this.s=0,sn(13)),cs(this),ba(this)}}}catch{}finally{}};function Vv(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function NS(l,f){var g=l.C,C=f.indexOf(`
`,g);return C==-1?lf:(g=Number(f.substring(g,C)),isNaN(g)?Lv:(C+=1,C+g>f.length?lf:(f=f.slice(C,C+g),l.C=C+g,f)))}ci.prototype.cancel=function(){this.J=!0,cs(this)};function Lu(l){l.S=Date.now()+l.I,Fv(l,l.I)}function Fv(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Ea(m(l.ba,l),f)}function cf(l){l.B&&(a.clearTimeout(l.B),l.B=null)}ci.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(kS(this.i,this.A),this.L!=2&&(_a(),sn(17)),cs(this),this.s=2,ba(this)):Fv(this,this.S-l)};function ba(l){l.j.G==0||l.J||c0(l.j,l)}function cs(l){cf(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,va(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function df(l,f){try{var g=l.j;if(g.G!=0&&(g.g==l||hf(g.h,l))){if(!l.K&&hf(g.h,l)&&g.G==3){try{var C=g.Da.g.parse(f)}catch{C=null}if(Array.isArray(C)&&C.length==3){var F=C;if(F[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)Wu(g),Bu(g);else break e;gf(g),sn(18)}}else g.za=F[1],0<g.za-g.T&&37500>F[2]&&g.F&&g.v==0&&!g.C&&(g.C=Ea(m(g.Za,g),6e3));if(1>=jv(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else hs(g,11)}else if((l.K||g.g==l)&&Wu(g),!v(f))for(F=g.Da.g.parse(f),f=0;f<F.length;f++){let Le=F[f];if(g.T=Le[0],Le=Le[1],g.G==2)if(Le[0]=="c"){g.K=Le[1],g.ia=Le[2];const Kt=Le[3];Kt!=null&&(g.la=Kt,g.j.info("VER="+g.la));const Qt=Le[4];Qt!=null&&(g.Aa=Qt,g.j.info("SVER="+g.Aa));const no=Le[5];no!=null&&typeof no=="number"&&0<no&&(C=1.5*no,g.L=C,g.j.info("backChannelRequestTimeoutMs_="+C)),C=g;const Qn=l.g;if(Qn){const qu=Qn.g?Qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qu){var $=C.h;$.g||qu.indexOf("spdy")==-1&&qu.indexOf("quic")==-1&&qu.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(ff($,$.h),$.h=null))}if(C.D){const vf=Qn.g?Qn.g.getResponseHeader("X-HTTP-Session-Id"):null;vf&&(C.ya=vf,Ge(C.I,C.D,vf))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),C=g;var Y=l;if(C.qa=f0(C,C.J?C.ia:null,C.W),Y.K){Bv(C.h,Y);var We=Y,$t=C.L;$t&&(We.I=$t),We.B&&(cf(We),Lu(We)),C.g=Y}else l0(C);0<g.i.length&&zu(g)}else Le[0]!="stop"&&Le[0]!="close"||hs(g,7);else g.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?hs(g,7):mf(g):Le[0]!="noop"&&g.l&&g.l.ta(Le),g.v=0)}}_a(4)}catch{}}var RS=class{constructor(l,f){this.g=l,this.map=f}};function Uv(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $v(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function jv(l){return l.h?1:l.g?l.g.size:0}function hf(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function ff(l,f){l.g?l.g.add(f):l.h=f}function Bv(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}Uv.prototype.cancel=function(){if(this.i=zv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function zv(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const g of l.g.values())f=f.concat(g.D);return f}return P(l.i)}function DS(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var f=[],g=l.length,C=0;C<g;C++)f.push(l[C]);return f}f=[],g=0;for(C in l)f[g++]=l[C];return f}function OS(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var f=[];l=l.length;for(var g=0;g<l;g++)f.push(g);return f}f=[],g=0;for(const C in l)f[g++]=C;return f}}}function Wv(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var g=OS(l),C=DS(l),F=C.length,$=0;$<F;$++)f.call(void 0,C[$],g&&g[$],l)}var Hv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function LS(l,f){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var C=l[g].indexOf("="),F=null;if(0<=C){var $=l[g].substring(0,C);F=l[g].substring(C+1)}else $=l[g];f($,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function ds(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof ds){this.h=l.h,Mu(this,l.j),this.o=l.o,this.g=l.g,Vu(this,l.s),this.l=l.l;var f=l.i,g=new xa;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),qv(this,g),this.m=l.m}else l&&(f=String(l).match(Hv))?(this.h=!1,Mu(this,f[1]||"",!0),this.o=Ia(f[2]||""),this.g=Ia(f[3]||"",!0),Vu(this,f[4]),this.l=Ia(f[5]||"",!0),qv(this,f[6]||"",!0),this.m=Ia(f[7]||"")):(this.h=!1,this.i=new xa(null,this.h))}ds.prototype.toString=function(){var l=[],f=this.j;f&&l.push(Pa(f,Gv,!0),":");var g=this.g;return(g||f=="file")&&(l.push("//"),(f=this.o)&&l.push(Pa(f,Gv,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(Pa(g,g.charAt(0)=="/"?FS:VS,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",Pa(g,$S)),l.join("")};function Dr(l){return new ds(l)}function Mu(l,f,g){l.j=g?Ia(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function Vu(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function qv(l,f,g){f instanceof xa?(l.i=f,jS(l.i,l.h)):(g||(f=Pa(f,US)),l.i=new xa(f,l.h))}function Ge(l,f,g){l.i.set(f,g)}function Fu(l){return Ge(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Ia(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Pa(l,f,g){return typeof l=="string"?(l=encodeURI(l).replace(f,MS),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function MS(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Gv=/[#\/\?@]/g,VS=/[#\?:]/g,FS=/[#\?]/g,US=/[#\?@]/g,$S=/#/g;function xa(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function di(l){l.g||(l.g=new Map,l.h=0,l.i&&LS(l.i,function(f,g){l.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=xa.prototype,t.add=function(l,f){di(this),this.i=null,l=eo(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(f),this.h+=1,this};function Kv(l,f){di(l),f=eo(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function Qv(l,f){return di(l),f=eo(l,f),l.g.has(f)}t.forEach=function(l,f){di(this),this.g.forEach(function(g,C){g.forEach(function(F){l.call(f,F,C,this)},this)},this)},t.na=function(){di(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let C=0;C<f.length;C++){const F=l[C];for(let $=0;$<F.length;$++)g.push(f[C])}return g},t.V=function(l){di(this);let f=[];if(typeof l=="string")Qv(this,l)&&(f=f.concat(this.g.get(eo(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)f=f.concat(l[g])}return f},t.set=function(l,f){return di(this),this.i=null,l=eo(this,l),Qv(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},t.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function Yv(l,f,g){Kv(l,f),0<g.length&&(l.i=null,l.g.set(eo(l,f),P(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var C=f[g];const $=encodeURIComponent(String(C)),Y=this.V(C);for(C=0;C<Y.length;C++){var F=$;Y[C]!==""&&(F+="="+encodeURIComponent(String(Y[C]))),l.push(F)}}return this.i=l.join("&")};function eo(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function jS(l,f){f&&!l.j&&(di(l),l.i=null,l.g.forEach(function(g,C){var F=C.toLowerCase();C!=F&&(Kv(this,C),Yv(this,F,g))},l)),l.j=f}function BS(l,f){const g=new Ta;if(a.Image){const C=new Image;C.onload=w(hi,g,"TestLoadImage: loaded",!0,f,C),C.onerror=w(hi,g,"TestLoadImage: error",!1,f,C),C.onabort=w(hi,g,"TestLoadImage: abort",!1,f,C),C.ontimeout=w(hi,g,"TestLoadImage: timeout",!1,f,C),a.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=l}else f(!1)}function zS(l,f){const g=new Ta,C=new AbortController,F=setTimeout(()=>{C.abort(),hi(g,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:C.signal}).then($=>{clearTimeout(F),$.ok?hi(g,"TestPingServer: ok",!0,f):hi(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(F),hi(g,"TestPingServer: error",!1,f)})}function hi(l,f,g,C,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),C(g)}catch{}}function WS(){this.g=new xS}function HS(l,f,g){const C=g||"";try{Wv(l,function(F,$){let Y=F;c(F)&&(Y=nf(F)),f.push(C+$+"="+encodeURIComponent(Y))})}catch(F){throw f.push(C+"type="+encodeURIComponent("_badmap")),F}}function Uu(l){this.l=l.Ub||null,this.j=l.eb||!1}b(Uu,rf),Uu.prototype.g=function(){return new $u(this.l,this.j)},Uu.prototype.i=function(l){return function(){return l}}({});function $u(l,f){xe.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b($u,xe),t=$u.prototype,t.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,Ca(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Sa(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Ca(this)),this.g&&(this.readyState=3,Ca(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Xv(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Xv(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?Sa(this):Ca(this),this.readyState==3&&Xv(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Sa(this))},t.Qa=function(l){this.g&&(this.response=l,Sa(this))},t.ga=function(){this.g&&Sa(this)};function Sa(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Ca(l)}t.setRequestHeader=function(l,f){this.u.append(l,f)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=f.next();return l.join(`\r
`)};function Ca(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty($u.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Jv(l){let f="";return V(l,function(g,C){f+=C,f+=":",f+=g,f+=`\r
`}),f}function pf(l,f,g){e:{for(C in g){var C=!1;break e}C=!0}C||(g=Jv(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):Ge(l,f,g))}function ut(l){xe.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(ut,xe);var qS=/^https?$/i,GS=["POST","PUT"];t=ut.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,f,g,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():af.g(),this.v=this.o?Sv(this.o):Sv(af),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch($){Zv(this,$);return}if(l=g||"",g=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var F in C)g.set(F,C[F]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const $ of C.keys())g.set($,C.get($));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(g.keys()).find($=>$.toLowerCase()=="content-type"),F=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(GS,f,void 0))||C||F||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,Y]of g)this.g.setRequestHeader($,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{n0(this),this.u=!0,this.g.send(l),this.u=!1}catch($){Zv(this,$)}};function Zv(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,e0(l),ju(l)}function e0(l){l.A||(l.A=!0,et(l,"complete"),et(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,et(this,"complete"),et(this,"abort"),ju(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ju(this,!0)),ut.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?t0(this):this.bb())},t.bb=function(){t0(this)};function t0(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Or(l)!=4||l.Z()!=2)){if(l.u&&Or(l)==4)Xs(l.Ea,0,l);else if(et(l,"readystatechange"),Or(l)==4){l.h=!1;try{const Y=l.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var C;if(C=Y===0){var F=String(l.D).match(Hv)[1]||null;!F&&a.self&&a.self.location&&(F=a.self.location.protocol.slice(0,-1)),C=!qS.test(F?F.toLowerCase():"")}g=C}if(g)et(l,"complete"),et(l,"success");else{l.m=6;try{var $=2<Or(l)?l.g.statusText:""}catch{$=""}l.l=$+" ["+l.Z()+"]",e0(l)}}finally{ju(l)}}}}function ju(l,f){if(l.g){n0(l);const g=l.g,C=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||et(l,"ready");try{g.onreadystatechange=C}catch{}}}function n0(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Or(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Or(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),PS(f)}};function r0(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function KS(l){const f={};l=(l.g&&2<=Or(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<l.length;C++){if(v(l[C]))continue;var g=R(l[C]);const F=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const $=f[F]||[];f[F]=$,$.push(g)}E(f,function(C){return C.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ka(l,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||f}function i0(l){this.Aa=0,this.i=[],this.j=new Ta,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ka("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ka("baseRetryDelayMs",5e3,l),this.cb=ka("retryDelaySeedMs",1e4,l),this.Wa=ka("forwardChannelMaxRetries",2,l),this.wa=ka("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Uv(l&&l.concurrentRequestLimit),this.Da=new WS,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=i0.prototype,t.la=8,t.G=1,t.connect=function(l,f,g,C){sn(0),this.W=l,this.H=f||{},g&&C!==void 0&&(this.H.OSID=g,this.H.OAID=C),this.F=this.X,this.I=f0(this,null,this.W),zu(this)};function mf(l){if(s0(l),l.G==3){var f=l.U++,g=Dr(l.I);if(Ge(g,"SID",l.K),Ge(g,"RID",f),Ge(g,"TYPE","terminate"),Aa(l,g),f=new ci(l,l.j,f),f.L=2,f.v=Fu(Dr(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=p0(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Lu(f)}h0(l)}function Bu(l){l.g&&(yf(l),l.g.cancel(),l.g=null)}function s0(l){Bu(l),l.u&&(a.clearTimeout(l.u),l.u=null),Wu(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function zu(l){if(!$v(l.h)&&!l.s){l.s=!0;var f=l.Ga;ge||K(),Q||(ge(),Q=!0),se.add(f,l),l.B=0}}function QS(l,f){return jv(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Ea(m(l.Ga,l,f),d0(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const F=new ci(this,this.j,l);let $=this.o;if(this.S&&($?($=y($),k($,this.S)):$=this.S),this.m!==null||this.O||(F.H=$,$=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var C=this.i[g];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(f+=C,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=a0(this,F,f),g=Dr(this.I),Ge(g,"RID",l),Ge(g,"CVER",22),this.D&&Ge(g,"X-HTTP-Session-Id",this.D),Aa(this,g),$&&(this.O?f="headers="+encodeURIComponent(String(Jv($)))+"&"+f:this.m&&pf(g,this.m,$)),ff(this.h,F),this.Ua&&Ge(g,"TYPE","init"),this.P?(Ge(g,"$req",f),Ge(g,"SID","null"),F.T=!0,uf(F,g,null)):uf(F,g,f),this.G=2}}else this.G==3&&(l?o0(this,l):this.i.length==0||$v(this.h)||o0(this))};function o0(l,f){var g;f?g=f.l:g=l.U++;const C=Dr(l.I);Ge(C,"SID",l.K),Ge(C,"RID",g),Ge(C,"AID",l.T),Aa(l,C),l.m&&l.o&&pf(C,l.m,l.o),g=new ci(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),f&&(l.i=f.D.concat(l.i)),f=a0(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),ff(l.h,g),uf(g,C,f)}function Aa(l,f){l.H&&V(l.H,function(g,C){Ge(f,C,g)}),l.l&&Wv({},function(g,C){Ge(f,C,g)})}function a0(l,f,g){g=Math.min(l.i.length,g);var C=l.l?m(l.l.Na,l.l,l):null;e:{var F=l.i;let $=-1;for(;;){const Y=["count="+g];$==-1?0<g?($=F[0].g,Y.push("ofs="+$)):$=0:Y.push("ofs="+$);let We=!0;for(let $t=0;$t<g;$t++){let Le=F[$t].g;const Kt=F[$t].map;if(Le-=$,0>Le)$=Math.max(0,F[$t].g-100),We=!1;else try{HS(Kt,Y,"req"+Le+"_")}catch{C&&C(Kt)}}if(We){C=Y.join("&");break e}}}return l=l.i.splice(0,g),f.D=l,C}function l0(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;ge||K(),Q||(ge(),Q=!0),se.add(f,l),l.v=0}}function gf(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Ea(m(l.Fa,l),d0(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,u0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Ea(m(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,sn(10),Bu(this),u0(this))};function yf(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function u0(l){l.g=new ci(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=Dr(l.qa);Ge(f,"RID","rpc"),Ge(f,"SID",l.K),Ge(f,"AID",l.T),Ge(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ge(f,"TO",l.ja),Ge(f,"TYPE","xmlhttp"),Aa(l,f),l.m&&l.o&&pf(f,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=Fu(Dr(f)),g.m=null,g.P=!0,Mv(g,l)}t.Za=function(){this.C!=null&&(this.C=null,Bu(this),gf(this),sn(19))};function Wu(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function c0(l,f){var g=null;if(l.g==f){Wu(l),yf(l),l.g=null;var C=2}else if(hf(l.h,f))g=f.D,Bv(l.h,f),C=1;else return;if(l.G!=0){if(f.o)if(C==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var F=l.B;C=Ru(),et(C,new Rv(C,g)),zu(l)}else l0(l);else if(F=f.s,F==3||F==0&&0<f.X||!(C==1&&QS(l,f)||C==2&&gf(l)))switch(g&&0<g.length&&(f=l.h,f.i=f.i.concat(g)),F){case 1:hs(l,5);break;case 4:hs(l,10);break;case 3:hs(l,6);break;default:hs(l,2)}}}function d0(l,f){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*f}function hs(l,f){if(l.j.info("Error code "+f),f==2){var g=m(l.fb,l),C=l.Xa;const F=!C;C=new ds(C||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Mu(C,"https"),Fu(C),F?BS(C.toString(),g):zS(C.toString(),g)}else sn(2);l.G=0,l.l&&l.l.sa(f),h0(l),s0(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),sn(2)):(this.j.info("Failed to ping google.com"),sn(1))};function h0(l){if(l.G=0,l.ka=[],l.l){const f=zv(l.h);(f.length!=0||l.i.length!=0)&&(N(l.ka,f),N(l.ka,l.i),l.h.i.length=0,P(l.i),l.i.length=0),l.l.ra()}}function f0(l,f,g){var C=g instanceof ds?Dr(g):new ds(g);if(C.g!="")f&&(C.g=f+"."+C.g),Vu(C,C.s);else{var F=a.location;C=F.protocol,f=f?f+"."+F.hostname:F.hostname,F=+F.port;var $=new ds(null);C&&Mu($,C),f&&($.g=f),F&&Vu($,F),g&&($.l=g),C=$}return g=l.D,f=l.ya,g&&f&&Ge(C,g,f),Ge(C,"VER",l.la),Aa(l,C),C}function p0(l,f,g){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new ut(new Uu({eb:g})):new ut(l.pa),f.Ha(l.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function m0(){}t=m0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Hu(){}Hu.prototype.g=function(l,f){return new Cn(l,f)};function Cn(l,f){xe.call(this),this.g=new i0(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!v(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!v(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new to(this)}b(Cn,xe),Cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){mf(this.g)},Cn.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=nf(l),l=g);f.i.push(new RS(f.Ya++,l)),f.G==3&&zu(f)},Cn.prototype.N=function(){this.g.l=null,delete this.j,mf(this.g),delete this.g,Cn.aa.N.call(this)};function g0(l){sf.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const g in f){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}b(g0,sf);function y0(){of.call(this),this.status=1}b(y0,of);function to(l){this.g=l}b(to,m0),to.prototype.ua=function(){et(this.g,"a")},to.prototype.ta=function(l){et(this.g,new g0(l))},to.prototype.sa=function(l){et(this.g,new y0)},to.prototype.ra=function(){et(this.g,"b")},Hu.prototype.createWebChannel=Hu.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,zI=function(){return new Hu},BI=function(){return Ru()},jI=us,Tm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Du.NO_ERROR=0,Du.TIMEOUT=8,Du.HTTP_ERROR=6,Fc=Du,Dv.COMPLETE="complete",$I=Dv,Cv.EventType=wa,wa.OPEN="a",wa.CLOSE="b",wa.ERROR="c",wa.MESSAGE="d",xe.prototype.listen=xe.prototype.K,Xa=Cv,ut.prototype.listenOnce=ut.prototype.L,ut.prototype.getLastError=ut.prototype.Ka,ut.prototype.getLastErrorCode=ut.prototype.Ba,ut.prototype.getStatus=ut.prototype.Z,ut.prototype.getResponseJson=ut.prototype.Oa,ut.prototype.getResponseText=ut.prototype.oa,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Ha,UI=ut}).apply(typeof dc<"u"?dc:typeof self<"u"?self:typeof window<"u"?window:{});const __="@firebase/firestore",E_="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Zt.UNAUTHENTICATED=new Zt(null),Zt.GOOGLE_CREDENTIALS=new Zt("google-credentials-uid"),Zt.FIRST_PARTY=new Zt("first-party-uid"),Zt.MOCK_USER=new Zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ha="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs=new ty("@firebase/firestore");function ao(){return Vs.logLevel}function ne(t,...e){if(Vs.logLevel<=Ie.DEBUG){const n=e.map(py);Vs.debug(`Firestore (${ha}): ${t}`,...n)}}function ti(t,...e){if(Vs.logLevel<=Ie.ERROR){const n=e.map(py);Vs.error(`Firestore (${ha}): ${t}`,...n)}}function Qi(t,...e){if(Vs.logLevel<=Ie.WARN){const n=e.map(py);Vs.warn(`Firestore (${ha}): ${t}`,...n)}}function py(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function he(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,WI(t,r,n)}function WI(t,e,n){let r=`FIRESTORE (${ha}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ti(r),new Error(r)}function Ue(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||WI(e,i,r)}function me(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends si{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class iL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Zt.UNAUTHENTICATED))}shutdown(){}}class sL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class oL{constructor(e){this.t=e,this.currentUser=Zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ue(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Gr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Gr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Gr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ue(typeof r.accessToken=="string",31837,{l:r}),new HI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string",2055,{h:e}),new Zt(e)}}class aL{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Zt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class lL{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new aL(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Zt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class T_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uL{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ct(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ue(this.o===void 0,3512);const r=s=>{s.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,ne("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new T_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ue(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new T_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=cL(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function we(t,e){return t<e?-1:t>e?1:0}function bm(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return we(r,i);{const s=qI(),o=dL(s.encode(b_(t,n)),s.encode(b_(e,n)));return o!==0?o:we(r,i)}}n+=r>65535?2:1}return we(t.length,e.length)}function b_(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function dL(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return we(t[n],e[n]);return we(t.length,e.length)}function Go(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_="__name__";class gr{constructor(e,n,r){n===void 0?n=0:n>e.length&&he(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&he(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return gr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof gr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=gr.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return we(e.length,n.length)}static compareSegments(e,n){const r=gr.isNumericId(e),i=gr.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?gr.extractNumericId(e).compare(gr.extractNumericId(n)):bm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return zi.fromString(e.substring(4,e.length-2))}}class He extends gr{construct(e,n,r){return new He(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Z(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new He(n)}static emptyPath(){return new He([])}}const hL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends gr{construct(e,n,r){return new Wt(e,n,r)}static isValidIdentifier(e){return hL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===I_}static keyField(){return new Wt([I_])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Z(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Z(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Z(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Z(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wt(n)}static emptyPath(){return new Wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.path=e}static fromPath(e){return new ce(He.fromString(e))}static fromName(e){return new ce(He.fromString(e).popFirst(5))}static empty(){return new ce(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return He.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new He(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(t,e,n){if(!n)throw new Z(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function fL(t,e,n,r){if(e===!0&&r===!0)throw new Z(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function P_(t){if(!ce.isDocumentKey(t))throw new Z(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function x_(t){if(ce.isDocumentKey(t))throw new Z(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function KI(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Sh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":he(12329,{type:typeof t})}function dn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Z(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Sh(t);throw new Z(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function pL(t,e){if(e<=0)throw new Z(B.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(t,e){const n={typeString:t};return e&&(n.value=e),n}function mu(t,e){if(!KI(t))throw new Z(B.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new Z(B.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_=-62135596800,C_=1e6;class Ye{static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*C_);return new Ye(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Z(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Z(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<S_)throw new Z(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Z(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/C_}_compareTo(e){return this.seconds===e.seconds?we(this.nanoseconds,e.nanoseconds):we(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(mu(e,Ye._jsonSchema))return new Ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-S_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ye._jsonSchemaVersion="firestore/timestamp/1.0",Ye._jsonSchema={type:Tt("string",Ye._jsonSchemaVersion),seconds:Tt("number"),nanoseconds:Tt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{static fromTimestamp(e){return new pe(e)}static min(){return new pe(new Ye(0,0))}static max(){return new pe(new Ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ql=-1;function mL(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=pe.fromTimestamp(r===1e9?new Ye(n+1,0):new Ye(n,r));return new Yi(i,ce.empty(),e)}function gL(t){return new Yi(t.readTime,t.key,Ql)}class Yi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Yi(pe.min(),ce.empty(),Ql)}static max(){return new Yi(pe.max(),ce.empty(),Ql)}}function yL(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ce.comparator(t.documentKey,e.documentKey),n!==0?n:we(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fa(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==vL)throw t;ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&he(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,r)=>{n(e)})}static reject(e){return new z((n,r)=>{r(e)})}static waitFor(e){return new z((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=z.resolve(!1);for(const r of e)n=n.next(i=>i?z.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new z((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(d=>{o[c]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new z((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function _L(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function pa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Ch.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy=-1;function kh(t){return t==null}function Pd(t){return t===0&&1/t==-1/0}function EL(t){return typeof t=="number"&&Number.isInteger(t)&&!Pd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI="";function TL(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=k_(e)),e=bL(t.get(n),e);return k_(e)}function bL(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case QI:n+="";break;default:n+=s}}return n}function k_(t){return t+QI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ss(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function YI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n){this.comparator=e,this.root=n||Bt.EMPTY}insert(e,n){return new ot(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Bt.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hc(this.root,e,this.comparator,!1)}getReverseIterator(){return new hc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hc(this.root,e,this.comparator,!0)}}class hc{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Bt.RED,this.left=i??Bt.EMPTY,this.right=s??Bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Bt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Bt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw he(43730,{key:this.key,value:this.value});if(this.right.isRed())throw he(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw he(27949);return e+(this.isRed()?0:1)}}Bt.EMPTY=null,Bt.RED=!0,Bt.BLACK=!1;Bt.EMPTY=new class{constructor(){this.size=0}get key(){throw he(57766)}get value(){throw he(16141)}get color(){throw he(16727)}get left(){throw he(29726)}get right(){throw he(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new Bt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new N_(this.data.getIterator())}getIteratorFrom(e){return new N_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Nt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Nt(this.comparator);return n.data=e,n}}class N_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new Nn([])}unionWith(e){let n=new Nt(Wt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Nn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Go(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new XI("Invalid base64 string: "+s):s}}(e);return new Gt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Gt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return we(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gt.EMPTY_BYTE_STRING=new Gt("");const IL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xi(t){if(Ue(!!t,39018),typeof t=="string"){let e=0;const n=IL.exec(t);if(Ue(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pt(t.seconds),nanos:pt(t.nanos)}}function pt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ji(t){return typeof t=="string"?Gt.fromBase64String(t):Gt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI="server_timestamp",ZI="__type__",eP="__previous_value__",tP="__local_write_time__";function yy(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[ZI])===null||n===void 0?void 0:n.stringValue)===JI}function Ah(t){const e=t.mapValue.fields[eP];return yy(e)?Ah(e):e}function Yl(t){const e=Xi(t.mapValue.fields[tP].timestampValue);return new Ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(e,n,r,i,s,o,a,u,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=d}}const xd="(default)";class Xl{constructor(e,n){this.projectId=e,this.database=n||xd}static empty(){return new Xl("","")}get isDefaultDatabase(){return this.database===xd}isEqual(e){return e instanceof Xl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP="__type__",rP="__max__",fc={mapValue:{fields:{__type__:{stringValue:rP}}}},iP="__vector__",Sd="value";function Zi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?yy(t)?4:SL(t)?9007199254740991:xL(t)?10:11:he(28295,{value:t})}function Ar(t,e){if(t===e)return!0;const n=Zi(t);if(n!==Zi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Yl(t).isEqual(Yl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Xi(i.timestampValue),a=Xi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ji(i.bytesValue).isEqual(Ji(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return pt(i.geoPointValue.latitude)===pt(s.geoPointValue.latitude)&&pt(i.geoPointValue.longitude)===pt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return pt(i.integerValue)===pt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=pt(i.doubleValue),a=pt(s.doubleValue);return o===a?Pd(o)===Pd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Go(t.arrayValue.values||[],e.arrayValue.values||[],Ar);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(A_(o)!==A_(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Ar(o[u],a[u])))return!1;return!0}(t,e);default:return he(52216,{left:t})}}function Jl(t,e){return(t.values||[]).find(n=>Ar(n,e))!==void 0}function Ko(t,e){if(t===e)return 0;const n=Zi(t),r=Zi(e);if(n!==r)return we(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return we(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=pt(s.integerValue||s.doubleValue),u=pt(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return R_(t.timestampValue,e.timestampValue);case 4:return R_(Yl(t),Yl(e));case 5:return bm(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Ji(s),u=Ji(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){const d=we(a[c],u[c]);if(d!==0)return d}return we(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=we(pt(s.latitude),pt(o.latitude));return a!==0?a:we(pt(s.longitude),pt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return D_(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,c,d;const h=s.fields||{},m=o.fields||{},w=(a=h[Sd])===null||a===void 0?void 0:a.arrayValue,b=(u=m[Sd])===null||u===void 0?void 0:u.arrayValue,P=we(((c=w==null?void 0:w.values)===null||c===void 0?void 0:c.length)||0,((d=b==null?void 0:b.values)===null||d===void 0?void 0:d.length)||0);return P!==0?P:D_(w,b)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===fc.mapValue&&o===fc.mapValue)return 0;if(s===fc.mapValue)return 1;if(o===fc.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),c=o.fields||{},d=Object.keys(c);u.sort(),d.sort();for(let h=0;h<u.length&&h<d.length;++h){const m=bm(u[h],d[h]);if(m!==0)return m;const w=Ko(a[u[h]],c[d[h]]);if(w!==0)return w}return we(u.length,d.length)}(t.mapValue,e.mapValue);default:throw he(23264,{le:n})}}function R_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return we(t,e);const n=Xi(t),r=Xi(e),i=we(n.seconds,r.seconds);return i!==0?i:we(n.nanos,r.nanos)}function D_(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ko(n[i],r[i]);if(s)return s}return we(n.length,r.length)}function Qo(t){return Im(t)}function Im(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Xi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ji(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ce.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Im(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Im(n.fields[o])}`;return i+"}"}(t.mapValue):he(61005,{value:t})}function Uc(t){switch(Zi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ah(t);return e?16+Uc(e):16;case 5:return 2*t.stringValue.length;case 6:return Ji(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Uc(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return ss(r.fields,(s,o)=>{i+=s.length+Uc(o)}),i}(t.mapValue);default:throw he(13486,{value:t})}}function O_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Pm(t){return!!t&&"integerValue"in t}function vy(t){return!!t&&"arrayValue"in t}function L_(t){return!!t&&"nullValue"in t}function M_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function $c(t){return!!t&&"mapValue"in t}function xL(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[nP])===null||n===void 0?void 0:n.stringValue)===iP}function wl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ss(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=wl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=wl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function SL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===rP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.value=e}static empty(){return new wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!$c(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=wl(n)}setAll(e){let n=Wt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=wl(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());$c(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ar(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];$c(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ss(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new wn(wl(this.value))}}function sP(t){const e=[];return ss(t.fields,(n,r)=>{const i=new Wt([n]);if($c(r)){const s=sP(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Nn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new tn(e,0,pe.min(),pe.min(),pe.min(),wn.empty(),0)}static newFoundDocument(e,n,r,i){return new tn(e,1,n,pe.min(),r,i,0)}static newNoDocument(e,n){return new tn(e,2,n,pe.min(),pe.min(),wn.empty(),0)}static newUnknownDocument(e,n){return new tn(e,3,n,pe.min(),pe.min(),wn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,n){this.position=e,this.inclusive=n}}function V_(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ce.comparator(ce.fromName(o.referenceValue),n.key):r=Ko(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function F_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ar(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n="asc"){this.field=e,this.dir=n}}function CL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{}class Et extends oP{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new AL(e,n,r):n==="array-contains"?new DL(e,r):n==="in"?new OL(e,r):n==="not-in"?new LL(e,r):n==="array-contains-any"?new ML(e,r):new Et(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new NL(e,r):new RL(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ko(n,this.value)):n!==null&&Zi(this.value)===Zi(n)&&this.matchesComparison(Ko(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return he(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cr extends oP{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new cr(e,n)}matches(e){return aP(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function aP(t){return t.op==="and"}function lP(t){return kL(t)&&aP(t)}function kL(t){for(const e of t.filters)if(e instanceof cr)return!1;return!0}function xm(t){if(t instanceof Et)return t.field.canonicalString()+t.op.toString()+Qo(t.value);if(lP(t))return t.filters.map(e=>xm(e)).join(",");{const e=t.filters.map(n=>xm(n)).join(",");return`${t.op}(${e})`}}function uP(t,e){return t instanceof Et?function(r,i){return i instanceof Et&&r.op===i.op&&r.field.isEqual(i.field)&&Ar(r.value,i.value)}(t,e):t instanceof cr?function(r,i){return i instanceof cr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&uP(o,i.filters[a]),!0):!1}(t,e):void he(19439)}function cP(t){return t instanceof Et?function(n){return`${n.field.canonicalString()} ${n.op} ${Qo(n.value)}`}(t):t instanceof cr?function(n){return n.op.toString()+" {"+n.getFilters().map(cP).join(" ,")+"}"}(t):"Filter"}class AL extends Et{constructor(e,n,r){super(e,n,r),this.key=ce.fromName(r.referenceValue)}matches(e){const n=ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class NL extends Et{constructor(e,n){super(e,"in",n),this.keys=dP("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class RL extends Et{constructor(e,n){super(e,"not-in",n),this.keys=dP("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function dP(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ce.fromName(r.referenceValue))}class DL extends Et{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return vy(n)&&Jl(n.arrayValue,this.value)}}class OL extends Et{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Jl(this.value.arrayValue,n)}}class LL extends Et{constructor(e,n){super(e,"not-in",n)}matches(e){if(Jl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Jl(this.value.arrayValue,n)}}class ML extends Et{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!vy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Jl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}}function U_(t,e=null,n=[],r=[],i=null,s=null,o=null){return new VL(t,e,n,r,i,s,o)}function wy(t){const e=me(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>xm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),kh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Qo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Qo(r)).join(",")),e.Pe=n}return e.Pe}function _y(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!CL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!uP(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!F_(t.startAt,e.startAt)&&F_(t.endAt,e.endAt)}function Sm(t){return ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function FL(t,e,n,r,i,s,o,a){return new ma(t,e,n,r,i,s,o,a)}function Nh(t){return new ma(t)}function $_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function hP(t){return t.collectionGroup!==null}function _l(t){const e=me(t);if(e.Te===null){e.Te=[];const n=new Set;for(const s of e.explicitOrderBy)e.Te.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Nt(Wt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Te.push(new Zl(s,r))}),n.has(Wt.keyField().canonicalString())||e.Te.push(new Zl(Wt.keyField(),r))}return e.Te}function Pr(t){const e=me(t);return e.Ie||(e.Ie=UL(e,_l(t))),e.Ie}function UL(t,e){if(t.limitType==="F")return U_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Zl(i.field,s)});const n=t.endAt?new Cd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Cd(t.startAt.position,t.startAt.inclusive):null;return U_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Cm(t,e){const n=t.filters.concat([e]);return new ma(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function kd(t,e,n){return new ma(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Rh(t,e){return _y(Pr(t),Pr(e))&&t.limitType===e.limitType}function fP(t){return`${wy(Pr(t))}|lt:${t.limitType}`}function lo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>cP(i)).join(", ")}]`),kh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Qo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Qo(i)).join(",")),`Target(${r})`}(Pr(t))}; limitType=${t.limitType})`}function Dh(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ce.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of _l(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){const c=V_(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,_l(r),i)||r.endAt&&!function(o,a,u){const c=V_(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,_l(r),i))}(t,e)}function $L(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function pP(t){return(e,n)=>{let r=!1;for(const i of _l(t)){const s=jL(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function jL(t,e,n){const r=t.field.isKeyField()?ce.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),c=a.data.field(s);return u!==null&&c!==null?Ko(u,c):he(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return he(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ss(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return YI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BL=new ot(ce.comparator);function ni(){return BL}const mP=new ot(ce.comparator);function Ja(...t){let e=mP;for(const n of t)e=e.insert(n.key,n);return e}function gP(t){let e=mP;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ts(){return El()}function yP(){return El()}function El(){return new Gs(t=>t.toString(),(t,e)=>t.isEqual(e))}const zL=new ot(ce.comparator),WL=new Nt(ce.comparator);function Pe(...t){let e=WL;for(const n of t)e=e.add(n);return e}const HL=new Nt(we);function qL(){return HL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pd(e)?"-0":e}}function vP(t){return{integerValue:""+t}}function GL(t,e){return EL(e)?vP(e):Ey(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(){this._=void 0}}function KL(t,e,n){return t instanceof eu?function(i,s){const o={fields:{[ZI]:{stringValue:JI},[tP]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&yy(s)&&(s=Ah(s)),s&&(o.fields[eP]=s),{mapValue:o}}(n,e):t instanceof tu?_P(t,e):t instanceof nu?EP(t,e):function(i,s){const o=wP(i,s),a=j_(o)+j_(i.Ee);return Pm(o)&&Pm(i.Ee)?vP(a):Ey(i.serializer,a)}(t,e)}function QL(t,e,n){return t instanceof tu?_P(t,e):t instanceof nu?EP(t,e):n}function wP(t,e){return t instanceof Ad?function(r){return Pm(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class eu extends Oh{}class tu extends Oh{constructor(e){super(),this.elements=e}}function _P(t,e){const n=TP(e);for(const r of t.elements)n.some(i=>Ar(i,r))||n.push(r);return{arrayValue:{values:n}}}class nu extends Oh{constructor(e){super(),this.elements=e}}function EP(t,e){let n=TP(e);for(const r of t.elements)n=n.filter(i=>!Ar(i,r));return{arrayValue:{values:n}}}class Ad extends Oh{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function j_(t){return pt(t.integerValue||t.doubleValue)}function TP(t){return vy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(e,n){this.field=e,this.transform=n}}function XL(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof tu&&i instanceof tu||r instanceof nu&&i instanceof nu?Go(r.elements,i.elements,Ar):r instanceof Ad&&i instanceof Ad?Ar(r.Ee,i.Ee):r instanceof eu&&i instanceof eu}(t.transform,e.transform)}class JL{constructor(e,n){this.version=e,this.transformResults=n}}class hn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new hn}static exists(e){return new hn(void 0,e)}static updateTime(e){return new hn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Lh{}function bP(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Mh(t.key,hn.none()):new gu(t.key,t.data,hn.none());{const n=t.data,r=wn.empty();let i=new Nt(Wt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new os(t.key,r,new Nn(i.toArray()),hn.none())}}function ZL(t,e,n){t instanceof gu?function(i,s,o){const a=i.value.clone(),u=z_(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof os?function(i,s,o){if(!jc(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=z_(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(IP(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Tl(t,e,n,r){return t instanceof gu?function(s,o,a,u){if(!jc(s.precondition,o))return a;const c=s.value.clone(),d=W_(s.fieldTransforms,u,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof os?function(s,o,a,u){if(!jc(s.precondition,o))return a;const c=W_(s.fieldTransforms,u,o),d=o.data;return d.setAll(IP(s)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return jc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function e4(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=wP(r.transform,i||null);s!=null&&(n===null&&(n=wn.empty()),n.set(r.field,s))}return n||null}function B_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Go(r,i,(s,o)=>XL(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class gu extends Lh{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class os extends Lh{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function IP(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function z_(t,e,n){const r=new Map;Ue(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,QL(o,a,n[i]))}return r}function W_(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,KL(s,o,e))}return r}class Mh extends Lh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class t4 extends Lh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&ZL(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Tl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Tl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=yP();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=bP(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(pe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Pe())}isEqual(e){return this.batchId===e.batchId&&Go(this.mutations,e.mutations,(n,r)=>B_(n,r))&&Go(this.baseMutations,e.baseMutations,(n,r)=>B_(n,r))}}class Ty{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ue(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return zL}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Ty(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vt,Ae;function s4(t){switch(t){case B.OK:return he(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return he(15467,{code:t})}}function PP(t){if(t===void 0)return ti("GRPC error has no .code"),B.UNKNOWN;switch(t){case vt.OK:return B.OK;case vt.CANCELLED:return B.CANCELLED;case vt.UNKNOWN:return B.UNKNOWN;case vt.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case vt.INTERNAL:return B.INTERNAL;case vt.UNAVAILABLE:return B.UNAVAILABLE;case vt.UNAUTHENTICATED:return B.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case vt.NOT_FOUND:return B.NOT_FOUND;case vt.ALREADY_EXISTS:return B.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return B.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case vt.ABORTED:return B.ABORTED;case vt.OUT_OF_RANGE:return B.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return B.UNIMPLEMENTED;case vt.DATA_LOSS:return B.DATA_LOSS;default:return he(39323,{code:t})}}(Ae=vt||(vt={}))[Ae.OK=0]="OK",Ae[Ae.CANCELLED=1]="CANCELLED",Ae[Ae.UNKNOWN=2]="UNKNOWN",Ae[Ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ae[Ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ae[Ae.NOT_FOUND=5]="NOT_FOUND",Ae[Ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ae[Ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ae[Ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ae[Ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ae[Ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ae[Ae.ABORTED=10]="ABORTED",Ae[Ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ae[Ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ae[Ae.INTERNAL=13]="INTERNAL",Ae[Ae.UNAVAILABLE=14]="UNAVAILABLE",Ae[Ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4=new zi([4294967295,4294967295],0);function H_(t){const e=qI().encode(t),n=new FI;return n.update(e),new Uint8Array(n.digest())}function q_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new zi([n,r],0),new zi([i,s],0)]}class by{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Za(`Invalid padding: ${n}`);if(r<0)throw new Za(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Za(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Za(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=zi.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(zi.fromNumber(r)));return i.compare(o4)===1&&(i=new zi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=H_(e),[r,i]=q_(n);for(let s=0;s<this.hashCount;s++){const o=this.pe(r,i,s);if(!this.ye(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new by(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;const n=H_(e),[r,i]=q_(n);for(let s=0;s<this.hashCount;s++){const o=this.pe(r,i,s);this.we(o)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Za extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,yu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Vh(pe.min(),i,new ot(we),ni(),Pe())}}class yu{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new yu(r,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class xP{constructor(e,n){this.targetId=e,this.De=n}}class SP{constructor(e,n,r=Gt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class G_{constructor(){this.ve=0,this.Ce=K_(),this.Fe=Gt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Pe(),n=Pe(),r=Pe();return this.Ce.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:he(38017,{changeType:s})}}),new yu(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=K_()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ue(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class a4{constructor(e){this.We=e,this.Ge=new Map,this.ze=ni(),this.je=pc(),this.Je=pc(),this.He=new ot(we)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:he(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const s=i.target;if(Sm(s))if(r===0){const o=new ce(s.path);this.Xe(n,o,tn.newNoDocument(o,pe.min()))}else Ue(r===1,20013,{expectedCount:r});else{const o=this.ot(n);if(o!==r){const a=this._t(e),u=a?this.ut(a,e,o):1;if(u!==0){this.rt(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,c)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ji(r).toUint8Array()}catch(u){if(u instanceof XI)return Qi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new by(o,i,s)}catch(u){return Qi(u instanceof Za?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,s,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((s,o)=>{const a=this.st(o);if(a){if(s.current&&Sm(a.target)){const u=new ce(a.target.path);this.Tt(u).has(o)||this.It(o,u)||this.Xe(o,u,tn.newNoDocument(u,e))}s.Ne&&(n.set(o,s.Le()),s.ke())}});let r=Pe();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.st(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));const i=new Vh(e,n,this.He,this.ze,r);return this.ze=ni(),this.je=pc(),this.Je=pc(),this.He=new ot(we),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new G_,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Nt(we),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Nt(we),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||ne("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new G_),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function pc(){return new ot(ce.comparator)}function K_(){return new ot(ce.comparator)}const l4=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),u4=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),c4=(()=>({and:"AND",or:"OR"}))();class d4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function km(t,e){return t.useProto3Json||kh(e)?e:{value:e}}function Nd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CP(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function h4(t,e){return Nd(t,e.toTimestamp())}function xr(t){return Ue(!!t,49232),pe.fromTimestamp(function(n){const r=Xi(n);return new Ye(r.seconds,r.nanos)}(t))}function Iy(t,e){return Am(t,e).canonicalString()}function Am(t,e){const n=function(i){return new He(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function kP(t){const e=He.fromString(t);return Ue(OP(e),10190,{key:e.toString()}),e}function Nm(t,e){return Iy(t.databaseId,e.path)}function tp(t,e){const n=kP(e);if(n.get(1)!==t.databaseId.projectId)throw new Z(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Z(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ce(NP(n))}function AP(t,e){return Iy(t.databaseId,e)}function f4(t){const e=kP(t);return e.length===4?He.emptyPath():NP(e)}function Rm(t){return new He(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function NP(t){return Ue(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Q_(t,e,n){return{name:Nm(t,e),fields:n.value.mapValue.fields}}function p4(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:he(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(Ue(d===void 0||typeof d=="string",58123),Gt.fromBase64String(d||"")):(Ue(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Gt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?B.UNKNOWN:PP(c.code);return new Z(d,c.message||"")}(o);n=new SP(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=tp(t,r.document.name),s=xr(r.document.updateTime),o=r.document.createTime?xr(r.document.createTime):pe.min(),a=new wn({mapValue:{fields:r.document.fields}}),u=tn.newFoundDocument(i,s,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Bc(c,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=tp(t,r.document),s=r.readTime?xr(r.readTime):pe.min(),o=tn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Bc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=tp(t,r.document),s=r.removedTargetIds||[];n=new Bc([],s,i,null)}else{if(!("filter"in e))return he(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new i4(i,s),a=r.targetId;n=new xP(a,o)}}return n}function m4(t,e){let n;if(e instanceof gu)n={update:Q_(t,e.key,e.value)};else if(e instanceof Mh)n={delete:Nm(t,e.key)};else if(e instanceof os)n={update:Q_(t,e.key,e.data),updateMask:I4(e.fieldMask)};else{if(!(e instanceof t4))return he(16599,{Rt:e.type});n={verify:Nm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof eu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof tu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof nu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ad)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw he(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:h4(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:he(27497)}(t,e.precondition)),n}function g4(t,e){return t&&t.length>0?(Ue(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?xr(i.updateTime):xr(s);return o.isEqual(pe.min())&&(o=xr(s)),new JL(o,i.transformResults||[])}(n,e))):[]}function y4(t,e){return{documents:[AP(t,e.path)]}}function v4(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=AP(t,i);const s=function(c){if(c.length!==0)return DP(cr.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(d=>function(m){return{field:uo(m.field),direction:E4(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=km(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{Vt:n,parent:i}}function w4(t){let e=f4(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ue(r===1,65062);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(h){const m=RP(h);return m instanceof cr&&lP(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(m=>function(b){return new Zl(co(b.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(h){let m;return m=typeof h=="object"?h.value:h,kh(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(h){const m=!!h.before,w=h.values||[];return new Cd(w,m)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const m=!h.before,w=h.values||[];return new Cd(w,m)}(n.endAt)),FL(e,i,o,s,a,"F",u,c)}function _4(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return he(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function RP(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=co(n.unaryFilter.field);return Et.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=co(n.unaryFilter.field);return Et.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=co(n.unaryFilter.field);return Et.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=co(n.unaryFilter.field);return Et.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return he(61313);default:return he(60726)}}(t):t.fieldFilter!==void 0?function(n){return Et.create(co(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return he(58110);default:return he(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return cr.create(n.compositeFilter.filters.map(r=>RP(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return he(1026)}}(n.compositeFilter.op))}(t):he(30097,{filter:t})}function E4(t){return l4[t]}function T4(t){return u4[t]}function b4(t){return c4[t]}function uo(t){return{fieldPath:t.canonicalString()}}function co(t){return Wt.fromServerFormat(t.fieldPath)}function DP(t){return t instanceof Et?function(n){if(n.op==="=="){if(M_(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NAN"}};if(L_(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(M_(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NOT_NAN"}};if(L_(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uo(n.field),op:T4(n.op),value:n.value}}}(t):t instanceof cr?function(n){const r=n.getFilters().map(i=>DP(i));return r.length===1?r[0]:{compositeFilter:{op:b4(n.op),filters:r}}}(t):he(54877,{filter:t})}function I4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function OP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,n,r,i,s=pe.min(),o=pe.min(),a=Gt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Ai(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ai(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e){this.gt=e}}function x4(t){const e=w4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?kd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(){this.Dn=new C4}addToCollectionParentIndex(e,n){return this.Dn.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(Yi.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(Yi.min())}updateCollectionGroup(e,n,r){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class C4{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Nt(He.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Nt(He.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},LP=41943040;class gn{static withCacheSize(e){return new gn(e,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(LP,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Yo(0)}static ur(){return new Yo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="LruGarbageCollector",k4=1048576;function J_([t,e],[n,r]){const i=we(t,n);return i===0?we(e,r):i}class A4{constructor(e){this.Tr=e,this.buffer=new Nt(J_),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();J_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class N4{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ne(X_,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){pa(n)?ne(X_,"Ignoring IndexedDB error during garbage collection: ",n):await fa(n)}await this.Rr(3e5)})}}class R4{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return z.resolve(Ch.ue);const r=new A4(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ne("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(Y_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Y_):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,s,o,a,u,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),ao()<=Ie.DEBUG&&ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${h} documents in `+(c-u)+`ms
Total Duration: ${c-d}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}function D4(t,e){return new R4(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(){this.changes=new Gs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,tn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Tl(r.mutation,i,Nn.empty(),Ye.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Pe()){const i=Ts();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ja();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ts();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Pe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=ni();const o=El(),a=function(){return El()}();return n.forEach((u,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof os)?s=s.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Tl(d.mutation,c,d.mutation.getFieldMask(),Ye.now())):o.set(c.key,Nn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var h;return a.set(c,new L4(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=El();let i=new ot((o,a)=>o-a),s=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let d=r.get(u)||Nn.empty();d=a.applyToLocalView(c,d),r.set(u,d);const h=(i.get(a.batchId)||Pe()).add(u);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,d=u.value,h=yP();d.forEach(m=>{if(!s.has(m)){const w=bP(n.get(m),r.get(m));w!==null&&h.set(m,w),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ce.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):hP(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):z.resolve(Ts());let a=Ql,u=s;return o.next(c=>z.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?z.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,Pe())).next(d=>({batchId:a,changes:gP(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ce(n)).next(r=>{let i=Ja();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Ja();return this.indexManager.getCollectionParents(e,s).next(a=>z.forEach(a,u=>{const c=function(h,m){return new ma(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(d=>{d.forEach((h,m)=>{o=o.insert(h,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,tn.newInvalidDocument(d)))});let a=Ja();return o.forEach((u,c)=>{const d=s.get(u);d!==void 0&&Tl(d.mutation,c,Nn.empty(),Ye.now()),Dh(n,c)&&(a=a.insert(u,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return z.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:xr(i.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:x4(i.bundledQuery),readTime:xr(i.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(){this.overlays=new ot(ce.comparator),this.kr=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ts();return z.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.wt(e,n,s)}),z.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),z.resolve()}getOverlaysForCollection(e,n,r){const i=Ts(),s=n.length+1,o=new ce(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return z.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new ot((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=s.get(c.largestBatchId);d===null&&(d=Ts(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Ts(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return z.resolve(a)}wt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new r4(n,r));let s=this.kr.get(n);s===void 0&&(s=Pe(),this.kr.set(n,s)),this.kr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(){this.qr=new Nt(Lt.Qr),this.$r=new Nt(Lt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Lt(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Lt(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new ce(new He([])),r=new Lt(n,e),i=new Lt(n,e+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new ce(new He([])),r=new Lt(n,e),i=new Lt(n,e+1);let s=Pe();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Lt(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Lt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return ce.comparator(e.key,n.key)||we(e.Hr,n.Hr)}static Ur(e,n){return we(e.Hr,n.Hr)||ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Nt(Lt.Qr)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new n4(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Yr=this.Yr.add(new Lt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,n){return z.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),s=i<0?0:i;return z.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?gy:this.er-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Lt(n,0),i=new Lt(n,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{const a=this.Zr(o.Hr);s.push(a)}),z.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Nt(we);return n.forEach(i=>{const s=new Lt(i,0),o=new Lt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),z.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ce.isDocumentKey(s)||(s=s.child(""));const o=new Lt(new ce(s),0);let a=new Nt(we);return this.Yr.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.Hr)),!0)},o),z.resolve(this.ei(a))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ue(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return z.forEach(n.mutations,i=>{const s=new Lt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new Lt(n,0),i=this.Yr.firstAfterOrEqual(r);return z.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e){this.ni=e,this.docs=function(){return new ot(ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():tn.newInvalidDocument(n))}getEntries(e,n){let r=ni();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():tn.newInvalidDocument(i))}),z.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ni();const o=n.path,a=new ce(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:d}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||yL(gL(d),r)<=0||(i.has(d.key)||Dh(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return z.resolve(s)}getAllFromCollectionGroup(e,n,r,i){he(9500)}ri(e,n){return z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new B4(this)}getSize(e){return z.resolve(this.size)}}class B4 extends O4{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),z.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e){this.persistence=e,this.ii=new Gs(n=>wy(n),_y),this.lastRemoteSnapshotVersion=pe.min(),this.highestTargetId=0,this.si=0,this.oi=new Py,this.targetCount=0,this._i=Yo.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),z.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Yo(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.hr(n),z.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),z.waitFor(s).next(()=>i)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return z.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),z.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),z.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return z.resolve(r)}containsKey(e,n){return z.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e,n){this.ai={},this.overlays={},this.ui=new Ch(0),this.ci=!1,this.ci=!0,this.li=new U4,this.referenceDelegate=e(this),this.hi=new z4(this),this.indexManager=new S4,this.remoteDocumentCache=function(i){return new j4(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new P4(n),this.Ti=new V4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new F4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new $4(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){ne("MemoryPersistence","Starting transaction:",e);const i=new W4(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,n){return z.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class W4 extends wL{constructor(e){super(),this.currentSequenceNumber=e}}class xy{constructor(e){this.persistence=e,this.Ai=new Py,this.Ri=null}static Vi(e){return new xy(e)}get mi(){if(this.Ri)return this.Ri;throw he(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),z.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),z.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.mi,r=>{const i=ce.fromPath(r);return this.fi(e,i).next(s=>{s||n.removeEntry(i,pe.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return z.or([()=>z.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Rd{constructor(e,n){this.persistence=e,this.gi=new Gs(r=>TL(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=D4(this,n)}static Vi(e,n){return new Rd(e,n)}Ii(){}di(e){return z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return z.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?z.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,o=>this.Sr(e,o,n).next(a=>{a||(r++,s.removeEntry(o,pe.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),z.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),z.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),z.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),z.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Uc(e.data.value)),n}Sr(e,n,r){return z.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return z.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=Pe(),i=Pe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Sy(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return XN()?8:_L(rn())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ps(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new H4;return this.ws(e,n,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,n,o,a.size)})}).next(()=>s.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(ao()<=Ie.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",lo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),z.resolve()):(ao()<=Ie.DEBUG&&ne("QueryEngine","Query:",lo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(ao()<=Ie.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",lo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pr(n))):z.resolve())}ps(e,n){if($_(n))return z.resolve(null);let r=Pr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=kd(n,null,"F"),r=Pr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Pe(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.bs(n,a);return this.Ds(n,c,o,u.readTime)?this.ps(e,kd(n,null,"F")):this.vs(e,c,n,u)}))})))}ys(e,n,r,i){return $_(n)||i.isEqual(pe.min())?z.resolve(null):this.gs.getDocuments(e,r).next(s=>{const o=this.bs(n,s);return this.Ds(n,o,r,i)?z.resolve(null):(ao()<=Ie.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),lo(n)),this.vs(e,o,n,mL(i,Ql)).next(a=>a))})}bs(e,n){let r=new Nt(pP(e));return n.forEach((i,s)=>{Dh(e,s)&&(r=r.add(s))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,n,r){return ao()<=Ie.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",lo(n)),this.gs.getDocumentsMatchingQuery(e,n,Yi.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy="LocalStore",G4=3e8;class K4{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new ot(we),this.Ms=new Gs(s=>wy(s),_y),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new M4(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function Q4(t,e,n,r){return new K4(t,e,n,r)}async function VP(t,e){const n=me(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Pe();for(const c of i){o.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next(c=>({Bs:c,removedBatchIds:o,addedBatchIds:a}))})})}function Y4(t,e){const n=me(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Os.newChangeBuffer({trackRemovals:!0});return function(a,u,c,d){const h=c.batch,m=h.keys();let w=z.resolve();return m.forEach(b=>{w=w.next(()=>d.getEntry(u,b)).next(P=>{const N=c.docVersions.get(b);Ue(N!==null,48541),P.version.compareTo(N)<0&&(h.applyToRemoteDocument(P,c),P.isValidDocument()&&(P.setReadTime(c.commitVersion),d.addEntry(P)))})}),w.next(()=>a.mutationQueue.removeMutationBatch(u,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Pe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function FP(t){const e=me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function X4(t,e){const n=me(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const a=[];e.targetChanges.forEach((d,h)=>{const m=i.get(h);if(!m)return;a.push(n.hi.removeMatchingKeys(s,d.removedDocuments,h).next(()=>n.hi.addMatchingKeys(s,d.addedDocuments,h)));let w=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?w=w.withResumeToken(Gt.EMPTY_BYTE_STRING,pe.min()).withLastLimboFreeSnapshotVersion(pe.min()):d.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(d.resumeToken,r)),i=i.insert(h,w),function(P,N,_){return P.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=G4?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(m,w,d)&&a.push(n.hi.updateTargetData(s,w))});let u=ni(),c=Pe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(J4(s,o,e.documentUpdates).next(d=>{u=d.Ls,c=d.ks})),!r.isEqual(pe.min())){const d=n.hi.getLastRemoteSnapshotVersion(s).next(h=>n.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return z.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.Fs=i,s))}function J4(t,e,n){let r=Pe(),i=Pe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ni();return n.forEach((a,u)=>{const c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(pe.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):ne(Cy,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{Ls:o,ks:i}})}function Z4(t,e){const n=me(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=gy),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function eM(t,e){const n=me(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(s=>s?(i=s,z.resolve(i)):n.hi.allocateTargetId(r).next(o=>(i=new Ai(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function Dm(t,e,n){const r=me(t),i=r.Fs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!pa(o))throw o;ne(Cy,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function Z_(t,e,n){const r=me(t);let i=pe.min(),s=Pe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,d){const h=me(u),m=h.Ms.get(d);return m!==void 0?z.resolve(h.Fs.get(m)):h.hi.getTargetData(c,d)}(r,o,Pr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?i:pe.min(),n?s:Pe())).next(a=>(tM(r,$L(e),a),{documents:a,qs:s})))}function tM(t,e,n){let r=t.xs.get(e)||pe.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.xs.set(e,r)}class e1{constructor(){this.activeTargetIds=qL()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nM{constructor(){this.Fo=new e1,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new e1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1="ConnectivityMonitor";class n1{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ne(t1,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ne(t1,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mc=null;function Om(){return mc===null?mc=function(){return 268435456+Math.round(2147483648*Math.random())}():mc++,"0x"+mc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np="RestConnection",iM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class sM{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===xd?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,s){const o=Om(),a=this.Go(e,n.toUriEncodedString());ne(np,`Sending RPC '${e}' ${o}:`,a,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,s);const{host:c}=new URL(a),d=aa(c);return this.jo(e,a,u,r,d).then(h=>(ne(np,`Received RPC '${e}' ${o}: `,h),h),h=>{throw Qi(np,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Jo(e,n,r,i,s,o){return this.Wo(e,n,r,i,s)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ha}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,n){const r=iM[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt="WebChannelConnection";class aM extends sM{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,s){const o=Om();return new Promise((a,u)=>{const c=new UI;c.setWithCredentials(!0),c.listenOnce($I.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Fc.NO_ERROR:const h=c.getResponseJson();ne(Jt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case Fc.TIMEOUT:ne(Jt,`RPC '${e}' ${o} timed out`),u(new Z(B.DEADLINE_EXCEEDED,"Request time out"));break;case Fc.HTTP_ERROR:const m=c.getStatus();if(ne(Jt,`RPC '${e}' ${o} failed with status:`,m,"response text:",c.getResponseText()),m>0){let w=c.getResponseJson();Array.isArray(w)&&(w=w[0]);const b=w==null?void 0:w.error;if(b&&b.status&&b.message){const P=function(_){const v=_.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(v)>=0?v:B.UNKNOWN}(b.status);u(new Z(P,b.message))}else u(new Z(B.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new Z(B.UNAVAILABLE,"Connection failed."));break;default:he(9055,{c_:e,streamId:o,l_:c.getLastErrorCode(),h_:c.getLastError()})}}finally{ne(Jt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(i);ne(Jt,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",d,r,15)})}P_(e,n,r){const i=Om(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=zI(),a=BI(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const d=s.join("");ne(Jt,`Creating RPC '${e}' stream ${i}: ${d}`,u);const h=o.createWebChannel(d,u);this.T_(h);let m=!1,w=!1;const b=new oM({Ho:N=>{w?ne(Jt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(ne(Jt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),m=!0),ne(Jt,`RPC '${e}' stream ${i} sending:`,N),h.send(N))},Yo:()=>h.close()}),P=(N,_,v)=>{N.listen(_,A=>{try{v(A)}catch(D){setTimeout(()=>{throw D},0)}})};return P(h,Xa.EventType.OPEN,()=>{w||(ne(Jt,`RPC '${e}' stream ${i} transport opened.`),b.s_())}),P(h,Xa.EventType.CLOSE,()=>{w||(w=!0,ne(Jt,`RPC '${e}' stream ${i} transport closed`),b.__(),this.I_(h))}),P(h,Xa.EventType.ERROR,N=>{w||(w=!0,Qi(Jt,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),b.__(new Z(B.UNAVAILABLE,"The operation could not be completed")))}),P(h,Xa.EventType.MESSAGE,N=>{var _;if(!w){const v=N.data[0];Ue(!!v,16349);const A=v,D=(A==null?void 0:A.error)||((_=A[0])===null||_===void 0?void 0:_.error);if(D){ne(Jt,`RPC '${e}' stream ${i} received error:`,D);const M=D.status;let V=function(S){const k=vt[S];if(k!==void 0)return PP(k)}(M),E=D.message;V===void 0&&(V=B.INTERNAL,E="Unknown error status: "+M+" with message "+D.message),w=!0,b.__(new Z(V,E)),h.close()}else ne(Jt,`RPC '${e}' stream ${i} received:`,v),b.a_(v)}}),P(a,jI.STAT_EVENT,N=>{N.stat===Tm.PROXY?ne(Jt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Tm.NOPROXY&&ne(Jt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.o_()},0),b}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function rp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fh(t){return new d4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&ne("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1="PersistentStream";class $P{constructor(e,n,r,i,s,o,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new UP(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(ti(n.toString()),ti("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new Z(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return ne(r1,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(ne(r1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lM extends $P{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=p4(this.serializer,e),r=function(s){if(!("targetChange"in s))return pe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?pe.min():o.readTime?xr(o.readTime):pe.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=Rm(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=Sm(u)?{documents:y4(s,u)}:{query:v4(s,u).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=CP(s,o.resumeToken);const c=km(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(pe.min())>0){a.readTime=Nd(s,o.snapshotVersion.toTimestamp());const c=km(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=_4(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=Rm(this.serializer),n.removeTarget=e,this.k_(n)}}class uM extends $P{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Ue(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ue(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=g4(e.writeResults,e.commitTime),r=xr(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=Rm(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>m4(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{}class dM extends cM{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new Z(B.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,Am(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Z(B.UNKNOWN,s.toString())})}Jo(e,n,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,Am(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Z(B.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class hM{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ti(n),this._a=!1):ne("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs="RemoteStore";class fM{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{Ks(this)&&(ne(Fs,"Restarting streams for network reachability change."),await async function(u){const c=me(u);c.Ia.add(4),await vu(c),c.Aa.set("Unknown"),c.Ia.delete(4),await Uh(c)}(this))})}),this.Aa=new hM(r,i)}}async function Uh(t){if(Ks(t))for(const e of t.da)await e(!0)}async function vu(t){for(const e of t.da)await e(!1)}function jP(t,e){const n=me(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Ry(n)?Ny(n):ga(n).x_()&&Ay(n,e))}function ky(t,e){const n=me(t),r=ga(n);n.Ta.delete(e),r.x_()&&BP(n,e),n.Ta.size===0&&(r.x_()?r.B_():Ks(n)&&n.Aa.set("Unknown"))}function Ay(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ga(t).H_(e)}function BP(t,e){t.Ra.$e(e),ga(t).Y_(e)}function Ny(t){t.Ra=new a4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),ga(t).start(),t.Aa.aa()}function Ry(t){return Ks(t)&&!ga(t).M_()&&t.Ta.size>0}function Ks(t){return me(t).Ia.size===0}function zP(t){t.Ra=void 0}async function pM(t){t.Aa.set("Online")}async function mM(t){t.Ta.forEach((e,n)=>{Ay(t,e)})}async function gM(t,e){zP(t),Ry(t)?(t.Aa.la(e),Ny(t)):t.Aa.set("Unknown")}async function yM(t,e,n){if(t.Aa.set("Online"),e instanceof SP&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ta.delete(a),i.Ra.removeTarget(a))}(t,e)}catch(r){ne(Fs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Dd(t,r)}else if(e instanceof Bc?t.Ra.Ye(e):e instanceof xP?t.Ra.it(e):t.Ra.et(e),!n.isEqual(pe.min()))try{const r=await FP(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Ra.Pt(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const d=s.Ta.get(c);d&&s.Ta.set(c,d.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{const d=s.Ta.get(u);if(!d)return;s.Ta.set(u,d.withResumeToken(Gt.EMPTY_BYTE_STRING,d.snapshotVersion)),BP(s,u);const h=new Ai(d.target,u,c,d.sequenceNumber);Ay(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ne(Fs,"Failed to raise snapshot:",r),await Dd(t,r)}}async function Dd(t,e,n){if(!pa(e))throw e;t.Ia.add(1),await vu(t),t.Aa.set("Offline"),n||(n=()=>FP(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ne(Fs,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Uh(t)})}function WP(t,e){return e().catch(n=>Dd(t,n,e))}async function $h(t){const e=me(t),n=es(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:gy;for(;vM(e);)try{const i=await Z4(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,wM(e,i)}catch(i){await Dd(e,i)}HP(e)&&qP(e)}function vM(t){return Ks(t)&&t.Pa.length<10}function wM(t,e){t.Pa.push(e);const n=es(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function HP(t){return Ks(t)&&!es(t).M_()&&t.Pa.length>0}function qP(t){es(t).start()}async function _M(t){es(t).na()}async function EM(t){const e=es(t);for(const n of t.Pa)e.X_(n.mutations)}async function TM(t,e,n){const r=t.Pa.shift(),i=Ty.from(r,e,n);await WP(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await $h(t)}async function bM(t,e){e&&es(t).Z_&&await async function(r,i){if(function(o){return s4(o)&&o!==B.ABORTED}(i.code)){const s=r.Pa.shift();es(r).N_(),await WP(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await $h(r)}}(t,e),HP(t)&&qP(t)}async function i1(t,e){const n=me(t);n.asyncQueue.verifyOperationInProgress(),ne(Fs,"RemoteStore received new credentials");const r=Ks(n);n.Ia.add(3),await vu(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Uh(n)}async function IM(t,e){const n=me(t);e?(n.Ia.delete(2),await Uh(n)):e||(n.Ia.add(2),await vu(n),n.Aa.set("Unknown"))}function ga(t){return t.Va||(t.Va=function(n,r,i){const s=me(n);return s.ia(),new lM(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:pM.bind(null,t),e_:mM.bind(null,t),n_:gM.bind(null,t),J_:yM.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Ry(t)?Ny(t):t.Aa.set("Unknown")):(await t.Va.stop(),zP(t))})),t.Va}function es(t){return t.ma||(t.ma=function(n,r,i){const s=me(n);return s.ia(),new uM(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:_M.bind(null,t),n_:bM.bind(null,t),ea:EM.bind(null,t),ta:TM.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await $h(t)):(await t.ma.stop(),t.Pa.length>0&&(ne(Fs,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Dy(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Oy(t,e){if(ti("AsyncQueue",`${e}: ${t}`),pa(t))return new Z(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{static emptySet(e){return new Mo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ce.comparator(n.key,r.key):(n,r)=>ce.comparator(n.key,r.key),this.keyedMap=Ja(),this.sortedSet=new ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Mo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Mo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(){this.fa=new ot(ce.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):he(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Xo{constructor(e,n,r,i,s,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Xo(e,n,Mo.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class xM{constructor(){this.queries=o1(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const i=me(n),s=i.queries;i.queries=o1(),s.forEach((o,a)=>{for(const u of a.wa)u.onError(r)})})(this,new Z(B.ABORTED,"Firestore shutting down"))}}function o1(){return new Gs(t=>fP(t),Rh)}async function Ly(t,e){const n=me(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new PM,r=e.ba()?0:1);try{switch(r){case 0:s.ya=await n.onListen(i,!0);break;case 1:s.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Oy(o,`Initialization of query '${lo(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.wa.push(e),e.va(n.onlineState),s.ya&&e.Ca(s.ya)&&Vy(n)}async function My(t,e){const n=me(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function SM(t,e){const n=me(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.wa)a.Ca(i)&&(r=!0);o.ya=i}}r&&Vy(n)}function CM(t,e,n){const r=me(t),i=r.queries.get(e);if(i)for(const s of i.wa)s.onError(n);r.queries.delete(e)}function Vy(t){t.Da.forEach(e=>{e.next()})}var Lm,a1;(a1=Lm||(Lm={})).Fa="default",a1.Cache="cache";class Fy{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Xo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Xo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Lm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e){this.key=e}}class KP{constructor(e){this.key=e}}class kM{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Pe(),this.mutatedKeys=Pe(),this.Xa=pP(e),this.eu=new Mo(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new s1,i=n?n.eu:this.eu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const m=i.get(d),w=Dh(this.query,h)?h:null,b=!!m&&this.mutatedKeys.has(m.key),P=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let N=!1;m&&w?m.data.isEqual(w.data)?b!==P&&(r.track({type:3,doc:w}),N=!0):this.iu(m,w)||(r.track({type:2,doc:w}),N=!0,(u&&this.Xa(w,u)>0||c&&this.Xa(w,c)<0)&&(a=!0)):!m&&w?(r.track({type:0,doc:w}),N=!0):m&&!w&&(r.track({type:1,doc:m}),N=!0,(u||c)&&(a=!0)),N&&(w?(o=o.add(w),s=P?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{eu:o,ru:r,Ds:a,mutatedKeys:s}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((d,h)=>function(w,b){const P=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return he(20277,{At:N})}};return P(w)-P(b)}(d.type,h.type)||this.Xa(d.doc,h.doc)),this.su(r),i=i!=null&&i;const a=n&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,c=u!==this.Ya;return this.Ya=u,o.length!==0||c?{snapshot:new Xo(this.query,e.eu,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new s1,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Pe(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new KP(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new GP(r))}),n}uu(e){this.Ha=e.qs,this.Za=Pe();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Xo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Uy="SyncEngine";class AM{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class NM{constructor(e){this.key=e,this.lu=!1}}class RM{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new Gs(a=>fP(a),Rh),this.Tu=new Map,this.Iu=new Set,this.du=new ot(ce.comparator),this.Eu=new Map,this.Au=new Py,this.Ru={},this.Vu=new Map,this.mu=Yo.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function DM(t,e,n=!0){const r=ex(t);let i;const s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await QP(r,e,n,!0),i}async function OM(t,e){const n=ex(t);await QP(n,e,!0,!1)}async function QP(t,e,n,r){const i=await eM(t.localStore,Pr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await LM(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&jP(t.remoteStore,i),a}async function LM(t,e,n,r,i){t.gu=(h,m,w)=>async function(P,N,_,v){let A=N.view.nu(_);A.Ds&&(A=await Z_(P.localStore,N.query,!1).then(({documents:E})=>N.view.nu(E,A)));const D=v&&v.targetChanges.get(N.targetId),M=v&&v.targetMismatches.get(N.targetId)!=null,V=N.view.applyChanges(A,P.isPrimaryClient,D,M);return u1(P,N.targetId,V._u),V.snapshot}(t,h,m,w);const s=await Z_(t.localStore,e,!0),o=new kM(e,s.qs),a=o.nu(s.documents),u=yu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,u);u1(t,n,c._u);const d=new AM(e,n,o);return t.Pu.set(e,d),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),c.snapshot}async function MM(t,e,n){const r=me(t),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(o=>!Rh(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Dm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ky(r.remoteStore,i.targetId),Mm(r,i.targetId)}).catch(fa)):(Mm(r,i.targetId),await Dm(r.localStore,i.targetId,!0))}async function VM(t,e){const n=me(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ky(n.remoteStore,r.targetId))}async function FM(t,e,n){const r=HM(t);try{const i=await function(o,a){const u=me(o),c=Ye.now(),d=a.reduce((w,b)=>w.add(b.key),Pe());let h,m;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let b=ni(),P=Pe();return u.Os.getEntries(w,d).next(N=>{b=N,b.forEach((_,v)=>{v.isValidDocument()||(P=P.add(_))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,b)).next(N=>{h=N;const _=[];for(const v of a){const A=e4(v,h.get(v.key).overlayedDocument);A!=null&&_.push(new os(v.key,A,sP(A.value.mapValue),hn.exists(!0)))}return u.mutationQueue.addMutationBatch(w,c,_,a)}).next(N=>{m=N;const _=N.applyToLocalDocumentSet(h,P);return u.documentOverlayCache.saveOverlays(w,N.batchId,_)})}).then(()=>({batchId:m.batchId,changes:gP(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let c=o.Ru[o.currentUser.toKey()];c||(c=new ot(we)),c=c.insert(a,u),o.Ru[o.currentUser.toKey()]=c}(r,i.batchId,n),await wu(r,i.changes),await $h(r.remoteStore)}catch(i){const s=Oy(i,"Failed to persist write");n.reject(s)}}async function YP(t,e){const n=me(t);try{const r=await X4(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Eu.get(s);o&&(Ue(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?Ue(o.lu,14607):i.removedDocuments.size>0&&(Ue(o.lu,42227),o.lu=!1))}),await wu(n,r,e)}catch(r){await fa(r)}}function l1(t,e,n){const r=me(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Pu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=me(o);u.onlineState=a;let c=!1;u.queries.forEach((d,h)=>{for(const m of h.wa)m.va(a)&&(c=!0)}),c&&Vy(u)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function UM(t,e,n){const r=me(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),s=i&&i.key;if(s){let o=new ot(ce.comparator);o=o.insert(s,tn.newNoDocument(s,pe.min()));const a=Pe().add(s),u=new Vh(pe.min(),new Map,new ot(we),o,a);await YP(r,u),r.du=r.du.remove(s),r.Eu.delete(e),$y(r)}else await Dm(r.localStore,e,!1).then(()=>Mm(r,e,n)).catch(fa)}async function $M(t,e){const n=me(t),r=e.batch.batchId;try{const i=await Y4(n.localStore,e);JP(n,r,null),XP(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await wu(n,i)}catch(i){await fa(i)}}async function jM(t,e,n){const r=me(t);try{const i=await function(o,a){const u=me(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return u.mutationQueue.lookupMutationBatch(c,a).next(h=>(Ue(h!==null,37113),d=h.keys(),u.mutationQueue.removeMutationBatch(c,h))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>u.localDocuments.getDocuments(c,d))})}(r.localStore,e);JP(r,e,n),XP(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await wu(r,i)}catch(i){await fa(i)}}function XP(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function JP(t,e,n){const r=me(t);let i=r.Ru[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Mm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||ZP(t,r)})}function ZP(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(ky(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),$y(t))}function u1(t,e,n){for(const r of n)r instanceof GP?(t.Au.addReference(r.key,e),BM(t,r)):r instanceof KP?(ne(Uy,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||ZP(t,r.key)):he(19791,{yu:r})}function BM(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(ne(Uy,"New document in limbo: "+n),t.Iu.add(r),$y(t))}function $y(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new ce(He.fromString(e)),r=t.mu.next();t.Eu.set(r,new NM(n)),t.du=t.du.insert(n,r),jP(t.remoteStore,new Ai(Pr(Nh(n.path)),r,"TargetPurposeLimboResolution",Ch.ue))}}async function wu(t,e,n){const r=me(t),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{o.push(r.gu(u,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(c){i.push(c);const h=Sy.Es(u.targetId,c);s.push(h)}}))}),await Promise.all(o),r.hu.J_(i),await async function(u,c){const d=me(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>z.forEach(c,m=>z.forEach(m.Is,w=>d.persistence.referenceDelegate.addReference(h,m.targetId,w)).next(()=>z.forEach(m.ds,w=>d.persistence.referenceDelegate.removeReference(h,m.targetId,w)))))}catch(h){if(!pa(h))throw h;ne(Cy,"Failed to update sequence numbers: "+h)}for(const h of c){const m=h.targetId;if(!h.fromCache){const w=d.Fs.get(m),b=w.snapshotVersion,P=w.withLastLimboFreeSnapshotVersion(b);d.Fs=d.Fs.insert(m,P)}}}(r.localStore,s))}async function zM(t,e){const n=me(t);if(!n.currentUser.isEqual(e)){ne(Uy,"User change. New user:",e.toKey());const r=await VP(n.localStore,e);n.currentUser=e,function(s,o){s.Vu.forEach(a=>{a.forEach(u=>{u.reject(new Z(B.CANCELLED,o))})}),s.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await wu(n,r.Bs)}}function WM(t,e){const n=me(t),r=n.Eu.get(e);if(r&&r.lu)return Pe().add(r.key);{let i=Pe();const s=n.Tu.get(e);if(!s)return i;for(const o of s){const a=n.Pu.get(o);i=i.unionWith(a.view.tu)}return i}}function ex(t){const e=me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=YP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=WM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=UM.bind(null,e),e.hu.J_=SM.bind(null,e.eventManager),e.hu.pu=CM.bind(null,e.eventManager),e}function HM(t){const e=me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$M.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jM.bind(null,e),e}class Od{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Fh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return Q4(this.persistence,new q4,e.initialUser,this.serializer)}Du(e){return new MP(xy.Vi,this.serializer)}bu(e){return new nM}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Od.provider={build:()=>new Od};class qM extends Od{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Ue(this.persistence.referenceDelegate instanceof Rd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new N4(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new MP(r=>Rd.Vi(r,n),this.serializer)}}class Vm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>l1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=zM.bind(null,this.syncEngine),await IM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new xM}()}createDatastore(e){const n=Fh(e.databaseInfo.databaseId),r=function(s){return new aM(s)}(e.databaseInfo);return function(s,o,a,u){return new dM(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new fM(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>l1(this.syncEngine,n,0),function(){return n1.C()?new n1:new rM}())}createSyncEngine(e,n){return function(i,s,o,a,u,c,d){const h=new RM(i,s,o,a,u,c);return d&&(h.fu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=me(i);ne(Fs,"RemoteStore shutting down."),s.Ia.add(5),await vu(s),s.Ea.shutdown(),s.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Vm.provider={build:()=>new Vm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ti("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts="FirestoreClient";class GM{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Zt.UNAUTHENTICATED,this.clientId=my.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{ne(ts,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ne(ts,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Oy(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ip(t,e){t.asyncQueue.verifyOperationInProgress(),ne(ts,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await VP(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{Qi("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{ne("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Qi("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function c1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await KM(t);ne(ts,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>i1(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>i1(e.remoteStore,i)),t._onlineComponents=e}async function KM(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ne(ts,"Using user provided OfflineComponentProvider");try{await ip(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===B.FAILED_PRECONDITION||i.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Qi("Error using user provided cache. Falling back to memory cache: "+n),await ip(t,new Od)}}else ne(ts,"Using default OfflineComponentProvider"),await ip(t,new qM(void 0));return t._offlineComponents}async function tx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ne(ts,"Using user provided OnlineComponentProvider"),await c1(t,t._uninitializedComponentsProvider._online)):(ne(ts,"Using default OnlineComponentProvider"),await c1(t,new Vm))),t._onlineComponents}function QM(t){return tx(t).then(e=>e.syncEngine)}async function Ld(t){const e=await tx(t),n=e.eventManager;return n.onListen=DM.bind(null,e.syncEngine),n.onUnlisten=MM.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=OM.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=VM.bind(null,e.syncEngine),n}function YM(t,e,n={}){const r=new Gr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,c){const d=new jy({next:m=>{d.Ou(),o.enqueueAndForget(()=>My(s,h));const w=m.docs.has(a);!w&&m.fromCache?c.reject(new Z(B.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&m.fromCache&&u&&u.source==="server"?c.reject(new Z(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new Fy(Nh(a.path),d,{includeMetadataChanges:!0,ka:!0});return Ly(s,h)}(await Ld(t),t.asyncQueue,e,n,r)),r.promise}function XM(t,e,n={}){const r=new Gr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,c){const d=new jy({next:m=>{d.Ou(),o.enqueueAndForget(()=>My(s,h)),m.fromCache&&u.source==="server"?c.reject(new Z(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new Fy(a,d,{includeMetadataChanges:!0,ka:!0});return Ly(s,h)}(await Ld(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx="firestore.googleapis.com",h1=!0;class f1{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Z(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=rx,this.ssl=h1}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:h1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=LP;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<k4)throw new Z(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Z(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Z(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Z(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new f1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Z(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new f1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new iL;switch(r.type){case"firstParty":return new lL(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Z(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=d1.get(n);r&&(ne("ComponentProvider","Removing Datastore"),d1.delete(n),r.terminate())}(this),Promise.resolve()}}function JM(t,e,n,r={}){var i;t=dn(t,jh);const s=aa(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;s&&(Ub(`https://${u}`),$b("Firestore",!0)),o.host!==rx&&o.host!==u&&Qi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:u,ssl:s,emulatorOptions:r});if(!Os(c,a)&&(t._setSettings(c),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=Zt.MOCK_USER;else{d=BN(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Z(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Zt(m)}t._authCredentials=new sL(new HI(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ai(this.firestore,e,this._query)}}class dt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dt(this.firestore,e,this._key)}toJSON(){return{type:dt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(mu(n,dt._jsonSchema))return new dt(e,r||null,new ce(He.fromString(n.referencePath)))}}dt._jsonSchemaVersion="firestore/documentReference/1.0",dt._jsonSchema={type:Tt("string",dt._jsonSchemaVersion),referencePath:Tt("string")};class Wi extends ai{constructor(e,n,r){super(e,n,Nh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dt(this.firestore,null,new ce(e))}withConverter(e){return new Wi(this.firestore,e,this._path)}}function vn(t,e,...n){if(t=_e(t),GI("collection","path",e),t instanceof jh){const r=He.fromString(e,...n);return x_(r),new Wi(t,null,r)}{if(!(t instanceof dt||t instanceof Wi))throw new Z(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(He.fromString(e,...n));return x_(r),new Wi(t.firestore,null,r)}}function St(t,e,...n){if(t=_e(t),arguments.length===1&&(e=my.newId()),GI("doc","path",e),t instanceof jh){const r=He.fromString(e,...n);return P_(r),new dt(t,null,new ce(r))}{if(!(t instanceof dt||t instanceof Wi))throw new Z(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(He.fromString(e,...n));return P_(r),new dt(t.firestore,t instanceof Wi?t.converter:null,new ce(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1="AsyncQueue";class m1{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new UP(this,"async_queue_retry"),this.oc=()=>{const r=rp();r&&ne(p1,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=rp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=rp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Gr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!pa(e))throw e;ne(p1,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,ti("INTERNAL UNHANDLED ERROR: ",g1(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=Dy.createAndSchedule(this,e,n,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&he(47125,{hc:g1(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function g1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Nr extends jh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new m1,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new m1(e),this._firestoreClient=void 0,await e}}}function ix(t,e){const n=typeof t=="object"?t:Wb(),r=typeof t=="string"?t:e||xd,i=ry(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=$N("firestore");s&&JM(i,...s)}return i}function _u(t){if(t._terminated)throw new Z(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||ZM(t),t._firestoreClient}function ZM(t){var e,n,r;const i=t._freezeSettings(),s=function(a,u,c,d){return new PL(a,u,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,nx(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new GM(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bn(Gt.fromBase64String(e))}catch(n){throw new Z(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Bn(Gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Bn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(mu(e,Bn._jsonSchema))return Bn.fromBase64String(e.bytes)}}Bn._jsonSchemaVersion="firestore/bytes/1.0",Bn._jsonSchema={type:Tt("string",Bn._jsonSchemaVersion),bytes:Tt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Z(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Z(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Z(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return we(this._lat,e._lat)||we(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Sr._jsonSchemaVersion}}static fromJSON(e){if(mu(e,Sr._jsonSchema))return new Sr(e.latitude,e.longitude)}}Sr._jsonSchemaVersion="firestore/geoPoint/1.0",Sr._jsonSchema={type:Tt("string",Sr._jsonSchemaVersion),latitude:Tt("number"),longitude:Tt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Cr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(mu(e,Cr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Cr(e.vectorValues);throw new Z(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Cr._jsonSchemaVersion="firestore/vectorValue/1.0",Cr._jsonSchema={type:Tt("string",Cr._jsonSchemaVersion),vectorValues:Tt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eV=/^__.*__$/;class tV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new os(e,this.data,this.fieldMask,n,this.fieldTransforms):new gu(e,this.data,n,this.fieldTransforms)}}class sx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new os(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function ox(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw he(40011,{Ec:t})}}class By{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new By(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Md(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(ox(this.Ec)&&eV.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class nV{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Fh(e)}Dc(e,n,r,i=!1){return new By({Ec:e,methodName:n,bc:r,path:Wt.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tu(t){const e=t._freezeSettings(),n=Fh(t._databaseId);return new nV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function zy(t,e,n,r,i,s={}){const o=t.Dc(s.merge||s.mergeFields?2:0,e,n,i);Hy("Data must be an object, but it was:",o,r);const a=ux(r,o);let u,c;if(s.merge)u=new Nn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const m=Fm(e,h,n);if(!o.contains(m))throw new Z(B.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);dx(d,m)||d.push(m)}u=new Nn(d),c=o.fieldTransforms.filter(h=>u.covers(h.field))}else u=null,c=o.fieldTransforms;return new tV(new wn(a),u,c)}class zh extends Bh{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zh}}class Wy extends Bh{_toFieldTransform(e){return new YL(e.path,new eu)}isEqual(e){return e instanceof Wy}}function ax(t,e,n,r){const i=t.Dc(1,e,n);Hy("Data must be an object, but it was:",i,r);const s=[],o=wn.empty();ss(r,(u,c)=>{const d=qy(e,u,n);c=_e(c);const h=i.gc(d);if(c instanceof zh)s.push(d);else{const m=bu(c,h);m!=null&&(s.push(d),o.set(d,m))}});const a=new Nn(s);return new sx(o,a,i.fieldTransforms)}function lx(t,e,n,r,i,s){const o=t.Dc(1,e,n),a=[Fm(e,r,n)],u=[i];if(s.length%2!=0)throw new Z(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(Fm(e,s[m])),u.push(s[m+1]);const c=[],d=wn.empty();for(let m=a.length-1;m>=0;--m)if(!dx(c,a[m])){const w=a[m];let b=u[m];b=_e(b);const P=o.gc(w);if(b instanceof zh)c.push(w);else{const N=bu(b,P);N!=null&&(c.push(w),d.set(w,N))}}const h=new Nn(c);return new sx(d,h,o.fieldTransforms)}function rV(t,e,n,r=!1){return bu(n,t.Dc(r?4:3,e))}function bu(t,e){if(cx(t=_e(t)))return Hy("Unsupported field value:",e,t),ux(t,e);if(t instanceof Bh)return function(r,i){if(!ox(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=bu(a,i.yc(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=_e(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return GL(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ye.fromDate(r);return{timestampValue:Nd(i.serializer,s)}}if(r instanceof Ye){const s=new Ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Nd(i.serializer,s)}}if(r instanceof Sr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Bn)return{bytesValue:CP(i.serializer,r._byteString)};if(r instanceof dt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Iy(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Cr)return function(o,a){return{mapValue:{fields:{[nP]:{stringValue:iP},[Sd]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.wc("VectorValues must only contain numeric values.");return Ey(a.serializer,c)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${Sh(r)}`)}(t,e)}function ux(t,e){const n={};return YI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ss(t,(r,i)=>{const s=bu(i,e.Vc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function cx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ye||t instanceof Sr||t instanceof Bn||t instanceof dt||t instanceof Bh||t instanceof Cr)}function Hy(t,e,n){if(!cx(n)||!KI(n)){const r=Sh(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function Fm(t,e,n){if((e=_e(e))instanceof Eu)return e._internalPath;if(typeof e=="string")return qy(t,e);throw Md("Field path arguments must be of type string or ",t,!1,void 0,n)}const iV=new RegExp("[~\\*/\\[\\]]");function qy(t,e,n){if(e.search(iV)>=0)throw Md(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Eu(...e.split("."))._internalPath}catch{throw Md(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Md(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Z(B.INVALID_ARGUMENT,a+t+u)}function dx(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Wh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class sV extends hx{data(){return super.data()}}function Wh(t,e){return typeof e=="string"?qy(t,e):e instanceof Eu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Z(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gy{}class Ky extends Gy{}function nr(t,e,...n){let r=[];e instanceof Gy&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Qy).length,a=s.filter(u=>u instanceof Hh).length;if(o>1||o>0&&a>0)throw new Z(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Hh extends Ky{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Hh(e,n,r)}_apply(e){const n=this._parse(e);return px(e._query,n),new ai(e.firestore,e.converter,Cm(e._query,n))}_parse(e){const n=Tu(e.firestore);return function(s,o,a,u,c,d,h){let m;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Z(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){w1(h,d);const b=[];for(const P of h)b.push(v1(u,s,P));m={arrayValue:{values:b}}}else m=v1(u,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||w1(h,d),m=rV(a,o,h,d==="in"||d==="not-in");return Et.create(c,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function zt(t,e,n){const r=e,i=Wh("where",t);return Hh._create(i,r,n)}class Qy extends Gy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Qy(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:cr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)px(o,u),o=Cm(o,u)}(e._query,n),new ai(e.firestore,e.converter,Cm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Yy extends Ky{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Yy(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new Z(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Z(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zl(s,o)}(e._query,this._field,this._direction);return new ai(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new ma(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Vo(t,e="asc"){const n=e,r=Wh("orderBy",t);return Yy._create(r,n)}class Xy extends Ky{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Xy(e,n,r)}_apply(e){return new ai(e.firestore,e.converter,kd(e._query,this._limit,this._limitType))}}function oV(t){return pL("limit",t),Xy._create("limit",t,"F")}function v1(t,e,n){if(typeof(n=_e(n))=="string"){if(n==="")throw new Z(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hP(e)&&n.indexOf("/")!==-1)throw new Z(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(He.fromString(n));if(!ce.isDocumentKey(r))throw new Z(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return O_(t,new ce(r))}if(n instanceof dt)return O_(t,n._key);throw new Z(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sh(n)}.`)}function w1(t,e){if(!Array.isArray(t)||t.length===0)throw new Z(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function px(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Z(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Z(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class aV{convertValue(e,n="none"){switch(Zi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ji(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw he(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ss(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Sd].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>pt(o.doubleValue));return new Cr(s)}convertGeoPoint(e){return new Sr(pt(e.latitude),pt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ah(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Yl(e));default:return null}}convertTimestamp(e){const n=Xi(e);return new Ye(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=He.fromString(e);Ue(OP(r),9688,{name:e});const i=new Xl(r.get(1),r.get(3)),s=new ce(r.popFirst(5));return i.isEqual(n)||ti(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jy(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class el{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ss extends hx{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new zc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Wh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Z(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ss._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ss._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ss._jsonSchema={type:Tt("string",Ss._jsonSchemaVersion),bundleSource:Tt("string","DocumentSnapshot"),bundleName:Tt("string"),bundle:Tt("string")};class zc extends Ss{data(e={}){return super.data(e)}}class Cs{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new el(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new zc(this._firestore,this._userDataWriter,r.key,r,new el(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Z(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new zc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new el(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new zc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new el(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:lV(a.type),doc:u,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Z(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Cs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=my.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function lV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return he(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(t){t=dn(t,dt);const e=dn(t.firestore,Nr);return YM(_u(e),t._key).then(n=>gx(e,t,n))}Cs._jsonSchemaVersion="firestore/querySnapshot/1.0",Cs._jsonSchema={type:Tt("string",Cs._jsonSchemaVersion),bundleSource:Tt("string","QuerySnapshot"),bundleName:Tt("string"),bundle:Tt("string")};class Zy extends aV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new dt(this.firestore,null,n)}}function zr(t){t=dn(t,ai);const e=dn(t.firestore,Nr),n=_u(e),r=new Zy(e);return fx(t._query),XM(n,t._query).then(i=>new Cs(e,r,t,i))}function tl(t,e,n){t=dn(t,dt);const r=dn(t.firestore,Nr),i=Jy(t.converter,e,n);return Iu(r,[zy(Tu(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,hn.none())])}function Ii(t,e,n,...r){t=dn(t,dt);const i=dn(t.firestore,Nr),s=Tu(i);let o;return o=typeof(e=_e(e))=="string"||e instanceof Eu?lx(s,"updateDoc",t._key,e,n,r):ax(s,"updateDoc",t._key,e),Iu(i,[o.toMutation(t._key,hn.exists(!0))])}function ev(t){return Iu(dn(t.firestore,Nr),[new Mh(t._key,hn.none())])}function tv(t,e){const n=dn(t.firestore,Nr),r=St(t),i=Jy(t.converter,e);return Iu(n,[zy(Tu(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,hn.exists(!1))]).then(()=>r)}function mx(t,...e){var n,r,i;t=_e(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||y1(e[o])||(s=e[o++]);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(y1(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let u,c,d;if(t instanceof dt)c=dn(t.firestore,Nr),d=Nh(t._key.path),u={next:h=>{e[o]&&e[o](gx(c,t,h))},error:e[o+1],complete:e[o+2]};else{const h=dn(t,ai);c=dn(h.firestore,Nr),d=h._query;const m=new Zy(c);u={next:w=>{e[o]&&e[o](new Cs(c,m,h,w))},error:e[o+1],complete:e[o+2]},fx(t._query)}return function(m,w,b,P){const N=new jy(P),_=new Fy(w,N,b);return m.asyncQueue.enqueueAndForget(async()=>Ly(await Ld(m),_)),()=>{N.Ou(),m.asyncQueue.enqueueAndForget(async()=>My(await Ld(m),_))}}(_u(c),d,a,u)}function Iu(t,e){return function(r,i){const s=new Gr;return r.asyncQueue.enqueueAndForget(async()=>FM(await QM(r),i,s)),s.promise}(_u(t),e)}function gx(t,e,n){const r=n.docs.get(e._key),i=new Zy(t);return new Ss(t,i,e._key,r,new el(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Tu(e)}set(e,n,r){this._verifyNotCommitted();const i=sp(e,this._firestore),s=Jy(i.converter,n,r),o=zy(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,hn.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=sp(e,this._firestore);let o;return o=typeof(n=_e(n))=="string"||n instanceof Eu?lx(this._dataReader,"WriteBatch.update",s._key,n,r,i):ax(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,hn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=sp(e,this._firestore);return this._mutations=this._mutations.concat(new Mh(n._key,hn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Z(B.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function sp(t,e){if((t=_e(t)).firestore!==e)throw new Z(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function nt(){return new Wy("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(t){return _u(t=dn(t,Nr)),new uV(t,e=>Iu(t,e))}(function(e,n=!0){(function(i){ha=i})(ua),qo(new Ls("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Nr(new oL(r.getProvider("auth-internal")),new uL(o,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Z(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xl(c.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ji(__,E_,e),ji(__,E_,"esm2017")})();var cV="firebase",dV="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ji(cV,dV,"app");/*! Capacitor: https://capacitorjs.com/ - MIT License */var Jo;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Jo||(Jo={}));let op=class extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}};const hV=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},fV=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},i=()=>e!==null?e.name:hV(t),s=()=>i()!=="web",o=h=>{const m=c.get(h);return!!(m!=null&&m.platforms.has(i())||a(h))},a=h=>{var m;return(m=n.PluginHeaders)===null||m===void 0?void 0:m.find(w=>w.name===h)},u=h=>t.console.error(h),c=new Map,d=(h,m={})=>{const w=c.get(h);if(w)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),w.proxy;const b=i(),P=a(h);let N;const _=async()=>(!N&&b in m?N=typeof m[b]=="function"?N=await m[b]():N=m[b]:e!==null&&!N&&"web"in m&&(N=typeof m.web=="function"?N=await m.web():N=m.web),N),v=(y,S)=>{var k,R;if(P){const T=P==null?void 0:P.methods.find(I=>S===I.name);if(T)return T.rtype==="promise"?I=>n.nativePromise(h,S.toString(),I):(I,W)=>n.nativeCallback(h,S.toString(),I,W);if(y)return(k=y[S])===null||k===void 0?void 0:k.bind(y)}else{if(y)return(R=y[S])===null||R===void 0?void 0:R.bind(y);throw new op(`"${h}" plugin is not implemented on ${b}`,Jo.Unimplemented)}},A=y=>{let S;const k=(...R)=>{const T=_().then(I=>{const W=v(I,y);if(W){const H=W(...R);return S=H==null?void 0:H.remove,H}else throw new op(`"${h}.${y}()" is not implemented on ${b}`,Jo.Unimplemented)});return y==="addListener"&&(T.remove=async()=>S()),T};return k.toString=()=>`${y.toString()}() { [capacitor code] }`,Object.defineProperty(k,"name",{value:y,writable:!1,configurable:!1}),k},D=A("addListener"),M=A("removeListener"),V=(y,S)=>{const k=D({eventName:y},S),R=async()=>{const I=await k;M({eventName:y,callbackId:I},S)},T=new Promise(I=>k.then(()=>I({remove:R})));return T.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await R()},T},E=new Proxy({},{get(y,S){switch(S){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return P?V:D;case"removeListener":return M;default:return A(S)}}});return r[h]=E,c.set(h,{name:h,proxy:E,platforms:new Set([...Object.keys(m),...P?[b]:[]])}),E};return n.convertFileSrc||(n.convertFileSrc=h=>h),n.getPlatform=i,n.handleError=u,n.isNativePlatform=s,n.isPluginAvailable=o,n.registerPlugin=d,n.Exception=op,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},pV=t=>t.Capacitor=fV(t),Us=pV(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Qs=Us.registerPlugin;let yx=class{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const s=this.windowListeners[e];s&&!s.registered&&this.addWindowListener(s),r&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const i=this.listeners[e];if(!i){if(r){let s=this.retainedEventArguments[e];s||(s=[]),s.push(n),this.retainedEventArguments[e]=s}return}i.forEach(s=>s(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new Us.Exception(e,Jo.Unimplemented)}unavailable(e="not available"){return new Us.Exception(e,Jo.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const i=r.indexOf(n);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}};const _1=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),E1=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);let mV=class extends yx{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[i,s]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=E1(i).trim(),s=E1(s).trim(),n[i]=s}),n}async setCookie(e){try{const n=_1(e.key),r=_1(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,s=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${i}; path=${s}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}};Qs("CapacitorCookies",{web:()=>new mV});const gV=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const i=r.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>n(i),r.readAsDataURL(t)}),yV=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(i=>i.toLocaleLowerCase()).reduce((i,s,o)=>(i[s]=t[e[o]],i),{})},vV=(t,e=!0)=>t?Object.entries(t).reduce((r,i)=>{const[s,o]=i;let a,u;return Array.isArray(o)?(u="",o.forEach(c=>{a=e?encodeURIComponent(c):c,u+=`${s}=${a}&`}),u.slice(0,-1)):(a=e?encodeURIComponent(o):o,u=`${s}=${a}`),`${r}&${u}`},"").substr(1):null,wV=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),i=yV(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(i.includes("application/x-www-form-urlencoded")){const s=new URLSearchParams;for(const[o,a]of Object.entries(t.data||{}))s.set(o,a);n.body=s.toString()}else if(i.includes("multipart/form-data")||t.data instanceof FormData){const s=new FormData;if(t.data instanceof FormData)t.data.forEach((a,u)=>{s.append(u,a)});else for(const a of Object.keys(t.data))s.append(a,t.data[a]);n.body=s;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(i.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};let _V=class extends yx{async request(e){const n=wV(e,e.webFetchExtra),r=vV(e.params,e.shouldEncodeUrlParams),i=r?`${e.url}?${r}`:e.url,s=await fetch(i,n),o=s.headers.get("content-type")||"";let{responseType:a="text"}=s.ok?e:{};o.includes("application/json")&&(a="json");let u,c;switch(a){case"arraybuffer":case"blob":c=await s.blob(),u=await gV(c);break;case"json":u=await s.json();break;case"document":case"text":default:u=await s.text()}const d={};return s.headers.forEach((h,m)=>{d[m]=h}),{data:u,headers:d,status:s.status,url:s.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}};Qs("CapacitorHttp",{web:()=>new _V});const Ni=Qs("PushNotifications",{}),EV={apiKey:"AIzaSyA-ArIwmJG4_Qlh4wGw-AZkbPt0omfRU4Y",authDomain:"followups-a83a7.firebaseapp.com",projectId:"followups-a83a7",storageBucket:"followups-a83a7.firebasestorage.app",messagingSenderId:"622370701795",appId:"1:622370701795:web:017cbdcd0d0753612e60d6"},vx=zb(EV),mi=VI(vx),Ne=ix(vx),TV=async()=>{const t=Us.getPlatform();try{if(t==="web")return console.warn("Push notifications not fully supported on web. Skipping FCM token retrieval."),null;if((await Ni.requestPermissions()).receive!=="granted")throw new Error("Notification permission denied");return await Ni.register(),new Promise((n,r)=>{Ni.addListener("registration",i=>{console.log("FCM token registered:",i.value),n(i.value)}),Ni.addListener("registrationError",i=>{console.error("FCM registration error:",i),r(new Error(`FCM registration error: ${i.error}`))})})}catch(e){throw console.error("Notification permission error:",e),e}},wx=Te.createContext(void 0),bV=({message:t,type:e="info",duration:n=5e3,onClose:r})=>{const[i,s]=O.useState(!0);O.useEffect(()=>{const d=setTimeout(()=>{s(!1),setTimeout(()=>r&&r(),300)},n);return()=>clearTimeout(d)},[n,r]);const o=()=>{s(!1),setTimeout(()=>r&&r(),300)},a=()=>{const d="fixed top-4 right-4 z-50 max-w-sm w-full bg-white dark:bg-slate-800 rounded-lg shadow-lg border p-4 transition-all duration-300 transform";if(!i)return`${d} translate-x-full opacity-0`;switch(e){case"success":return`${d} border-green-200 dark:border-green-800`;case"error":return`${d} border-red-200 dark:border-red-800`;case"warning":return`${d} border-yellow-200 dark:border-yellow-800`;default:return`${d} border-blue-200 dark:border-blue-800`}},u=()=>{const d={className:"w-5 h-5 flex-shrink-0"};switch(e){case"success":return p(Xg,{...d,className:"w-5 h-5 flex-shrink-0 text-green-600 dark:text-green-400"});case"error":return p(_N,{...d,className:"w-5 h-5 flex-shrink-0 text-red-600 dark:text-red-400"});case"warning":return p(wN,{...d,className:"w-5 h-5 flex-shrink-0 text-yellow-600 dark:text-yellow-400"});default:return p(IN,{...d,className:"w-5 h-5 flex-shrink-0 text-blue-600 dark:text-blue-400"})}},c=()=>{switch(e){case"success":return"text-green-800 dark:text-green-200";case"error":return"text-red-800 dark:text-red-200";case"warning":return"text-yellow-800 dark:text-yellow-200";default:return"text-blue-800 dark:text-blue-200"}};return p("div",{className:a(),children:x("div",{className:"flex items-start space-x-3",children:[u(),p("div",{className:"flex-1",children:p("p",{className:`text-sm font-medium ${c()}`,children:t})}),p("button",{onClick:o,className:"flex-shrink-0 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:p(ey,{className:"w-4 h-4"})})]})})},Vn=()=>{const t=Te.useContext(wx);if(!t)throw new Error("useToast must be used within a ToastProvider");return t},IV=({children:t})=>{const[e,n]=O.useState([]),r=(c,d="info",h=5e3)=>{const m=Date.now()+Math.random(),w={id:m,message:c,type:d,duration:h};n(b=>[...b,w]),setTimeout(()=>{i(m)},h+300)},i=c=>{n(d=>d.filter(h=>h.id!==c))},s=(c,d)=>r(c,"success",d),o=(c,d)=>r(c,"error",d),a=(c,d)=>r(c,"warning",d),u=(c,d)=>r(c,"info",d);return x(wx.Provider,{value:{addToast:r,showSuccess:s,showError:o,showWarning:a,showInfo:u},children:[t,e.map(c=>p(bV,{message:c.message,type:c.type,duration:c.duration,onClose:()=>i(c.id)},c.id))]})},PV="modulepreload",xV=function(t){return"/"+t},T1={},$s=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=xV(s),s in T1)return;T1[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let d=i.length-1;d>=0;d--){const h=i[d];if(h.href===s&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":PV,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((d,h)=>{c.addEventListener("load",d),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var b1;(function(t){t.IndexedDbLocal="INDEXED_DB_LOCAL",t.InMemory="IN_MEMORY",t.BrowserLocal="BROWSER_LOCAL",t.BrowserSession="BROWSER_SESSION"})(b1||(b1={}));var I1;(function(t){t.APPLE="apple.com",t.FACEBOOK="facebook.com",t.GAME_CENTER="gc.apple.com",t.GITHUB="github.com",t.GOOGLE="google.com",t.MICROSOFT="microsoft.com",t.PLAY_GAMES="playgames.google.com",t.TWITTER="twitter.com",t.YAHOO="yahoo.com",t.PASSWORD="password",t.PHONE="phone"})(I1||(I1={}));const SV=Qs("FirebaseAuthentication",{web:()=>$s(()=>import("./web-0c300159.js"),[]).then(t=>new t.FirebaseAuthenticationWeb)}),_x=O.createContext({currentUser:null,userProfile:null,loading:!0,signInWithGoogle:async()=>({user:null,error:"Not implemented"}),signInWithEmail:async()=>({user:null,error:"Not implemented"}),signUpWithEmail:async()=>({user:null,error:"Not implemented"}),logout:async()=>({error:"Not implemented"}),updateUserProfile:async()=>({error:"Not implemented"}),createUserProfile:async()=>({error:"Not implemented"})}),Sn=()=>{const t=O.useContext(_x);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},CV=({children:t})=>{const[e,n]=O.useState(null),[r,i]=O.useState(!0),[s,o]=O.useState(null),{showError:a}=Vn(),u=Us.getPlatform()!=="web",c=async(D=3,M=1e3)=>{for(let V=1;V<=D;V++){try{const E=await TV();if(E&&typeof E=="string"&&E.length>10)return console.log(`FCM token retrieved on attempt ${V}: ${E}`),E;console.warn(`Invalid or empty FCM token on attempt ${V}: ${E}`)}catch(E){console.error(`FCM permission error on attempt ${V}:`,E)}V<D&&await new Promise(E=>setTimeout(E,M))}return a("Failed to retrieve valid FCM token after retries. Notifications may not work."),null},d=async()=>{var V,E;const D=new wr;D.addScope("email profile");const M=new Map([["auth/popup-closed-by-user","Sign-in cancelled."],["auth/popup-blocked","Pop-up blocked. Trying redirect..."],["auth/cancelled-popup-request","Sign-in cancelled."],["auth/network-request-failed","Network error. Check your connection."],["auth/too-many-requests","Too many attempts. Try again later."],["auth/user-disabled","Account disabled. Contact support."],["auth/account-exists-with-different-credential","Account exists with different credentials."]]);try{if(u)try{const y=await SV.signInWithGoogle(),S=((V=y.credential)==null?void 0:V.idToken)??null,k=((E=y.credential)==null?void 0:E.accessToken)??null;if(!S)throw new Error("No valid Google ID token from native sign-in");const R=wr.credential(S,k),I=(await Th(mi,R)).user,W=await b(I);if(W.error)throw new Error(W.error);const H=await c();if(H){const de=await P(I.uid,H);if(de.error)throw new Error(de.error)}return{user:I,error:null}}catch(y){throw console.warn("Native Google sign-in failed:",y),new Error("Native sign-in failed. Please try email/password.")}try{const S=(await cO(mi,D)).user,k=await b(S);if(k.error)throw new Error(k.error);const R=await c();if(R){const T=await P(S.uid,R);if(T.error)throw new Error(T.error)}return{user:S,error:null}}catch(y){if(y.code==="auth/popup-blocked"||y.code==="auth/popup-closed-by-user"||y.code==="auth/cancelled-popup-request")return await mO(mi,D),{user:null,error:null,pending:!0};throw y}}catch(y){const S=M.get(y.code)||y.message||"Sign-in failed.";return a(S),{user:null,error:S}}},h=async(D,M)=>{const V=new Map([["auth/user-not-found","No account found."],["auth/wrong-password","Incorrect password."],["auth/invalid-email","Invalid email address."],["auth/user-disabled","Account disabled."],["auth/too-many-requests","Too many attempts."],["auth/network-request-failed","Network error."]]);try{const y=(await SD(mi,D,M)).user,S=await b(y);if(S.error)throw new Error(S.error);const k=await c();if(k){const R=await P(y.uid,k);if(R.error)throw new Error(R.error)}return{user:y,error:null}}catch(E){const y=V.get(E.code)||"Sign-in failed.";return a(y),{user:null,error:y}}},m=async(D,M,V)=>{const E=new Map([["auth/email-already-in-use","Email already in use."],["auth/invalid-email","Invalid email address."],["auth/weak-password","Password too weak."],["auth/operation-not-allowed","Email/password not enabled."],["auth/network-request-failed","Network error."]]);try{const S=(await xD(mi,D,M)).user;await AD(S,{displayName:V});const k=await b(S,{displayName:V});if(k.error)throw new Error(k.error);const R=await c();if(R){const T=await P(S.uid,R);if(T.error)throw new Error(T.error)}return{user:S,error:null}}catch(y){const S=E.get(y.code)||"Account creation failed.";return a(S),{user:null,error:S}}},w=async()=>{try{return await FD(mi),o(null),{error:null}}catch(D){const M=D.message||"Sign-out failed.";return a(M),{error:M}}},b=async(D,M={})=>{if(!D)return{error:"No user provided"};const V=St(Ne,"users",D.uid);try{return(await ln(V)).exists()?(await tl(V,{lastLoginAt:nt(),updatedAt:nt()},{merge:!0}),console.log(`User profile updated for ${D.uid}`)):(await tl(V,{displayName:D.displayName||M.displayName||"User",email:D.email||"",photoURL:D.photoURL||"",role:"dentist",createdAt:nt(),updatedAt:nt(),lastLoginAt:nt(),preferences:{theme:"light",notifications:!0,language:"en"},...M}),console.log(`User profile created for ${D.uid}`)),{error:null}}catch(E){const y=E.message||"Failed to create/update user profile";return console.error("Error creating/updating user profile:",E),{error:y}}},P=async(D,M)=>{if(!M||typeof M!="string"||M.length<10){const V="Invalid FCM token provided";return console.error(V,M),{error:V}}try{const V=St(Ne,"users",D);return(await ln(V)).exists()?(await tl(V,{fcmToken:M,updatedAt:nt()},{merge:!0}),console.log(`FCM token updated for ${D}: ${M}`),{error:null}):{error:"User profile not found"}}catch(V){const E=V.message||"Failed to update FCM token";return console.error("Error updating FCM token:",V),{error:E}}},N=async D=>{try{const M=St(Ne,"users",D),V=await ln(M);return V.exists()?V.data():(console.warn(`No user profile found for ${D}`),null)}catch(M){return console.error("Error getting user profile:",M),null}},_=async(D,M)=>{try{const V=St(Ne,"users",D);return await tl(V,{...M,updatedAt:nt()},{merge:!0}),o(E=>E?{...E,...M}:null),console.log(`User profile updated for ${D}`),{error:null}}catch(V){const E=V.message||"Update failed";return a(E),{error:E}}},v=O.useCallback(async D=>{if(D){n(D);const M=await N(D.uid);if(!M){const E=await b(D);if(E.error){a(E.error),i(!1);return}}o(M);const V=await c();if(V){const E=await P(D.uid,V);E.error&&a(E.error)}i(!1)}else n(null),o(null),i(!1)},[a]);O.useEffect(()=>{const D=EI(mi,v);return Us.getPlatform()==="web"&&vO(mi).then(async M=>{M&&await v(M.user)}).catch(M=>{console.error("Redirect result error:",M),a(M.message||"Redirect sign-in failed."),i(!1)}),()=>D()},[v]);const A={currentUser:e,userProfile:s,loading:r,signInWithGoogle:d,signInWithEmail:h,signUpWithEmail:m,logout:w,updateUserProfile:_,createUserProfile:b};return p(_x.Provider,{value:A,children:r?p("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-secondary-50 dark:from-slate-900 dark:to-slate-800 flex items-center justify-center",children:x("div",{className:"text-center",children:[p("div",{className:"w-16 h-16 bg-primary rounded-2xl flex items-center justify-center mx-auto mb-6 animate-pulse",children:p("div",{className:"w-8 h-8 bg-white rounded-full"})}),p("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),p("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"DentalCare"}),p("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading your dental practice..."})]})}):t})},er="patients",fr="followups",ho="treatments";async function P1(t,e){try{const n=nr(vn(Ne,ho),zt("patientId","==",t),zt("userId","==",e),Vo("date","desc"),oV(1)),r=await zr(n);return r.empty?null:r.docs[0].data().date}catch{return null}}const lr={async create(t,e){try{const n={name:t.name||"",email:t.email||null,phone:t.phone||null,dateOfBirth:t.dateOfBirth||null,gender:t.gender||null,address:t.address||null,city:t.city||null,zipCode:t.zipCode||null,emergencyContact:t.emergencyContact||null,allergies:t.allergies||null,medications:t.medications||null,medicalHistory:t.medicalHistory||null,insuranceProvider:t.insuranceProvider||null,policyNumber:t.policyNumber||null,notes:t.notes||null,nextAppointment:t.nextAppointment||null,userId:e,lastVisit:null,createdAt:nt(),updatedAt:nt()};return{id:(await tv(vn(Ne,er),n)).id,error:null}}catch(n){return{id:null,error:n.message||"Failed to create patient"}}},async getById(t){try{const e=St(Ne,er,t),n=await ln(e);if(n.exists()){const r=n.data();return{patient:{id:n.id,...r},error:null}}return{patient:null,error:"Patient not found"}}catch(e){return{patient:null,error:e.message||"Failed to fetch patient"}}},async getAll(t){try{const e=nr(vn(Ne,er),zt("userId","==",t));return{patients:(await zr(e)).docs.map(i=>{const s=i.data();return{id:i.id,...s}}),error:null}}catch(e){return{patients:[],error:e.message||"Failed to fetch patients"}}},async update(t,e,n){try{const r=St(Ne,er,t),i=await ln(r);if(!i.exists())return{error:"Patient not found"};const s=i.data();if(s.userId!==n)return{error:"Unauthorized: userId does not match"};const o={...s,...e,updatedAt:nt()};return await Ii(r,o),{error:null}}catch(r){return{error:r.message||"Failed to update patient"}}},async delete(t,e){try{const n=St(Ne,er,t),r=await ln(n);return r.exists()?r.data().userId!==e?{error:"Unauthorized: userId does not match"}:(await ev(n),{error:null}):{error:null}}catch(n){return{error:n.message||"Failed to delete patient"}}},onSnapshot(t,e){const n=nr(vn(Ne,er),zt("userId","==",t),Vo("createdAt","desc"));return mx(n,r=>{const i=r.docs.map(s=>{const o=s.data();return{id:s.id,...o}});e(i)},r=>{})},async search(t,e){try{const n=nr(vn(Ne,er),zt("userId","==",t));return{patients:(await zr(n)).docs.map(o=>{const a=o.data();return{id:o.id,...a}}).filter(o=>o.name.toLowerCase().includes(e.toLowerCase())||o.email&&o.email.toLowerCase().includes(e.toLowerCase())||o.phone&&o.phone.includes(e)),error:null}}catch(n){return{patients:[],error:n.message||"Failed to search patients"}}}},En={async create(t,e,n){try{const r={...t,userId:e,patientId:n,status:t.status||"pending",createdAt:nt(),updatedAt:nt(),completedAt:null,completionNotes:null,isRead:!1};return{id:(await tv(vn(Ne,fr),r)).id,error:null}}catch(r){return{id:null,error:r.message||"Failed to create follow-up"}}},async getAll(t){try{const e=nr(vn(Ne,fr),zt("userId","==",t));return{followUps:(await zr(e)).docs.map(i=>({id:i.id,...i.data()})),error:null}}catch(e){return{followUps:[],error:e.message||"Failed to fetch follow-ups"}}},async getByPatient(t,e){try{const n=nr(vn(Ne,fr),zt("userId","==",e),zt("patientId","==",t),Vo("scheduledDate","desc"));return{followUps:(await zr(n)).docs.map(s=>({id:s.id,...s.data()})),error:null}}catch(n){return{followUps:[],error:n.message||"Failed to fetch follow-ups by patient"}}},async getOverdue(t){try{const e=nr(vn(Ne,fr),zt("userId","==",t),zt("status","==","overdue"),Vo("scheduledDate","desc"));return{followUps:(await zr(e)).docs.map(i=>({id:i.id,...i.data()})),error:null}}catch(e){return{followUps:[],error:e.message||"Failed to fetch overdue follow-ups"}}},async updateStatus(t,e,n){try{const r=St(Ne,fr,t);return(await ln(r)).exists()?(await Ii(r,{status:e,completionNotes:n,updatedAt:nt(),completedAt:e==="completed"?nt():null}),{error:null}):{error:"Follow-up not found"}}catch(r){return{error:r.message||"Failed to update follow-up status"}}},async update(t,e,n){try{const r=St(Ne,fr,t),i=await ln(r);return i.exists()?i.data().userId!==n?{error:"Unauthorized: userId does not match"}:(await Ii(r,{...e,updatedAt:nt()}),{error:null}):{error:"Follow-up not found"}}catch(r){return{error:r.message||"Failed to update follow-up"}}},async delete(t,e){try{const n=St(Ne,fr,t),r=await ln(n);return r.exists()?r.data().userId!==e?{error:"Unauthorized: userId does not match"}:(await ev(n),{error:null}):{error:null}}catch(n){return{error:n.message||"Failed to delete follow-up"}}},async deleteByPatientId(t,e){try{const n=nr(vn(Ne,fr),zt("patientId","==",t),zt("userId","==",e)),r=await zr(n);if(r.empty)return{error:null};const i=Um(Ne);return r.forEach(s=>{i.delete(s.ref)}),await i.commit(),{error:null}}catch(n){return{error:n.message||"Failed to delete follow-ups for patient"}}},onSnapshot(t,e){const n=nr(vn(Ne,fr),zt("userId","==",t),Vo("scheduledDate","desc"));return mx(n,r=>{const i=r.docs.map(s=>({id:s.id,...s.data()}));e(i)},r=>{})},async updateOverdueStatus(t){try{const{followUps:e}=await this.getAll(t),n=new Date().toISOString().split("T")[0],r=Um(Ne);return e.forEach(i=>{i.status==="pending"&&i.scheduledDate<n&&r.update(St(Ne,fr,i.id),{status:"overdue",updatedAt:nt()})}),await r.commit(),{error:null}}catch(e){return{error:e.message||"Failed to update overdue status"}}}},nl={async create(t,e){let n;try{n=await tv(vn(Ne,ho),{...t,userId:e,createdAt:nt(),updatedAt:nt()})}catch(r){return{id:null,error:r.message||"Failed to create treatment"}}try{const r=St(Ne,er,t.patientId),i=await ln(r);if(i.exists()){const s=i.data();if(s.userId===e){const o=s.lastVisit?new Date(s.lastVisit):null,a=new Date(t.date);(!o||a>o)&&await Ii(r,{lastVisit:t.date,updatedAt:nt()})}}}catch{}return{id:n.id,error:null}},async getByPatient(t,e){try{const n=nr(vn(Ne,ho),zt("userId","==",e),zt("patientId","==",t),Vo("date","desc"));return{treatments:(await zr(n)).docs.map(s=>({id:s.id,...s.data()})),error:null}}catch(n){return{treatments:[],error:n.message||"Failed to fetch treatments"}}},async update(t,e,n){try{const r=St(Ne,ho,t),i=await ln(r);if(!i.exists())return{error:"Treatment not found"};if(i.data().userId!==n)return{error:"Unauthorized: userId does not match"};if(await Ii(r,{...e,updatedAt:nt()}),e.date&&e.patientId)try{const o=St(Ne,er,e.patientId),a=await ln(o);if(a.exists()&&a.data().userId===n){const u=await P1(e.patientId,n);await Ii(o,{lastVisit:u,updatedAt:nt()})}}catch{}return{error:null}}catch(r){return{error:r.message||"Failed to update treatment"}}},async delete(t,e){try{const n=St(Ne,ho,t),r=await ln(n);if(!r.exists())return{error:null};const i=r.data();if(i.userId!==e)return{error:"Unauthorized: userId does not match"};await ev(n);try{const s=St(Ne,er,i.patientId),o=await ln(s);if(o.exists()&&o.data().userId===e){const a=await P1(i.patientId,e);await Ii(s,{lastVisit:a,updatedAt:nt()})}}catch{}return{error:null}}catch(n){return{error:n.message||"Failed to delete treatment"}}},async deleteByPatientId(t,e){try{const n=nr(vn(Ne,ho),zt("patientId","==",t),zt("userId","==",e)),r=await zr(n);if(r.empty)return{error:null};const i=Um(Ne);r.forEach(s=>{i.delete(s.ref)}),await i.commit();try{const s=St(Ne,er,t),o=await ln(s);o.exists()&&o.data().userId===e&&await Ii(s,{lastVisit:null,updatedAt:nt()})}catch{}return{error:null}}catch(n){return{error:n.message||"Failed to delete treatments for patient"}}}},Ex=O.createContext(void 0),kV=({children:t})=>{const{currentUser:e}=Sn(),{showError:n}=Vn(),[r,i]=O.useState([]),[s,o]=O.useState(0),a=async d=>{try{const{error:h}=await En.updateOverdueStatus(d);if(h){n(`Failed to update overdue statuses: ${h}`);return}const m=new Date().toISOString().split("T")[0],{followUps:w,error:b}=await En.getAll(d);if(b){n(`Failed to fetch notifications: ${b}`);return}const P=w.filter(N=>(N.status==="pending"||N.status==="overdue")&&N.scheduledDate<=m).sort((N,_)=>new Date(N.scheduledDate).getTime()-new Date(_.scheduledDate).getTime());i(P),o(P.filter(N=>!N.isRead).length)}catch(h){n(`Unexpected error fetching notifications: ${h.message}`)}};O.useEffect(()=>{if(!(e!=null&&e.uid)){i([]),o(0);return}a(e.uid);const d=En.onSnapshot(e.uid,h=>{const m=new Date().toISOString().split("T")[0],w=h.filter(b=>(b.status==="pending"||b.status==="overdue")&&b.scheduledDate<=m).sort((b,P)=>new Date(b.scheduledDate).getTime()-new Date(P.scheduledDate).getTime());i(w),o(w.filter(b=>!b.isRead).length)});return()=>d()},[e]);const u=async d=>{try{const{error:h}=await En.update(d,{isRead:!0},(e==null?void 0:e.uid)||"");if(h){n(`Failed to mark notification as read: ${h}`);return}i(m=>m.map(w=>w.id===d?{...w,isRead:!0}:w)),o(m=>m-1)}catch(h){n(`Unexpected error marking notification as read: ${h.message}`)}},c=()=>{e!=null&&e.uid&&a(e.uid)};return p(Ex.Provider,{value:{notifications:r,unreadCount:s,markAsRead:u,refreshNotifications:c},children:t})},qh=()=>{const t=O.useContext(Ex);if(!t)throw new Error("useNotifications must be used within a NotificationProvider");return t};var Tx={},$m={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.LogLevel=void 0,function(n){n[n.None=0]="None",n[n.Fatal=1]="Fatal",n[n.Error=2]="Error",n[n.Warn=3]="Warn",n[n.Info=4]="Info",n[n.Debug=5]="Debug",n[n.Verbose=6]="Verbose"}(t.LogLevel||(t.LogLevel={}));var e=function(){function n(){}return n.prototype.setLogLevel=function(r){window.cordova.exec(function(){},function(){},"OneSignalPush","setLogLevel",[r])},n.prototype.setAlertLevel=function(r){window.cordova.exec(function(){},function(){},"OneSignalPush","setAlertLevel",[r])},n}();t.default=e})($m);var nv={};Object.defineProperty(nv,"__esModule",{value:!0});var AV=function(){function t(){this._inAppMessageClickListeners=[],this._willDisplayInAppMessageListeners=[],this._didDisplayInAppMessageListeners=[],this._willDismissInAppMessageListeners=[],this._didDismissInAppMessageListeners=[]}return t.prototype._processFunctionList=function(e,n){for(var r=0;r<e.length;r++)e[r](n)},t.prototype.addEventListener=function(e,n){var r=this;if(e==="click"){this._inAppMessageClickListeners.push(n);var i=function(c){r._processFunctionList(r._inAppMessageClickListeners,c)};window.cordova.exec(i,function(){},"OneSignalPush","setInAppMessageClickHandler",[])}else if(e==="willDisplay"){this._willDisplayInAppMessageListeners.push(n);var s=function(c){r._processFunctionList(r._willDisplayInAppMessageListeners,c)};window.cordova.exec(s,function(){},"OneSignalPush","setOnWillDisplayInAppMessageHandler",[])}else if(e==="didDisplay"){this._didDisplayInAppMessageListeners.push(n);var o=function(c){r._processFunctionList(r._didDisplayInAppMessageListeners,c)};window.cordova.exec(o,function(){},"OneSignalPush","setOnDidDisplayInAppMessageHandler",[])}else if(e==="willDismiss"){this._willDismissInAppMessageListeners.push(n);var a=function(c){r._processFunctionList(r._willDismissInAppMessageListeners,c)};window.cordova.exec(a,function(){},"OneSignalPush","setOnWillDismissInAppMessageHandler",[])}else if(e==="didDismiss"){this._didDismissInAppMessageListeners.push(n);var u=function(c){r._processFunctionList(r._didDismissInAppMessageListeners,c)};window.cordova.exec(u,function(){},"OneSignalPush","setOnDidDismissInAppMessageHandler",[])}else return},t.prototype.removeEventListener=function(e,n){if(e==="click"){var r=this._inAppMessageClickListeners.indexOf(n);r!==-1&&this._inAppMessageClickListeners.splice(r,1)}else if(e==="willDisplay"){var r=this._willDisplayInAppMessageListeners.indexOf(n);r!==-1&&this._willDisplayInAppMessageListeners.splice(r,1)}else if(e==="didDisplay"){var r=this._didDisplayInAppMessageListeners.indexOf(n);r!==-1&&this._willDisplayInAppMessageListeners.splice(r,1)}else if(e==="willDismiss"){var r=this._willDismissInAppMessageListeners.indexOf(n);r!==-1&&this._willDismissInAppMessageListeners.splice(r,1)}else if(e==="didDismiss"){var r=this._didDismissInAppMessageListeners.indexOf(n);r!==-1&&this._didDismissInAppMessageListeners.splice(r,1)}else return},t.prototype.addTrigger=function(e,n){var r,i=(r={},r[e]=n,r);this.addTriggers(i)},t.prototype.addTriggers=function(e){Object.keys(e).forEach(function(n){typeof e[n]!="string"&&(e[n]=JSON.stringify(e[n]))}),window.cordova.exec(function(){},function(){},"OneSignalPush","addTriggers",[e])},t.prototype.removeTrigger=function(e){this.removeTriggers([e])},t.prototype.removeTriggers=function(e){Array.isArray(e)||console.error("OneSignal: removeTriggers: argument must be of type Array"),window.cordova.exec(function(){},function(){},"OneSignalPush","removeTriggers",[e])},t.prototype.clearTriggers=function(){window.cordova.exec(function(){},function(){},"OneSignalPush","clearTriggers")},t.prototype.setPaused=function(e){window.cordova.exec(function(){},function(){},"OneSignalPush","setPaused",[e])},t.prototype.getPaused=function(){return new Promise(function(e,n){window.cordova.exec(e,n,"OneSignalPush","isPaused",[])})},t}();nv.default=AV;var rv={};Object.defineProperty(rv,"__esModule",{value:!0});var NV=function(){function t(){}return t.prototype.enter=function(e,n,r,i){r==null&&(r=function(){}),i==null&&(i=function(){}),window.cordova.exec(r,i,"OneSignalPush","enterLiveActivity",[e,n])},t.prototype.exit=function(e,n,r){n==null&&(n=function(){}),r==null&&(r=function(){}),window.cordova.exec(n,r,"OneSignalPush","exitLiveActivity",[e])},t.prototype.setPushToStartToken=function(e,n){window.cordova.exec(function(){},function(){},"OneSignalPush","setPushToStartToken",[e,n])},t.prototype.removePushToStartToken=function(e){window.cordova.exec(function(){},function(){},"OneSignalPush","removePushToStartToken",[e])},t.prototype.setupDefault=function(e){window.cordova.exec(function(){},function(){},"OneSignalPush","setupDefaultLiveActivity",[e])},t.prototype.startDefault=function(e,n,r){window.cordova.exec(function(){},function(){},"OneSignalPush","startDefaultLiveActivity",[e,n,r])},t}();rv.default=NV;var iv={};Object.defineProperty(iv,"__esModule",{value:!0});var RV=function(){function t(){}return t.prototype.requestPermission=function(){window.cordova.exec(function(){},function(){},"OneSignalPush","requestLocationPermission",[])},t.prototype.setShared=function(e){window.cordova.exec(function(){},function(){},"OneSignalPush","setLocationShared",[e])},t.prototype.isShared=function(){return new Promise(function(e,n){window.cordova.exec(e,n,"OneSignalPush","isLocationShared",[])})},t}();iv.default=RV;var jm={},Pu={},xu={};Object.defineProperty(xu,"__esModule",{value:!0});xu.OSNotification=void 0;var DV=function(){function t(e){this.notificationId=e.notificationId,this.body=e.body,this.title=e.title,this.additionalData=e.additionalData,typeof e.rawPayload=="string"?this.rawPayload=JSON.parse(e.rawPayload):this.rawPayload=e.rawPayload,this.launchURL=e.launchURL,this.sound=e.sound,e.actionButtons&&(this.actionButtons=e.actionButtons),e.groupKey&&(this.groupKey=e.groupKey),e.ledColor&&(this.ledColor=e.ledColor),typeof e.priority<"u"&&(this.priority=e.priority),e.smallIcon&&(this.smallIcon=e.smallIcon),e.largeIcon&&(this.largeIcon=e.largeIcon),e.bigPicture&&(this.bigPicture=e.bigPicture),e.collapseId&&(this.collapseId=e.collapseId),e.groupMessage&&(this.groupMessage=e.groupMessage),e.fromProjectNumber&&(this.fromProjectNumber=e.fromProjectNumber),e.smallIconAccentColor&&(this.smallIconAccentColor=e.smallIconAccentColor),e.lockScreenVisibility&&(this.lockScreenVisibility=e.lockScreenVisibility),e.androidNotificationId&&(this.androidNotificationId=e.androidNotificationId),e.groupedNotifications&&e.groupedNotifications.length&&(this.groupedNotifications=e.groupedNotifications),e.badge&&(this.badge=e.badge),e.category&&(this.category=e.category),e.threadId&&(this.threadId=e.threadId),e.subtitle&&(this.subtitle=e.subtitle),e.templateId&&(this.templateId=e.templateId),e.attachments&&(this.attachments=e.attachments),e.templateName&&(this.templateName=e.templateName),e.mutableContent&&(this.mutableContent=e.mutableContent),e.badgeIncrement&&(this.badgeIncrement=e.badgeIncrement),e.contentAvailable&&(this.contentAvailable=e.contentAvailable),e.relevanceScore&&(this.relevanceScore=e.relevanceScore),e.interruptionLevel&&(this.interruptionLevel=e.interruptionLevel)}return t.prototype.display=function(){window.cordova.exec(function(){},function(){},"OneSignalPush","displayNotification",[this.notificationId])},t}();xu.OSNotification=DV;Object.defineProperty(Pu,"__esModule",{value:!0});Pu.NotificationWillDisplayEvent=void 0;var OV=xu,LV=function(){function t(e){this.notification=new OV.OSNotification(e)}return t.prototype.preventDefault=function(e){e===void 0&&(e=!1),window.cordova.exec(function(){},function(){},"OneSignalPush","preventDefault",[this.notification.notificationId,e])},t.prototype.getNotification=function(){return this.notification},t}();Pu.NotificationWillDisplayEvent=LV;(function(t){var e=zn&&zn.__awaiter||function(s,o,a,u){function c(d){return d instanceof a?d:new a(function(h){h(d)})}return new(a||(a=Promise))(function(d,h){function m(P){try{b(u.next(P))}catch(N){h(N)}}function w(P){try{b(u.throw(P))}catch(N){h(N)}}function b(P){P.done?d(P.value):c(P.value).then(m,w)}b((u=u.apply(s,o||[])).next())})},n=zn&&zn.__generator||function(s,o){var a={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},u,c,d,h;return h={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function m(b){return function(P){return w([b,P])}}function w(b){if(u)throw new TypeError("Generator is already executing.");for(;a;)try{if(u=1,c&&(d=b[0]&2?c.return:b[0]?c.throw||((d=c.return)&&d.call(c),0):c.next)&&!(d=d.call(c,b[1])).done)return d;switch(c=0,d&&(b=[b[0]&2,d.value]),b[0]){case 0:case 1:d=b;break;case 4:return a.label++,{value:b[1],done:!1};case 5:a.label++,c=b[1],b=[0];continue;case 7:b=a.ops.pop(),a.trys.pop();continue;default:if(d=a.trys,!(d=d.length>0&&d[d.length-1])&&(b[0]===6||b[0]===2)){a=0;continue}if(b[0]===3&&(!d||b[1]>d[0]&&b[1]<d[3])){a.label=b[1];break}if(b[0]===6&&a.label<d[1]){a.label=d[1],d=b;break}if(d&&a.label<d[2]){a.label=d[2],a.ops.push(b);break}d[2]&&a.ops.pop(),a.trys.pop();continue}b=o.call(s,a)}catch(P){b=[6,P],c=0}finally{u=d=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0}),t.OSNotificationPermission=void 0;var r=Pu;(function(s){s[s.NotDetermined=0]="NotDetermined",s[s.Denied=1]="Denied",s[s.Authorized=2]="Authorized",s[s.Provisional=3]="Provisional",s[s.Ephemeral=4]="Ephemeral"})(t.OSNotificationPermission||(t.OSNotificationPermission={}));var i=function(){function s(){this._permissionObserverList=[],this._notificationClickedListeners=[],this._notificationWillDisplayListeners=[]}return s.prototype._processFunctionList=function(o,a){for(var u=0;u<o.length;u++)o[u](a)},s.prototype._setPropertyAndObserver=function(){var o=this,a=function(u){o._permission=u};window.cordova.exec(a,function(){},"OneSignalPush","getPermissionInternal"),this.addEventListener("permissionChange",function(u){o._permission=u})},s.prototype.hasPermission=function(){return this._permission||!1},s.prototype.getPermissionAsync=function(){return e(this,void 0,void 0,function(){return n(this,function(o){return[2,new Promise(function(a,u){window.cordova.exec(a,u,"OneSignalPush","getPermissionInternal")})]})})},s.prototype.permissionNative=function(){return new Promise(function(o,a){window.cordova.exec(o,a,"OneSignalPush","permissionNative",[])})},s.prototype.requestPermission=function(o){var a=o??!1;return new Promise(function(u,c){window.cordova.exec(u,c,"OneSignalPush","requestPermission",[a])})},s.prototype.canRequestPermission=function(){return new Promise(function(o,a){window.cordova.exec(o,a,"OneSignalPush","canRequestPermission",[])})},s.prototype.registerForProvisionalAuthorization=function(o){o===void 0&&(o=function(){}),window.cordova.exec(o,function(){},"OneSignalPush","registerForProvisionalAuthorization",[])},s.prototype.addEventListener=function(o,a){var u=this;if(o==="click"){this._notificationClickedListeners.push(a);var c=function(m){u._processFunctionList(u._notificationClickedListeners,m)};window.cordova.exec(c,function(){},"OneSignalPush","addNotificationClickListener",[])}else if(o==="foregroundWillDisplay"){this._notificationWillDisplayListeners.push(a);var d=function(m){u._notificationWillDisplayListeners.forEach(function(w){w(new r.NotificationWillDisplayEvent(m))}),window.cordova.exec(function(){},function(){},"OneSignalPush","proceedWithWillDisplay",[m.notificationId])};window.cordova.exec(d,function(){},"OneSignalPush","addForegroundLifecycleListener",[])}else if(o==="permissionChange"){this._permissionObserverList.push(a);var h=function(m){u._processFunctionList(u._permissionObserverList,m)};window.cordova.exec(h,function(){},"OneSignalPush","addPermissionObserver",[])}else return},s.prototype.removeEventListener=function(o,a){if(o==="click"){var u=this._notificationClickedListeners.indexOf(a);u!==-1&&this._notificationClickedListeners.splice(u,1)}else if(o==="foregroundWillDisplay"){var u=this._notificationWillDisplayListeners.indexOf(a);u!==-1&&this._notificationWillDisplayListeners.splice(u,1)}else if(o==="permissionChange"){var u=this._permissionObserverList.indexOf(a);u!==-1&&this._permissionObserverList.splice(u,1)}else return},s.prototype.clearAll=function(){window.cordova.exec(function(){},function(){},"OneSignalPush","clearAllNotifications",[])},s.prototype.removeNotification=function(o){window.cordova.exec(function(){},function(){},"OneSignalPush","removeNotification",[o])},s.prototype.removeGroupedNotifications=function(o){window.cordova.exec(function(){},function(){},"OneSignalPush","removeGroupedNotifications",[o])},s}();t.default=i})(jm);var sv={};Object.defineProperty(sv,"__esModule",{value:!0});var MV=function(){function t(){}return t.prototype.addOutcome=function(e){window.cordova.exec(function(){},function(){},"OneSignalPush","addOutcome",[e])},t.prototype.addUniqueOutcome=function(e){window.cordova.exec(function(){},function(){},"OneSignalPush","addUniqueOutcome",[e])},t.prototype.addOutcomeWithValue=function(e,n){window.cordova.exec(function(){},function(){},"OneSignalPush","addOutcomeWithValue",[e,n])},t}();sv.default=MV;var ov={},av={};Object.defineProperty(av,"__esModule",{value:!0});var VV=function(){function t(){this._subscriptionObserverList=[]}return t.prototype._processFunctionList=function(e,n){for(var r=0;r<e.length;r++)e[r](n)},t.prototype._setPropertiesAndObserver=function(){var e=this,n=function(s){e._id=s};window.cordova.exec(n,function(){},"OneSignalPush","getPushSubscriptionId");var r=function(s){e._token=s};window.cordova.exec(r,function(){},"OneSignalPush","getPushSubscriptionToken");var i=function(s){e._optedIn=s};window.cordova.exec(i,function(){},"OneSignalPush","getPushSubscriptionOptedIn"),this.addEventListener("change",function(s){e._id=s.current.id,e._token=s.current.token,e._optedIn=s.current.optedIn})},Object.defineProperty(t.prototype,"id",{get:function(){return console.warn("OneSignal: This method has been deprecated. Use getIdAsync instead for getting push subscription id."),this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"token",{get:function(){return console.warn("OneSignal: This method has been deprecated. Use getTokenAsync instead for getting push subscription token."),this._token},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"optedIn",{get:function(){return console.warn("OneSignal: This method has been deprecated. Use getOptedInAsync instead for getting push subscription opted in status."),this._optedIn||!1},enumerable:!1,configurable:!0}),t.prototype.getIdAsync=function(){return new Promise(function(e,n){window.cordova.exec(e,n,"OneSignalPush","getPushSubscriptionId")})},t.prototype.getTokenAsync=function(){return new Promise(function(e,n){window.cordova.exec(e,n,"OneSignalPush","getPushSubscriptionToken")})},t.prototype.getOptedInAsync=function(){return new Promise(function(e,n){window.cordova.exec(e,n,"OneSignalPush","getPushSubscriptionOptedIn")})},t.prototype.addEventListener=function(e,n){var r=this;this._subscriptionObserverList.push(n);var i=function(s){r._processFunctionList(r._subscriptionObserverList,s)};window.cordova.exec(i,function(){},"OneSignalPush","addPushSubscriptionObserver",[])},t.prototype.removeEventListener=function(e,n){var r=this._subscriptionObserverList.indexOf(n);r!==-1&&this._subscriptionObserverList.splice(r,1)},t.prototype.optIn=function(){window.cordova.exec(function(){},function(){},"OneSignalPush","optInPushSubscription")},t.prototype.optOut=function(){window.cordova.exec(function(){},function(){},"OneSignalPush","optOutPushSubscription")},t}();av.default=VV;var x1=zn&&zn.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function u(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):i(d.value).then(a,u)}c((r=r.apply(t,e||[])).next())})},S1=zn&&zn.__generator||function(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return u([c,d])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},FV=zn&&zn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ov,"__esModule",{value:!0});var UV=FV(av),$V=function(){function t(){this.pushSubscription=new UV.default,this._userStateObserverList=[]}return t.prototype._processFunctionList=function(e,n){for(var r=0;r<e.length;r++)e[r](n)},t.prototype.setLanguage=function(e){window.cordova.exec(function(){},function(){},"OneSignalPush","setLanguage",[e])},t.prototype.addAlias=function(e,n){var r,i=(r={},r[e]=n,r);window.cordova.exec(function(){},function(){},"OneSignalPush","addAliases",[i])},t.prototype.addAliases=function(e){window.cordova.exec(function(){},function(){},"OneSignalPush","addAliases",[e])},t.prototype.removeAlias=function(e){window.cordova.exec(function(){},function(){},"OneSignalPush","removeAliases",[e])},t.prototype.removeAliases=function(e){window.cordova.exec(function(){},function(){},"OneSignalPush","removeAliases",e)},t.prototype.addEmail=function(e){window.cordova.exec(function(){},function(){},"OneSignalPush","addEmail",[e])},t.prototype.removeEmail=function(e){window.cordova.exec(function(){},function(){},"OneSignalPush","removeEmail",[e])},t.prototype.addSms=function(e){window.cordova.exec(function(){},function(){},"OneSignalPush","addSms",[e])},t.prototype.removeSms=function(e){window.cordova.exec(function(){},function(){},"OneSignalPush","removeSms",[e])},t.prototype.addTag=function(e,n){var r,i=(r={},r[e]=n,r);window.cordova.exec(function(){},function(){},"OneSignalPush","addTags",[i])},t.prototype.addTags=function(e){var n=e;Object.keys(e).forEach(function(r){typeof n[r]!="string"&&(n[r]=JSON.stringify(n[r]))}),window.cordova.exec(function(){},function(){},"OneSignalPush","addTags",[n])},t.prototype.removeTag=function(e){window.cordova.exec(function(){},function(){},"OneSignalPush","removeTags",[e])},t.prototype.removeTags=function(e){window.cordova.exec(function(){},function(){},"OneSignalPush","removeTags",e)},t.prototype.getTags=function(){return new Promise(function(e,n){window.cordova.exec(e,n,"OneSignalPush","getTags",[])})},t.prototype.addEventListener=function(e,n){var r=this;this._userStateObserverList.push(n);var i=function(s){r._processFunctionList(r._userStateObserverList,s)};window.cordova.exec(i,function(){},"OneSignalPush","addUserStateObserver",[])},t.prototype.removeEventListener=function(e,n){var r=this._userStateObserverList.indexOf(n);r!==-1&&this._userStateObserverList.splice(r,1)},t.prototype.getOnesignalId=function(){return x1(this,void 0,void 0,function(){return S1(this,function(e){return[2,new Promise(function(n,r){window.cordova.exec(n,r,"OneSignalPush","getOnesignalId",[])})]})})},t.prototype.getExternalId=function(){return x1(this,void 0,void 0,function(){return S1(this,function(e){return[2,new Promise(function(n,r){window.cordova.exec(n,r,"OneSignalPush","getExternalId",[])})]})})},t}();ov.default=$V;(function(t){var e=zn&&zn.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(t,"__esModule",{value:!0}),t.OSNotification=t.OSNotificationPermission=t.NotificationWillDisplayEvent=t.LogLevel=t.OneSignalPlugin=void 0;var n=e($m),r=e(nv),i=e(rv),s=e(iv),o=e(jm),a=e(sv),u=e(ov),c=function(){function P(){this.User=new u.default,this.Debug=new n.default,this.Session=new a.default,this.Location=new s.default,this.InAppMessages=new r.default,this.Notifications=new o.default,this.LiveActivities=new i.default,this._appID=""}return P.prototype.initialize=function(N){var _=this;this._appID=N;var v=function(){_.User.pushSubscription._setPropertiesAndObserver(),_.Notifications._setPropertyAndObserver()};window.cordova.exec(v,function(){},"OneSignalPush","init",[this._appID])},P.prototype.login=function(N){window.cordova.exec(function(){},function(){},"OneSignalPush","login",[N])},P.prototype.logout=function(){window.cordova.exec(function(){},function(){},"OneSignalPush","logout")},P.prototype.setConsentRequired=function(N){window.cordova.exec(function(){},function(){},"OneSignalPush","setPrivacyConsentRequired",[N])},P.prototype.setConsentGiven=function(N){window.cordova.exec(function(){},function(){},"OneSignalPush","setPrivacyConsentGiven",[N])},P}();t.OneSignalPlugin=c;var d=new c;window.plugins||(window.plugins={}),window.plugins.OneSignal||(window.plugins.OneSignal=d);var h=$m;Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return h.LogLevel}});var m=Pu;Object.defineProperty(t,"NotificationWillDisplayEvent",{enumerable:!0,get:function(){return m.NotificationWillDisplayEvent}});var w=jm;Object.defineProperty(t,"OSNotificationPermission",{enumerable:!0,get:function(){return w.OSNotificationPermission}});var b=xu;Object.defineProperty(t,"OSNotification",{enumerable:!0,get:function(){return b.OSNotification}}),t.default=d})(Tx);const io=sE(Tx);var C1;(function(t){t[t.Min=1]="Min",t[t.Low=2]="Low",t[t.Default=3]="Default",t[t.High=4]="High",t[t.Max=5]="Max"})(C1||(C1={}));var k1;(function(t){t[t.Secret=-1]="Secret",t[t.Private=0]="Private",t[t.Public=1]="Public"})(k1||(k1={}));const jV=Qs("FirebaseMessaging",{web:()=>$s(()=>import("./web-ee78e58e.js"),[]).then(t=>new t.FirebaseMessagingWeb)}),A1=Qs("App",{web:()=>$s(()=>import("./web-5c08e9c8.js"),[]).then(t=>new t.AppWeb)});function ri(t){"@babel/helpers - typeof";return ri=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ri(t)}function Rt(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function ze(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function at(t){ze(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||ri(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function bx(t,e){ze(2,arguments);var n=at(t),r=Rt(e);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}function BV(t,e){ze(2,arguments);var n=at(t).getTime(),r=Rt(e);return new Date(n+r)}var zV={};function ya(){return zV}function Ix(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function N1(t){ze(1,arguments);var e=at(t);return e.setHours(0,0,0,0),e}var lv=6e4,uv=36e5,WV=1e3;function HV(t,e){ze(2,arguments);var n=N1(t),r=N1(e);return n.getTime()===r.getTime()}function qV(t){return ze(1,arguments),t instanceof Date||ri(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function GV(t){if(ze(1,arguments),!qV(t)&&typeof t!="number")return!1;var e=at(t);return!isNaN(Number(e))}function Px(t,e){ze(2,arguments);var n=Rt(e);return BV(t,-n)}var KV=864e5;function QV(t){ze(1,arguments);var e=at(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),i=n-r;return Math.floor(i/KV)+1}function Zo(t){ze(1,arguments);var e=1,n=at(t),r=n.getUTCDay(),i=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function xx(t){ze(1,arguments);var e=at(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=Zo(r),s=new Date(0);s.setUTCFullYear(n,0,4),s.setUTCHours(0,0,0,0);var o=Zo(s);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function YV(t){ze(1,arguments);var e=xx(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=Zo(n);return r}var XV=6048e5;function Sx(t){ze(1,arguments);var e=at(t),n=Zo(e).getTime()-YV(e).getTime();return Math.round(n/XV)+1}function js(t,e){var n,r,i,s,o,a,u,c;ze(1,arguments);var d=ya(),h=Rt((n=(r=(i=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&i!==void 0?i:d.weekStartsOn)!==null&&r!==void 0?r:(u=d.locale)===null||u===void 0||(c=u.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=at(t),w=m.getUTCDay(),b=(w<h?7:0)+w-h;return m.setUTCDate(m.getUTCDate()-b),m.setUTCHours(0,0,0,0),m}function cv(t,e){var n,r,i,s,o,a,u,c;ze(1,arguments);var d=at(t),h=d.getUTCFullYear(),m=ya(),w=Rt((n=(r=(i=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:m.firstWeekContainsDate)!==null&&r!==void 0?r:(u=m.locale)===null||u===void 0||(c=u.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(w>=1&&w<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var b=new Date(0);b.setUTCFullYear(h+1,0,w),b.setUTCHours(0,0,0,0);var P=js(b,e),N=new Date(0);N.setUTCFullYear(h,0,w),N.setUTCHours(0,0,0,0);var _=js(N,e);return d.getTime()>=P.getTime()?h+1:d.getTime()>=_.getTime()?h:h-1}function JV(t,e){var n,r,i,s,o,a,u,c;ze(1,arguments);var d=ya(),h=Rt((n=(r=(i=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:d.firstWeekContainsDate)!==null&&r!==void 0?r:(u=d.locale)===null||u===void 0||(c=u.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:1),m=cv(t,e),w=new Date(0);w.setUTCFullYear(m,0,h),w.setUTCHours(0,0,0,0);var b=js(w,e);return b}var ZV=6048e5;function Cx(t,e){ze(1,arguments);var n=at(t),r=js(n,e).getTime()-JV(n,e).getTime();return Math.round(r/ZV)+1}function $e(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var eF={y:function(e,n){var r=e.getUTCFullYear(),i=r>0?r:1-r;return $e(n==="yy"?i%100:i,n.length)},M:function(e,n){var r=e.getUTCMonth();return n==="M"?String(r+1):$e(r+1,2)},d:function(e,n){return $e(e.getUTCDate(),n.length)},a:function(e,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(e,n){return $e(e.getUTCHours()%12||12,n.length)},H:function(e,n){return $e(e.getUTCHours(),n.length)},m:function(e,n){return $e(e.getUTCMinutes(),n.length)},s:function(e,n){return $e(e.getUTCSeconds(),n.length)},S:function(e,n){var r=n.length,i=e.getUTCMilliseconds(),s=Math.floor(i*Math.pow(10,r-3));return $e(s,n.length)}};const gi=eF;var so={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},tF={G:function(e,n,r){var i=e.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});case"GGGG":default:return r.era(i,{width:"wide"})}},y:function(e,n,r){if(n==="yo"){var i=e.getUTCFullYear(),s=i>0?i:1-i;return r.ordinalNumber(s,{unit:"year"})}return gi.y(e,n)},Y:function(e,n,r,i){var s=cv(e,i),o=s>0?s:1-s;if(n==="YY"){var a=o%100;return $e(a,2)}return n==="Yo"?r.ordinalNumber(o,{unit:"year"}):$e(o,n.length)},R:function(e,n){var r=xx(e);return $e(r,n.length)},u:function(e,n){var r=e.getUTCFullYear();return $e(r,n.length)},Q:function(e,n,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"Q":return String(i);case"QQ":return $e(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,n,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"q":return String(i);case"qq":return $e(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,n,r){var i=e.getUTCMonth();switch(n){case"M":case"MM":return gi.M(e,n);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(e,n,r){var i=e.getUTCMonth();switch(n){case"L":return String(i+1);case"LL":return $e(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(e,n,r,i){var s=Cx(e,i);return n==="wo"?r.ordinalNumber(s,{unit:"week"}):$e(s,n.length)},I:function(e,n,r){var i=Sx(e);return n==="Io"?r.ordinalNumber(i,{unit:"week"}):$e(i,n.length)},d:function(e,n,r){return n==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):gi.d(e,n)},D:function(e,n,r){var i=QV(e);return n==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):$e(i,n.length)},E:function(e,n,r){var i=e.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});case"EEEE":default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(e,n,r,i){var s=e.getUTCDay(),o=(s-i.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return $e(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,n,r,i){var s=e.getUTCDay(),o=(s-i.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return $e(o,n.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,n,r){var i=e.getUTCDay(),s=i===0?7:i;switch(n){case"i":return String(s);case"ii":return $e(s,n.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});case"iiii":default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(e,n,r){var i=e.getUTCHours(),s=i/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,n,r){var i=e.getUTCHours(),s;switch(i===12?s=so.noon:i===0?s=so.midnight:s=i/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,n,r){var i=e.getUTCHours(),s;switch(i>=17?s=so.evening:i>=12?s=so.afternoon:i>=4?s=so.morning:s=so.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,n,r){if(n==="ho"){var i=e.getUTCHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return gi.h(e,n)},H:function(e,n,r){return n==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):gi.H(e,n)},K:function(e,n,r){var i=e.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(i,{unit:"hour"}):$e(i,n.length)},k:function(e,n,r){var i=e.getUTCHours();return i===0&&(i=24),n==="ko"?r.ordinalNumber(i,{unit:"hour"}):$e(i,n.length)},m:function(e,n,r){return n==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):gi.m(e,n)},s:function(e,n,r){return n==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):gi.s(e,n)},S:function(e,n){return gi.S(e,n)},X:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();if(o===0)return"Z";switch(n){case"X":return D1(o);case"XXXX":case"XX":return ys(o);case"XXXXX":case"XXX":default:return ys(o,":")}},x:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();switch(n){case"x":return D1(o);case"xxxx":case"xx":return ys(o);case"xxxxx":case"xxx":default:return ys(o,":")}},O:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+R1(o,":");case"OOOO":default:return"GMT"+ys(o,":")}},z:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+R1(o,":");case"zzzz":default:return"GMT"+ys(o,":")}},t:function(e,n,r,i){var s=i._originalDate||e,o=Math.floor(s.getTime()/1e3);return $e(o,n.length)},T:function(e,n,r,i){var s=i._originalDate||e,o=s.getTime();return $e(o,n.length)}};function R1(t,e){var n=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),s=r%60;if(s===0)return n+String(i);var o=e||"";return n+String(i)+o+$e(s,2)}function D1(t,e){if(t%60===0){var n=t>0?"-":"+";return n+$e(Math.abs(t)/60,2)}return ys(t,e)}function ys(t,e){var n=e||"",r=t>0?"-":"+",i=Math.abs(t),s=$e(Math.floor(i/60),2),o=$e(i%60,2);return r+s+n+o}const nF=tF;var O1=function(e,n){switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},kx=function(e,n){switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},rF=function(e,n){var r=e.match(/(P+)(p+)?/)||[],i=r[1],s=r[2];if(!s)return O1(e,n);var o;switch(i){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;case"PPPP":default:o=n.dateTime({width:"full"});break}return o.replace("{{date}}",O1(i,n)).replace("{{time}}",kx(s,n))},iF={p:kx,P:rF};const Bm=iF;var sF=["D","DD"],oF=["YY","YYYY"];function Ax(t){return sF.indexOf(t)!==-1}function Nx(t){return oF.indexOf(t)!==-1}function Vd(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var aF={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},lF=function(e,n,r){var i,s=aF[e];return typeof s=="string"?i=s:n===1?i=s.one:i=s.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};const uF=lF;function ap(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}var cF={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},dF={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},hF={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},fF={date:ap({formats:cF,defaultWidth:"full"}),time:ap({formats:dF,defaultWidth:"full"}),dateTime:ap({formats:hF,defaultWidth:"full"})};const pF=fF;var mF={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},gF=function(e,n,r,i){return mF[e]};const yF=gF;function $a(t){return function(e,n){var r=n!=null&&n.context?String(n.context):"standalone",i;if(r==="formatting"&&t.formattingValues){var s=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):s;i=t.formattingValues[o]||t.formattingValues[s]}else{var a=t.defaultWidth,u=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[u]||t.values[a]}var c=t.argumentCallback?t.argumentCallback(e):e;return i[c]}}var vF={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},wF={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},_F={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},EF={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},TF={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},bF={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},IF=function(e,n){var r=Number(e),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},PF={ordinalNumber:IF,era:$a({values:vF,defaultWidth:"wide"}),quarter:$a({values:wF,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:$a({values:_F,defaultWidth:"wide"}),day:$a({values:EF,defaultWidth:"wide"}),dayPeriod:$a({values:TF,defaultWidth:"wide",formattingValues:bF,defaultFormattingWidth:"wide"})};const xF=PF;function ja(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;var o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(a)?CF(a,function(h){return h.test(o)}):SF(a,function(h){return h.test(o)}),c;c=t.valueCallback?t.valueCallback(u):u,c=n.valueCallback?n.valueCallback(c):c;var d=e.slice(o.length);return{value:c,rest:d}}}function SF(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function CF(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function kF(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var i=r[0],s=e.match(t.parsePattern);if(!s)return null;var o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;var a=e.slice(i.length);return{value:o,rest:a}}}var AF=/^(\d+)(th|st|nd|rd)?/i,NF=/\d+/i,RF={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},DF={any:[/^b/i,/^(a|c)/i]},OF={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},LF={any:[/1/i,/2/i,/3/i,/4/i]},MF={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},VF={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},FF={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},UF={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},$F={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},jF={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},BF={ordinalNumber:kF({matchPattern:AF,parsePattern:NF,valueCallback:function(e){return parseInt(e,10)}}),era:ja({matchPatterns:RF,defaultMatchWidth:"wide",parsePatterns:DF,defaultParseWidth:"any"}),quarter:ja({matchPatterns:OF,defaultMatchWidth:"wide",parsePatterns:LF,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:ja({matchPatterns:MF,defaultMatchWidth:"wide",parsePatterns:VF,defaultParseWidth:"any"}),day:ja({matchPatterns:FF,defaultMatchWidth:"wide",parsePatterns:UF,defaultParseWidth:"any"}),dayPeriod:ja({matchPatterns:$F,defaultMatchWidth:"any",parsePatterns:jF,defaultParseWidth:"any"})};const zF=BF;var WF={code:"en-US",formatDistance:uF,formatLong:pF,formatRelative:yF,localize:xF,match:zF,options:{weekStartsOn:0,firstWeekContainsDate:1}};const Rx=WF;var HF=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,qF=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,GF=/^'([^]*?)'?$/,KF=/''/g,QF=/[a-zA-Z]/;function YF(t,e,n){var r,i,s,o,a,u,c,d,h,m,w,b,P,N,_,v,A,D;ze(2,arguments);var M=String(e),V=ya(),E=(r=(i=n==null?void 0:n.locale)!==null&&i!==void 0?i:V.locale)!==null&&r!==void 0?r:Rx,y=Rt((s=(o=(a=(u=n==null?void 0:n.firstWeekContainsDate)!==null&&u!==void 0?u:n==null||(c=n.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&a!==void 0?a:V.firstWeekContainsDate)!==null&&o!==void 0?o:(h=V.locale)===null||h===void 0||(m=h.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(y>=1&&y<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var S=Rt((w=(b=(P=(N=n==null?void 0:n.weekStartsOn)!==null&&N!==void 0?N:n==null||(_=n.locale)===null||_===void 0||(v=_.options)===null||v===void 0?void 0:v.weekStartsOn)!==null&&P!==void 0?P:V.weekStartsOn)!==null&&b!==void 0?b:(A=V.locale)===null||A===void 0||(D=A.options)===null||D===void 0?void 0:D.weekStartsOn)!==null&&w!==void 0?w:0);if(!(S>=0&&S<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!E.localize)throw new RangeError("locale must contain localize property");if(!E.formatLong)throw new RangeError("locale must contain formatLong property");var k=at(t);if(!GV(k))throw new RangeError("Invalid time value");var R=Ix(k),T=Px(k,R),I={firstWeekContainsDate:y,weekStartsOn:S,locale:E,_originalDate:k},W=M.match(qF).map(function(H){var de=H[0];if(de==="p"||de==="P"){var ge=Bm[de];return ge(H,E.formatLong)}return H}).join("").match(HF).map(function(H){if(H==="''")return"'";var de=H[0];if(de==="'")return XF(H);var ge=nF[de];if(ge)return!(n!=null&&n.useAdditionalWeekYearTokens)&&Nx(H)&&Vd(H,e,String(t)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&Ax(H)&&Vd(H,e,String(t)),ge(T,H,E.localize,I);if(de.match(QF))throw new RangeError("Format string contains an unescaped latin alphabet character `"+de+"`");return H}).join("");return W}function XF(t){var e=t.match(GF);return e?e[1].replace(KF,"'"):t}function JF(t,e){if(t==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function ZF(t,e){ze(2,arguments);var n=at(t),r=at(e);return n.getTime()<r.getTime()}function L1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function e3(t,e){if(t){if(typeof t=="string")return L1(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L1(t,e):void 0}}function M1(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=e3(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var c=n.next();return o=c.done,c},e:function(c){a=!0,s=c},f:function(){try{o||n.return==null||n.return()}finally{if(a)throw s}}}}function re(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zm(t,e){return zm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},zm(t,e)}function De(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zm(t,e)}function Fd(t){return Fd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fd(t)}function Dx(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Dx=function(){return!!t})()}function t3(t,e){if(e&&(ri(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return re(t)}function Oe(t){var e=Dx();return function(){var n,r=Fd(t);if(e){var i=Fd(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return t3(this,n)}}function Se(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n3(t,e){if(ri(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ri(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ox(t){var e=n3(t,"string");return ri(e)=="symbol"?e:e+""}function V1(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ox(r.key),r)}}function Ce(t,e,n){return e&&V1(t.prototype,e),n&&V1(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function te(t,e,n){return(e=Ox(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r3=10,Lx=function(){function t(){Se(this,t),te(this,"priority",void 0),te(this,"subPriority",0)}return Ce(t,[{key:"validate",value:function(n,r){return!0}}]),t}(),i3=function(t){De(n,t);var e=Oe(n);function n(r,i,s,o,a){var u;return Se(this,n),u=e.call(this),u.value=r,u.validateValue=i,u.setValue=s,u.priority=o,a&&(u.subPriority=a),u}return Ce(n,[{key:"validate",value:function(i,s){return this.validateValue(i,this.value,s)}},{key:"set",value:function(i,s,o){return this.setValue(i,s,this.value,o)}}]),n}(Lx),s3=function(t){De(n,t);var e=Oe(n);function n(){var r;Se(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),te(re(r),"priority",r3),te(re(r),"subPriority",-1),r}return Ce(n,[{key:"set",value:function(i,s){if(s.timestampIsSet)return i;var o=new Date(0);return o.setFullYear(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()),o.setHours(i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds()),o}}]),n}(Lx),Fe=function(){function t(){Se(this,t),te(this,"incompatibleTokens",void 0),te(this,"priority",void 0),te(this,"subPriority",void 0)}return Ce(t,[{key:"run",value:function(n,r,i,s){var o=this.parse(n,r,i,s);return o?{setter:new i3(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}},{key:"validate",value:function(n,r,i){return!0}}]),t}(),o3=function(t){De(n,t);var e=Oe(n);function n(){var r;Se(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),te(re(r),"priority",140),te(re(r),"incompatibleTokens",["R","u","t","T"]),r}return Ce(n,[{key:"parse",value:function(i,s,o){switch(s){case"G":case"GG":case"GGG":return o.era(i,{width:"abbreviated"})||o.era(i,{width:"narrow"});case"GGGGG":return o.era(i,{width:"narrow"});case"GGGG":default:return o.era(i,{width:"wide"})||o.era(i,{width:"abbreviated"})||o.era(i,{width:"narrow"})}}},{key:"set",value:function(i,s,o){return s.era=o,i.setUTCFullYear(o,0,1),i.setUTCHours(0,0,0,0),i}}]),n}(Fe),gt={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},_r={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function yt(t,e){return t&&{value:e(t.value),rest:t.rest}}function rt(t,e){var n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function Er(t,e){var n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};var r=n[1]==="+"?1:-1,i=n[2]?parseInt(n[2],10):0,s=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(i*uv+s*lv+o*WV),rest:e.slice(n[0].length)}}function Mx(t){return rt(gt.anyDigitsSigned,t)}function ht(t,e){switch(t){case 1:return rt(gt.singleDigit,e);case 2:return rt(gt.twoDigits,e);case 3:return rt(gt.threeDigits,e);case 4:return rt(gt.fourDigits,e);default:return rt(new RegExp("^\\d{1,"+t+"}"),e)}}function Ud(t,e){switch(t){case 1:return rt(gt.singleDigitSigned,e);case 2:return rt(gt.twoDigitsSigned,e);case 3:return rt(gt.threeDigitsSigned,e);case 4:return rt(gt.fourDigitsSigned,e);default:return rt(new RegExp("^-?\\d{1,"+t+"}"),e)}}function dv(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Vx(t,e){var n=e>0,r=n?e:1-e,i;if(r<=50)i=t||100;else{var s=r+50,o=Math.floor(s/100)*100,a=t>=s%100;i=t+o-(a?100:0)}return n?i:1-i}function Fx(t){return t%400===0||t%4===0&&t%100!==0}var a3=function(t){De(n,t);var e=Oe(n);function n(){var r;Se(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),te(re(r),"priority",130),te(re(r),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),r}return Ce(n,[{key:"parse",value:function(i,s,o){var a=function(c){return{year:c,isTwoDigitYear:s==="yy"}};switch(s){case"y":return yt(ht(4,i),a);case"yo":return yt(o.ordinalNumber(i,{unit:"year"}),a);default:return yt(ht(s.length,i),a)}}},{key:"validate",value:function(i,s){return s.isTwoDigitYear||s.year>0}},{key:"set",value:function(i,s,o){var a=i.getUTCFullYear();if(o.isTwoDigitYear){var u=Vx(o.year,a);return i.setUTCFullYear(u,0,1),i.setUTCHours(0,0,0,0),i}var c=!("era"in s)||s.era===1?o.year:1-o.year;return i.setUTCFullYear(c,0,1),i.setUTCHours(0,0,0,0),i}}]),n}(Fe),l3=function(t){De(n,t);var e=Oe(n);function n(){var r;Se(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),te(re(r),"priority",130),te(re(r),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),r}return Ce(n,[{key:"parse",value:function(i,s,o){var a=function(c){return{year:c,isTwoDigitYear:s==="YY"}};switch(s){case"Y":return yt(ht(4,i),a);case"Yo":return yt(o.ordinalNumber(i,{unit:"year"}),a);default:return yt(ht(s.length,i),a)}}},{key:"validate",value:function(i,s){return s.isTwoDigitYear||s.year>0}},{key:"set",value:function(i,s,o,a){var u=cv(i,a);if(o.isTwoDigitYear){var c=Vx(o.year,u);return i.setUTCFullYear(c,0,a.firstWeekContainsDate),i.setUTCHours(0,0,0,0),js(i,a)}var d=!("era"in s)||s.era===1?o.year:1-o.year;return i.setUTCFullYear(d,0,a.firstWeekContainsDate),i.setUTCHours(0,0,0,0),js(i,a)}}]),n}(Fe),u3=function(t){De(n,t);var e=Oe(n);function n(){var r;Se(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),te(re(r),"priority",130),te(re(r),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),r}return Ce(n,[{key:"parse",value:function(i,s){return Ud(s==="R"?4:s.length,i)}},{key:"set",value:function(i,s,o){var a=new Date(0);return a.setUTCFullYear(o,0,4),a.setUTCHours(0,0,0,0),Zo(a)}}]),n}(Fe),c3=function(t){De(n,t);var e=Oe(n);function n(){var r;Se(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),te(re(r),"priority",130),te(re(r),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),r}return Ce(n,[{key:"parse",value:function(i,s){return Ud(s==="u"?4:s.length,i)}},{key:"set",value:function(i,s,o){return i.setUTCFullYear(o,0,1),i.setUTCHours(0,0,0,0),i}}]),n}(Fe),d3=function(t){De(n,t);var e=Oe(n);function n(){var r;Se(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),te(re(r),"priority",120),te(re(r),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),r}return Ce(n,[{key:"parse",value:function(i,s,o){switch(s){case"Q":case"QQ":return ht(s.length,i);case"Qo":return o.ordinalNumber(i,{unit:"quarter"});case"QQQ":return o.quarter(i,{width:"abbreviated",context:"formatting"})||o.quarter(i,{width:"narrow",context:"formatting"});case"QQQQQ":return o.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return o.quarter(i,{width:"wide",context:"formatting"})||o.quarter(i,{width:"abbreviated",context:"formatting"})||o.quarter(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=1&&s<=4}},{key:"set",value:function(i,s,o){return i.setUTCMonth((o-1)*3,1),i.setUTCHours(0,0,0,0),i}}]),n}(Fe),h3=function(t){De(n,t);var e=Oe(n);function n(){var r;Se(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),te(re(r),"priority",120),te(re(r),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),r}return Ce(n,[{key:"parse",value:function(i,s,o){switch(s){case"q":case"qq":return ht(s.length,i);case"qo":return o.ordinalNumber(i,{unit:"quarter"});case"qqq":return o.quarter(i,{width:"abbreviated",context:"standalone"})||o.quarter(i,{width:"narrow",context:"standalone"});case"qqqqq":return o.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return o.quarter(i,{width:"wide",context:"standalone"})||o.quarter(i,{width:"abbreviated",context:"standalone"})||o.quarter(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=1&&s<=4}},{key:"set",value:function(i,s,o){return i.setUTCMonth((o-1)*3,1),i.setUTCHours(0,0,0,0),i}}]),n}(Fe),f3=function(t){De(n,t);var e=Oe(n);function n(){var r;Se(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),te(re(r),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),te(re(r),"priority",110),r}return Ce(n,[{key:"parse",value:function(i,s,o){var a=function(c){return c-1};switch(s){case"M":return yt(rt(gt.month,i),a);case"MM":return yt(ht(2,i),a);case"Mo":return yt(o.ordinalNumber(i,{unit:"month"}),a);case"MMM":return o.month(i,{width:"abbreviated",context:"formatting"})||o.month(i,{width:"narrow",context:"formatting"});case"MMMMM":return o.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return o.month(i,{width:"wide",context:"formatting"})||o.month(i,{width:"abbreviated",context:"formatting"})||o.month(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,o){return i.setUTCMonth(o,1),i.setUTCHours(0,0,0,0),i}}]),n}(Fe),p3=function(t){De(n,t);var e=Oe(n);function n(){var r;Se(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),te(re(r),"priority",110),te(re(r),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),r}return Ce(n,[{key:"parse",value:function(i,s,o){var a=function(c){return c-1};switch(s){case"L":return yt(rt(gt.month,i),a);case"LL":return yt(ht(2,i),a);case"Lo":return yt(o.ordinalNumber(i,{unit:"month"}),a);case"LLL":return o.month(i,{width:"abbreviated",context:"standalone"})||o.month(i,{width:"narrow",context:"standalone"});case"LLLLL":return o.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return o.month(i,{width:"wide",context:"standalone"})||o.month(i,{width:"abbreviated",context:"standalone"})||o.month(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,o){return i.setUTCMonth(o,1),i.setUTCHours(0,0,0,0),i}}]),n}(Fe);function m3(t,e,n){ze(2,arguments);var r=at(t),i=Rt(e),s=Cx(r,n)-i;return r.setUTCDate(r.getUTCDate()-s*7),r}var g3=function(t){De(n,t);var e=Oe(n);function n(){var r;Se(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),te(re(r),"priority",100),te(re(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),r}return Ce(n,[{key:"parse",value:function(i,s,o){switch(s){case"w":return rt(gt.week,i);case"wo":return o.ordinalNumber(i,{unit:"week"});default:return ht(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=53}},{key:"set",value:function(i,s,o,a){return js(m3(i,o,a),a)}}]),n}(Fe);function y3(t,e){ze(2,arguments);var n=at(t),r=Rt(e),i=Sx(n)-r;return n.setUTCDate(n.getUTCDate()-i*7),n}var v3=function(t){De(n,t);var e=Oe(n);function n(){var r;Se(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),te(re(r),"priority",100),te(re(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),r}return Ce(n,[{key:"parse",value:function(i,s,o){switch(s){case"I":return rt(gt.week,i);case"Io":return o.ordinalNumber(i,{unit:"week"});default:return ht(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=53}},{key:"set",value:function(i,s,o){return Zo(y3(i,o))}}]),n}(Fe),w3=[31,28,31,30,31,30,31,31,30,31,30,31],_3=[31,29,31,30,31,30,31,31,30,31,30,31],E3=function(t){De(n,t);var e=Oe(n);function n(){var r;Se(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),te(re(r),"priority",90),te(re(r),"subPriority",1),te(re(r),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),r}return Ce(n,[{key:"parse",value:function(i,s,o){switch(s){case"d":return rt(gt.date,i);case"do":return o.ordinalNumber(i,{unit:"date"});default:return ht(s.length,i)}}},{key:"validate",value:function(i,s){var o=i.getUTCFullYear(),a=Fx(o),u=i.getUTCMonth();return a?s>=1&&s<=_3[u]:s>=1&&s<=w3[u]}},{key:"set",value:function(i,s,o){return i.setUTCDate(o),i.setUTCHours(0,0,0,0),i}}]),n}(Fe),T3=function(t){De(n,t);var e=Oe(n);function n(){var r;Se(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),te(re(r),"priority",90),te(re(r),"subpriority",1),te(re(r),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),r}return Ce(n,[{key:"parse",value:function(i,s,o){switch(s){case"D":case"DD":return rt(gt.dayOfYear,i);case"Do":return o.ordinalNumber(i,{unit:"date"});default:return ht(s.length,i)}}},{key:"validate",value:function(i,s){var o=i.getUTCFullYear(),a=Fx(o);return a?s>=1&&s<=366:s>=1&&s<=365}},{key:"set",value:function(i,s,o){return i.setUTCMonth(0,o),i.setUTCHours(0,0,0,0),i}}]),n}(Fe);function hv(t,e,n){var r,i,s,o,a,u,c,d;ze(2,arguments);var h=ya(),m=Rt((r=(i=(s=(o=n==null?void 0:n.weekStartsOn)!==null&&o!==void 0?o:n==null||(a=n.locale)===null||a===void 0||(u=a.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&s!==void 0?s:h.weekStartsOn)!==null&&i!==void 0?i:(c=h.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&r!==void 0?r:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var w=at(t),b=Rt(e),P=w.getUTCDay(),N=b%7,_=(N+7)%7,v=(_<m?7:0)+b-P;return w.setUTCDate(w.getUTCDate()+v),w}var b3=function(t){De(n,t);var e=Oe(n);function n(){var r;Se(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),te(re(r),"priority",90),te(re(r),"incompatibleTokens",["D","i","e","c","t","T"]),r}return Ce(n,[{key:"parse",value:function(i,s,o){switch(s){case"E":case"EE":case"EEE":return o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"});case"EEEEE":return o.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"});case"EEEE":default:return o.day(i,{width:"wide",context:"formatting"})||o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,o,a){return i=hv(i,o,a),i.setUTCHours(0,0,0,0),i}}]),n}(Fe),I3=function(t){De(n,t);var e=Oe(n);function n(){var r;Se(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),te(re(r),"priority",90),te(re(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),r}return Ce(n,[{key:"parse",value:function(i,s,o,a){var u=function(d){var h=Math.floor((d-1)/7)*7;return(d+a.weekStartsOn+6)%7+h};switch(s){case"e":case"ee":return yt(ht(s.length,i),u);case"eo":return yt(o.ordinalNumber(i,{unit:"day"}),u);case"eee":return o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"});case"eeeee":return o.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"});case"eeee":default:return o.day(i,{width:"wide",context:"formatting"})||o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,o,a){return i=hv(i,o,a),i.setUTCHours(0,0,0,0),i}}]),n}(Fe),P3=function(t){De(n,t);var e=Oe(n);function n(){var r;Se(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),te(re(r),"priority",90),te(re(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),r}return Ce(n,[{key:"parse",value:function(i,s,o,a){var u=function(d){var h=Math.floor((d-1)/7)*7;return(d+a.weekStartsOn+6)%7+h};switch(s){case"c":case"cc":return yt(ht(s.length,i),u);case"co":return yt(o.ordinalNumber(i,{unit:"day"}),u);case"ccc":return o.day(i,{width:"abbreviated",context:"standalone"})||o.day(i,{width:"short",context:"standalone"})||o.day(i,{width:"narrow",context:"standalone"});case"ccccc":return o.day(i,{width:"narrow",context:"standalone"});case"cccccc":return o.day(i,{width:"short",context:"standalone"})||o.day(i,{width:"narrow",context:"standalone"});case"cccc":default:return o.day(i,{width:"wide",context:"standalone"})||o.day(i,{width:"abbreviated",context:"standalone"})||o.day(i,{width:"short",context:"standalone"})||o.day(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,o,a){return i=hv(i,o,a),i.setUTCHours(0,0,0,0),i}}]),n}(Fe);function x3(t,e){ze(2,arguments);var n=Rt(e);n%7===0&&(n=n-7);var r=1,i=at(t),s=i.getUTCDay(),o=n%7,a=(o+7)%7,u=(a<r?7:0)+n-s;return i.setUTCDate(i.getUTCDate()+u),i}var S3=function(t){De(n,t);var e=Oe(n);function n(){var r;Se(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),te(re(r),"priority",90),te(re(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),r}return Ce(n,[{key:"parse",value:function(i,s,o){var a=function(c){return c===0?7:c};switch(s){case"i":case"ii":return ht(s.length,i);case"io":return o.ordinalNumber(i,{unit:"day"});case"iii":return yt(o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"}),a);case"iiiii":return yt(o.day(i,{width:"narrow",context:"formatting"}),a);case"iiiiii":return yt(o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"}),a);case"iiii":default:return yt(o.day(i,{width:"wide",context:"formatting"})||o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"}),a)}}},{key:"validate",value:function(i,s){return s>=1&&s<=7}},{key:"set",value:function(i,s,o){return i=x3(i,o),i.setUTCHours(0,0,0,0),i}}]),n}(Fe),C3=function(t){De(n,t);var e=Oe(n);function n(){var r;Se(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),te(re(r),"priority",80),te(re(r),"incompatibleTokens",["b","B","H","k","t","T"]),r}return Ce(n,[{key:"parse",value:function(i,s,o){switch(s){case"a":case"aa":case"aaa":return o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaaa":return o.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return o.dayPeriod(i,{width:"wide",context:"formatting"})||o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,o){return i.setUTCHours(dv(o),0,0,0),i}}]),n}(Fe),k3=function(t){De(n,t);var e=Oe(n);function n(){var r;Se(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),te(re(r),"priority",80),te(re(r),"incompatibleTokens",["a","B","H","k","t","T"]),r}return Ce(n,[{key:"parse",value:function(i,s,o){switch(s){case"b":case"bb":case"bbb":return o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbbb":return o.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return o.dayPeriod(i,{width:"wide",context:"formatting"})||o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,o){return i.setUTCHours(dv(o),0,0,0),i}}]),n}(Fe),A3=function(t){De(n,t);var e=Oe(n);function n(){var r;Se(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),te(re(r),"priority",80),te(re(r),"incompatibleTokens",["a","b","t","T"]),r}return Ce(n,[{key:"parse",value:function(i,s,o){switch(s){case"B":case"BB":case"BBB":return o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBBB":return o.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return o.dayPeriod(i,{width:"wide",context:"formatting"})||o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,o){return i.setUTCHours(dv(o),0,0,0),i}}]),n}(Fe),N3=function(t){De(n,t);var e=Oe(n);function n(){var r;Se(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),te(re(r),"priority",70),te(re(r),"incompatibleTokens",["H","K","k","t","T"]),r}return Ce(n,[{key:"parse",value:function(i,s,o){switch(s){case"h":return rt(gt.hour12h,i);case"ho":return o.ordinalNumber(i,{unit:"hour"});default:return ht(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=12}},{key:"set",value:function(i,s,o){var a=i.getUTCHours()>=12;return a&&o<12?i.setUTCHours(o+12,0,0,0):!a&&o===12?i.setUTCHours(0,0,0,0):i.setUTCHours(o,0,0,0),i}}]),n}(Fe),R3=function(t){De(n,t);var e=Oe(n);function n(){var r;Se(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),te(re(r),"priority",70),te(re(r),"incompatibleTokens",["a","b","h","K","k","t","T"]),r}return Ce(n,[{key:"parse",value:function(i,s,o){switch(s){case"H":return rt(gt.hour23h,i);case"Ho":return o.ordinalNumber(i,{unit:"hour"});default:return ht(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=23}},{key:"set",value:function(i,s,o){return i.setUTCHours(o,0,0,0),i}}]),n}(Fe),D3=function(t){De(n,t);var e=Oe(n);function n(){var r;Se(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),te(re(r),"priority",70),te(re(r),"incompatibleTokens",["h","H","k","t","T"]),r}return Ce(n,[{key:"parse",value:function(i,s,o){switch(s){case"K":return rt(gt.hour11h,i);case"Ko":return o.ordinalNumber(i,{unit:"hour"});default:return ht(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,o){var a=i.getUTCHours()>=12;return a&&o<12?i.setUTCHours(o+12,0,0,0):i.setUTCHours(o,0,0,0),i}}]),n}(Fe),O3=function(t){De(n,t);var e=Oe(n);function n(){var r;Se(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),te(re(r),"priority",70),te(re(r),"incompatibleTokens",["a","b","h","H","K","t","T"]),r}return Ce(n,[{key:"parse",value:function(i,s,o){switch(s){case"k":return rt(gt.hour24h,i);case"ko":return o.ordinalNumber(i,{unit:"hour"});default:return ht(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=24}},{key:"set",value:function(i,s,o){var a=o<=24?o%24:o;return i.setUTCHours(a,0,0,0),i}}]),n}(Fe),L3=function(t){De(n,t);var e=Oe(n);function n(){var r;Se(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),te(re(r),"priority",60),te(re(r),"incompatibleTokens",["t","T"]),r}return Ce(n,[{key:"parse",value:function(i,s,o){switch(s){case"m":return rt(gt.minute,i);case"mo":return o.ordinalNumber(i,{unit:"minute"});default:return ht(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=59}},{key:"set",value:function(i,s,o){return i.setUTCMinutes(o,0,0),i}}]),n}(Fe),M3=function(t){De(n,t);var e=Oe(n);function n(){var r;Se(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),te(re(r),"priority",50),te(re(r),"incompatibleTokens",["t","T"]),r}return Ce(n,[{key:"parse",value:function(i,s,o){switch(s){case"s":return rt(gt.second,i);case"so":return o.ordinalNumber(i,{unit:"second"});default:return ht(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=59}},{key:"set",value:function(i,s,o){return i.setUTCSeconds(o,0),i}}]),n}(Fe),V3=function(t){De(n,t);var e=Oe(n);function n(){var r;Se(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),te(re(r),"priority",30),te(re(r),"incompatibleTokens",["t","T"]),r}return Ce(n,[{key:"parse",value:function(i,s){var o=function(u){return Math.floor(u*Math.pow(10,-s.length+3))};return yt(ht(s.length,i),o)}},{key:"set",value:function(i,s,o){return i.setUTCMilliseconds(o),i}}]),n}(Fe),F3=function(t){De(n,t);var e=Oe(n);function n(){var r;Se(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),te(re(r),"priority",10),te(re(r),"incompatibleTokens",["t","T","x"]),r}return Ce(n,[{key:"parse",value:function(i,s){switch(s){case"X":return Er(_r.basicOptionalMinutes,i);case"XX":return Er(_r.basic,i);case"XXXX":return Er(_r.basicOptionalSeconds,i);case"XXXXX":return Er(_r.extendedOptionalSeconds,i);case"XXX":default:return Er(_r.extended,i)}}},{key:"set",value:function(i,s,o){return s.timestampIsSet?i:new Date(i.getTime()-o)}}]),n}(Fe),U3=function(t){De(n,t);var e=Oe(n);function n(){var r;Se(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),te(re(r),"priority",10),te(re(r),"incompatibleTokens",["t","T","X"]),r}return Ce(n,[{key:"parse",value:function(i,s){switch(s){case"x":return Er(_r.basicOptionalMinutes,i);case"xx":return Er(_r.basic,i);case"xxxx":return Er(_r.basicOptionalSeconds,i);case"xxxxx":return Er(_r.extendedOptionalSeconds,i);case"xxx":default:return Er(_r.extended,i)}}},{key:"set",value:function(i,s,o){return s.timestampIsSet?i:new Date(i.getTime()-o)}}]),n}(Fe),$3=function(t){De(n,t);var e=Oe(n);function n(){var r;Se(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),te(re(r),"priority",40),te(re(r),"incompatibleTokens","*"),r}return Ce(n,[{key:"parse",value:function(i){return Mx(i)}},{key:"set",value:function(i,s,o){return[new Date(o*1e3),{timestampIsSet:!0}]}}]),n}(Fe),j3=function(t){De(n,t);var e=Oe(n);function n(){var r;Se(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),te(re(r),"priority",20),te(re(r),"incompatibleTokens","*"),r}return Ce(n,[{key:"parse",value:function(i){return Mx(i)}},{key:"set",value:function(i,s,o){return[new Date(o),{timestampIsSet:!0}]}}]),n}(Fe),B3={G:new o3,y:new a3,Y:new l3,R:new u3,u:new c3,Q:new d3,q:new h3,M:new f3,L:new p3,w:new g3,I:new v3,d:new E3,D:new T3,E:new b3,e:new I3,c:new P3,i:new S3,a:new C3,b:new k3,B:new A3,h:new N3,H:new R3,K:new D3,k:new O3,m:new L3,s:new M3,S:new V3,X:new F3,x:new U3,t:new $3,T:new j3},z3=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,W3=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,H3=/^'([^]*?)'?$/,q3=/''/g,G3=/\S/,K3=/[a-zA-Z]/;function Q3(t,e,n,r){var i,s,o,a,u,c,d,h,m,w,b,P,N,_,v,A,D,M;ze(3,arguments);var V=String(t),E=String(e),y=ya(),S=(i=(s=r==null?void 0:r.locale)!==null&&s!==void 0?s:y.locale)!==null&&i!==void 0?i:Rx;if(!S.match)throw new RangeError("locale must contain match property");var k=Rt((o=(a=(u=(c=r==null?void 0:r.firstWeekContainsDate)!==null&&c!==void 0?c:r==null||(d=r.locale)===null||d===void 0||(h=d.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&u!==void 0?u:y.firstWeekContainsDate)!==null&&a!==void 0?a:(m=y.locale)===null||m===void 0||(w=m.options)===null||w===void 0?void 0:w.firstWeekContainsDate)!==null&&o!==void 0?o:1);if(!(k>=1&&k<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var R=Rt((b=(P=(N=(_=r==null?void 0:r.weekStartsOn)!==null&&_!==void 0?_:r==null||(v=r.locale)===null||v===void 0||(A=v.options)===null||A===void 0?void 0:A.weekStartsOn)!==null&&N!==void 0?N:y.weekStartsOn)!==null&&P!==void 0?P:(D=y.locale)===null||D===void 0||(M=D.options)===null||M===void 0?void 0:M.weekStartsOn)!==null&&b!==void 0?b:0);if(!(R>=0&&R<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(E==="")return V===""?at(n):new Date(NaN);var T={firstWeekContainsDate:k,weekStartsOn:R,locale:S},I=[new s3],W=E.match(W3).map(function(Je){var Ve=Je[0];if(Ve in Bm){var It=Bm[Ve];return It(Je,S.formatLong)}return Je}).join("").match(z3),H=[],de=M1(W),ge;try{var Q=function(){var Ve=ge.value;!(r!=null&&r.useAdditionalWeekYearTokens)&&Nx(Ve)&&Vd(Ve,E,t),!(r!=null&&r.useAdditionalDayOfYearTokens)&&Ax(Ve)&&Vd(Ve,E,t);var It=Ve[0],Fn=B3[It];if(Fn){var li=Fn.incompatibleTokens;if(Array.isArray(li)){var Rr=H.find(function(ls){return li.includes(ls.token)||ls.token===It});if(Rr)throw new RangeError("The format string mustn't contain `".concat(Rr.fullToken,"` and `").concat(Ve,"` at the same time"))}else if(Fn.incompatibleTokens==="*"&&H.length>0)throw new RangeError("The format string mustn't contain `".concat(Ve,"` and any other token at the same time"));H.push({token:It,fullToken:Ve});var dr=Fn.run(V,Ve,S.match,T);if(!dr)return{v:new Date(NaN)};I.push(dr.setter),V=dr.rest}else{if(It.match(K3))throw new RangeError("Format string contains an unescaped latin alphabet character `"+It+"`");if(Ve==="''"?Ve="'":It==="'"&&(Ve=Y3(Ve)),V.indexOf(Ve)===0)V=V.slice(Ve.length);else return{v:new Date(NaN)}}};for(de.s();!(ge=de.n()).done;){var se=Q();if(ri(se)==="object")return se.v}}catch(Je){de.e(Je)}finally{de.f()}if(V.length>0&&G3.test(V))return new Date(NaN);var K=I.map(function(Je){return Je.priority}).sort(function(Je,Ve){return Ve-Je}).filter(function(Je,Ve,It){return It.indexOf(Je)===Ve}).map(function(Je){return I.filter(function(Ve){return Ve.priority===Je}).sort(function(Ve,It){return It.subPriority-Ve.subPriority})}).map(function(Je){return Je[0]}),ae=at(n);if(isNaN(ae.getTime()))return new Date(NaN);var le=Px(ae,Ix(ae)),fe={},Ee=M1(K),ye;try{for(Ee.s();!(ye=Ee.n()).done;){var Be=ye.value;if(!Be.validate(le,T))return new Date(NaN);var ve=Be.set(le,fe,T);Array.isArray(ve)?(le=ve[0],JF(fe,ve[1])):le=ve}}catch(Je){Ee.e(Je)}finally{Ee.f()}return le}function Y3(t){return t.match(H3)[1].replace(q3,"'")}function fv(t,e){var n;ze(1,arguments);var r=Rt((n=e==null?void 0:e.additionalDigits)!==null&&n!==void 0?n:2);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"))return new Date(NaN);var i=e6(t),s;if(i.date){var o=t6(i.date,r);s=n6(o.restDateString,o.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);var a=s.getTime(),u=0,c;if(i.time&&(u=r6(i.time),isNaN(u)))return new Date(NaN);if(i.timezone){if(c=i6(i.timezone),isNaN(c))return new Date(NaN)}else{var d=new Date(a+u),h=new Date(0);return h.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),h.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),h}return new Date(a+u+c)}var gc={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},X3=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,J3=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Z3=/^([+-])(\d{2})(?::?(\d{2}))?$/;function e6(t){var e={},n=t.split(gc.dateTimeDelimiter),r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],gc.timeZoneDelimiter.test(e.date)&&(e.date=t.split(gc.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){var i=gc.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function t6(t,e){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};var i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((r[1]||r[2]).length)}}function n6(t,e){if(e===null)return new Date(NaN);var n=t.match(X3);if(!n)return new Date(NaN);var r=!!n[4],i=Ba(n[1]),s=Ba(n[2])-1,o=Ba(n[3]),a=Ba(n[4]),u=Ba(n[5])-1;if(r)return u6(e,a,u)?s6(e,a,u):new Date(NaN);var c=new Date(0);return!a6(e,s,o)||!l6(e,i)?new Date(NaN):(c.setUTCFullYear(e,s,Math.max(i,o)),c)}function Ba(t){return t?parseInt(t):1}function r6(t){var e=t.match(J3);if(!e)return NaN;var n=lp(e[1]),r=lp(e[2]),i=lp(e[3]);return c6(n,r,i)?n*uv+r*lv+i*1e3:NaN}function lp(t){return t&&parseFloat(t.replace(",","."))||0}function i6(t){if(t==="Z")return 0;var e=t.match(Z3);if(!e)return 0;var n=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return d6(r,i)?n*(r*uv+i*lv):NaN}function s6(t,e,n){var r=new Date(0);r.setUTCFullYear(t,0,4);var i=r.getUTCDay()||7,s=(e-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}var o6=[31,null,31,30,31,30,31,31,30,31,30,31];function Ux(t){return t%400===0||t%4===0&&t%100!==0}function a6(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(o6[e]||(Ux(t)?29:28))}function l6(t,e){return e>=1&&e<=(Ux(t)?366:365)}function u6(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function c6(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function d6(t,e){return e>=0&&e<=59}function h6(t,e){ze(2,arguments);var n=at(t),r=Rt(e);return n.setHours(r),n}function f6(t,e){ze(2,arguments);var n=at(t),r=Rt(e);return n.setMinutes(r),n}function p6(t,e){ze(2,arguments);var n=at(t),r=Rt(e);return n.setSeconds(r),n}/*! Capacitor: https://capacitorjs.com/ - MIT License */const m6=t=>{const e=new Map;e.set("web",{name:"web"});const n=t.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},r=(s,o)=>{n.platforms.set(s,o)},i=s=>{n.platforms.has(s)&&(n.currentPlatform=n.platforms.get(s))};return n.addPlatform=r,n.setPlatform=i,n},g6=t=>t.CapacitorPlatforms=m6(t),$x=g6(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});$x.addPlatform;$x.setPlatform;var ea;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(ea||(ea={}));let up=class extends Error{constructor(e,n){super(e),this.message=e,this.code=n}};const y6=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},v6=t=>{var e,n,r,i,s;const o=t.CapacitorCustomPlatform||null,a=t.Capacitor||{},u=a.Plugins=a.Plugins||{},c=t.CapacitorPlatforms,d=()=>o!==null?o.name:y6(t),h=((e=c==null?void 0:c.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||d,m=()=>h()!=="web",w=((n=c==null?void 0:c.currentPlatform)===null||n===void 0?void 0:n.isNativePlatform)||m,b=E=>{const y=D.get(E);return!!(y!=null&&y.platforms.has(h())||_(E))},P=((r=c==null?void 0:c.currentPlatform)===null||r===void 0?void 0:r.isPluginAvailable)||b,N=E=>{var y;return(y=a.PluginHeaders)===null||y===void 0?void 0:y.find(S=>S.name===E)},_=((i=c==null?void 0:c.currentPlatform)===null||i===void 0?void 0:i.getPluginHeader)||N,v=E=>t.console.error(E),A=(E,y,S)=>Promise.reject(`${S} does not have an implementation of "${y}".`),D=new Map,M=(E,y={})=>{const S=D.get(E);if(S)return console.warn(`Capacitor plugin "${E}" already registered. Cannot register plugins twice.`),S.proxy;const k=h(),R=_(E);let T;const I=async()=>(!T&&k in y?T=typeof y[k]=="function"?T=await y[k]():T=y[k]:o!==null&&!T&&"web"in y&&(T=typeof y.web=="function"?T=await y.web():T=y.web),T),W=(K,ae)=>{var le,fe;if(R){const Ee=R==null?void 0:R.methods.find(ye=>ae===ye.name);if(Ee)return Ee.rtype==="promise"?ye=>a.nativePromise(E,ae.toString(),ye):(ye,Be)=>a.nativeCallback(E,ae.toString(),ye,Be);if(K)return(le=K[ae])===null||le===void 0?void 0:le.bind(K)}else{if(K)return(fe=K[ae])===null||fe===void 0?void 0:fe.bind(K);throw new up(`"${E}" plugin is not implemented on ${k}`,ea.Unimplemented)}},H=K=>{let ae;const le=(...fe)=>{const Ee=I().then(ye=>{const Be=W(ye,K);if(Be){const ve=Be(...fe);return ae=ve==null?void 0:ve.remove,ve}else throw new up(`"${E}.${K}()" is not implemented on ${k}`,ea.Unimplemented)});return K==="addListener"&&(Ee.remove=async()=>ae()),Ee};return le.toString=()=>`${K.toString()}() { [capacitor code] }`,Object.defineProperty(le,"name",{value:K,writable:!1,configurable:!1}),le},de=H("addListener"),ge=H("removeListener"),Q=(K,ae)=>{const le=de({eventName:K},ae),fe=async()=>{const ye=await le;ge({eventName:K,callbackId:ye},ae)},Ee=new Promise(ye=>le.then(()=>ye({remove:fe})));return Ee.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await fe()},Ee},se=new Proxy({},{get(K,ae){switch(ae){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return R?Q:de;case"removeListener":return ge;default:return H(ae)}}});return u[E]=se,D.set(E,{name:E,proxy:se,platforms:new Set([...Object.keys(y),...R?[k]:[]])}),se},V=((s=c==null?void 0:c.currentPlatform)===null||s===void 0?void 0:s.registerPlugin)||M;return a.convertFileSrc||(a.convertFileSrc=E=>E),a.getPlatform=h,a.handleError=v,a.isNativePlatform=w,a.isPluginAvailable=P,a.pluginMethodNoop=A,a.registerPlugin=V,a.Exception=up,a.DEBUG=!!a.DEBUG,a.isLoggingEnabled=!!a.isLoggingEnabled,a.platform=a.getPlatform(),a.isNative=a.isNativePlatform(),a},w6=t=>t.Capacitor=v6(t),$d=w6(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),_6=$d.registerPlugin;$d.Plugins;let E$=class{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,n){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(n);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i);const s=async()=>this.removeListener(e,n),o=Promise.resolve({remove:s});return Object.defineProperty(o,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await s()}}),o}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n){const r=this.listeners[e];r&&r.forEach(i=>i(n))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new $d.Exception(e,ea.Unimplemented)}unavailable(e="not available"){return new $d.Exception(e,ea.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const i=r.indexOf(n);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}};const cp=_6("Http",{web:()=>$s(()=>import("./web-877e3a7a.js"),[]).then(t=>new t.HttpWeb),electron:()=>$s(()=>import("./web-877e3a7a.js"),[]).then(t=>new t.HttpWeb)});/*! Capacitor: https://capacitorjs.com/ - MIT License */const E6=t=>{const e=new Map;e.set("web",{name:"web"});const n=t.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},r=(s,o)=>{n.platforms.set(s,o)},i=s=>{n.platforms.has(s)&&(n.currentPlatform=n.platforms.get(s))};return n.addPlatform=r,n.setPlatform=i,n},T6=t=>t.CapacitorPlatforms=E6(t),jx=T6(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});jx.addPlatform;jx.setPlatform;var ta;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(ta||(ta={}));class dp extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const b6=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},I6=t=>{var e,n,r,i,s;const o=t.CapacitorCustomPlatform||null,a=t.Capacitor||{},u=a.Plugins=a.Plugins||{},c=t.CapacitorPlatforms,d=()=>o!==null?o.name:b6(t),h=((e=c==null?void 0:c.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||d,m=()=>h()!=="web",w=((n=c==null?void 0:c.currentPlatform)===null||n===void 0?void 0:n.isNativePlatform)||m,b=E=>{const y=D.get(E);return!!(y!=null&&y.platforms.has(h())||_(E))},P=((r=c==null?void 0:c.currentPlatform)===null||r===void 0?void 0:r.isPluginAvailable)||b,N=E=>{var y;return(y=a.PluginHeaders)===null||y===void 0?void 0:y.find(S=>S.name===E)},_=((i=c==null?void 0:c.currentPlatform)===null||i===void 0?void 0:i.getPluginHeader)||N,v=E=>t.console.error(E),A=(E,y,S)=>Promise.reject(`${S} does not have an implementation of "${y}".`),D=new Map,M=(E,y={})=>{const S=D.get(E);if(S)return console.warn(`Capacitor plugin "${E}" already registered. Cannot register plugins twice.`),S.proxy;const k=h(),R=_(E);let T;const I=async()=>(!T&&k in y?T=typeof y[k]=="function"?T=await y[k]():T=y[k]:o!==null&&!T&&"web"in y&&(T=typeof y.web=="function"?T=await y.web():T=y.web),T),W=(K,ae)=>{var le,fe;if(R){const Ee=R==null?void 0:R.methods.find(ye=>ae===ye.name);if(Ee)return Ee.rtype==="promise"?ye=>a.nativePromise(E,ae.toString(),ye):(ye,Be)=>a.nativeCallback(E,ae.toString(),ye,Be);if(K)return(le=K[ae])===null||le===void 0?void 0:le.bind(K)}else{if(K)return(fe=K[ae])===null||fe===void 0?void 0:fe.bind(K);throw new dp(`"${E}" plugin is not implemented on ${k}`,ta.Unimplemented)}},H=K=>{let ae;const le=(...fe)=>{const Ee=I().then(ye=>{const Be=W(ye,K);if(Be){const ve=Be(...fe);return ae=ve==null?void 0:ve.remove,ve}else throw new dp(`"${E}.${K}()" is not implemented on ${k}`,ta.Unimplemented)});return K==="addListener"&&(Ee.remove=async()=>ae()),Ee};return le.toString=()=>`${K.toString()}() { [capacitor code] }`,Object.defineProperty(le,"name",{value:K,writable:!1,configurable:!1}),le},de=H("addListener"),ge=H("removeListener"),Q=(K,ae)=>{const le=de({eventName:K},ae),fe=async()=>{const ye=await le;ge({eventName:K,callbackId:ye},ae)},Ee=new Promise(ye=>le.then(()=>ye({remove:fe})));return Ee.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await fe()},Ee},se=new Proxy({},{get(K,ae){switch(ae){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return R?Q:de;case"removeListener":return ge;default:return H(ae)}}});return u[E]=se,D.set(E,{name:E,proxy:se,platforms:new Set([...Object.keys(y),...R?[k]:[]])}),se},V=((s=c==null?void 0:c.currentPlatform)===null||s===void 0?void 0:s.registerPlugin)||M;return a.convertFileSrc||(a.convertFileSrc=E=>E),a.getPlatform=h,a.handleError=v,a.isNativePlatform=w,a.isPluginAvailable=P,a.pluginMethodNoop=A,a.registerPlugin=V,a.Exception=dp,a.DEBUG=!!a.DEBUG,a.isLoggingEnabled=!!a.isLoggingEnabled,a.platform=a.getPlatform(),a.isNative=a.isNativePlatform(),a},P6=t=>t.Capacitor=I6(t),jd=P6(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),pv=jd.registerPlugin;jd.Plugins;class Bx{constructor(e){this.listeners={},this.retainedEventArguments={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const s=this.windowListeners[e];s&&!s.registered&&this.addWindowListener(s),r&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const i=this.listeners[e];if(!i){if(r){let s=this.retainedEventArguments[e];s||(s=[]),s.push(n),this.retainedEventArguments[e]=s}return}i.forEach(s=>s(n))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new jd.Exception(e,ta.Unimplemented)}unavailable(e="not available"){return new jd.Exception(e,ta.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const i=r.indexOf(n);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const F1=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),U1=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class x6 extends Bx{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[i,s]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=U1(i).trim(),s=U1(s).trim(),n[i]=s}),n}async setCookie(e){try{const n=F1(e.key),r=F1(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,s=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${i}; path=${s}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}pv("CapacitorCookies",{web:()=>new x6});const S6=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const i=r.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>n(i),r.readAsDataURL(t)}),C6=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(i=>i.toLocaleLowerCase()).reduce((i,s,o)=>(i[s]=t[e[o]],i),{})},k6=(t,e=!0)=>t?Object.entries(t).reduce((r,i)=>{const[s,o]=i;let a,u;return Array.isArray(o)?(u="",o.forEach(c=>{a=e?encodeURIComponent(c):c,u+=`${s}=${a}&`}),u.slice(0,-1)):(a=e?encodeURIComponent(o):o,u=`${s}=${a}`),`${r}&${u}`},"").substr(1):null,A6=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),i=C6(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(i.includes("application/x-www-form-urlencoded")){const s=new URLSearchParams;for(const[o,a]of Object.entries(t.data||{}))s.set(o,a);n.body=s.toString()}else if(i.includes("multipart/form-data")||t.data instanceof FormData){const s=new FormData;if(t.data instanceof FormData)t.data.forEach((a,u)=>{s.append(u,a)});else for(const a of Object.keys(t.data))s.append(a,t.data[a]);n.body=s;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(i.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class N6 extends Bx{async request(e){const n=A6(e,e.webFetchExtra),r=k6(e.params,e.shouldEncodeUrlParams),i=r?`${e.url}?${r}`:e.url,s=await fetch(i,n),o=s.headers.get("content-type")||"";let{responseType:a="text"}=s.ok?e:{};o.includes("application/json")&&(a="json");let u,c;switch(a){case"arraybuffer":case"blob":c=await s.blob(),u=await S6(c);break;case"json":u=await s.json();break;case"document":case"text":default:u=await s.text()}const d={};return s.headers.forEach((h,m)=>{d[m]=h}),{data:u,headers:d,status:s.status,url:s.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}pv("CapacitorHttp",{web:()=>new N6});var $1;(function(t){t.General="General",t.ParentalGuidance="ParentalGuidance",t.Teen="Teen",t.MatureAudience="MatureAudience"})($1||($1={}));var bl;(function(t){t.SizeChanged="bannerAdSizeChanged",t.Loaded="bannerAdLoaded",t.FailedToLoad="bannerAdFailedToLoad",t.Opened="bannerAdOpened",t.Closed="bannerAdClosed",t.AdImpression="bannerAdImpression"})(bl||(bl={}));var Wm;(function(t){t.TOP_CENTER="TOP_CENTER",t.CENTER="CENTER",t.BOTTOM_CENTER="BOTTOM_CENTER"})(Wm||(Wm={}));var Hm;(function(t){t.BANNER="BANNER",t.FULL_BANNER="FULL_BANNER",t.LARGE_BANNER="LARGE_BANNER",t.MEDIUM_RECTANGLE="MEDIUM_RECTANGLE",t.LEADERBOARD="LEADERBOARD",t.ADAPTIVE_BANNER="ADAPTIVE_BANNER",t.SMART_BANNER="SMART_BANNER"})(Hm||(Hm={}));var j1;(function(t){t.Loaded="interstitialAdLoaded",t.FailedToLoad="interstitialAdFailedToLoad",t.Showed="interstitialAdShowed",t.FailedToShow="interstitialAdFailedToShow",t.Dismissed="interstitialAdDismissed"})(j1||(j1={}));var B1;(function(t){t.Loaded="onRewardedInterstitialAdLoaded",t.FailedToLoad="onRewardedInterstitialAdFailedToLoad",t.Showed="onRewardedInterstitialAdShowed",t.FailedToShow="onRewardedInterstitialAdFailedToShow",t.Dismissed="onRewardedInterstitialAdDismissed",t.Rewarded="onRewardedInterstitialAdReward"})(B1||(B1={}));var z1;(function(t){t.Loaded="onRewardedVideoAdLoaded",t.FailedToLoad="onRewardedVideoAdFailedToLoad",t.Showed="onRewardedVideoAdShowed",t.FailedToShow="onRewardedVideoAdFailedToShow",t.Dismissed="onRewardedVideoAdDismissed",t.Rewarded="onRewardedVideoAdReward"})(z1||(z1={}));var qm;(function(t){t.NOT_REQUIRED="NOT_REQUIRED",t.OBTAINED="OBTAINED",t.REQUIRED="REQUIRED",t.UNKNOWN="UNKNOWN"})(qm||(qm={}));var W1;(function(t){t[t.DISABLED=0]="DISABLED",t[t.EEA=1]="EEA",t[t.NOT_EEA=2]="NOT_EEA"})(W1||(W1={}));const pr=pv("AdMob",{web:()=>$s(()=>import("./web-26f27906.js"),[]).then(t=>new t.AdMobWeb)}),Gh=()=>p("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-secondary-50 dark:from-slate-900 dark:to-slate-800 flex items-center justify-center",children:x("div",{className:"text-center",children:[p("div",{className:"w-16 h-16 bg-primary rounded-2xl flex items-center justify-center mx-auto mb-6 animate-pulse",children:p("div",{className:"w-8 h-8 bg-white rounded-full"})}),p("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),p("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"DentalCare"}),p("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading your dental practice..."})]})}),Vt=(t,e="MMM d, yyyy")=>{if(!t)return"N/A";try{const n=typeof t=="string"?fv(t):t;return YF(n,e)}catch(n){return console.error("Error formatting date:",{date:t,formatString:e,error:n}),"N/A"}},R6=t=>{if(!t)return"N/A";try{const e=typeof t=="string"?fv(t):t,n=new Date;let r=n.getFullYear()-e.getFullYear();const i=n.getMonth()-e.getMonth();return(i<0||i===0&&n.getDate()<e.getDate())&&r--,r.toString()}catch(e){return console.error("Error calculating age:",{dateOfBirth:t,error:e}),"N/A"}},D6=(t,e)=>{if(!t)return null;try{const n=typeof t=="string"?fv(t):t,r=(e==null?void 0:e.defaultDays)??7;return bx(n,r)}catch(n){return console.error("Error calculating next follow-up date:",{lastTreatmentDate:t,followUpType:e,error:n}),null}},fs=t=>{if(!t)return null;if(typeof t=="object"&&typeof t.toDate=="function")return t.toDate();const e=new Date(t);return isNaN(e.getTime())?null:e},yc=({icon:t,title:e,value:n,subtitle:r,color:i="blue",onClick:s})=>p("div",{className:`card cursor-pointer transform transition-all duration-200 hover:scale-105 ${s?"hover:shadow-md":""}`,onClick:s,children:x("div",{className:"flex items-center justify-between",children:[x("div",{children:[p("p",{className:"text-sm text-gray-600 mb-1",children:e}),p("p",{className:`text-2xl font-bold text-${i}-600`,children:n}),r&&p("p",{className:"text-xs text-gray-500 mt-1",children:r})]}),p("div",{className:`p-3 bg-${i}-100 rounded-full`,children:p(t,{className:`w-6 h-6 text-${i}-600`})})]})}),O6=()=>{const t=xn(),{currentUser:e}=Sn(),{showError:n}=Vn(),[r,i]=O.useState([]),[s,o]=O.useState([]),[a,u]=O.useState(!0);if(O.useEffect(()=>{if(!(e!=null&&e.uid)){u(!1);return}(async()=>{u(!0);try{const[v,A]=await Promise.all([lr.getAll(e.uid),En.getAll(e.uid)]);v.error?(n(v.error),i([])):i(v.patients||[]),A.error?(n(A.error),o([])):o(A.followUps||[])}catch(v){n(v.message||"Failed to load dashboard data"),i([]),o([])}finally{u(!1)}})()},[e,n]),a)return p(Gh,{});const c=r.reduce((_,v)=>(v&&v.id&&(_[v.id]=v),_),{}),d=s.map(_=>{var v;return{..._,patientName:_.patientName||((v=c[_.patientId])==null?void 0:v.name)||"Unknown"}}),h=r.length,m=d.filter(_=>_.status==="pending").length,w=d.filter(_=>_.status==="overdue").length,b=d.filter(_=>{if(_.status!=="completed")return!1;const v=fs(_.scheduledDate)??new Date(_.scheduledDate);return Vt(v)===Vt(new Date)}).length,P=[...d].sort((_,v)=>{const A=fs(_.scheduledDate),D=fs(v.scheduledDate);return!A&&!D?0:A?D?D.getTime()-A.getTime():-1:1}).slice(0,4),N=new Date().getTime();return[...r].filter(_=>{if(!_.nextAppointment)return!1;const v=fs(_.nextAppointment);return v?v.getTime()>=N:new Date(_.nextAppointment).getTime()>=N}).sort((_,v)=>{const A=fs(_.nextAppointment)??new Date(_.nextAppointment),D=fs(v.nextAppointment)??new Date(v.nextAppointment);return A.getTime()-D.getTime()}).slice(0,4),x("div",{className:"space-y-6",children:[x("div",{className:"text-center py-4",children:[p("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Welcome back, Doctor!"}),p("p",{className:"text-gray-600",children:"Here's your practice overview for today"})]}),x("div",{className:"grid grid-cols-2 gap-4",children:[p(yc,{icon:pm,title:"Total Patients",value:h,subtitle:"Active patients",color:"blue",onClick:()=>t("/patients")}),p(yc,{icon:Gi,title:"Pending Follow-ups",value:m,subtitle:"Need attention",color:"yellow",onClick:()=>t("/followups")}),p(yc,{icon:Nb,title:"Overdue",value:w,subtitle:"Requires immediate action",color:"red",onClick:()=>t("/followups")}),p(yc,{icon:Xg,title:"Completed Today",value:b,subtitle:"Follow-ups done",color:"green"})]}),x("div",{className:"card",children:[x("div",{className:"flex items-center justify-between mb-4",children:[p("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Follow-ups"}),p("button",{onClick:()=>t("/followups"),className:"text-dental-primary text-sm font-medium",children:"View All"})]}),p("div",{className:"space-y-3",children:P.length>0?P.map(_=>x("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0",children:[x("div",{children:[p("p",{className:"font-medium text-gray-900",children:_.patientName}),p("p",{className:"text-sm text-gray-600",children:_.notes||""})]}),x("div",{className:"text-right",children:[p("p",{className:"text-sm text-gray-500",children:Vt(fs(_.scheduledDate)??_.scheduledDate)}),p("span",{className:`status-${_.status}`,children:_.status})]})]},_.id)):p("p",{className:"text-gray-500 text-center py-4",children:"No recent follow-ups"})})]}),x("div",{className:"grid grid-cols-2 gap-4",children:[x("button",{onClick:()=>t("/add-patient"),className:"card text-center hover:shadow-md transition-shadow",children:[p(pm,{className:"w-8 h-8 text-dental-primary mx-auto mb-2"}),p("p",{className:"font-medium text-gray-900",children:"Add Patient"}),p("p",{className:"text-sm text-gray-600",children:"Register new patient"})]}),x("button",{onClick:()=>t("/add-followup"),className:"card text-center hover:shadow-md transition-shadow",children:[p(Gi,{className:"w-8 h-8 text-dental-primary mx-auto mb-2"}),p("p",{className:"font-medium text-gray-900",children:"Schedule Follow-up"}),p("p",{className:"text-sm text-gray-600",children:"Create follow-up reminder"})]})]})]})},L6=()=>{const t=xn(),{currentUser:e}=Sn(),{showError:n}=Vn(),[r,i]=O.useState([]),[s,o]=O.useState(!0),[a,u]=O.useState(""),[c,d]=O.useState(1),h=10;O.useEffect(()=>{if(!e){console.log("No current user, skipping patient fetch"),o(!1);return}(async()=>{try{console.log("Fetching patients for userId:",e.uid);const{patients:v,error:A}=await lr.getAll(e.uid);A?(console.error("Patient fetch error:",A),n(A)):i(v)}catch(v){console.error("Unexpected error fetching patients:",v),n(v.message)}finally{o(!1)}})()},[e,n]);const m=async _=>{const v=_.target.value;if(u(v),d(1),!!e)try{const{patients:A,error:D}=v.trim()===""?await lr.getAll(e.uid):await lr.search(e.uid,v);D?n(D):i(A)}catch(A){n(A.message)}};if(s)return p(Gh,{});const w=c*h,b=w-h,P=r.slice(b,w),N=Math.ceil(r.length/h);return x("div",{className:"space-y-6",children:[x("div",{className:"flex items-center justify-between",children:[p("h2",{className:"text-2xl font-bold text-gray-900",children:"Patients"}),x("button",{onClick:()=>t("/add-patient"),className:"btn-primary text-sm py-2 px-4",children:[p(yd,{className:"w-4 h-4 mr-2"}),"Add Patient"]})]}),p("input",{type:"text",placeholder:"Search patients...",value:a,onChange:m,className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),P.length>0?x(Rn,{children:[p("div",{className:"space-y-3",children:P.map(_=>x("div",{className:"card flex items-center space-x-4 cursor-pointer",onClick:()=>t(`/patients/${_.id}`),children:[p("div",{className:"w-12 h-12 bg-primary rounded-full flex items-center justify-center",children:p(Ki,{className:"w-6 h-6 text-white"})}),x("div",{className:"flex-1",children:[p("h3",{className:"font-semibold text-gray-900",children:_.name}),p("p",{className:"text-sm text-gray-600",children:_.phone}),x("p",{className:"text-sm text-gray-600",children:["Last Visit: ",_.lastVisit?Vt(_.lastVisit):"N/A"]})]}),p("button",{onClick:v=>{v.stopPropagation(),t(`/patients/${_.id}/edit`)},className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:p(Zg,{className:"w-5 h-5 text-gray-600"})})]},_.id))}),x("div",{className:"flex justify-center mt-4 space-x-2",children:[p("button",{disabled:c===1,onClick:()=>d(_=>_-1),className:"px-3 py-1 border rounded disabled:opacity-50",children:"Prev"}),Array.from({length:N},(_,v)=>p("button",{onClick:()=>d(v+1),className:`px-3 py-1 border rounded ${c===v+1?"bg-primary text-white":""}`,children:v+1},v+1)),p("button",{disabled:c===N,onClick:()=>d(_=>_+1),className:"px-3 py-1 border rounded disabled:opacity-50",children:"Next"})]})]}):x("div",{className:"text-center py-8 text-gray-500",children:[p(Ki,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),p("p",{children:"No patients found"}),p("button",{onClick:()=>t("/add-patient"),className:"btn-primary mt-4",children:"Add Your First Patient"})]})]})},M6=Te.memo(({treatment:t,onSave:e,onCancel:n})=>{const[r,i]=O.useState({treatment:t.treatment,date:t.date,cost:t.cost,notes:t.notes,patientId:t.patientId}),s=(o,a)=>{i(u=>({...u,[a]:a==="cost"?Number(o.target.value):o.target.value}))};return x("div",{className:"space-y-4",children:[x("div",{children:[p("label",{className:"block text-sm font-medium text-gray-600",children:"Treatment"}),p("input",{type:"text",value:r.treatment||"",onChange:o=>s(o,"treatment"),className:"mt-1 w-full border border-gray-300 rounded-lg p-2 text-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter treatment name"})]}),x("div",{children:[p("label",{className:"block text-sm font-medium text-gray-600",children:"Date"}),p("input",{type:"date",value:r.date||"",onChange:o=>s(o,"date"),className:"mt-1 w-full border border-gray-300 rounded-lg p-2 text-sm focus:ring-blue-500 focus:border-blue-500"})]}),x("div",{children:[p("label",{className:"block text-sm font-medium text-gray-600",children:"Cost"}),p("input",{type:"number",value:r.cost||"",onChange:o=>s(o,"cost"),className:"mt-1 w-full border border-gray-300 rounded-lg p-2 text-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter cost"})]}),x("div",{children:[p("label",{className:"block text-sm font-medium text-gray-600",children:"Notes"}),p("textarea",{value:r.notes||"",onChange:o=>s(o,"notes"),className:"mt-1 w-full border border-gray-300 rounded-lg p-2 text-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter notes",rows:4})]}),x("div",{className:"flex justify-end space-x-2",children:[p("button",{onClick:n,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-sm font-medium",children:"Cancel"}),p("button",{onClick:()=>e(r),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm font-medium",children:"Save"})]})]})});var Su=t=>t.type==="checkbox",Po=t=>t instanceof Date,an=t=>t==null;const zx=t=>typeof t=="object";var bt=t=>!an(t)&&!Array.isArray(t)&&zx(t)&&!Po(t),V6=t=>bt(t)&&t.target?Su(t.target)?t.target.checked:t.target.value:t,F6=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,U6=(t,e)=>t.has(F6(e)),$6=t=>{const e=t.constructor&&t.constructor.prototype;return bt(e)&&e.hasOwnProperty("isPrototypeOf")},mv=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Un(t){let e;const n=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(mv&&(t instanceof Blob||t instanceof FileList))&&(n||bt(t)))if(e=n?[]:{},!n&&!$6(t))e=t;else for(const r in t)t.hasOwnProperty(r)&&(e[r]=Un(t[r]));else return t;return e}var Kh=t=>Array.isArray(t)?t.filter(Boolean):[],ft=t=>t===void 0,oe=(t,e,n)=>{if(!e||!bt(t))return n;const r=Kh(e.split(/[,[\].]+?/)).reduce((i,s)=>an(i)?i:i[s],t);return ft(r)||r===t?ft(t[e])?n:t[e]:r},yr=t=>typeof t=="boolean",gv=t=>/^\w*$/.test(t),Wx=t=>Kh(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Qe=(t,e,n)=>{let r=-1;const i=gv(e)?[e]:Wx(e),s=i.length,o=s-1;for(;++r<s;){const a=i[r];let u=n;if(r!==o){const c=t[a];u=bt(c)||Array.isArray(c)?c:isNaN(+i[r+1])?{}:[]}if(a==="__proto__")return;t[a]=u,t=t[a]}return t};const H1={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},rr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Lr={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};Te.createContext(null);var j6=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==rr.all&&(e._proxyFormState[o]=!r||rr.all),n&&(n[o]=!0),t[o]}});return i},mn=t=>bt(t)&&!Object.keys(t).length,B6=(t,e,n,r)=>{n(t);const{name:i,...s}=t;return mn(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!r||rr.all))},Wc=t=>Array.isArray(t)?t:[t];function z6(t){const e=Te.useRef(t);e.current=t,Te.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}var Tr=t=>typeof t=="string",W6=(t,e,n,r,i)=>Tr(t)?(r&&e.watch.add(t),oe(n,t,i)):Array.isArray(t)?t.map(s=>(r&&e.watch.add(s),oe(n,s))):(r&&(e.watchAll=!0),n),H6=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},q1=t=>({isOnSubmit:!t||t===rr.onSubmit,isOnBlur:t===rr.onBlur,isOnChange:t===rr.onChange,isOnAll:t===rr.all,isOnTouch:t===rr.onTouched}),G1=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Il=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const s=oe(t,i);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(Il(a,e))break}else if(bt(a)&&Il(a,e))break}}};var q6=(t,e,n)=>{const r=Wc(oe(t,n));return Qe(r,"root",e[n]),Qe(t,n,r),t},yv=t=>t.type==="file",Wr=t=>typeof t=="function",Bd=t=>{if(!mv)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Hc=t=>Tr(t),vv=t=>t.type==="radio",zd=t=>t instanceof RegExp;const K1={value:!1,isValid:!1},Q1={value:!0,isValid:!0};var Hx=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!ft(t[0].attributes.value)?ft(t[0].value)||t[0].value===""?Q1:{value:t[0].value,isValid:!0}:Q1:K1}return K1};const Y1={isValid:!1,value:null};var qx=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,Y1):Y1;function X1(t,e,n="validate"){if(Hc(t)||Array.isArray(t)&&t.every(Hc)||yr(t)&&!t)return{type:n,message:Hc(t)?t:"",ref:e}}var oo=t=>bt(t)&&!zd(t)?t:{value:t,message:""},J1=async(t,e,n,r,i)=>{const{ref:s,refs:o,required:a,maxLength:u,minLength:c,min:d,max:h,pattern:m,validate:w,name:b,valueAsNumber:P,mount:N,disabled:_}=t._f,v=oe(e,b);if(!N||_)return{};const A=o?o[0]:s,D=T=>{r&&A.reportValidity&&(A.setCustomValidity(yr(T)?"":T||""),A.reportValidity())},M={},V=vv(s),E=Su(s),y=V||E,S=(P||yv(s))&&ft(s.value)&&ft(v)||Bd(s)&&s.value===""||v===""||Array.isArray(v)&&!v.length,k=H6.bind(null,b,n,M),R=(T,I,W,H=Lr.maxLength,de=Lr.minLength)=>{const ge=T?I:W;M[b]={type:T?H:de,message:ge,ref:s,...k(T?H:de,ge)}};if(i?!Array.isArray(v)||!v.length:a&&(!y&&(S||an(v))||yr(v)&&!v||E&&!Hx(o).isValid||V&&!qx(o).isValid)){const{value:T,message:I}=Hc(a)?{value:!!a,message:a}:oo(a);if(T&&(M[b]={type:Lr.required,message:I,ref:A,...k(Lr.required,I)},!n))return D(I),M}if(!S&&(!an(d)||!an(h))){let T,I;const W=oo(h),H=oo(d);if(!an(v)&&!isNaN(v)){const de=s.valueAsNumber||v&&+v;an(W.value)||(T=de>W.value),an(H.value)||(I=de<H.value)}else{const de=s.valueAsDate||new Date(v),ge=K=>new Date(new Date().toDateString()+" "+K),Q=s.type=="time",se=s.type=="week";Tr(W.value)&&v&&(T=Q?ge(v)>ge(W.value):se?v>W.value:de>new Date(W.value)),Tr(H.value)&&v&&(I=Q?ge(v)<ge(H.value):se?v<H.value:de<new Date(H.value))}if((T||I)&&(R(!!T,W.message,H.message,Lr.max,Lr.min),!n))return D(M[b].message),M}if((u||c)&&!S&&(Tr(v)||i&&Array.isArray(v))){const T=oo(u),I=oo(c),W=!an(T.value)&&v.length>+T.value,H=!an(I.value)&&v.length<+I.value;if((W||H)&&(R(W,T.message,I.message),!n))return D(M[b].message),M}if(m&&!S&&Tr(v)){const{value:T,message:I}=oo(m);if(zd(T)&&!v.match(T)&&(M[b]={type:Lr.pattern,message:I,ref:s,...k(Lr.pattern,I)},!n))return D(I),M}if(w){if(Wr(w)){const T=await w(v,e),I=X1(T,A);if(I&&(M[b]={...I,...k(Lr.validate,I.message)},!n))return D(I.message),M}else if(bt(w)){let T={};for(const I in w){if(!mn(T)&&!n)break;const W=X1(await w[I](v,e),A,I);W&&(T={...W,...k(I,W.message)},D(W.message),n&&(M[b]=T))}if(!mn(T)&&(M[b]={ref:A,...T},!n))return M}}return D(!0),M};function G6(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=ft(t)?r++:t[e[r++]];return t}function K6(t){for(const e in t)if(t.hasOwnProperty(e)&&!ft(t[e]))return!1;return!0}function Pt(t,e){const n=Array.isArray(e)?e:gv(e)?[e]:Wx(e),r=n.length===1?t:G6(t,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(bt(r)&&mn(r)||Array.isArray(r)&&K6(r))&&Pt(t,n.slice(0,-1)),t}var hp=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}},Wd=t=>an(t)||!zx(t);function Pi(t,e){if(Wd(t)||Wd(e))return t===e;if(Po(t)&&Po(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){const s=t[i];if(!r.includes(i))return!1;if(i!=="ref"){const o=e[i];if(Po(s)&&Po(o)||bt(s)&&bt(o)||Array.isArray(s)&&Array.isArray(o)?!Pi(s,o):s!==o)return!1}}return!0}var Gx=t=>t.type==="select-multiple",Q6=t=>vv(t)||Su(t),fp=t=>Bd(t)&&t.isConnected,Kx=t=>{for(const e in t)if(Wr(t[e]))return!0;return!1};function Hd(t,e={}){const n=Array.isArray(t);if(bt(t)||n)for(const r in t)Array.isArray(t[r])||bt(t[r])&&!Kx(t[r])?(e[r]=Array.isArray(t[r])?[]:{},Hd(t[r],e[r])):an(t[r])||(e[r]=!0);return e}function Qx(t,e,n){const r=Array.isArray(t);if(bt(t)||r)for(const i in t)Array.isArray(t[i])||bt(t[i])&&!Kx(t[i])?ft(e)||Wd(n[i])?n[i]=Array.isArray(t[i])?Hd(t[i],[]):{...Hd(t[i])}:Qx(t[i],an(e)?{}:e[i],n[i]):n[i]=!Pi(t[i],e[i]);return n}var vc=(t,e)=>Qx(t,e,Hd(e)),Yx=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>ft(t)?t:e?t===""?NaN:t&&+t:n&&Tr(t)?new Date(t):r?r(t):t;function pp(t){const e=t.ref;if(!(t.refs?t.refs.every(n=>n.disabled):e.disabled))return yv(e)?e.files:vv(e)?qx(t.refs).value:Gx(e)?[...e.selectedOptions].map(({value:n})=>n):Su(e)?Hx(t.refs).value:Yx(ft(e.value)?t.ref.value:e.value,t)}var Y6=(t,e,n,r)=>{const i={};for(const s of t){const o=oe(e,s);o&&Qe(i,s,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},za=t=>ft(t)?t:zd(t)?t.source:bt(t)?zd(t.value)?t.value.source:t.value:t;const Z1="AsyncFunction";var X6=t=>(!t||!t.validate)&&!!(Wr(t.validate)&&t.validate.constructor.name===Z1||bt(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===Z1)),J6=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function eE(t,e,n){const r=oe(t,n);if(r||gv(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),o=oe(e,s),a=oe(t,s);if(o&&!Array.isArray(o)&&n!==s)return{name:n};if(a&&a.type)return{name:s,error:a};i.pop()}return{name:n}}var Z6=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,eU=(t,e)=>!Kh(oe(t,e)).length&&Pt(t,e);const tU={mode:rr.onSubmit,reValidateMode:rr.onChange,shouldFocusError:!0};function nU(t={}){let e={...tU,...t},n={submitCount:0,isDirty:!1,isLoading:Wr(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=bt(e.defaultValues)||bt(e.values)?Un(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:Un(i),o={action:!1,mount:!1,watch:!1},a={mount:new Set,unMount:new Set,array:new Set,watch:new Set},u,c=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:hp(),array:hp(),state:hp()},m=q1(e.mode),w=q1(e.reValidateMode),b=e.criteriaMode===rr.all,P=L=>U=>{clearTimeout(c),c=setTimeout(L,U)},N=async L=>{if(d.isValid||L){const U=e.resolver?mn((await y()).errors):await k(r,!0);U!==n.isValid&&h.state.next({isValid:U})}},_=(L,U)=>{(d.isValidating||d.validatingFields)&&((L||Array.from(a.mount)).forEach(j=>{j&&(U?Qe(n.validatingFields,j,U):Pt(n.validatingFields,j))}),h.state.next({validatingFields:n.validatingFields,isValidating:!mn(n.validatingFields)}))},v=(L,U=[],j,ee,X=!0,G=!0)=>{if(ee&&j){if(o.action=!0,G&&Array.isArray(oe(r,L))){const ue=j(oe(r,L),ee.argA,ee.argB);X&&Qe(r,L,ue)}if(G&&Array.isArray(oe(n.errors,L))){const ue=j(oe(n.errors,L),ee.argA,ee.argB);X&&Qe(n.errors,L,ue),eU(n.errors,L)}if(d.touchedFields&&G&&Array.isArray(oe(n.touchedFields,L))){const ue=j(oe(n.touchedFields,L),ee.argA,ee.argB);X&&Qe(n.touchedFields,L,ue)}d.dirtyFields&&(n.dirtyFields=vc(i,s)),h.state.next({name:L,isDirty:T(L,U),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Qe(s,L,U)},A=(L,U)=>{Qe(n.errors,L,U),h.state.next({errors:n.errors})},D=L=>{n.errors=L,h.state.next({errors:n.errors,isValid:!1})},M=(L,U,j,ee)=>{const X=oe(r,L);if(X){const G=oe(s,L,ft(j)?oe(i,L):j);ft(G)||ee&&ee.defaultChecked||U?Qe(s,L,U?G:pp(X._f)):H(L,G),o.mount&&N()}},V=(L,U,j,ee,X)=>{let G=!1,ue=!1;const ke={name:L},lt=!!(oe(r,L)&&oe(r,L)._f&&oe(r,L)._f.disabled);if(!j||ee){d.isDirty&&(ue=n.isDirty,n.isDirty=ke.isDirty=T(),G=ue!==ke.isDirty);const xe=lt||Pi(oe(i,L),U);ue=!!(!lt&&oe(n.dirtyFields,L)),xe||lt?Pt(n.dirtyFields,L):Qe(n.dirtyFields,L,!0),ke.dirtyFields=n.dirtyFields,G=G||d.dirtyFields&&ue!==!xe}if(j){const xe=oe(n.touchedFields,L);xe||(Qe(n.touchedFields,L,j),ke.touchedFields=n.touchedFields,G=G||d.touchedFields&&xe!==j)}return G&&X&&h.state.next(ke),G?ke:{}},E=(L,U,j,ee)=>{const X=oe(n.errors,L),G=d.isValid&&yr(U)&&n.isValid!==U;if(t.delayError&&j?(u=P(()=>A(L,j)),u(t.delayError)):(clearTimeout(c),u=null,j?Qe(n.errors,L,j):Pt(n.errors,L)),(j?!Pi(X,j):X)||!mn(ee)||G){const ue={...ee,...G&&yr(U)?{isValid:U}:{},errors:n.errors,name:L};n={...n,...ue},h.state.next(ue)}},y=async L=>{_(L,!0);const U=await e.resolver(s,e.context,Y6(L||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return _(L),U},S=async L=>{const{errors:U}=await y(L);if(L)for(const j of L){const ee=oe(U,j);ee?Qe(n.errors,j,ee):Pt(n.errors,j)}else n.errors=U;return U},k=async(L,U,j={valid:!0})=>{for(const ee in L){const X=L[ee];if(X){const{_f:G,...ue}=X;if(G){const ke=a.array.has(G.name),lt=X._f&&X6(X._f);lt&&d.validatingFields&&_([ee],!0);const xe=await J1(X,s,b,e.shouldUseNativeValidation&&!U,ke);if(lt&&d.validatingFields&&_([ee]),xe[G.name]&&(j.valid=!1,U))break;!U&&(oe(xe,G.name)?ke?q6(n.errors,xe,G.name):Qe(n.errors,G.name,xe[G.name]):Pt(n.errors,G.name))}!mn(ue)&&await k(ue,U,j)}}return j.valid},R=()=>{for(const L of a.unMount){const U=oe(r,L);U&&(U._f.refs?U._f.refs.every(j=>!fp(j)):!fp(U._f.ref))&&Be(L)}a.unMount=new Set},T=(L,U)=>(L&&U&&Qe(s,L,U),!Pi(ae(),i)),I=(L,U,j)=>W6(L,a,{...o.mount?s:ft(U)?i:Tr(L)?{[L]:U}:U},j,U),W=L=>Kh(oe(o.mount?s:i,L,t.shouldUnregister?oe(i,L,[]):[])),H=(L,U,j={})=>{const ee=oe(r,L);let X=U;if(ee){const G=ee._f;G&&(!G.disabled&&Qe(s,L,Yx(U,G)),X=Bd(G.ref)&&an(U)?"":U,Gx(G.ref)?[...G.ref.options].forEach(ue=>ue.selected=X.includes(ue.value)):G.refs?Su(G.ref)?G.refs.length>1?G.refs.forEach(ue=>(!ue.defaultChecked||!ue.disabled)&&(ue.checked=Array.isArray(X)?!!X.find(ke=>ke===ue.value):X===ue.value)):G.refs[0]&&(G.refs[0].checked=!!X):G.refs.forEach(ue=>ue.checked=ue.value===X):yv(G.ref)?G.ref.value="":(G.ref.value=X,G.ref.type||h.values.next({name:L,values:{...s}})))}(j.shouldDirty||j.shouldTouch)&&V(L,X,j.shouldTouch,j.shouldDirty,!0),j.shouldValidate&&K(L)},de=(L,U,j)=>{for(const ee in U){const X=U[ee],G=`${L}.${ee}`,ue=oe(r,G);(a.array.has(L)||!Wd(X)||ue&&!ue._f)&&!Po(X)?de(G,X,j):H(G,X,j)}},ge=(L,U,j={})=>{const ee=oe(r,L),X=a.array.has(L),G=Un(U);Qe(s,L,G),X?(h.array.next({name:L,values:{...s}}),(d.isDirty||d.dirtyFields)&&j.shouldDirty&&h.state.next({name:L,dirtyFields:vc(i,s),isDirty:T(L,G)})):ee&&!ee._f&&!an(G)?de(L,G,j):H(L,G,j),G1(L,a)&&h.state.next({...n}),h.values.next({name:o.mount?L:void 0,values:{...s}})},Q=async L=>{o.mount=!0;const U=L.target;let j=U.name,ee=!0;const X=oe(r,j),G=()=>U.type?pp(X._f):V6(L),ue=ke=>{ee=Number.isNaN(ke)||Pi(ke,oe(s,j,ke))};if(X){let ke,lt;const xe=G(),et=L.type===H1.BLUR||L.type===H1.FOCUS_OUT,Ys=!J6(X._f)&&!e.resolver&&!oe(n.errors,j)&&!X._f.deps||Z6(et,oe(n.touchedFields,j),n.isSubmitted,w,m),Xs=G1(j,a,et);Qe(s,j,xe),et?(X._f.onBlur&&X._f.onBlur(L),u&&u(0)):X._f.onChange&&X._f.onChange(L);const Js=V(j,xe,et,!1),tf=!mn(Js)||Xs;if(!et&&h.values.next({name:j,type:L.type,values:{...s}}),Ys)return d.isValid&&(t.mode==="onBlur"?et&&N():N()),tf&&h.state.next({name:j,...Xs?{}:Js});if(!et&&Xs&&h.state.next({...n}),e.resolver){const{errors:ui}=await y([j]);if(ue(xe),ee){const Nu=eE(n.errors,r,j),va=eE(ui,r,Nu.name||j);ke=va.error,j=va.name,lt=mn(ui)}}else _([j],!0),ke=(await J1(X,s,b,e.shouldUseNativeValidation))[j],_([j]),ue(xe),ee&&(ke?lt=!1:d.isValid&&(lt=await k(r,!0)));ee&&(X._f.deps&&K(X._f.deps),E(j,lt,ke,Js))}},se=(L,U)=>{if(oe(n.errors,U)&&L.focus)return L.focus(),1},K=async(L,U={})=>{let j,ee;const X=Wc(L);if(e.resolver){const G=await S(ft(L)?L:X);j=mn(G),ee=L?!X.some(ue=>oe(G,ue)):j}else L?(ee=(await Promise.all(X.map(async G=>{const ue=oe(r,G);return await k(ue&&ue._f?{[G]:ue}:ue)}))).every(Boolean),!(!ee&&!n.isValid)&&N()):ee=j=await k(r);return h.state.next({...!Tr(L)||d.isValid&&j!==n.isValid?{}:{name:L},...e.resolver||!L?{isValid:j}:{},errors:n.errors}),U.shouldFocus&&!ee&&Il(r,se,L?X:a.mount),ee},ae=L=>{const U={...o.mount?s:i};return ft(L)?U:Tr(L)?oe(U,L):L.map(j=>oe(U,j))},le=(L,U)=>({invalid:!!oe((U||n).errors,L),isDirty:!!oe((U||n).dirtyFields,L),error:oe((U||n).errors,L),isValidating:!!oe(n.validatingFields,L),isTouched:!!oe((U||n).touchedFields,L)}),fe=L=>{L&&Wc(L).forEach(U=>Pt(n.errors,U)),h.state.next({errors:L?n.errors:{}})},Ee=(L,U,j)=>{const ee=(oe(r,L,{_f:{}})._f||{}).ref,X=oe(n.errors,L)||{},{ref:G,message:ue,type:ke,...lt}=X;Qe(n.errors,L,{...lt,...U,ref:ee}),h.state.next({name:L,errors:n.errors,isValid:!1}),j&&j.shouldFocus&&ee&&ee.focus&&ee.focus()},ye=(L,U)=>Wr(L)?h.values.subscribe({next:j=>L(I(void 0,U),j)}):I(L,U,!0),Be=(L,U={})=>{for(const j of L?Wc(L):a.mount)a.mount.delete(j),a.array.delete(j),U.keepValue||(Pt(r,j),Pt(s,j)),!U.keepError&&Pt(n.errors,j),!U.keepDirty&&Pt(n.dirtyFields,j),!U.keepTouched&&Pt(n.touchedFields,j),!U.keepIsValidating&&Pt(n.validatingFields,j),!e.shouldUnregister&&!U.keepDefaultValue&&Pt(i,j);h.values.next({values:{...s}}),h.state.next({...n,...U.keepDirty?{isDirty:T()}:{}}),!U.keepIsValid&&N()},ve=({disabled:L,name:U,field:j,fields:ee,value:X})=>{if(yr(L)&&o.mount||L){const G=L?void 0:ft(X)?pp(j?j._f:oe(ee,U)._f):X;Qe(s,U,G),V(U,G,!1,!1,!0)}},Je=(L,U={})=>{let j=oe(r,L);const ee=yr(U.disabled)||yr(t.disabled);return Qe(r,L,{...j||{},_f:{...j&&j._f?j._f:{ref:{name:L}},name:L,mount:!0,...U}}),a.mount.add(L),j?ve({field:j,disabled:yr(U.disabled)?U.disabled:t.disabled,name:L,value:U.value}):M(L,!0,U.value),{...ee?{disabled:U.disabled||t.disabled}:{},...e.progressive?{required:!!U.required,min:za(U.min),max:za(U.max),minLength:za(U.minLength),maxLength:za(U.maxLength),pattern:za(U.pattern)}:{},name:L,onChange:Q,onBlur:Q,ref:X=>{if(X){Je(L,U),j=oe(r,L);const G=ft(X.value)&&X.querySelectorAll&&X.querySelectorAll("input,select,textarea")[0]||X,ue=Q6(G),ke=j._f.refs||[];if(ue?ke.find(lt=>lt===G):G===j._f.ref)return;Qe(r,L,{_f:{...j._f,...ue?{refs:[...ke.filter(fp),G,...Array.isArray(oe(i,L))?[{}]:[]],ref:{type:G.type,name:L}}:{ref:G}}}),M(L,!1,void 0,G)}else j=oe(r,L,{}),j._f&&(j._f.mount=!1),(e.shouldUnregister||U.shouldUnregister)&&!(U6(a.array,L)&&o.action)&&a.unMount.add(L)}}},Ve=()=>e.shouldFocusError&&Il(r,se,a.mount),It=L=>{yr(L)&&(h.state.next({disabled:L}),Il(r,(U,j)=>{const ee=oe(r,j);ee&&(U.disabled=ee._f.disabled||L,Array.isArray(ee._f.refs)&&ee._f.refs.forEach(X=>{X.disabled=ee._f.disabled||L}))},0,!1))},Fn=(L,U)=>async j=>{let ee;j&&(j.preventDefault&&j.preventDefault(),j.persist&&j.persist());let X=Un(s);if(h.state.next({isSubmitting:!0}),e.resolver){const{errors:G,values:ue}=await y();n.errors=G,X=ue}else await k(r);if(Pt(n.errors,"root"),mn(n.errors)){h.state.next({errors:{}});try{await L(X,j)}catch(G){ee=G}}else U&&await U({...n.errors},j),Ve(),setTimeout(Ve);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:mn(n.errors)&&!ee,submitCount:n.submitCount+1,errors:n.errors}),ee)throw ee},li=(L,U={})=>{oe(r,L)&&(ft(U.defaultValue)?ge(L,Un(oe(i,L))):(ge(L,U.defaultValue),Qe(i,L,Un(U.defaultValue))),U.keepTouched||Pt(n.touchedFields,L),U.keepDirty||(Pt(n.dirtyFields,L),n.isDirty=U.defaultValue?T(L,Un(oe(i,L))):T()),U.keepError||(Pt(n.errors,L),d.isValid&&N()),h.state.next({...n}))},Rr=(L,U={})=>{const j=L?Un(L):i,ee=Un(j),X=mn(L),G=X?i:ee;if(U.keepDefaultValues||(i=j),!U.keepValues){if(U.keepDirtyValues)for(const ue of a.mount)oe(n.dirtyFields,ue)?Qe(G,ue,oe(s,ue)):ge(ue,oe(G,ue));else{if(mv&&ft(L))for(const ue of a.mount){const ke=oe(r,ue);if(ke&&ke._f){const lt=Array.isArray(ke._f.refs)?ke._f.refs[0]:ke._f.ref;if(Bd(lt)){const xe=lt.closest("form");if(xe){xe.reset();break}}}}r={}}s=t.shouldUnregister?U.keepDefaultValues?Un(i):{}:Un(G),h.array.next({values:{...G}}),h.values.next({values:{...G}})}a={mount:U.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!U.keepIsValid||!!U.keepDirtyValues,o.watch=!!t.shouldUnregister,h.state.next({submitCount:U.keepSubmitCount?n.submitCount:0,isDirty:X?!1:U.keepDirty?n.isDirty:!!(U.keepDefaultValues&&!Pi(L,i)),isSubmitted:U.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:X?{}:U.keepDirtyValues?U.keepDefaultValues&&s?vc(i,s):n.dirtyFields:U.keepDefaultValues&&L?vc(i,L):U.keepDirty?n.dirtyFields:{},touchedFields:U.keepTouched?n.touchedFields:{},errors:U.keepErrors?n.errors:{},isSubmitSuccessful:U.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},dr=(L,U)=>Rr(Wr(L)?L(s):L,U);return{control:{register:Je,unregister:Be,getFieldState:le,handleSubmit:Fn,setError:Ee,_executeSchema:y,_getWatch:I,_getDirty:T,_updateValid:N,_removeUnmounted:R,_updateFieldArray:v,_updateDisabledField:ve,_getFieldArray:W,_reset:Rr,_resetDefaultValues:()=>Wr(e.defaultValues)&&e.defaultValues().then(L=>{dr(L,e.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:L=>{n={...n,...L}},_disableForm:It,_subjects:h,_proxyFormState:d,_setErrors:D,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(L){o=L},get _defaultValues(){return i},get _names(){return a},set _names(L){a=L},get _formState(){return n},set _formState(L){n=L},get _options(){return e},set _options(L){e={...e,...L}}},trigger:K,register:Je,handleSubmit:Fn,watch:ye,setValue:ge,getValues:ae,reset:dr,resetField:li,clearErrors:fe,unregister:Be,setError:Ee,setFocus:(L,U={})=>{const j=oe(r,L),ee=j&&j._f;if(ee){const X=ee.refs?ee.refs[0]:ee.ref;X.focus&&(X.focus(),U.shouldSelect&&X.select())}},getFieldState:le}}function Cu(t={}){const e=Te.useRef(),n=Te.useRef(),[r,i]=Te.useState({isDirty:!1,isValidating:!1,isLoading:Wr(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Wr(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...nU(t),formState:r});const s=e.current.control;return s._options=t,z6({subject:s._subjects.state,next:o=>{B6(o,s._proxyFormState,s._updateFormState,!0)&&i({...s._formState})}}),Te.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),Te.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==r.isDirty&&s._subjects.state.next({isDirty:o})}},[s,r.isDirty]),Te.useEffect(()=>{t.values&&!Pi(t.values,n.current)?(s._reset(t.values,s._options.resetOptions),n.current=t.values,i(o=>({...o}))):s._resetDefaultValues()},[t.values,s]),Te.useEffect(()=>{t.errors&&s._setErrors(t.errors)},[t.errors,s]),Te.useEffect(()=>{s._state.mount||(s._updateValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),Te.useEffect(()=>{t.shouldUnregister&&s._subjects.values.next({values:s._getWatch()})},[t.shouldUnregister,s]),e.current.formState=j6(r,s),e.current}const rU=[{id:"post-treatment",name:"Post-Treatment"},{id:"appointment-reminder",name:"Appointment Reminder"},{id:"satisfaction-survey",name:"Satisfaction Survey"},{id:"treatment-decision",name:"Treatment Decision"},{id:"payment-reminder",name:"Payment Reminder"}],iU=({followUp:t,onSave:e,onCancel:n})=>{const{register:r,handleSubmit:i,formState:{errors:s}}=Cu({defaultValues:{type:t.type,scheduledDate:Vt(t.scheduledDate,"yyyy-MM-dd"),scheduledTime:t.scheduledTime||"",notes:t.notes,priority:t.priority,sendReminder:t.sendReminder}});return x("form",{onSubmit:i(a=>{e(a)}),className:"space-y-4",children:[x("div",{children:[x("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[p(Gi,{className:"w-4 h-4 mr-2 text-blue-500"}),"Follow-up Type *"]}),x("select",{id:"type",...r("type",{required:"Please select a follow-up type"}),className:`w-full px-3 py-2 border rounded-lg ${s.type?"border-red-500":"border-gray-300"}`,children:[p("option",{value:"",children:"Choose type..."}),rU.map(a=>p("option",{value:a.id,children:a.name},a.id))]}),s.type&&p("p",{className:"text-red-500 text-sm mt-1",children:s.type.message})]}),x("div",{children:[x("label",{htmlFor:"scheduledDate",className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[p(lu,{className:"w-4 h-4 mr-2 text-blue-500"}),"Scheduled Date *"]}),p("input",{id:"scheduledDate",type:"date",...r("scheduledDate",{required:"Please select a date"}),className:`w-full px-3 py-2 border rounded-lg ${s.scheduledDate?"border-red-500":"border-gray-300"}`,min:Vt(new Date,"yyyy-MM-dd")}),s.scheduledDate&&p("p",{className:"text-red-500 text-sm mt-1",children:s.scheduledDate.message})]}),x("div",{children:[p("label",{htmlFor:"scheduledTime",className:"block text-sm font-medium text-gray-700 mb-1",children:"Preferred Time"}),x("select",{id:"scheduledTime",...r("scheduledTime"),className:"w-full px-3 py-2 border rounded-lg border-gray-300",children:[p("option",{value:"",children:"Any time"}),p("option",{value:"morning",children:"Morning (9:00 AM - 12:00 PM)"}),p("option",{value:"afternoon",children:"Afternoon (12:00 PM - 5:00 PM)"}),p("option",{value:"evening",children:"Evening (5:00 PM - 8:00 PM)"})]})]}),x("div",{children:[x("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[p(Jg,{className:"w-4 h-4 mr-2 text-blue-500"}),"Notes *"]}),p("textarea",{id:"notes",...r("notes",{required:"Please provide notes",minLength:{value:10,message:"Notes must be at least 10 characters"}}),rows:4,className:`w-full px-3 py-2 border rounded-lg resize-none ${s.notes?"border-red-500":"border-gray-300"}`}),s.notes&&p("p",{className:"text-red-500 text-sm mt-1",children:s.notes.message})]}),x("div",{children:[p("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),x("select",{id:"priority",...r("priority"),className:"w-full px-3 py-2 border rounded-lg border-gray-300",children:[p("option",{value:"normal",children:"Normal"}),p("option",{value:"high",children:"High"}),p("option",{value:"urgent",children:"Urgent"})]})]}),x("div",{className:"flex items-center space-x-2",children:[p("input",{id:"sendReminder",type:"checkbox",...r("sendReminder"),className:"w-4 h-4 text-blue-500 border-gray-300 rounded focus:ring-blue-500"}),p("label",{htmlFor:"sendReminder",className:"text-sm font-medium text-gray-700",children:"Send automatic reminder"})]}),x("div",{className:"flex space-x-2",children:[x("button",{type:"button",onClick:n,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:[p(ey,{className:"w-4 h-4 mr-2 inline"}),"Cancel"]}),x("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:[p(uu,{className:"w-4 h-4 mr-2 inline"}),"Save"]})]})]})},Xx=({followUp:t,onUpdate:e,onDelete:n})=>{const r=xn(),{currentUser:i}=Sn(),{showError:s}=Vn(),{refreshNotifications:o}=qh(),[a,u]=O.useState(!1),[c,d]=O.useState(null),h=P=>{switch(P){case"completed":return p(Xg,{className:"w-5 h-5 text-green-600"});case"overdue":return p(Nb,{className:"w-5 h-5 text-red-600"});default:return p(EN,{className:"w-5 h-5 text-yellow-600"})}},m=P=>({"post-treatment":"bg-blue-100 text-blue-800","appointment-reminder":"bg-green-100 text-green-800","satisfaction-survey":"bg-purple-100 text-purple-800","treatment-decision":"bg-orange-100 text-orange-800","payment-reminder":"bg-red-100 text-red-800"})[P]||"bg-gray-100 text-gray-800",w=()=>{if(!(i!=null&&i.uid)){console.error("FollowUpCard: Cannot delete follow-up: missing currentUser or uid"),s("Cannot delete follow-up: please log in again"),d(null);return}n(t.id),o(),d(null)},b=()=>{e(t.id,{status:"completed",completedAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),o()};return x("div",{className:"card cursor-pointer hover:shadow-md transition-shadow",onClick:()=>!a&&r(`/patients/${t.patientId}`),children:[a?p(iU,{followUp:t,onSave:P=>{e(t.id,P),u(!1)},onCancel:()=>u(!1)}):x("div",{className:"space-y-3",children:[x("div",{className:"flex items-start justify-between mb-3",children:[x("div",{className:"flex items-center space-x-3",children:[h(t.status),x("div",{children:[p("h3",{className:"font-semibold text-gray-900",children:t.patientName||"Unknown"}),p("p",{className:"text-sm text-gray-600",children:t.patientPhone||"N/A"})]})]}),p("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${m(t.type)}`,children:t.type.replace("-"," ")})]}),x("div",{className:"mb-3",children:[p("p",{className:"text-gray-900 mb-1",children:t.notes}),x("div",{className:"flex items-center justify-between text-sm",children:[x("span",{className:"text-gray-500",children:["Scheduled: ",Vt(t.scheduledDate)]}),p("span",{className:`capitalize status-${t.status}`,children:t.status})]})]}),x("div",{className:"flex space-x-2",children:[p("button",{onClick:P=>{P.stopPropagation(),u(!0)},className:"p-2 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors",title:"Edit Follow-up",children:p(Zg,{className:"w-5 h-5 text-gray-600"})}),p("button",{onClick:P=>{P.stopPropagation(),d(t.id)},className:"p-2 rounded-lg bg-red-50 hover:bg-red-100 text-red-600 transition-colors",title:"Delete Follow-up",children:p(hl,{className:"w-5 h-5"})}),t.status!=="completed"&&x(Rn,{children:[p("button",{className:"flex-1 py-2 px-3 bg-green-100 text-green-700 rounded-lg text-sm font-medium hover:bg-green-200 transition-colors",onClick:P=>{P.stopPropagation(),b()},children:"Mark Complete"}),x("button",{className:"flex-1 py-2 px-3 bg-blue-100 text-blue-700 rounded-lg text-sm font-medium hover:bg-blue-200 transition-colors",onClick:P=>{P.stopPropagation(),window.open(`tel:${t.patientPhone||""}`)},children:[p(ph,{className:"w-4 h-4 mr-1 inline"}),"Call"]})]})]})]}),c&&p("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:x("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg p-6 max-w-md w-full border border-gray-200 dark:border-slate-700",children:[x("div",{className:"flex items-center space-x-3 mb-4",children:[p(hl,{className:"w-8 h-8 text-red-500 flex-shrink-0"}),x("div",{children:[p("p",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"Delete Follow-up?"}),p("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"This action cannot be undone. The follow-up record will be permanently removed."})]})]}),x("div",{className:"flex justify-end space-x-3",children:[p("button",{className:"px-4 py-2 bg-gray-200 text-gray-700 dark:bg-slate-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-slate-600 transition-colors text-sm font-medium",onClick:()=>d(null),children:"Cancel"}),p("button",{className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm font-medium flex items-center",onClick:w,children:"Delete"})]})]})})]})},sU=()=>{var R;const{id:t}=Yg(),e=xn(),{currentUser:n}=Sn(),{showSuccess:r,showError:i}=Vn(),s=10,[o,a]=O.useState({activeTab:"overview",patient:null,treatments:[],followUps:[],isDeleting:!1,showDeleteModal:!1,deletingTreatmentId:null,loading:!0,error:null,treatmentsPage:1,followUpsPage:1}),u=O.useCallback(async()=>{if(!t){i("Invalid patient ID"),a(T=>({...T,error:"Invalid patient ID",loading:!1})),e("/patients");return}if(!n){i("You must be logged in to view patient details"),a(T=>({...T,error:"Authentication required",loading:!1})),e("/patients");return}try{const[T,I,W]=await Promise.all([lr.getById(t),nl.getByPatient(t,n.uid),En.getByPatient(t,n.uid)]);if(T.error||!T.patient){i(T.error||"Patient not found"),a(H=>({...H,error:T.error||"Patient not found",loading:!1})),e("/patients");return}if(T.patient.userId!==n.uid){i("Unauthorized: you cannot view this patient"),a(H=>({...H,error:"Unauthorized access",loading:!1})),e("/patients");return}a(H=>({...H,patient:T.patient,treatments:I.error?[]:(I.treatments||[]).sort((de,ge)=>new Date(ge.date).getTime()-new Date(de.date).getTime()),followUps:W.error?[]:(W.followUps||[]).sort((de,ge)=>new Date(ge.scheduledDate).getTime()-new Date(de.scheduledDate).getTime()),loading:!1,error:I.error||W.error||null,treatmentsPage:1,followUpsPage:1})),I.error&&i(`Error fetching treatments: ${I.error}`),W.error&&i(`Error fetching follow-ups: ${W.error}`)}catch(T){const I=T.message.includes("permission-denied")?"Permission denied: check Firestore rules":`Unexpected error fetching patient: ${T.message}`;i(I),a(W=>({...W,error:I,loading:!1})),e("/patients")}},[t,n,e,i]);O.useEffect(()=>{u()},[u]);const c=()=>{if(!n||!t||!o.patient){i("Cannot delete: missing user, ID, or patient data");return}a(T=>({...T,showDeleteModal:!0,deletingTreatmentId:null}))},d=async()=>{if(!n||!t||!o.patient){i("Cannot delete: missing user, ID, or patient data"),a(T=>({...T,showDeleteModal:!1,deletingTreatmentId:null}));return}if(o.deletingTreatmentId){a(T=>({...T,isDeleting:!0}));try{const{error:T}=await nl.delete(o.deletingTreatmentId,n.uid);if(T){i(`Failed to delete treatment: ${T}`),a(I=>({...I,isDeleting:!1,showDeleteModal:!1,deletingTreatmentId:null}));return}a(I=>({...I,treatments:I.treatments.filter(W=>W.id!==o.deletingTreatmentId),isDeleting:!1,showDeleteModal:!1,deletingTreatmentId:null})),r("Treatment deleted successfully!")}catch(T){const I=T.message.includes("permission-denied")?"Insufficient permissions: please check your access rights":`Unexpected error deleting treatment: ${T.message}`;i(I),a(W=>({...W,isDeleting:!1,showDeleteModal:!1,deletingTreatmentId:null}))}}else{a(T=>({...T,isDeleting:!0}));try{const{error:T}=await En.deleteByPatientId(t,n.uid);if(T){i(`Failed to delete follow-ups: ${T}`),a(H=>({...H,isDeleting:!1,showDeleteModal:!1}));return}const{error:I}=await nl.deleteByPatientId(t,n.uid);if(I){i(`Failed to delete treatments: ${I}`),a(H=>({...H,isDeleting:!1,showDeleteModal:!1}));return}const{error:W}=await lr.delete(t,n.uid);if(W){i(`Failed to delete patient: ${W}`),a(H=>({...H,isDeleting:!1,showDeleteModal:!1}));return}r("Patient deleted successfully!"),e("/patients",{replace:!0})}catch(T){const I=T.message.includes("permission-denied")?"Permission denied: check Firestore rules":`Unexpected error: ${T.message}`;i(I),a(W=>({...W,isDeleting:!1,showDeleteModal:!1}))}}},h=()=>{var T;if(!((T=o.patient)!=null&&T.id)){i("Invalid patient ID");return}e(`/patients/${o.patient.id}/treatments/new`,{state:{patientId:o.patient.id}})},m=async(T,I)=>{if(!n||!o.patient){i("Cannot update treatment: please log in again");return}try{const W=await nl.update(T,I,n.uid);if(W.error){i(`Failed to update treatment: ${W.error}`);return}a(H=>({...H,treatments:H.treatments.map(de=>de.id===T?{...de,...I}:de)})),r("Treatment updated successfully!")}catch(W){const H=W.message.includes("permission-denied")?"Permission denied: check Firestore rules":`Failed to update treatment: ${W.message}`;i(H)}},w=async T=>{if(!(n!=null&&n.uid)){i("Cannot delete treatment: please log in again");return}a(I=>({...I,showDeleteModal:!0,deletingTreatmentId:T}))},b=async(T,I)=>{if(!n||!o.patient){i("Cannot update follow-up: please log in again");return}try{const W=await En.update(T,I,n.uid);if(W.error){i(`Failed to update follow-up: ${W.error}`);return}a(H=>({...H,followUps:H.followUps.map(de=>de.id===T?{...de,...I}:de)})),r("Follow-up updated successfully!")}catch(W){const H=W.message.includes("permission-denied")?"Permission denied: check Firestore rules":`Failed to update follow-up: ${W.message}`;i(H)}},P=async T=>{if(!(n!=null&&n.uid)){i("Cannot delete follow-up: please log in again");return}try{const{error:I}=await En.delete(T,n.uid);if(I){i(`Failed to delete follow-up: ${I}`);return}a(W=>({...W,followUps:W.followUps.filter(H=>H.id!==T)})),r("Follow-up deleted successfully!")}catch(I){const W=I.message.includes("permission-denied")?"Insufficient permissions: please check your access rights":`Unexpected error deleting follow-up: ${I.message}`;i(W)}},N=T=>{a(I=>({...I,treatmentsPage:T}))},_=T=>{a(I=>({...I,followUpsPage:T}))};if(o.loading)return p(Gh,{});if(o.error||!o.patient)return x("div",{className:"text-center py-8",children:[p("p",{className:"text-red-600",children:o.error||"Patient not found"}),p("button",{onClick:()=>e("/patients"),className:"mt-4 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors",children:"Back to Patients"})]});const v=Math.ceil(o.treatments.length/s),A=Math.ceil(o.followUps.length/s),D=o.treatments.slice((o.treatmentsPage-1)*s,o.treatmentsPage*s),M=o.followUps.slice((o.followUpsPage-1)*s,o.followUpsPage*s),V=o.followUps.filter(T=>T.status==="completed"),E=o.followUps.filter(T=>T.status==="pending"),y=o.followUps.filter(T=>T.status==="overdue"),S=({treatment:T})=>{const[I,W]=O.useState(!1);return p("div",{className:"border-b border-gray-100 py-2 last:border-b-0",children:I?p(M6,{treatment:T,onSave:H=>{m(T.id,H),W(!1)},onCancel:()=>W(!1)}):x("div",{className:"flex items-center justify-between",children:[x("div",{children:[p("p",{className:"font-medium text-gray-900",children:T.treatment}),x("p",{className:"text-sm text-gray-600",children:["Date: ",Vt(T.date)]}),T.cost&&x("p",{className:"text-sm text-gray-600",children:["Cost: $",T.cost.toFixed(2)]}),T.notes&&x("p",{className:"text-sm text-gray-600",children:["Notes: ",T.notes]})]}),x("div",{className:"flex space-x-2",children:[p("button",{onClick:H=>{H.stopPropagation(),W(!0)},className:"p-2 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors",children:p(Zg,{className:"w-5 h-5 text-gray-600"})}),p("button",{onClick:H=>{H.stopPropagation(),w(T.id)},className:"p-2 rounded-lg bg-red-50 hover:bg-red-100 text-red-600 transition-colors",children:p(hl,{className:"w-5 h-5"})})]})]})})},k=({id:T,label:I,count:W})=>x("button",{onClick:()=>a(H=>({...H,activeTab:T})),className:`flex-1 py-2 px-4 text-sm font-medium rounded-md transition-colors ${o.activeTab===T?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[I,W!==void 0&&p("span",{className:`ml-2 px-2 py-1 rounded-full text-xs ${o.activeTab===T?"bg-white text-blue-500":"bg-gray-300 text-gray-600"}`,children:W})]});return x("div",{className:"space-y-6",children:[x("div",{className:"flex items-center space-x-4",children:[p("button",{onClick:()=>e("/patients"),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:p(oa,{className:"w-5 h-5 text-gray-600"})}),x("div",{className:"flex-1",children:[p("h2",{className:"text-2xl font-bold text-gray-900",children:o.patient.name}),x("p",{className:"text-gray-600",children:[o.patient.dateOfBirth?R6(o.patient.dateOfBirth):"Age not specified"," years old"]})]}),p("button",{onClick:c,className:"p-2 rounded-lg bg-red-50 hover:bg-red-100 text-red-600 transition-colors",children:p(hl,{className:"w-5 h-5"})})]}),x("div",{className:"bg-white shadow-md rounded-lg p-4",children:[x("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[x("div",{children:[x("div",{className:"flex items-center space-x-2 text-gray-600",children:[p(ph,{className:"w-4 h-4"}),p("span",{children:o.patient.phone})]}),x("div",{className:"flex items-center space-x-2 text-gray-600",children:[p(fh,{className:"w-4 h-4"}),p("span",{children:o.patient.email||"N/A"})]})]}),x("div",{children:[x("div",{className:"flex items-center space-x-2 text-gray-600",children:[p(lu,{className:"w-4 h-4"}),x("span",{children:["Last visit: ",o.patient.lastVisit?Vt(o.patient.lastVisit):"N/A"]})]}),x("div",{className:"flex items-center space-x-2 text-gray-600",children:[p(Ki,{className:"w-4 h-4"}),x("span",{children:["Gender: ",o.patient.gender||"N/A"]})]})]})]}),p("div",{className:"border-t border-gray-100 pt-4",children:p("p",{className:"text-gray-600",children:o.patient.notes||"No notes available"})})]}),x("div",{className:"bg-white shadow-md rounded-lg p-4",children:[p("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Summary"}),x("div",{className:"grid grid-cols-3 gap-4",children:[x("div",{className:"text-center",children:[p("div",{className:"text-2xl font-bold text-yellow-600",children:E.length}),p("div",{className:"text-sm text-gray-600",children:"Pending"})]}),x("div",{className:"text-center",children:[p("div",{className:"text-2xl font-bold text-red-600",children:y.length}),p("div",{className:"text-sm text-gray-600",children:"Overdue"})]}),x("div",{className:"text-center",children:[p("div",{className:"text-2xl font-bold text-green-600",children:V.length}),p("div",{className:"text-sm text-gray-600",children:"Completed"})]})]})]}),x("div",{className:"flex space-x-2 bg-gray-100 p-1 rounded-lg",children:[p(k,{id:"overview",label:"Overview"}),p(k,{id:"followups",label:"Follow-ups",count:o.followUps.length}),p(k,{id:"treatments",label:"Treatments",count:o.treatments.length})]}),o.activeTab==="overview"&&x("div",{className:"space-y-4",children:[x("div",{className:"bg-white shadow-md rounded-lg p-4",children:[p("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),p("div",{className:"space-y-3",children:M.length>0?M.slice(0,3).map(T=>x("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0",children:[x("div",{children:[p("p",{className:"font-medium text-gray-900",children:T.notes}),p("p",{className:"text-sm text-gray-600",children:Vt(T.scheduledDate)})]}),p("span",{className:"capitalize text-sm font-medium text-gray-600",children:T.status})]},T.id)):p("p",{className:"text-gray-600",children:"No recent activity"})})]}),x("div",{className:"bg-white shadow-md rounded-lg p-4",children:[p("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Latest Treatment"}),D.length>0?p(S,{treatment:D[0]}):p("div",{className:"text-center py-4 text-gray-600",children:p("p",{children:"No recent treatment"})})]})]}),o.activeTab==="followups"&&x("div",{className:"space-y-4",children:[x("div",{className:"flex items-center justify-between",children:[p("h3",{className:"text-lg font-semibold text-gray-900",children:"Follow-ups"}),x("button",{onClick:()=>e("/add-followup",{state:{patientId:o.patient.id}}),className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors",children:[p(yd,{className:"w-4 h-4 mr-2 inline"}),"Add Follow-up"]})]}),M.length>0?x("div",{className:"space-y-3",children:[M.map(T=>p(Xx,{followUp:{...T,patientName:o.patient.name,patientPhone:o.patient.phone},onUpdate:b,onDelete:P},T.id)),x("div",{className:"flex justify-between items-center mt-4",children:[x("button",{onClick:()=>_(o.followUpsPage-1),disabled:o.followUpsPage===1,className:`px-4 py-2 rounded-lg flex items-center ${o.followUpsPage===1?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:[p(Vw,{className:"w-4 h-4 mr-2"}),"Previous"]}),x("span",{className:"text-gray-600",children:["Page ",o.followUpsPage," of ",A]}),x("button",{onClick:()=>_(o.followUpsPage+1),disabled:o.followUpsPage===A,className:`px-4 py-2 rounded-lg flex items-center ${o.followUpsPage===A?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:["Next",p(Fw,{className:"w-4 h-4 ml-2"})]})]})]}):x("div",{className:"text-center py-8 text-gray-600",children:[p(Gi,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),p("p",{children:"No follow-ups scheduled"})]})]}),o.activeTab==="treatments"&&x("div",{className:"space-y-4",children:[x("div",{className:"flex items-center justify-between",children:[p("h3",{className:"text-lg font-semibold text-gray-900",children:"Treatment History"}),x("button",{onClick:h,className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors",children:[p(yd,{className:"w-4 h-4 mr-2 inline"}),"Add Treatment"]})]}),D.length>0?x("div",{className:"space-y-3",children:[D.map(T=>p(S,{treatment:T},T.id)),x("div",{className:"flex justify-between items-center mt-4",children:[x("button",{onClick:()=>N(o.treatmentsPage-1),disabled:o.treatmentsPage===1,className:`px-4 py-2 rounded-lg flex items-center ${o.treatmentsPage===1?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:[p(Vw,{className:"w-4 h-4 mr-2"}),"Previous"]}),x("span",{className:"text-gray-600",children:["Page ",o.treatmentsPage," of ",v]}),x("button",{onClick:()=>N(o.treatmentsPage+1),disabled:o.treatmentsPage===v,className:`px-4 py-2 rounded-lg flex items-center ${o.treatmentsPage===v?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:["Next",p(Fw,{className:"w-4 h-4 ml-2"})]})]})]}):x("div",{className:"text-center py-8 text-gray-600",children:[p(Jg,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),p("p",{children:"No treatment history available"})]})]}),o.showDeleteModal&&p("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:x("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg p-6 max-w-md w-full border border-gray-200 dark:border-slate-700",children:[x("div",{className:"flex items-center space-x-3 mb-4",children:[p(hl,{className:"w-8 h-8 text-red-500 flex-shrink-0"}),p("div",{children:o.deletingTreatmentId?x(Rn,{children:[x("p",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:["Delete ",((R=o.treatments.find(T=>T.id===o.deletingTreatmentId))==null?void 0:R.treatment)||"Treatment","?"]}),p("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"This action cannot be undone. The treatment will be permanently removed."})]}):x(Rn,{children:[x("p",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:["Delete ",o.patient.name,"?"]}),p("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"This action cannot be undone. All associated data will be permanently removed."})]})})]}),x("div",{className:"flex justify-end space-x-3",children:[p("button",{className:"px-4 py-2 bg-gray-200 text-gray-700 dark:bg-slate-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-slate-600 transition-colors text-sm font-medium",onClick:()=>a(T=>({...T,showDeleteModal:!1,deletingTreatmentId:null})),disabled:o.isDeleting,children:"Cancel"}),p("button",{className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm font-medium flex items-center",onClick:d,disabled:o.isDeleting,children:o.isDeleting?x(Rn,{children:[x("svg",{className:"animate-spin h-4 w-4 mr-2",viewBox:"0 0 24 24",children:[p("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Deleting..."]}):"Delete"})]})]})})]})},mp=10,oU=()=>{xn();const{currentUser:t}=Sn(),{showError:e,showSuccess:n}=Vn(),{refreshNotifications:r}=qh(),[i,s]=O.useState("all"),[o,a]=O.useState(""),[u,c]=O.useState([]),[d,h]=O.useState([]),[m,w]=O.useState(!0),[b,P]=O.useState(1);O.useEffect(()=>{if(!(t!=null&&t.uid)){e("You must be logged in to view follow-ups"),w(!1);return}(async()=>{try{const{followUps:T,error:I}=await En.getAll(t.uid);I?e(I):c(T);const{patients:W,error:H}=await lr.getAll(t.uid);H?e(H):h(W),w(!1)}catch(T){e(T.message),w(!1)}})()},[t,e]);const N=async(R,T)=>{if(!(t!=null&&t.uid)){e("Cannot update follow-up: please log in again");return}try{const I=await En.update(R,T,t.uid);if(I.error){e(`Failed to update follow-up: ${I.error}`);return}c(W=>W.map(H=>H.id===R?{...H,...T}:H)),n("Follow-up updated successfully!"),r()}catch(I){const W=I.message.includes("permission-denied")?"You do not have permission to update this follow-up. Please contact support.":`Failed to update follow-up: ${I.message}`;e(W)}},_=async R=>{if(!(t!=null&&t.uid)){e("Cannot delete follow-up: please log in again");return}try{const{error:T}=await En.delete(R,t.uid);if(T){e(`Failed to delete follow-up: ${T}`);return}c(I=>I.filter(W=>W.id!==R)),n("Follow-up deleted successfully!"),r()}catch(T){const I=T.message.includes("permission-denied")?"Permission denied: check Firestore rules":`Unexpected error deleting follow-up: ${T.message}`;e(I)}},A=u.map(R=>{const T=d.find(I=>I.id===R.patientId);return{...R,patientName:(T==null?void 0:T.name)||"Unknown",patientPhone:(T==null?void 0:T.phone)||"N/A"}}).filter(R=>{if(!(R.patientName.toLowerCase().includes(o.toLowerCase())||R.notes.toLowerCase().includes(o.toLowerCase())))return!1;switch(i){case"pending":return R.status==="pending";case"overdue":return R.status==="overdue";case"completed":return R.status==="completed";case"today":return Vt(R.scheduledDate)===Vt(new Date);default:return!0}}).sort((R,T)=>{const I={overdue:0,pending:1,completed:2},W=I[R.status],H=I[T.status];return W!==H?W-H:new Date(R.scheduledDate).getTime()-new Date(T.scheduledDate).getTime()}),D=Math.ceil(A.length/mp),M=A.slice((b-1)*mp,b*mp),V=({id:R,label:T,count:I})=>x("button",{onClick:()=>{s(R),P(1)},className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${i===R?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[T,I!==void 0&&p("span",{className:`ml-2 px-2 py-1 rounded-full text-xs ${i===R?"bg-white text-primary":"bg-gray-200 text-gray-600"}`,children:I})]}),E=u.filter(R=>R.status==="pending").length,y=u.filter(R=>R.status==="overdue").length,S=u.filter(R=>R.status==="completed").length,k=u.filter(R=>Vt(R.scheduledDate)===Vt(new Date)).length;return m?p(Gh,{}):x("div",{className:"space-y-6",children:[x("div",{children:[p("h2",{className:"text-2xl font-bold text-gray-900",children:"Follow-ups"}),p("p",{className:"text-gray-600",children:"Manage patient follow-up communications"})]}),x("div",{className:"relative",children:[p(SN,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),p("input",{type:"text",placeholder:"Search follow-ups...",value:o,onChange:R=>{a(R.target.value),P(1)},className:"input-field pl-10"})]}),x("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:[p(V,{id:"all",label:"All",count:u.length}),p(V,{id:"overdue",label:"Overdue",count:y}),p(V,{id:"pending",label:"Pending",count:E}),p(V,{id:"today",label:"Today",count:k}),p(V,{id:"completed",label:"Completed",count:S})]}),x("div",{className:"flex items-center justify-between",children:[x("p",{className:"text-sm text-gray-600",children:[A.length," follow-up",A.length!==1?"s":""," found"]}),i!=="all"&&p("button",{onClick:()=>s("all"),className:"text-sm text-primary font-medium",children:"Clear filters"})]}),p("div",{className:"space-y-4",children:M.length>0?M.map(R=>p(Xx,{followUp:R,onUpdate:N,onDelete:_},`${R.patientId}-${R.id}`)):x("div",{className:"text-center py-8",children:[p(Gi,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),p("p",{className:"text-gray-500 mb-2",children:"No follow-ups found"}),p("p",{className:"text-sm text-gray-400",children:o||i!=="all"?"Try adjusting your search or filters":"Schedule some follow-ups to get started"})]})}),D>1&&x("div",{className:"flex justify-center items-center space-x-2 pt-4",children:[p("button",{onClick:()=>P(R=>Math.max(R-1,1)),disabled:b===1,className:"px-3 py-1 bg-gray-200 rounded disabled:opacity-50",children:"Prev"}),x("span",{className:"text-sm",children:["Page ",b," of ",D]}),p("button",{onClick:()=>P(R=>Math.min(R+1,D)),disabled:b===D,className:"px-3 py-1 bg-gray-200 rounded disabled:opacity-50",children:"Next"})]}),A.length>0&&x("div",{className:"card bg-gray-50",children:[p("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Summary"}),x("div",{className:"grid grid-cols-2 gap-4",children:[x("div",{className:"text-center",children:[p("div",{className:"text-2xl font-bold text-red-600",children:y}),p("div",{className:"text-sm text-gray-600",children:"Overdue"})]}),x("div",{className:"text-center",children:[p("div",{className:"text-2xl font-bold text-yellow-600",children:E}),p("div",{className:"text-sm text-gray-600",children:"Pending"})]})]})]})]})},aU=()=>{const t=xn(),{currentUser:e}=Sn(),{showSuccess:n,showError:r}=Vn(),[i,s]=O.useState(!1),{register:o,handleSubmit:a,formState:{errors:u}}=Cu({defaultValues:{name:"",phone:"",email:"",dateOfBirth:"",gender:"",address:"",city:"",zipCode:"",emergencyContact:"",allergies:"",medications:"",medicalHistory:"",insuranceProvider:"",policyNumber:"",notes:"",nextAppointment:""}});return x("div",{className:"space-y-6",children:[x("div",{className:"flex items-center space-x-4",children:[p("button",{onClick:()=>t(-1),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:p(oa,{className:"w-5 h-5 text-gray-600"})}),x("div",{className:"flex-1",children:[p("h2",{className:"text-2xl font-bold text-gray-900",children:"Add New Patient"}),p("p",{className:"text-gray-600",children:"Register a new patient in your practice"})]})]}),x("form",{onSubmit:a(async d=>{var m,w,b,P,N,_,v,A,D,M,V,E,y,S,k;if(!e){console.error("No current user, cannot add patient. Auth state:",e),r("You must be logged in to add a patient");return}const h={name:d.name.trim(),email:((m=d.email)==null?void 0:m.trim())||null,phone:((w=d.phone)==null?void 0:w.trim())||null,dateOfBirth:((b=d.dateOfBirth)==null?void 0:b.trim())||null,gender:((P=d.gender)==null?void 0:P.trim())||null,address:((N=d.address)==null?void 0:N.trim())||null,city:((_=d.city)==null?void 0:_.trim())||null,zipCode:((v=d.zipCode)==null?void 0:v.trim())||null,emergencyContact:((A=d.emergencyContact)==null?void 0:A.trim())||null,allergies:((D=d.allergies)==null?void 0:D.trim())||null,medications:((M=d.medications)==null?void 0:M.trim())||null,medicalHistory:((V=d.medicalHistory)==null?void 0:V.trim())||null,insuranceProvider:((E=d.insuranceProvider)==null?void 0:E.trim())||null,policyNumber:((y=d.policyNumber)==null?void 0:y.trim())||null,notes:((S=d.notes)==null?void 0:S.trim())||null,nextAppointment:((k=d.nextAppointment)==null?void 0:k.trim())||null};console.log("Submitting patient with userId:",e.uid),console.log("Cleaned form data:",h),s(!0);try{const{id:R,error:T}=await lr.create(h,e.uid);T?(console.error("Patient creation error:",T,{userId:e.uid,data:h}),r(`Failed to add patient: ${T}`)):(console.log("Patient created successfully, id:",R),n("Patient added successfully!"),t("/patients"))}catch(R){console.error("Unexpected error creating patient:",R,{userId:e.uid,data:h}),r(`Unexpected error: ${R.message}`)}finally{s(!1)}}),className:"space-y-6",children:[x("div",{className:"card",children:[x("div",{className:"flex items-center space-x-2 mb-4",children:[p(Ki,{className:"w-5 h-5 text-primary"}),p("h3",{className:"text-lg font-semibold text-gray-900",children:"Personal Information"})]}),x("div",{className:"space-y-4",children:[x("div",{children:[p("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),p("input",{id:"name",type:"text",...o("name",{required:"Full name is required",minLength:{value:2,message:"Name must be at least 2 characters"}}),className:`input-field ${u.name?"border-red-500":""}`,placeholder:"Enter patient's full name"}),u.name&&p("p",{className:"text-red-500 text-sm mt-1",children:u.name.message})]}),x("div",{children:[p("label",{htmlFor:"dateOfBirth",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),p("input",{id:"dateOfBirth",type:"date",...o("dateOfBirth",{validate:d=>{if(!d)return!0;const h=Q3(d,"yyyy-MM-dd",new Date),m=new Date;return m.setHours(0,0,0,0),ZF(h,m)||"Date of birth must be before today"}}),className:`input-field ${u.dateOfBirth?"border-red-500":""}`}),u.dateOfBirth&&p("p",{className:"text-red-500 text-sm mt-1",children:u.dateOfBirth.message})]}),x("div",{children:[p("label",{htmlFor:"gender",className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender"}),x("select",{id:"gender",...o("gender"),className:"input-field",children:[p("option",{value:"",children:"Select gender"}),p("option",{value:"male",children:"Male"}),p("option",{value:"female",children:"Female"}),p("option",{value:"other",children:"Other"}),p("option",{value:"prefer-not-to-say",children:"Prefer not to say"})]})]})]})]}),x("div",{className:"card",children:[x("div",{className:"flex items-center space-x-2 mb-4",children:[p(ph,{className:"w-5 h-5 text-primary"}),p("h3",{className:"text-lg font-semibold text-gray-900",children:"Contact Information"})]}),x("div",{className:"space-y-4",children:[x("div",{children:[p("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),p("input",{id:"phone",type:"tel",...o("phone"),className:`input-field ${u.phone?"border-red-500":""}`,placeholder:"+1 (555) 123-4567"}),u.phone&&p("p",{className:"text-red-500 text-sm mt-1",children:u.phone.message})]}),x("div",{children:[p("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),p("input",{id:"email",type:"email",...o("email",{pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Please enter a valid email address"}}),className:`input-field ${u.email?"border-red-500":""}`,placeholder:"patient@email.com"}),u.email&&p("p",{className:"text-red-500 text-sm mt-1",children:u.email.message})]}),x("div",{children:[p("label",{htmlFor:"emergencyContact",className:"block text-sm font-medium text-gray-700 mb-2",children:"Emergency Contact"}),p("input",{id:"emergencyContact",type:"text",...o("emergencyContact"),className:"input-field",placeholder:"Emergency contact name and phone"})]})]})]}),x("div",{className:"card",children:[x("div",{className:"flex items-center space-x-2 mb-4",children:[p(lu,{className:"w-5 h-5 text-primary"}),p("h3",{className:"text-lg font-semibold text-gray-900",children:"Address Information"})]}),x("div",{className:"space-y-4",children:[x("div",{children:[p("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-2",children:"Street Address"}),p("input",{id:"address",type:"text",...o("address"),className:"input-field",placeholder:"123 Main Street"})]}),x("div",{className:"grid grid-cols-2 gap-4",children:[x("div",{children:[p("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),p("input",{id:"city",type:"text",...o("city"),className:"input-field",placeholder:"City"})]}),x("div",{children:[p("label",{htmlFor:"zipCode",className:"block text-sm font-medium text-gray-700 mb-2",children:"ZIP Code"}),p("input",{id:"zipCode",type:"text",...o("zipCode"),className:"input-field",placeholder:"12345"})]})]})]})]}),x("div",{className:"card",children:[x("div",{className:"flex items-center space-x-2 mb-4",children:[p(fh,{className:"w-5 h-5 text-primary"}),p("h3",{className:"text-lg font-semibold text-gray-900",children:"Medical Information"})]}),x("div",{className:"space-y-4",children:[x("div",{children:[p("label",{htmlFor:"allergies",className:"block text-sm font-medium text-gray-700 mb-2",children:"Allergies"}),p("textarea",{id:"allergies",...o("allergies"),rows:3,className:"input-field resize-none",placeholder:"List any known allergies..."})]}),x("div",{children:[p("label",{htmlFor:"medications",className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Medications"}),p("textarea",{id:"medications",...o("medications"),rows:3,className:"input-field resize-none",placeholder:"List current medications..."})]}),x("div",{children:[p("label",{htmlFor:"medicalHistory",className:"block text-sm font-medium text-gray-700 mb-2",children:"Medical History"}),p("textarea",{id:"medicalHistory",...o("medicalHistory"),rows:4,className:"input-field resize-none",placeholder:"Relevant medical history..."})]})]})]}),x("div",{className:"card",children:[p("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Insurance Information"}),x("div",{className:"space-y-4",children:[x("div",{children:[p("label",{htmlFor:"insuranceProvider",className:"block text-sm font-medium text-gray-700 mb-2",children:"Insurance Provider"}),p("input",{id:"insuranceProvider",type:"text",...o("insuranceProvider"),className:"input-field",placeholder:"Insurance company name"})]}),x("div",{children:[p("label",{htmlFor:"policyNumber",className:"block text-sm font-medium text-gray-700 mb-2",children:"Policy Number"}),p("input",{id:"policyNumber",type:"text",...o("policyNumber"),className:"input-field",placeholder:"Policy/member number"})]})]})]}),x("div",{className:"card",children:[p("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Additional Information"}),x("div",{className:"space-y-4",children:[x("div",{children:[p("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),p("textarea",{id:"notes",...o("notes"),rows:4,className:"input-field resize-none",placeholder:"Any additional notes..."})]}),x("div",{children:[p("label",{htmlFor:"nextAppointment",className:"block text-sm font-medium text-gray-700 mb-2",children:"Next Appointment"}),p("input",{id:"nextAppointment",type:"date",...o("nextAppointment"),className:"input-field"})]})]})]}),x("div",{className:"flex space-x-4",children:[p("button",{type:"button",onClick:()=>t(-1),className:"flex-1 btn-secondary",disabled:i,children:"Cancel"}),p("button",{type:"submit",className:"flex-1 btn-primary",disabled:i,children:i?x("div",{className:"flex items-center justify-center",children:[p("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):x(Rn,{children:[p(uu,{className:"w-4 h-4 mr-2"}),"Save Patient"]})})]})]})]})},lU=()=>{const t=xn(),{id:e}=Yg(),{currentUser:n}=Sn(),{showSuccess:r,showError:i}=Vn(),[s,o]=O.useState(!1),[a,u]=O.useState(!0),{register:c,handleSubmit:d,formState:{errors:h},reset:m}=Cu({defaultValues:{name:"",phone:"",email:"",dateOfBirth:"",gender:"",address:"",city:"",zipCode:"",emergencyContact:"",allergies:"",medications:"",medicalHistory:"",insuranceProvider:"",policyNumber:""}});O.useEffect(()=>{if(!n||!e){console.error("No current user or patient ID",{currentUser:n,id:e}),i("You must be logged in to edit a patient"),u(!1);return}(async()=>{console.log("Fetching patient with id:",e,"userId:",n.uid);try{const{patient:P,error:N}=await lr.getById(e);if(N||!P){console.error("Error fetching patient:",N,{id:e,userId:n.uid}),i(`Failed to load patient: ${N}`),u(!1);return}if(P.userId!==n.uid){console.error("Unauthorized: patient userId does not match",{patientUserId:P.userId,userId:n.uid}),i("Unauthorized: you cannot edit this patient"),u(!1);return}console.log("Fetched patient data:",P),m({name:P.name||"",phone:P.phone||"",email:P.email||"",dateOfBirth:P.dateOfBirth||"",gender:P.gender||"",address:P.address||"",city:P.city||"",zipCode:P.zipCode||"",emergencyContact:P.emergencyContact||"",allergies:P.allergies||"",medications:P.medications||"",medicalHistory:P.medicalHistory||"",insuranceProvider:P.insuranceProvider||"",policyNumber:P.policyNumber||""}),u(!1)}catch(P){console.error("Unexpected error fetching patient:",P,{id:e,userId:n.uid}),i(`Unexpected error: ${P.message}`),u(!1)}})()},[n,e,m,i]);const w=async b=>{if(!n||!e){console.error("No current user or patient ID",{currentUser:n,id:e}),i("You must be logged in to edit a patient");return}console.log("Submitting update for patient id:",e,"userId:",n.uid),console.log("Form data:",b);const P=VI();EI(P,N=>{console.log("Current auth state in onSubmit:",(N==null?void 0:N.uid)||"null")}),o(!0);try{const{error:N}=await lr.update(e,b,n.uid);N?(console.error("Patient update error:",N,{id:e,userId:n.uid,data:b}),i(`Failed to update patient: ${N}`)):(console.log("Patient updated successfully, id:",e),r("Patient updated successfully!"),t("/patients",{replace:!0}))}catch(N){console.error("Unexpected error updating patient:",N,{id:e,userId:n.uid,data:b}),i(`Unexpected error: ${N.message}`)}finally{o(!1)}};return a?p("div",{children:"Loading..."}):x("div",{className:"space-y-6",children:[x("div",{className:"flex items-center space-x-4",children:[p("button",{onClick:()=>t(-1),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:p(oa,{className:"w-5 h-5 text-gray-600"})}),x("div",{className:"flex-1",children:[p("h2",{className:"text-2xl font-bold text-gray-900",children:"Edit Patient"}),p("p",{className:"text-gray-600",children:"Update patient information"})]})]}),x("form",{onSubmit:d(w),className:"space-y-6",children:[x("div",{className:"card",children:[x("div",{className:"flex items-center space-x-2 mb-4",children:[p(Ki,{className:"w-5 h-5 text-primary"}),p("h3",{className:"text-lg font-semibold text-gray-900",children:"Personal Information"})]}),x("div",{className:"space-y-4",children:[x("div",{children:[p("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),p("input",{id:"name",type:"text",...c("name",{required:"Full name is required",minLength:{value:2,message:"Name must be at least 2 characters"}}),className:`input-field ${h.name?"border-red-500":""}`,placeholder:"Enter patient's full name"}),h.name&&p("p",{className:"text-red-500 text-sm mt-1",children:h.name.message})]}),x("div",{children:[p("label",{htmlFor:"dateOfBirth",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth *"}),p("input",{id:"dateOfBirth",type:"date",...c("dateOfBirth",{required:"Date of birth is required"}),className:`input-field ${h.dateOfBirth?"border-red-500":""}`}),h.dateOfBirth&&p("p",{className:"text-red-500 text-sm mt-1",children:h.dateOfBirth.message})]}),x("div",{children:[p("label",{htmlFor:"gender",className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender"}),x("select",{id:"gender",...c("gender"),className:"input-field",children:[p("option",{value:"",children:"Select gender"}),p("option",{value:"male",children:"Male"}),p("option",{value:"female",children:"Female"}),p("option",{value:"other",children:"Other"}),p("option",{value:"prefer-not-to-say",children:"Prefer not to say"})]})]})]})]}),x("div",{className:"card",children:[x("div",{className:"flex items-center space-x-2 mb-4",children:[p(ph,{className:"w-5 h-5 text-primary"}),p("h3",{className:"text-lg font-semibold text-gray-900",children:"Contact Information"})]}),x("div",{className:"space-y-4",children:[x("div",{children:[p("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),p("input",{id:"phone",type:"tel",...c("phone",{required:"Phone number is required",pattern:{value:/^[\+]?[1-9][\d]{0,15}$/,message:"Please enter a valid phone number"}}),className:`input-field ${h.phone?"border-red-500":""}`,placeholder:"+1 (555) 123-4567"}),h.phone&&p("p",{className:"text-red-500 text-sm mt-1",children:h.phone.message})]}),x("div",{children:[p("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),p("input",{id:"email",type:"email",...c("email",{required:"Email address is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Please enter a valid email address"}}),className:`input-field ${h.email?"border-red-500":""}`,placeholder:"patient@email.com"}),h.email&&p("p",{className:"text-red-500 text-sm mt-1",children:h.email.message})]}),x("div",{children:[p("label",{htmlFor:"emergencyContact",className:"block text-sm font-medium text-gray-700 mb-2",children:"Emergency Contact"}),p("input",{id:"emergencyContact",type:"text",...c("emergencyContact"),className:"input-field",placeholder:"Emergency contact name and phone"})]})]})]}),x("div",{className:"card",children:[x("div",{className:"flex items-center space-x-2 mb-4",children:[p(lu,{className:"w-5 h-5 text-primary"}),p("h3",{className:"text-lg font-semibold text-gray-900",children:"Address Information"})]}),x("div",{className:"space-y-4",children:[x("div",{children:[p("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-2",children:"Street Address"}),p("input",{id:"address",type:"text",...c("address"),className:"input-field",placeholder:"123 Main Street"})]}),x("div",{className:"grid grid-cols-2 gap-4",children:[x("div",{children:[p("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),p("input",{id:"city",type:"text",...c("city"),className:"input-field",placeholder:"City"})]}),x("div",{children:[p("label",{htmlFor:"zipCode",className:"block text-sm font-medium text-gray-700 mb-2",children:"ZIP Code"}),p("input",{id:"zipCode",type:"text",...c("zipCode"),className:"input-field",placeholder:"12345"})]})]})]})]}),x("div",{className:"card",children:[x("div",{className:"flex items-center space-x-2 mb-4",children:[p(fh,{className:"w-5 h-5 text-primary"}),p("h3",{className:"text-lg font-semibold text-gray-900",children:"Medical Information"})]}),x("div",{className:"space-y-4",children:[x("div",{children:[p("label",{htmlFor:"allergies",className:"block text-sm font-medium text-gray-700 mb-2",children:"Allergies"}),p("textarea",{id:"allergies",...c("allergies"),rows:3,className:"input-field resize-none",placeholder:"List any known allergies..."})]}),x("div",{children:[p("label",{htmlFor:"medications",className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Medications"}),p("textarea",{id:"medications",...c("medications"),rows:3,className:"input-field resize-none",placeholder:"List current medications..."})]}),x("div",{children:[p("label",{htmlFor:"medicalHistory",className:"block text-sm font-medium text-gray-700 mb-2",children:"Medical History"}),p("textarea",{id:"medicalHistory",...c("medicalHistory"),rows:4,className:"input-field resize-none",placeholder:"Relevant medical history..."})]})]})]}),x("div",{className:"card",children:[p("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Insurance Information"}),x("div",{className:"space-y-4",children:[x("div",{children:[p("label",{htmlFor:"insuranceProvider",className:"block text-sm font-medium text-gray-700 mb-2",children:"Insurance Provider"}),p("input",{id:"insuranceProvider",type:"text",...c("insuranceProvider"),className:"input-field",placeholder:"Insurance company name"})]}),x("div",{children:[p("label",{htmlFor:"policyNumber",className:"block text-sm font-medium text-gray-700 mb-2",children:"Policy Number"}),p("input",{id:"policyNumber",type:"text",...c("policyNumber"),className:"input-field",placeholder:"Policy/member number"})]})]})]}),x("div",{className:"flex space-x-4",children:[p("button",{type:"button",onClick:()=>t(-1),className:"flex-1 btn-secondary",disabled:s,children:"Cancel"}),p("button",{type:"submit",className:"flex-1 btn-primary",disabled:s,children:s?x("div",{className:"flex items-center justify-center",children:[p("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):x(Rn,{children:[p(uu,{className:"w-4 h-4 mr-2"}),"Update Patient"]})})]})]})]})},tE=[{id:"post-treatment",name:"Post-Treatment",description:"Follow-up after treatment",defaultDays:30},{id:"appointment-reminder",name:"Appointment Reminder",description:"Reminder for upcoming appointment",defaultDays:7},{id:"satisfaction-survey",name:"Satisfaction Survey",description:"Patient satisfaction survey",defaultDays:14},{id:"treatment-decision",name:"Treatment Decision",description:"Follow-up for treatment decisions",defaultDays:7},{id:"payment-reminder",name:"Payment Reminder",description:"Reminder for outstanding payments",defaultDays:30}],uU=()=>{var E;const t=xn(),e=hh(),{currentUser:n}=Sn(),{showSuccess:r,showError:i}=Vn(),{refreshNotifications:s}=qh(),[o,a]=O.useState(!1),[u,c]=O.useState([]),[d,h]=O.useState(!0),m=(E=e.state)==null?void 0:E.patientId,{register:w,handleSubmit:b,watch:P,setValue:N,formState:{errors:_}}=Cu({defaultValues:{patientId:m||"",type:"",scheduledDate:"",scheduledTime:"",notes:"",priority:"normal",sendReminder:!1}}),v=P("patientId"),A=P("type");O.useEffect(()=>{if(!n){console.error("No current user, skipping patient fetch"),i("You must be logged in to schedule a follow-up"),h(!1);return}(async()=>{try{console.log("Fetching patients for userId:",n.uid);const{patients:S,error:k}=await lr.getAll(n.uid);k?(console.error("Patient fetch error:",k),i(k)):(console.log("Fetched patients:",S),c(S)),h(!1)}catch(S){console.error("Unexpected error fetching patients:",S),i(S.message),h(!1)}})()},[n,i]);const D=u.find(y=>y.id===v),M=tE.find(y=>y.id===A);O.useEffect(()=>{if(D&&M){const y=D6(D.lastVisit,M);y&&N("scheduledDate",Vt(y,"yyyy-MM-dd"))}},[D,M,N]);const V=async y=>{if(!n){console.error("No current user, cannot schedule follow-up"),i("You must be logged in to schedule a follow-up");return}if(!y.patientId){console.error("No patient selected"),i("Please select a patient");return}a(!0);try{console.log("Submitting follow-up for patientId:",y.patientId,"userId:",n.uid),console.log("Form data:",y);const{id:S,error:k}=await En.create(y,n.uid,y.patientId);k?(console.error("Follow-up creation error:",k,{userId:n.uid,patientId:y.patientId,data:y}),i(`Failed to schedule follow-up: ${k}`)):(console.log("Follow-up created successfully, id:",S),r("Follow-up scheduled successfully!"),s(),t(m?`/patients/${m}`:"/followups"))}catch(S){console.error("Unexpected error creating follow-up:",S,{userId:n.uid,patientId:y.patientId,data:y}),i(`Unexpected error: ${S.message}`)}finally{a(!1)}};return d?p("div",{children:"Loading..."}):x("div",{className:"space-y-6",children:[x("div",{className:"flex items-center space-x-4",children:[p("button",{onClick:()=>t(m?`/patients/${m}`:"/followups"),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:p(oa,{className:"w-5 h-5 text-gray-600"})}),x("div",{className:"flex-1",children:[p("h2",{className:"text-2xl font-bold text-gray-900",children:"Schedule Follow-up"}),p("p",{className:"text-gray-600",children:"Create a new follow-up reminder for a patient"})]})]}),x("form",{onSubmit:b(V),className:"space-y-6",children:[x("div",{className:"card",children:[x("div",{className:"flex items-center space-x-2 mb-4",children:[p(Ki,{className:"w-5 h-5 text-primary"}),p("h3",{className:"text-lg font-semibold text-gray-900",children:"Select Patient"})]}),x("div",{children:[p("label",{htmlFor:"patientId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Patient *"}),x("select",{id:"patientId",...w("patientId",{required:"Please select a patient"}),className:`input-field ${_.patientId?"border-red-500":""}`,disabled:m||o,children:[p("option",{value:"",children:"Choose a patient..."}),u.map(y=>x("option",{value:y.id,children:[y.name," - ",y.phone]},y.id))]}),_.patientId&&p("p",{className:"text-red-500 text-sm mt-1",children:_.patientId.message}),D&&p("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:x("div",{className:"flex items-center space-x-3",children:[p("div",{className:"w-10 h-10 bg-primary rounded-full flex items-center justify-center",children:p(Ki,{className:"w-5 h-5 text-white"})}),x("div",{children:[p("h4",{className:"font-medium text-gray-900",children:D.name}),p("p",{className:"text-sm text-gray-600",children:D.phone}),x("p",{className:"text-sm text-gray-600",children:["Last visit: ",D.lastVisit?Vt(D.lastVisit):"N/A"]})]})]})})]})]}),x("div",{className:"card",children:[x("div",{className:"flex items-center space-x-2 mb-4",children:[p(Gi,{className:"w-5 h-5 text-primary"}),p("h3",{className:"text-lg font-semibold text-gray-900",children:"Follow-up Type"})]}),x("div",{children:[p("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700 mb-2",children:"Type of Follow-up *"}),x("select",{id:"type",...w("type",{required:"Please select a follow-up type"}),className:`input-field ${_.type?"border-red-500":""}`,children:[p("option",{value:"",children:"Choose follow-up type..."}),tE.map(y=>p("option",{value:y.id,children:y.name},y.id))]}),_.type&&p("p",{className:"text-red-500 text-sm mt-1",children:_.type.message}),M&&x("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[p("h4",{className:"font-medium text-gray-900 mb-2",children:M.name}),p("p",{className:"text-sm text-gray-600 mb-2",children:M.description}),x("p",{className:"text-sm text-gray-500",children:["Default timing: ",M.defaultDays," days after last treatment"]})]})]})]}),x("div",{className:"card",children:[x("div",{className:"flex items-center space-x-2 mb-4",children:[p(lu,{className:"w-5 h-5 text-primary"}),p("h3",{className:"text-lg font-semibold text-gray-900",children:"Schedule"})]}),x("div",{className:"space-y-4",children:[x("div",{children:[p("label",{htmlFor:"scheduledDate",className:"block text-sm font-medium text-gray-700 mb-2",children:"Follow-up Date *"}),p("input",{id:"scheduledDate",type:"date",...w("scheduledDate",{required:"Please select a follow-up date"}),className:`input-field ${_.scheduledDate?"border-red-500":""}`,min:Vt(new Date,"yyyy-MM-dd")}),_.scheduledDate&&p("p",{className:"text-red-500 text-sm mt-1",children:_.scheduledDate.message})]}),x("div",{children:[p("label",{htmlFor:"scheduledTime",className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Time"}),x("select",{id:"scheduledTime",...w("scheduledTime"),className:"input-field",children:[p("option",{value:"",children:"Any time"}),p("option",{value:"morning",children:"Morning (9:00 AM - 12:00 PM)"}),p("option",{value:"afternoon",children:"Afternoon (12:00 PM - 5:00 PM)"}),p("option",{value:"evening",children:"Evening (5:00 PM - 8:00 PM)"})]})]})]})]}),x("div",{className:"card",children:[x("div",{className:"flex items-center space-x-2 mb-4",children:[p(Jg,{className:"w-5 h-5 text-primary"}),p("h3",{className:"text-lg font-semibold text-gray-900",children:"Notes & Instructions"})]}),x("div",{className:"space-y-4",children:[x("div",{children:[p("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Follow-up Notes *"}),p("textarea",{id:"notes",...w("notes",{required:"Please provide notes for this follow-up",minLength:{value:10,message:"Notes must be at least 10 characters"}}),rows:4,className:`input-field resize-none ${_.notes?"border-red-500":""}`,placeholder:"Describe what this follow-up is for and any specific instructions..."}),_.notes&&p("p",{className:"text-red-500 text-sm mt-1",children:_.notes.message})]}),x("div",{children:[p("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority Level"}),x("select",{id:"priority",...w("priority"),className:"input-field",children:[p("option",{value:"normal",children:"Normal"}),p("option",{value:"high",children:"High"}),p("option",{value:"urgent",children:"Urgent"})]})]}),x("div",{className:"flex items-center space-x-2",children:[p("input",{id:"sendReminder",type:"checkbox",...w("sendReminder"),className:"w-4 h-4 text-primary bg-gray-100 border-gray-300 rounded focus:ring-primary focus:ring-2"}),p("label",{htmlFor:"sendReminder",className:"text-sm font-medium text-gray-700",children:"Send automatic reminder to patient"})]})]})]}),x("div",{className:"flex space-x-4",children:[p("button",{type:"button",onClick:()=>t(m?`/patients/${m}`:"/followups"),className:"flex-1 btn-secondary",disabled:o,children:"Cancel"}),p("button",{type:"submit",className:"flex-1 btn-primary",disabled:o,children:o?x("div",{className:"flex items-center justify-center",children:[p("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Scheduling..."]}):x(Rn,{children:[p(uu,{className:"w-4 h-4 mr-2"}),"Schedule Follow-up"]})})]})]})]})},Jx=typeof document<"u"?Te.useLayoutEffect:()=>{};var gp;const cU=(gp=Te.useInsertionEffect)!==null&&gp!==void 0?gp:Jx;function dU(t){const e=O.useRef(null);return cU(()=>{e.current=t},[t]),O.useCallback((...n)=>{const r=e.current;return r==null?void 0:r(...n)},[])}const as=t=>{var e;return(e=t==null?void 0:t.ownerDocument)!==null&&e!==void 0?e:document},bs=t=>t&&"window"in t&&t.window===t?t:as(t).defaultView||window;function hU(t){return t!==null&&typeof t=="object"&&"nodeType"in t&&typeof t.nodeType=="number"}function fU(t){return hU(t)&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in t}let pU=!1;function wv(){return pU}function Zx(t,e){if(!wv())return e&&t?t.contains(e):!1;if(!t||!e)return!1;let n=e;for(;n!==null;){if(n===t)return!0;n.tagName==="SLOT"&&n.assignedSlot?n=n.assignedSlot.parentNode:fU(n)?n=n.host:n=n.parentNode}return!1}const Gm=(t=document)=>{var e;if(!wv())return t.activeElement;let n=t.activeElement;for(;n&&"shadowRoot"in n&&(!((e=n.shadowRoot)===null||e===void 0)&&e.activeElement);)n=n.shadowRoot.activeElement;return n};function eS(t){return wv()&&t.target.shadowRoot&&t.composedPath?t.composedPath()[0]:t.target}function mU(t){var e;if(typeof window>"u"||window.navigator==null)return!1;let n=(e=window.navigator.userAgentData)===null||e===void 0?void 0:e.brands;return Array.isArray(n)&&n.some(r=>t.test(r.brand))||t.test(window.navigator.userAgent)}function gU(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function tS(t){let e=null;return()=>(e==null&&(e=t()),e)}const yU=tS(function(){return gU(/^Mac/i)}),vU=tS(function(){return mU(/Android/i)});function nS(){let t=O.useRef(new Map),e=O.useCallback((i,s,o,a)=>{let u=a!=null&&a.once?(...c)=>{t.current.delete(o),o(...c)}:o;t.current.set(o,{type:s,eventTarget:i,fn:u,options:a}),i.addEventListener(s,u,a)},[]),n=O.useCallback((i,s,o,a)=>{var u;let c=((u=t.current.get(o))===null||u===void 0?void 0:u.fn)||o;i.removeEventListener(s,c,a),t.current.delete(o)},[]),r=O.useCallback(()=>{t.current.forEach((i,s)=>{n(i.eventTarget,i.type,s,i.options)})},[n]);return O.useEffect(()=>r,[r]),{addGlobalListener:e,removeGlobalListener:n,removeAllGlobalListeners:r}}function wU(t){return t.mozInputSource===0&&t.isTrusted?!0:vU()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function rS(t){let e=t;return e.nativeEvent=t,e.isDefaultPrevented=()=>e.defaultPrevented,e.isPropagationStopped=()=>e.cancelBubble,e.persist=()=>{},e}function _U(t,e){Object.defineProperty(t,"target",{value:e}),Object.defineProperty(t,"currentTarget",{value:e})}function iS(t){let e=O.useRef({isFocused:!1,observer:null});Jx(()=>{const r=e.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let n=dU(r=>{t==null||t(r)});return O.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){e.current.isFocused=!0;let i=r.target,s=o=>{if(e.current.isFocused=!1,i.disabled){let a=rS(o);n(a)}e.current.observer&&(e.current.observer.disconnect(),e.current.observer=null)};i.addEventListener("focusout",s,{once:!0}),e.current.observer=new MutationObserver(()=>{if(e.current.isFocused&&i.disabled){var o;(o=e.current.observer)===null||o===void 0||o.disconnect();let a=i===document.activeElement?null:document.activeElement;i.dispatchEvent(new FocusEvent("blur",{relatedTarget:a})),i.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:a}))}}),e.current.observer.observe(i,{attributes:!0,attributeFilter:["disabled"]})}},[n])}let EU=!1,ku=null,Km=new Set,Pl=new Map,Bs=!1,Qm=!1;const TU={Tab:!0,Escape:!0};function _v(t,e){for(let n of Km)n(t,e)}function bU(t){return!(t.metaKey||!yU()&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function qd(t){Bs=!0,bU(t)&&(ku="keyboard",_v("keyboard",t))}function Fo(t){ku="pointer",(t.type==="mousedown"||t.type==="pointerdown")&&(Bs=!0,_v("pointer",t))}function sS(t){wU(t)&&(Bs=!0,ku="virtual")}function oS(t){t.target===window||t.target===document||EU||!t.isTrusted||(!Bs&&!Qm&&(ku="virtual",_v("virtual",t)),Bs=!1,Qm=!1)}function aS(){Bs=!1,Qm=!0}function Ym(t){if(typeof window>"u"||typeof document>"u"||Pl.get(bs(t)))return;const e=bs(t),n=as(t);let r=e.HTMLElement.prototype.focus;e.HTMLElement.prototype.focus=function(){Bs=!0,r.apply(this,arguments)},n.addEventListener("keydown",qd,!0),n.addEventListener("keyup",qd,!0),n.addEventListener("click",sS,!0),e.addEventListener("focus",oS,!0),e.addEventListener("blur",aS,!1),typeof PointerEvent<"u"&&(n.addEventListener("pointerdown",Fo,!0),n.addEventListener("pointermove",Fo,!0),n.addEventListener("pointerup",Fo,!0)),e.addEventListener("beforeunload",()=>{lS(t)},{once:!0}),Pl.set(e,{focus:r})}const lS=(t,e)=>{const n=bs(t),r=as(t);e&&r.removeEventListener("DOMContentLoaded",e),Pl.has(n)&&(n.HTMLElement.prototype.focus=Pl.get(n).focus,r.removeEventListener("keydown",qd,!0),r.removeEventListener("keyup",qd,!0),r.removeEventListener("click",sS,!0),n.removeEventListener("focus",oS,!0),n.removeEventListener("blur",aS,!1),typeof PointerEvent<"u"&&(r.removeEventListener("pointerdown",Fo,!0),r.removeEventListener("pointermove",Fo,!0),r.removeEventListener("pointerup",Fo,!0)),Pl.delete(n))};function IU(t){const e=as(t);let n;return e.readyState!=="loading"?Ym(t):(n=()=>{Ym(t)},e.addEventListener("DOMContentLoaded",n)),()=>lS(t,n)}typeof document<"u"&&IU();function uS(){return ku!=="pointer"}const PU=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function xU(t,e,n){let r=as(n==null?void 0:n.target);const i=typeof window<"u"?bs(n==null?void 0:n.target).HTMLInputElement:HTMLInputElement,s=typeof window<"u"?bs(n==null?void 0:n.target).HTMLTextAreaElement:HTMLTextAreaElement,o=typeof window<"u"?bs(n==null?void 0:n.target).HTMLElement:HTMLElement,a=typeof window<"u"?bs(n==null?void 0:n.target).KeyboardEvent:KeyboardEvent;return t=t||r.activeElement instanceof i&&!PU.has(r.activeElement.type)||r.activeElement instanceof s||r.activeElement instanceof o&&r.activeElement.isContentEditable,!(t&&e==="keyboard"&&n instanceof a&&!TU[n.key])}function SU(t,e,n){Ym(),O.useEffect(()=>{let r=(i,s)=>{xU(!!(n!=null&&n.isTextInput),i,s)&&t(uS())};return Km.add(r),()=>{Km.delete(r)}},e)}function CU(t){let{isDisabled:e,onFocus:n,onBlur:r,onFocusChange:i}=t;const s=O.useCallback(u=>{if(u.target===u.currentTarget)return r&&r(u),i&&i(!1),!0},[r,i]),o=iS(s),a=O.useCallback(u=>{const c=as(u.target),d=c?Gm(c):Gm();u.target===u.currentTarget&&d===eS(u.nativeEvent)&&(n&&n(u),i&&i(!0),o(u))},[i,n,o]);return{focusProps:{onFocus:!e&&(n||i||r)?a:void 0,onBlur:!e&&(r||i)?s:void 0}}}function kU(t){let{isDisabled:e,onBlurWithin:n,onFocusWithin:r,onFocusWithinChange:i}=t,s=O.useRef({isFocusWithin:!1}),{addGlobalListener:o,removeAllGlobalListeners:a}=nS(),u=O.useCallback(h=>{h.currentTarget.contains(h.target)&&s.current.isFocusWithin&&!h.currentTarget.contains(h.relatedTarget)&&(s.current.isFocusWithin=!1,a(),n&&n(h),i&&i(!1))},[n,i,s,a]),c=iS(u),d=O.useCallback(h=>{if(!h.currentTarget.contains(h.target))return;const m=as(h.target),w=Gm(m);if(!s.current.isFocusWithin&&w===eS(h.nativeEvent)){r&&r(h),i&&i(!0),s.current.isFocusWithin=!0,c(h);let b=h.currentTarget;o(m,"focus",P=>{if(s.current.isFocusWithin&&!Zx(b,P.target)){let N=new m.defaultView.FocusEvent("blur",{relatedTarget:P.target});_U(N,b);let _=rS(N);u(_)}},{capture:!0})}},[r,i,c,o,u]);return e?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:d,onBlur:u}}}let Xm=!1,wc=0;function AU(){Xm=!0,setTimeout(()=>{Xm=!1},50)}function nE(t){t.pointerType==="touch"&&AU()}function NU(){if(!(typeof document>"u"))return wc===0&&typeof PointerEvent<"u"&&document.addEventListener("pointerup",nE),wc++,()=>{wc--,!(wc>0)&&typeof PointerEvent<"u"&&document.removeEventListener("pointerup",nE)}}function RU(t){let{onHoverStart:e,onHoverChange:n,onHoverEnd:r,isDisabled:i}=t,[s,o]=O.useState(!1),a=O.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;O.useEffect(NU,[]);let{addGlobalListener:u,removeAllGlobalListeners:c}=nS(),{hoverProps:d,triggerHoverEnd:h}=O.useMemo(()=>{let m=(P,N)=>{if(a.pointerType=N,i||N==="touch"||a.isHovered||!P.currentTarget.contains(P.target))return;a.isHovered=!0;let _=P.currentTarget;a.target=_,u(as(P.target),"pointerover",v=>{a.isHovered&&a.target&&!Zx(a.target,v.target)&&w(v,v.pointerType)},{capture:!0}),e&&e({type:"hoverstart",target:_,pointerType:N}),n&&n(!0),o(!0)},w=(P,N)=>{let _=a.target;a.pointerType="",a.target=null,!(N==="touch"||!a.isHovered||!_)&&(a.isHovered=!1,c(),r&&r({type:"hoverend",target:_,pointerType:N}),n&&n(!1),o(!1))},b={};return typeof PointerEvent<"u"&&(b.onPointerEnter=P=>{Xm&&P.pointerType==="mouse"||m(P,P.pointerType)},b.onPointerLeave=P=>{!i&&P.currentTarget.contains(P.target)&&w(P,P.pointerType)}),{hoverProps:b,triggerHoverEnd:w}},[e,n,r,i,a,u,c]);return O.useEffect(()=>{i&&h({currentTarget:a.target},a.pointerType)},[i]),{hoverProps:d,isHovered:s}}function DU(t={}){let{autoFocus:e=!1,isTextInput:n,within:r}=t,i=O.useRef({isFocused:!1,isFocusVisible:e||uS()}),[s,o]=O.useState(!1),[a,u]=O.useState(()=>i.current.isFocused&&i.current.isFocusVisible),c=O.useCallback(()=>u(i.current.isFocused&&i.current.isFocusVisible),[]),d=O.useCallback(w=>{i.current.isFocused=w,o(w),c()},[c]);SU(w=>{i.current.isFocusVisible=w,c()},[],{isTextInput:n});let{focusProps:h}=CU({isDisabled:r,onFocusChange:d}),{focusWithinProps:m}=kU({isDisabled:!r,onFocusWithinChange:d});return{isFocused:s,isFocusVisible:a,focusProps:r?m:h}}var OU=Object.defineProperty,LU=(t,e,n)=>e in t?OU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yp=(t,e,n)=>(LU(t,typeof e!="symbol"?e+"":e,n),n);let MU=class{constructor(){yp(this,"current",this.detect()),yp(this,"handoffState","pending"),yp(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},cS=new MU;function VU(t){var e,n;return cS.isServer?null:t?"ownerDocument"in t?t.ownerDocument:"current"in t?(n=(e=t.current)==null?void 0:e.ownerDocument)!=null?n:document:null:document}function FU(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function dS(){let t=[],e={addEventListener(n,r,i,s){return n.addEventListener(r,i,s),e.add(()=>n.removeEventListener(r,i,s))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return e.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return e.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return FU(()=>{r.current&&n[0]()}),e.add(()=>{r.current=!1})},style(n,r,i){let s=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:i}),this.add(()=>{Object.assign(n.style,{[r]:s})})},group(n){let r=dS();return n(r),this.add(()=>r.dispose())},add(n){return t.includes(n)||t.push(n),()=>{let r=t.indexOf(n);if(r>=0)for(let i of t.splice(r,1))i()}},dispose(){for(let n of t.splice(0))n()}};return e}function Ev(){let[t]=O.useState(dS);return O.useEffect(()=>()=>t.dispose(),[t]),t}let Tv=(t,e)=>{cS.isServer?O.useEffect(t,e):O.useLayoutEffect(t,e)};function UU(t){let e=O.useRef(t);return Tv(()=>{e.current=t},[t]),e}let sr=function(t){let e=UU(t);return Te.useCallback((...n)=>e.current(...n),[e])};function $U(t){let e=t.width/2,n=t.height/2;return{top:t.clientY-n,right:t.clientX+e,bottom:t.clientY+n,left:t.clientX-e}}function jU(t,e){return!(!t||!e||t.right<e.left||t.left>e.right||t.bottom<e.top||t.top>e.bottom)}function BU({disabled:t=!1}={}){let e=O.useRef(null),[n,r]=O.useState(!1),i=Ev(),s=sr(()=>{e.current=null,r(!1),i.dispose()}),o=sr(a=>{if(i.dispose(),e.current===null){e.current=a.currentTarget,r(!0);{let u=VU(a.currentTarget);i.addEventListener(u,"pointerup",s,!1),i.addEventListener(u,"pointermove",c=>{if(e.current){let d=$U(c);r(jU(d,e.current.getBoundingClientRect()))}},!1),i.addEventListener(u,"pointercancel",s,!1)}}});return{pressed:n,pressProps:t?{}:{onPointerDown:o,onPointerUp:s,onClick:s}}}let zU=O.createContext(void 0);function bv(){return O.useContext(zU)}function rE(...t){return Array.from(new Set(t.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}function hS(t,e,...n){if(t in e){let i=e[t];return typeof i=="function"?i(...n):i}let r=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,hS),r}var WU=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(WU||{}),HU=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(HU||{});function Au(){let t=GU();return O.useCallback(e=>qU({mergeRefs:t,...e}),[t])}function qU({ourProps:t,theirProps:e,slot:n,defaultTag:r,features:i,visible:s=!0,name:o,mergeRefs:a}){a=a??KU;let u=fS(e,t);if(s)return _c(u,n,r,o,a);let c=i??0;if(c&2){let{static:d=!1,...h}=u;if(d)return _c(h,n,r,o,a)}if(c&1){let{unmount:d=!0,...h}=u;return hS(d?0:1,{0(){return null},1(){return _c({...h,hidden:!0,style:{display:"none"}},n,r,o,a)}})}return _c(u,n,r,o,a)}function _c(t,e={},n,r,i){let{as:s=n,children:o,refName:a="ref",...u}=vp(t,["unmount","static"]),c=t.ref!==void 0?{[a]:t.ref}:{},d=typeof o=="function"?o(e):o;"className"in u&&u.className&&typeof u.className=="function"&&(u.className=u.className(e)),u["aria-labelledby"]&&u["aria-labelledby"]===u.id&&(u["aria-labelledby"]=void 0);let h={};if(e){let m=!1,w=[];for(let[b,P]of Object.entries(e))typeof P=="boolean"&&(m=!0),P===!0&&w.push(b.replace(/([A-Z])/g,N=>`-${N.toLowerCase()}`));if(m){h["data-headlessui-state"]=w.join(" ");for(let b of w)h[`data-${b}`]=""}}if(s===O.Fragment&&(Object.keys(vs(u)).length>0||Object.keys(vs(h)).length>0))if(!O.isValidElement(d)||Array.isArray(d)&&d.length>1){if(Object.keys(vs(u)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(vs(u)).concat(Object.keys(vs(h))).map(m=>`  - ${m}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(m=>`  - ${m}`).join(`
`)].join(`
`))}else{let m=d.props,w=m==null?void 0:m.className,b=typeof w=="function"?(..._)=>rE(w(..._),u.className):rE(w,u.className),P=b?{className:b}:{},N=fS(d.props,vs(vp(u,["ref"])));for(let _ in h)_ in N&&delete h[_];return O.cloneElement(d,Object.assign({},N,h,c,{ref:i(YU(d),c.ref)},P))}return O.createElement(s,Object.assign({},vp(u,["ref"]),s!==O.Fragment&&c,s!==O.Fragment&&h),d)}function GU(){let t=O.useRef([]),e=O.useCallback(n=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return t.current=n,e}}function KU(...t){return t.every(e=>e==null)?void 0:e=>{for(let n of t)n!=null&&(typeof n=="function"?n(e):n.current=e)}}function fS(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):e[i]=r[i];if(e.disabled||e["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[i=>{var s;return(s=i==null?void 0:i.preventDefault)==null?void 0:s.call(i)}]);for(let r in n)Object.assign(e,{[r](i,...s){let o=n[r];for(let a of o){if((i instanceof Event||(i==null?void 0:i.nativeEvent)instanceof Event)&&i.defaultPrevented)return;a(i,...s)}}});return e}function QU(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):e[i]=r[i];for(let r in n)Object.assign(e,{[r](...i){let s=n[r];for(let o of s)o==null||o(...i)}});return e}function Qh(t){var e;return Object.assign(O.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function vs(t){let e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function vp(t,e=[]){let n=Object.assign({},t);for(let r of e)r in n&&delete n[r];return n}function YU(t){return Te.version.split(".")[0]>="19"?t.props.ref:t.ref}function XU(t,e,n){let[r,i]=O.useState(n),s=t!==void 0,o=O.useRef(s),a=O.useRef(!1),u=O.useRef(!1);return s&&!o.current&&!a.current?(a.current=!0,o.current=s,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!s&&o.current&&!u.current&&(u.current=!0,o.current=s,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[s?t:r,sr(c=>(s||i(c),e==null?void 0:e(c)))]}function JU(t){let[e]=O.useState(t);return e}function pS(t={},e=null,n=[]){for(let[r,i]of Object.entries(t))gS(n,mS(e,r),i);return n}function mS(t,e){return t?t+"["+e+"]":e}function gS(t,e,n){if(Array.isArray(n))for(let[r,i]of n.entries())gS(t,mS(e,r.toString()),i);else n instanceof Date?t.push([e,n.toISOString()]):typeof n=="boolean"?t.push([e,n?"1":"0"]):typeof n=="string"?t.push([e,n]):typeof n=="number"?t.push([e,`${n}`]):n==null?t.push([e,""]):pS(n,e,t)}function ZU(t){var e,n;let r=(e=t==null?void 0:t.form)!=null?e:t.closest("form");if(r){for(let i of r.elements)if(i!==t&&(i.tagName==="INPUT"&&i.type==="submit"||i.tagName==="BUTTON"&&i.type==="submit"||i.nodeName==="INPUT"&&i.type==="image")){i.click();return}(n=r.requestSubmit)==null||n.call(r)}}let e5="span";var Iv=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(Iv||{});function t5(t,e){var n;let{features:r=1,...i}=t,s={ref:e,"aria-hidden":(r&2)===2?!0:(n=i["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return Au()({ourProps:s,theirProps:i,slot:{},defaultTag:e5,name:"Hidden"})}let yS=Qh(t5),n5=O.createContext(null);function r5({children:t}){let e=O.useContext(n5);if(!e)return Te.createElement(Te.Fragment,null,t);let{target:n}=e;return n?vb.createPortal(Te.createElement(Te.Fragment,null,t),n):null}function i5({data:t,form:e,disabled:n,onReset:r,overrides:i}){let[s,o]=O.useState(null),a=Ev();return O.useEffect(()=>{if(r&&s)return a.addEventListener(s,"reset",r)},[s,e,r]),Te.createElement(r5,null,Te.createElement(s5,{setForm:o,formId:e}),pS(t).map(([u,c])=>Te.createElement(yS,{features:Iv.Hidden,...vs({key:u,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:e,disabled:n,name:u,value:c,...i})})))}function s5({setForm:t,formId:e}){return O.useEffect(()=>{if(e){let n=document.getElementById(e);n&&t(n)}},[t,e]),e?null:Te.createElement(yS,{features:Iv.Hidden,as:"input",type:"hidden",hidden:!0,readOnly:!0,ref:n=>{if(!n)return;let r=n.closest("form");r&&t(r)}})}let o5=O.createContext(void 0);function vS(){return O.useContext(o5)}function a5(t){return typeof t!="object"||t===null?!1:"nodeType"in t}function wS(t){return a5(t)&&"tagName"in t}function Yh(t){return wS(t)&&"accessKey"in t}function l5(t){return Yh(t)&&t.nodeName==="INPUT"}function Jm(t){return Yh(t)&&t.nodeName==="LABEL"}function u5(t){return Yh(t)&&t.nodeName==="FIELDSET"}function _S(t){return Yh(t)&&t.nodeName==="LEGEND"}function c5(t){return wS(t)?t.matches('a[href],audio[controls],button,details,embed,iframe,img[usemap],input:not([type="hidden"]),label,select,textarea,video[controls]'):!1}function d5(t){let e=t.parentElement,n=null;for(;e&&!u5(e);)_S(e)&&(n=e),e=e.parentElement;let r=(e==null?void 0:e.getAttribute("disabled"))==="";return r&&h5(n)?!1:r}function h5(t){if(!t)return!1;let e=t.previousElementSibling;for(;e!==null;){if(_S(e))return!1;e=e.previousElementSibling}return!0}let f5=Symbol();function Pv(...t){let e=O.useRef(t);O.useEffect(()=>{e.current=t},[t]);let n=sr(r=>{for(let i of e.current)i!=null&&(typeof i=="function"?i(r):i.current=r)});return t.every(r=>r==null||(r==null?void 0:r[f5]))?void 0:n}let Xh=O.createContext(null);Xh.displayName="DescriptionContext";function ES(){let t=O.useContext(Xh);if(t===null){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,ES),e}return t}function p5(){var t,e;return(e=(t=O.useContext(Xh))==null?void 0:t.value)!=null?e:void 0}function m5(){let[t,e]=O.useState([]);return[t.length>0?t.join(" "):void 0,O.useMemo(()=>function(n){let r=sr(s=>(e(o=>[...o,s]),()=>e(o=>{let a=o.slice(),u=a.indexOf(s);return u!==-1&&a.splice(u,1),a}))),i=O.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return Te.createElement(Xh.Provider,{value:i},n.children)},[e])]}let g5="p";function y5(t,e){let n=O.useId(),r=bv(),{id:i=`headlessui-description-${n}`,...s}=t,o=ES(),a=Pv(e);Tv(()=>o.register(i),[i,o.register]);let u=r||!1,c=O.useMemo(()=>({...o.slot,disabled:u}),[o.slot,u]),d={ref:a,...o.props,id:i};return Au()({ourProps:d,theirProps:s,slot:c,defaultTag:g5,name:o.name||"Description"})}let v5=Qh(y5),w5=Object.assign(v5,{});var Zm=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(Zm||{});let Jh=O.createContext(null);Jh.displayName="LabelContext";function TS(){let t=O.useContext(Jh);if(t===null){let e=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,TS),e}return t}function bS(t){var e,n,r;let i=(n=(e=O.useContext(Jh))==null?void 0:e.value)!=null?n:void 0;return((r=t==null?void 0:t.length)!=null?r:0)>0?[i,...t].filter(Boolean).join(" "):i}function _5({inherit:t=!1}={}){let e=bS(),[n,r]=O.useState([]),i=t?[e,...n].filter(Boolean):n;return[i.length>0?i.join(" "):void 0,O.useMemo(()=>function(s){let o=sr(u=>(r(c=>[...c,u]),()=>r(c=>{let d=c.slice(),h=d.indexOf(u);return h!==-1&&d.splice(h,1),d}))),a=O.useMemo(()=>({register:o,slot:s.slot,name:s.name,props:s.props,value:s.value}),[o,s.slot,s.name,s.props,s.value]);return Te.createElement(Jh.Provider,{value:a},s.children)},[r])]}let E5="label";function T5(t,e){var n;let r=O.useId(),i=TS(),s=vS(),o=bv(),{id:a=`headlessui-label-${r}`,htmlFor:u=s??((n=i.props)==null?void 0:n.htmlFor),passive:c=!1,...d}=t,h=Pv(e);Tv(()=>i.register(a),[a,i.register]);let m=sr(N=>{let _=N.currentTarget;if(!(N.target!==N.currentTarget&&c5(N.target))&&(Jm(_)&&N.preventDefault(),i.props&&"onClick"in i.props&&typeof i.props.onClick=="function"&&i.props.onClick(N),Jm(_))){let v=document.getElementById(_.htmlFor);if(v){let A=v.getAttribute("disabled");if(A==="true"||A==="")return;let D=v.getAttribute("aria-disabled");if(D==="true"||D==="")return;(l5(v)&&(v.type==="file"||v.type==="radio"||v.type==="checkbox")||v.role==="radio"||v.role==="checkbox"||v.role==="switch")&&v.click(),v.focus({preventScroll:!0})}}}),w=o||!1,b=O.useMemo(()=>({...i.slot,disabled:w}),[i.slot,w]),P={ref:h,...i.props,id:a,htmlFor:u,onClick:m};return c&&("onClick"in P&&(delete P.htmlFor,delete P.onClick),"onClick"in d&&delete d.onClick),Au()({ourProps:P,theirProps:d,slot:b,defaultTag:u?E5:"div",name:i.name||"Label"})}let b5=Qh(T5),I5=Object.assign(b5,{});function P5(t,e){return O.useMemo(()=>{var n;if(t.type)return t.type;let r=(n=t.as)!=null?n:"button";if(typeof r=="string"&&r.toLowerCase()==="button"||(e==null?void 0:e.tagName)==="BUTTON"&&!e.hasAttribute("type"))return"button"},[t.type,t.as,e])}let xv=O.createContext(null);xv.displayName="GroupContext";let x5=O.Fragment;function S5(t){var e;let[n,r]=O.useState(null),[i,s]=_5(),[o,a]=m5(),u=O.useMemo(()=>({switch:n,setSwitch:r}),[n,r]),c={},d=t,h=Au();return Te.createElement(a,{name:"Switch.Description",value:o},Te.createElement(s,{name:"Switch.Label",value:i,props:{htmlFor:(e=u.switch)==null?void 0:e.id,onClick(m){n&&(Jm(m.currentTarget)&&m.preventDefault(),n.click(),n.focus({preventScroll:!0}))}}},Te.createElement(xv.Provider,{value:u},h({ourProps:c,theirProps:d,slot:{},defaultTag:x5,name:"Switch.Group"}))))}let C5="button";function k5(t,e){var n;let r=O.useId(),i=vS(),s=bv(),{id:o=i||`headlessui-switch-${r}`,disabled:a=s||!1,checked:u,defaultChecked:c,onChange:d,name:h,value:m,form:w,autoFocus:b=!1,...P}=t,N=O.useContext(xv),[_,v]=O.useState(null),A=O.useRef(null),D=Pv(A,e,N===null?null:N.setSwitch,v),M=JU(c),[V,E]=XU(u,d,M??!1),y=Ev(),[S,k]=O.useState(!1),R=sr(()=>{k(!0),E==null||E(!V),y.nextFrame(()=>{k(!1)})}),T=sr(ve=>{if(d5(ve.currentTarget))return ve.preventDefault();ve.preventDefault(),R()}),I=sr(ve=>{ve.key===Zm.Space?(ve.preventDefault(),R()):ve.key===Zm.Enter&&ZU(ve.currentTarget)}),W=sr(ve=>ve.preventDefault()),H=bS(),de=p5(),{isFocusVisible:ge,focusProps:Q}=DU({autoFocus:b}),{isHovered:se,hoverProps:K}=RU({isDisabled:a}),{pressed:ae,pressProps:le}=BU({disabled:a}),fe=O.useMemo(()=>({checked:V,disabled:a,hover:se,focus:ge,active:ae,autofocus:b,changing:S}),[V,se,ge,ae,a,S,b]),Ee=QU({id:o,ref:D,role:"switch",type:P5(t,_),tabIndex:t.tabIndex===-1?0:(n=t.tabIndex)!=null?n:0,"aria-checked":V,"aria-labelledby":H,"aria-describedby":de,disabled:a||void 0,autoFocus:b,onClick:T,onKeyUp:I,onKeyPress:W},Q,K,le),ye=O.useCallback(()=>{if(M!==void 0)return E==null?void 0:E(M)},[E,M]),Be=Au();return Te.createElement(Te.Fragment,null,h!=null&&Te.createElement(i5,{disabled:a,data:{[h]:m||"on"},overrides:{type:"checkbox",checked:V},form:w,onReset:ye}),Be({ourProps:Ee,theirProps:P,slot:fe,defaultTag:C5,name:"Switch"}))}let A5=Qh(k5),N5=S5,R5=I5,D5=w5,O5=Object.assign(A5,{Group:N5,Label:R5,Description:D5});const L5=()=>{var _;const t=xn(),{isDarkMode:e,currentColor:n,customColor:r,toggleDarkMode:i,changeColorTheme:s,setCustomColorTheme:o,getCurrentColors:a}=AN(),[u,c]=O.useState(!1),[d,h]=O.useState({primary:"#2563eb",secondary:"#06b6d4",accent:"#3b82f6"}),m=(v,A)=>{h(D=>({...D,[v]:A}))},w=()=>{o({name:"Custom Theme",...d}),c(!1)},b=()=>{const v=document.documentElement;v.style.setProperty("--color-primary",d.primary),v.style.setProperty("--color-secondary",d.secondary),v.style.setProperty("--color-accent",d.accent)},P=()=>{const v=a(),A=document.documentElement;A.style.setProperty("--color-primary",v.primary),A.style.setProperty("--color-secondary",v.secondary),A.style.setProperty("--color-accent",v.accent)},N=({colorKey:v,colors:A,isSelected:D,isCustom:M=!1})=>x("button",{onClick:()=>!M&&s(v),className:`relative p-4 rounded-xl border-2 transition-all duration-200 ${D?"border-primary shadow-lg scale-105":"border-gray-200 dark:border-slate-600 hover:border-gray-300 dark:hover:border-slate-500"} ${M?"cursor-default":"cursor-pointer"}`,children:[x("div",{className:"flex items-center space-x-3 mb-3",children:[x("div",{className:"flex space-x-1",children:[p("div",{className:"w-4 h-4 rounded-full border border-white shadow-sm",style:{backgroundColor:A.primary}}),p("div",{className:"w-4 h-4 rounded-full border border-white shadow-sm",style:{backgroundColor:A.secondary}}),p("div",{className:"w-4 h-4 rounded-full border border-white shadow-sm",style:{backgroundColor:A.accent}})]}),D&&p(Mw,{className:"w-5 h-5 text-primary"})]}),p("h3",{className:"font-medium text-gray-900 dark:text-gray-100 text-left",children:A.name}),M&&p("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-left mt-1",children:"Your custom colors"})]});return x("div",{className:"space-y-6",children:[x("div",{className:"flex items-center space-x-4",children:[p("button",{onClick:()=>t(-1),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors",children:p(oa,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),x("div",{className:"flex-1",children:[p("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Settings"}),p("p",{className:"text-gray-600 dark:text-gray-400",children:"Customize your app experience"})]})]}),p("div",{className:"card",children:x("div",{className:"flex items-center justify-between",children:[x("div",{className:"flex items-center space-x-3",children:[p("div",{className:"p-2 rounded-lg bg-primary-100 dark:bg-primary-900/30",children:e?p(xN,{className:"w-5 h-5 text-primary"}):p(kN,{className:"w-5 h-5 text-primary"})}),x("div",{children:[p("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Dark Mode"}),p("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e?"Dark theme is enabled":"Light theme is enabled"})]})]}),p(O5,{checked:e,onChange:i,className:`${e?"bg-primary":"bg-gray-200 dark:bg-slate-600"} relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 dark:focus:ring-offset-slate-800`,children:p("span",{className:`${e?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform`})})]})}),x("div",{className:"card",children:[x("div",{className:"flex items-center space-x-2 mb-6",children:[p($w,{className:"w-5 h-5 text-primary"}),p("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Color Themes"})]}),x("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[Object.entries(fl).map(([v,A])=>p(N,{colorKey:v,colors:A,isSelected:n===v&&!r},v)),r&&p(N,{colorKey:"custom",colors:r,isSelected:n==="custom",isCustom:!0})]}),x("div",{className:"border-t border-gray-200 dark:border-slate-600 pt-4",children:[x("button",{onClick:()=>c(!u),className:"w-full flex items-center justify-between p-3 rounded-lg bg-gray-50 dark:bg-slate-700 hover:bg-gray-100 dark:hover:bg-slate-600 transition-colors",children:[p("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Create Custom Theme"}),p($w,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})]}),u&&x("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-slate-700 rounded-lg space-y-4",children:[x("div",{className:"grid grid-cols-1 gap-4",children:[x("div",{children:[p("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Primary Color"}),x("div",{className:"flex items-center space-x-3",children:[p("input",{type:"color",value:d.primary,onChange:v=>m("primary",v.target.value),className:"w-12 h-10 rounded-lg border border-gray-300 dark:border-slate-500 cursor-pointer"}),p("input",{type:"text",value:d.primary,onChange:v=>m("primary",v.target.value),className:"flex-1 input-field text-sm",placeholder:"#2563eb"})]})]}),x("div",{children:[p("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Secondary Color"}),x("div",{className:"flex items-center space-x-3",children:[p("input",{type:"color",value:d.secondary,onChange:v=>m("secondary",v.target.value),className:"w-12 h-10 rounded-lg border border-gray-300 dark:border-slate-500 cursor-pointer"}),p("input",{type:"text",value:d.secondary,onChange:v=>m("secondary",v.target.value),className:"flex-1 input-field text-sm",placeholder:"#06b6d4"})]})]}),x("div",{children:[p("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Accent Color"}),x("div",{className:"flex items-center space-x-3",children:[p("input",{type:"color",value:d.accent,onChange:v=>m("accent",v.target.value),className:"w-12 h-10 rounded-lg border border-gray-300 dark:border-slate-500 cursor-pointer"}),p("input",{type:"text",value:d.accent,onChange:v=>m("accent",v.target.value),className:"flex-1 input-field text-sm",placeholder:"#3b82f6"})]})]})]}),x("div",{className:"flex space-x-3 pt-4",children:[x("button",{onClick:b,onMouseLeave:P,className:"flex-1 btn-secondary text-sm py-2",children:[p(Ab,{className:"w-4 h-4 mr-2"}),"Preview"]}),x("button",{onClick:w,className:"flex-1 btn-primary text-sm py-2",children:[p(Mw,{className:"w-4 h-4 mr-2"}),"Apply Theme"]})]})]})]})]}),x("div",{className:"card",children:[p("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"About DentalCare"}),x("div",{className:"space-y-3 text-sm text-gray-600 dark:text-gray-400",children:[x("div",{className:"flex justify-between",children:[p("span",{children:"Version"}),p("span",{className:"font-medium",children:"1.0.0"})]}),x("div",{className:"flex justify-between",children:[p("span",{children:"Build"}),p("span",{className:"font-medium",children:"Production"})]}),x("div",{className:"flex justify-between",children:[p("span",{children:"Theme"}),x("span",{className:"font-medium capitalize",children:[r?"Custom":(_=fl[n])==null?void 0:_.name,e?" (Dark)":" (Light)"]})]})]})]}),x("div",{className:"card",children:[p("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Reset Settings"}),p("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"This will reset all your theme preferences to default values."}),p("button",{onClick:()=>{localStorage.removeItem("dental-app-theme"),window.location.reload()},className:"btn-secondary text-sm py-2 px-4",children:"Reset to Default"})]})]})},M5=()=>{const{patientId:t}=Yg(),e=xn(),{currentUser:n}=Sn(),{showSuccess:r,showError:i}=Vn(),s=w=>{console.log("AddTreatment: Showing error toast",{message:w,timestamp:new Date().toISOString()}),i(w)},o=w=>{console.log("AddTreatment: Showing success toast",{message:w,timestamp:new Date().toISOString()}),r(w)},[a,u]=O.useState(!1),{register:c,handleSubmit:d,formState:{errors:h}}=Cu({defaultValues:{treatment:"",date:new Date().toISOString().split("T")[0],cost:"",notes:""}});return O.useEffect(()=>(console.log("AddTreatment: Navigation triggered",{path:window.location.pathname,timestamp:new Date().toISOString()}),t||(console.error("AddTreatment: Invalid patientId, redirecting to /patients",{patientId:t}),s("Invalid patient ID"),e("/patients")),n||(console.error("AddTreatment: No authenticated user, redirecting to /login"),s("You must be logged in to add a treatment"),e("/login")),()=>console.log("AddTreatment: Component unmounted",{timestamp:new Date().toISOString()})),[t,n,e,s]),x("div",{className:"space-y-6 max-w-md mx-auto mt-8",children:[x("div",{className:"flex items-center space-x-4",children:[p("button",{onClick:()=>e(`/patients/${t||""}`),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",disabled:a,children:p(oa,{className:"w-5 h-5 text-gray-600"})}),x("div",{className:"flex-1",children:[p("h2",{className:"text-2xl font-bold text-gray-900",children:"Add Treatment"}),p("p",{className:"text-gray-600",children:"Add a new treatment for the patient"})]})]}),p("div",{className:"card",children:x("form",{onSubmit:d(async(w,b)=>{if(b==null||b.preventDefault(),console.log("AddTreatment: Form submitted",{data:w,timestamp:new Date().toISOString()}),!n){console.error("AddTreatment: No current user, cannot add treatment",{patientId:t}),s("You must be logged in to add a treatment"),e("/login");return}if(!t){console.error("AddTreatment: Invalid patient ID, cannot add treatment",{patientId:t,userId:n.uid}),s("Invalid patient ID"),e("/patients");return}u(!0);try{let P=null;if(w.cost){const A=Number(w.cost);if(isNaN(A)){console.error("AddTreatment: Invalid cost value",{cost:w.cost}),s("Cost must be a valid number"),u(!1);return}P=A}const N={patientId:t,treatment:w.treatment.trim(),date:w.date,cost:P,notes:w.notes?w.notes.trim():null};console.log("AddTreatment: treatmentData (raw):",N),console.log("AddTreatment: Submitting treatmentData",{treatmentData:JSON.stringify(N,null,2),userId:n.uid});const{id:_,error:v}=await nl.create(N,n.uid);if(v!==null){console.error("AddTreatment: Error adding treatment:",v,{patientId:t,userId:n.uid,treatmentData:N}),s(`Failed to create treatment: ${v}`),u(!1);return}console.log("AddTreatment: Treatment created successfully",{id:_,timestamp:new Date().toISOString()}),o("Treatment added successfully!"),setTimeout(()=>{console.log("AddTreatment: Navigating to patient page",{patientId:t,timestamp:new Date().toISOString()}),e(`/patients/${t}`)},3e3)}catch(P){console.error("AddTreatment: Unexpected error adding treatment:",P,{patientId:t,userId:n.uid}),s(`Failed to add treatment: ${P.message||"Unknown error"}`),u(!1)}}),className:"space-y-4",noValidate:!0,children:[x("div",{children:[p("label",{htmlFor:"treatment",className:"block text-sm font-medium text-gray-700 mb-2",children:"Treatment *"}),p("input",{id:"treatment",type:"text",...c("treatment",{required:"Treatment is required",minLength:{value:1,message:"Treatment cannot be empty"}}),className:`input-field ${h.treatment?"border-red-500":""}`,placeholder:"Enter treatment name"}),h.treatment&&p("p",{className:"text-red-500 text-sm mt-1",children:h.treatment.message})]}),x("div",{children:[p("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date *"}),p("input",{id:"date",type:"date",...c("date",{required:"Date is required"}),className:`input-field ${h.date?"border-red-500":""}`,placeholder:"Enter treatment date"}),h.date&&p("p",{className:"text-red-500 text-sm mt-1",children:h.date.message})]}),x("div",{children:[p("label",{htmlFor:"cost",className:"block text-sm font-medium text-gray-700 mb-2",children:"Cost"}),p("input",{id:"cost",type:"number",step:"0.01",...c("cost",{validate:w=>!w||!isNaN(Number(w))||"Cost must be a valid number"}),className:`input-field ${h.cost?"border-red-500":""}`,placeholder:"Enter cost (optional)"}),h.cost&&p("p",{className:"text-red-500 text-sm mt-1",children:h.cost.message})]}),x("div",{children:[p("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),p("textarea",{id:"notes",...c("notes"),rows:4,className:`input-field resize-none ${h.notes?"border-red-500":""}`,placeholder:"Enter any additional notes (optional)"}),h.notes&&p("p",{className:"text-red-500 text-sm mt-1",children:h.notes.message})]}),x("div",{className:"flex space-x-4",children:[p("button",{type:"button",onClick:()=>e(`/patients/${t||""}`),className:"flex-1 btn-secondary",disabled:a,children:"Cancel"}),p("button",{type:"submit",className:"flex-1 btn-primary",disabled:a,children:a?x("div",{className:"flex items-center justify-center",children:[p("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):x(Rn,{children:[p(uu,{className:"w-4 h-4 mr-2"}),"Save Treatment"]})})]})]})})]})},IS=()=>{const t=xn(),{signInWithGoogle:e,signInWithEmail:n,signUpWithEmail:r}=Sn(),{showSuccess:i,showError:s,showInfo:o}=Vn(),[a,u]=O.useState(!1),[c,d]=O.useState(!1),[h,m]=O.useState(!1),[w,b]=O.useState(""),[P,N]=O.useState({email:"",password:"",displayName:"",confirmPassword:""}),_=async M=>{try{await Ni.requestPermissions(),await Ni.register(),Ni.addListener("registration",async V=>{console.log("FCM Token:",V.value);const E=ix();await tl(St(E,"users",M.uid),{email:M.email,displayName:M.displayName||P.displayName||"User",fcmToken:V.value,preferences:{notifications:!0,language:"en",theme:"light"},role:"dentist",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{merge:!0}),console.log(`User document and FCM token saved for ${M.uid}`)}),Ni.addListener("registrationError",V=>{console.error("FCM Registration Error:",V),s("Failed to register for notifications")})}catch(V){console.error("Push Notification Setup Error:",V),s("Failed to set up notifications")}},v=M=>{N({...P,[M.target.name]:M.target.value}),w&&b("")},A=async()=>{m(!0),b("");const{user:M,error:V,pending:E}=await e();V?(b(V),s(V),m(!1)):M?(await _(M),i("Successfully signed in with Google!"),t("/"),m(!1)):E?(o("Redirecting to Google Sign-In..."),b("Redirecting to Google Sign-In...")):m(!1)};return p("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-secondary-50 dark:from-slate-900 dark:to-slate-800 flex items-center justify-center px-4",children:x("div",{className:"max-w-md w-full",children:[x("div",{className:"text-center mb-8",children:[p("div",{className:"w-16 h-16 bg-primary rounded-2xl flex items-center justify-center mx-auto mb-4",children:p("div",{className:"w-8 h-8 bg-white rounded-full"})}),p("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"DentalCare"}),p("p",{className:"text-gray-600 dark:text-gray-400",children:a?"Create your account":"Sign in to your account"})]}),x("div",{className:"card mb-6",children:[w&&p("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg",children:p("p",{className:"text-red-700 dark:text-red-300 text-sm",children:w})}),x("form",{onSubmit:async M=>{if(M.preventDefault(),m(!0),b(""),!P.email||!P.password){b("Please fill in all required fields"),m(!1);return}if(a){if(!P.displayName){b("Please enter your full name"),m(!1);return}if(P.password!==P.confirmPassword){b("Passwords do not match"),m(!1);return}if(P.password.length<6){b("Password must be at least 6 characters"),m(!1);return}const{user:V,error:E}=await r(P.email,P.password,P.displayName);E?b(E):V&&(await _(V),t("/"))}else{const{user:V,error:E}=await n(P.email,P.password);E?b(E):V&&(await _(V),t("/"))}m(!1)},className:"space-y-4",children:[a&&x("div",{children:[p("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name"}),x("div",{className:"relative",children:[p(Ki,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),p("input",{id:"displayName",name:"displayName",type:"text",value:P.displayName,onChange:v,className:"input-field pl-10",placeholder:"Enter your full name",disabled:h})]})]}),x("div",{children:[p("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),x("div",{className:"relative",children:[p(fh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),p("input",{id:"email",name:"email",type:"email",value:P.email,onChange:v,className:"input-field pl-10",placeholder:"Enter your email",disabled:h})]})]}),x("div",{children:[p("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),x("div",{className:"relative",children:[p(Uw,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),p("input",{id:"password",name:"password",type:c?"text":"password",value:P.password,onChange:v,className:"input-field pl-10 pr-10",placeholder:"Enter your password",disabled:h}),p("button",{type:"button",onClick:()=>d(!c),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",disabled:h,children:c?p(TN,{className:"w-5 h-5"}):p(Ab,{className:"w-5 h-5"})})]})]}),a&&x("div",{children:[p("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm Password"}),x("div",{className:"relative",children:[p(Uw,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),p("input",{id:"confirmPassword",name:"confirmPassword",type:c?"text":"password",value:P.confirmPassword,onChange:v,className:"input-field pl-10",placeholder:"Confirm your password",disabled:h})]})]}),p("button",{type:"submit",className:"w-full btn-primary",disabled:h,children:h?x("div",{className:"flex items-center justify-center",children:[p("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),a?"Creating Account...":"Signing In..."]}):a?"Create Account":"Sign In"})]}),x("div",{className:"mt-6",children:[x("div",{className:"relative",children:[p("div",{className:"absolute inset-0 flex items-center",children:p("div",{className:"w-full border-t border-gray-300 dark:border-slate-600"})}),p("div",{className:"relative flex justify-center text-sm",children:p("span",{className:"px-2 bg-white dark:bg-slate-800 text-gray-500 dark:text-gray-400",children:"Or continue with"})})]}),p("button",{onClick:A,className:"w-full mt-4 btn-secondary flex items-center justify-center",disabled:h,children:h?x(Rn,{children:[p("div",{className:"w-5 h-5 border-2 border-primary border-t-transparent rounded-full animate-spin mr-2"}),"Signing In..."]}):x(Rn,{children:[x("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[p("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),p("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),p("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),p("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]})})]})]}),p("div",{className:"text-center",children:x("p",{className:"text-gray-600 dark:text-gray-400",children:[a?"Already have an account?":"Don't have an account?"," ",p("button",{onClick:()=>{u(!a),b(""),N({email:"",password:"",displayName:"",confirmPassword:""})},className:"text-primary font-medium hover:underline",disabled:h,children:a?"Sign In":"Sign Up"})]})}),w&&w.includes("cancelled")&&x("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/30 rounded-lg border border-blue-200 dark:border-blue-800",children:[p("h4",{className:"text-sm font-medium text-blue-900 dark:text-blue-100 mb-1",children:"Having trouble with Google Sign-In?"}),x("ul",{className:"text-xs text-blue-700 dark:text-blue-300 space-y-1",children:[p("li",{children:"• Make sure pop-ups are enabled in your browser"}),p("li",{children:"• Try refreshing the page and signing in again"}),p("li",{children:"• Use email/password as an alternative"})]})]}),x("div",{className:"mt-8 p-4 bg-gray-100 dark:bg-slate-700 rounded-lg",children:[p("h3",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Demo Credentials"}),p("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2",children:"For testing purposes, you can use:"}),x("div",{className:"text-xs text-gray-600 dark:text-gray-400 space-y-1",children:[x("p",{children:[p("strong",{children:"Email:"})," demo@dentalcare.com"]}),x("p",{children:[p("strong",{children:"Password:"})," demo123"]})]}),p("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Or use Google Sign-In for the best experience"})]})]})})},V5=({items:t,showAddMenu:e,setShowAddMenu:n,addMenuItems:r})=>{const i=xn(),s=hh(),o=c=>{c.isAction?n(!e):(i(c.path),n(!1))},a=c=>{i(c),n(!1)},u=c=>c==="/"?s.pathname==="/":s.pathname.startsWith(c);return x(Rn,{children:[e&&p("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>n(!1),children:p("div",{className:"absolute bottom-24 right-4 bg-white rounded-xl shadow-lg py-2 min-w-[160px]",children:r.map((c,d)=>p("button",{onClick:()=>a(c.path),className:"w-full text-left px-4 py-3 hover:bg-gray-50 transition-colors text-gray-700 font-medium",children:c.label},d))})}),p("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-slate-800 border-t border-gray-200 dark:border-slate-700 z-50 transition-colors duration-300",children:p("div",{className:"max-w-md mx-auto px-4",children:p("div",{className:"flex items-center justify-around py-2",children:t.map(c=>{const d=c.icon,h=!c.isAction&&u(c.path);return x("button",{onClick:()=>o(c),className:`flex flex-col items-center justify-center p-2 rounded-lg transition-all duration-200 ${c.isAction?e?"bg-red-500 text-white scale-110":"bg-primary text-white scale-110":h?"text-primary bg-primary-50 dark:bg-primary-900/30":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[c.isAction&&e?p(ey,{className:"w-6 h-6"}):p(d,{className:`w-5 h-5 ${c.isAction?"w-6 h-6":""}`}),p("span",{className:`text-xs mt-1 font-medium ${c.isAction?"text-xs":""}`,children:c.label})]},c.id)})})})})]})},F5=()=>{const t=xn(),{currentUser:e,userProfile:n,logout:r}=Sn(),{showSuccess:i,showError:s}=Vn(),{notifications:o,unreadCount:a,markAsRead:u}=qh(),[c,d]=O.useState(!1),h=async()=>{try{const{error:w}=await r();w?s(w):i("Signed out successfully")}catch(w){s("Failed to sign out"),console.error("Logout error:",w)}},m=w=>{u(w.id),t(`/patients/${w.patientId}`),d(!1)};return O.useEffect(()=>{const w=b=>{c&&!b.target.closest(".notification-bell")&&d(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[c]),p("div",{className:"bg-white dark:bg-slate-800 shadow-sm border-b border-gray-100 dark:border-slate-700 sticky top-0 z-40 transition-colors duration-300",children:p("div",{className:"max-w-md mx-auto px-4 py-3",children:x("div",{className:"flex items-center justify-between",children:[x("div",{className:"flex items-center space-x-3",children:[p("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:p("div",{className:"w-4 h-4 bg-white rounded-full"})}),x("div",{children:[p("h1",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"DentalCare"}),p("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:(n==null?void 0:n.displayName)||(e==null?void 0:e.displayName)||"Follow-up Manager"})]})]}),x("div",{className:"flex items-center space-x-2",children:[x("div",{className:"relative notification-bell",children:[x("button",{onClick:()=>d(!c),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors relative",title:"Notifications",children:[p(Gi,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),a>0&&p("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full text-xs text-white flex items-center justify-center",children:a})]}),c&&x("div",{className:"absolute right-0 mt-2 w-80 bg-white dark:bg-slate-800 rounded-xl shadow-lg border border-gray-200 dark:border-slate-700 z-50 max-h-96 overflow-y-auto",children:[p("div",{className:"p-4 border-b border-gray-200 dark:border-slate-700",children:p("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Notifications"})}),o.length===0?p("p",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:"No due follow-ups"}):o.map(w=>x("div",{onClick:()=>m(w),className:"p-4 border-b border-gray-100 dark:border-slate-700 hover:bg-gray-50 dark:hover:bg-slate-700 cursor-pointer transition-colors",children:[p("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:w.type.replace("-"," ")}),p("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:w.notes}),x("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:["Scheduled: ",Vt(w.scheduledDate)," ",w.scheduledTime?`(${w.scheduledTime})`:""]}),p("span",{className:`text-xs font-medium ${w.status==="overdue"?"text-red-500":"text-yellow-500"}`,children:w.status.toUpperCase()})]},w.id))]})]}),p("button",{onClick:h,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors",title:"Sign Out",children:p(PN,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]})]})})})},U5=Qs("SplashScreen",{web:()=>$s(()=>import("./web-18ac2eb8.js"),[]).then(t=>new t.SplashScreenWeb)}),$5=({centerX:t="50vw",centerY:e="40vh",color:n="#ffffff",durationMs:r=900,delayMs:i=50})=>{const[s,o]=O.useState(!1),[a,u]=O.useState(!1);return O.useEffect(()=>{Us.isNativePlatform()&&U5.hide().catch(()=>{});const c=setTimeout(()=>o(!0),i),d=setTimeout(()=>u(!0),i+r+240);return()=>{clearTimeout(c),clearTimeout(d)}},[i,r]),a?null:p("div",{style:{clipPath:s?`circle(0 at ${t} ${e})`:`circle(150vmax at ${t} ${e})`,background:n,transition:`clip-path ${r}ms ease-out, opacity 240ms ease ${r}ms`,opacity:s?0:1},className:"fixed inset-0 z-[9999] pointer-events-none"})},Mr=({children:t})=>{const{currentUser:e}=Sn();return e?p(Rn,{children:t}):p(IS,{})},j5=()=>{const[t,e]=O.useState(!1),{currentUser:n}=Sn(),r=xn();return O.useEffect(()=>{var h;if(!!!((h=window.Capacitor)!=null&&h.isNativePlatform))return;const a=async()=>{try{await pr.initialize(),(await pr.trackingAuthorizationStatus()).status==="notDetermined"&&await pr.requestTrackingAuthorization();const w=await pr.requestConsentInfo({});w.isConsentFormAvailable&&w.status===qm.REQUIRED&&await pr.showConsentForm()}catch(m){console.error("AdMob init error:",m)}},u=async()=>{try{pr.addListener(bl.Loaded,()=>console.log("Banner ad loaded")),pr.addListener(bl.FailedToLoad,w=>console.error("Banner ad failed to load:",w)),pr.addListener(bl.SizeChanged,w=>console.log("Banner ad size changed:",w));const m={adId:"ca-app-pub-7817676381268867/6401556466",adSize:Hm.ADAPTIVE_BANNER,position:Wm.TOP_CENTER,margin:0,isTesting:!1,npa:!1};return await pr.showBanner(m),()=>{pr.removeBanner()}}catch(m){console.error("Banner ad error:",m)}},c=async()=>{try{await io.init("9c47d65f-8aaf-469b-92d2-9adeb619f287");const m=await io.Notifications.requestPermission(!0);console.log("User accepted notifications:",m);const w=await jV.getToken();w!=null&&w.token&&(console.log("FCM Token:",w.token),await io.User.addTag("FCM_Token",w.token)),n!=null&&n.uid&&(await io.login(n.uid),console.log("External User ID set:",n.uid)),io.Notifications.addForegroundWillDisplayListener(N=>{const _=N.getNotification();console.log("Foreground notification received:",_),N.preventDefault(),N.getNotification().display()}),io.Notifications.addNotificationOpenedListener(N=>{var A;const v=(((A=N.notification)==null?void 0:A.additionalData)||{}).route;v&&r(v),console.log("Notification clicked:",N)});const b=async()=>{if(console.log("DEBUG: Starting scheduleDailyNotification"),!(n!=null&&n.uid)){console.log("DEBUG: No currentUser.uid, skipping scheduling");return}const N=new Date;console.log("DEBUG: Current time:",N.toISOString());let _=h6(f6(p6(N,0),5),13);N>_&&(_=bx(_,1)),console.log("DEBUG: Scheduled time:",_.toISOString());const{followUps:v,error:A}=await En.getAll(n.uid);if(A){console.error("DEBUG: Error fetching follow-ups:",A);return}console.log("DEBUG: Fetched followUps count:",v.length);const D=v.filter(y=>HV(new Date(y.scheduledDate),N));if(console.log("DEBUG: Today follow-ups count:",D.length),D.length===0){console.log("DEBUG: No follow-ups today, no notification scheduled");return}const M="https://onesignal.com/api/v1/notifications",V={Authorization:`Basic ${{}.REACT_APP_ONESIGNAL_API_KEY||"os_v2_app_trd5mx4kv5djxewstlplmgpsq7tzor2lmjtesvvfuv37bz7ztmytpbmqkramlyytrg3tg4rnxj2t7mhvnb53fzrnk475kv7y6pcghhq"}`,"Content-Type":"application/json"};try{const y=await cp.request({method:"GET",url:`${M}?app_id=9c47d65f-8aaf-469b-92d2-9adeb619f287&limit=1`,headers:V});console.log("DEBUG: Cancel response:",y.data);const S=JSON.parse(y.data).notifications||[];if(S.length>0){const k=await cp.request({method:"DELETE",url:`${M}/${S[0].id}?app_id=9c47d65f-8aaf-469b-92d2-9adeb619f287`,headers:V});console.log("DEBUG: Deleted existing notification:",k.data)}else console.log("DEBUG: No existing notifications to delete")}catch(y){console.error("DEBUG: Error in cancel logic:",y)}const E={app_id:"9c47d65f-8aaf-469b-92d2-9adeb619f287",contents:{en:`You have ${D.length} follow-up${D.length>1?"s":""} today!`},headings:{en:"Daily Follow-up Reminder"},include_aliases:{external_id:[n.uid]},delayed_option:"timezone",delivery_time_of_day:"11:30",android_accent_color:"#FF5722",android_sound:"dentaldrill",android_vibrate:!0,data:{route:"/followups"}};console.log("DEBUG: Notification content prepared:",E);try{const y=await cp.request({method:"POST",url:M,headers:V,data:E});console.log("DEBUG: Notification scheduled:",y.data)}catch(y){console.error("DEBUG: Error scheduling notification:",y)}};b();const P=N=>{N.isActive&&(console.log("DEBUG: App resumed, checking notification schedule"),b())};return A1.addListener("appStateChange",P),()=>{A1.removeAllListeners()}}catch(m){console.error("Push notification initialization error:",m)}};let d;return n&&(a(),u().then(m=>{d=m})),c(),()=>{d&&d()}},[r,n]),x("div",{className:"min-h-screen bg-gray-50 dark:bg-slate-900 pb-20 transition-colors duration-300",children:[n&&p("div",{style:{height:"50px"}}),p(F5,{}),p("main",{className:"px-4 py-6 max-w-md mx-auto",children:x(hN,{children:[p(Xn,{path:"/login",element:p(IS,{})}),p(Xn,{path:"/",element:p(Mr,{children:p(O6,{})})}),p(Xn,{path:"/patients",element:p(Mr,{children:p(L6,{})})}),p(Xn,{path:"/patients/:id",element:p(Mr,{children:p(sU,{})})}),p(Xn,{path:"/followups",element:p(Mr,{children:p(oU,{})})}),p(Xn,{path:"/add-patient",element:p(Mr,{children:p(aU,{})})}),p(Xn,{path:"/patients/:id/edit",element:p(Mr,{children:p(lU,{})})}),p(Xn,{path:"/add-followup",element:p(Mr,{children:p(uU,{})})}),p(Xn,{path:"/settings",element:p(Mr,{children:p(L5,{})})}),p(Xn,{path:"/patients/:patientId/treatments/new",element:p(Mr,{children:p(M5,{})})})]})}),n&&p(V5,{items:[{id:"dashboard",icon:bN,label:"Dashboard",path:"/"},{id:"patients",icon:pm,label:"Patients",path:"/patients"},{id:"add",icon:yd,label:"Add",isAction:!0},{id:"followups",icon:Gi,label:"Follow-ups",path:"/followups"},{id:"settings",icon:CN,label:"Settings",path:"/settings"}],showAddMenu:t,setShowAddMenu:e,addMenuItems:[{label:"Add Patient",path:"/add-patient"},{label:"Add Follow-up",path:"/add-followup"}]})]})},B5=()=>p(NN,{children:p(IV,{children:p(CV,{children:p(kV,{children:x(mN,{children:[p(j5,{}),p($5,{centerX:"50vw",centerY:"40vh",color:"#ffffff",durationMs:900})]})})})})});document.addEventListener("touchstart",t=>{t.touches.length>1&&t.preventDefault()},{passive:!1});let iE=0;document.addEventListener("touchend",t=>{const e=new Date().getTime();e-iE<=300&&t.preventDefault(),iE=e},!1);wp.createRoot(document.getElementById("root")).render(p(Te.StrictMode,{children:p(B5,{})}));export{cO as $,qm as A,K5 as B,Ls as C,X5 as D,cu as E,si as F,Ti as G,b1 as H,o$ as I,H5 as J,G5 as K,SD as L,Z5 as M,c$ as N,Lc as O,I1 as P,q5 as Q,u$ as R,r$ as S,bi as T,i$ as U,AD as V,yx as W,nD as X,n$ as Y,mO as Z,qo as _,ry as a,f$ as a0,h$ as a1,ID as a2,ei as a3,s$ as a4,n_ as a5,ZD as a6,PI as a7,jD as a8,z5 as b,Wb as c,W5 as d,E$ as e,Bx as f,_e as g,VI as h,JN as i,Y5 as j,xD as k,Q5 as l,l$ as m,e$ as n,b2 as o,vO as p,J5 as q,ji as r,qs as s,Ei as t,wr as u,ZN as v,d$ as w,AR as x,a$ as y,t$ as z};
//# sourceMappingURL=index-60c5989d.js.map
