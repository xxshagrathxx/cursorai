function RS(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var zn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function z1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var W1={exports:{}},zd={},H1={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eu=Symbol.for("react.element"),DS=Symbol.for("react.portal"),OS=Symbol.for("react.fragment"),LS=Symbol.for("react.strict_mode"),MS=Symbol.for("react.profiler"),VS=Symbol.for("react.provider"),FS=Symbol.for("react.context"),US=Symbol.for("react.forward_ref"),$S=Symbol.for("react.suspense"),jS=Symbol.for("react.memo"),BS=Symbol.for("react.lazy"),u0=Symbol.iterator;function zS(t){return t===null||typeof t!="object"?null:(t=u0&&t[u0]||t["@@iterator"],typeof t=="function"?t:null)}var q1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G1=Object.assign,K1={};function ea(t,e,n){this.props=t,this.context=e,this.refs=K1,this.updater=n||q1}ea.prototype.isReactComponent={};ea.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ea.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Y1(){}Y1.prototype=ea.prototype;function qm(t,e,n){this.props=t,this.context=e,this.refs=K1,this.updater=n||q1}var Gm=qm.prototype=new Y1;Gm.constructor=qm;G1(Gm,ea.prototype);Gm.isPureReactComponent=!0;var c0=Array.isArray,Q1=Object.prototype.hasOwnProperty,Km={current:null},X1={key:!0,ref:!0,__self:!0,__source:!0};function J1(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Q1.call(e,r)&&!X1.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:eu,type:t,key:s,ref:o,props:i,_owner:Km.current}}function WS(t,e){return{$$typeof:eu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ym(t){return typeof t=="object"&&t!==null&&t.$$typeof===eu}function HS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var d0=/\/+/g;function mf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?HS(""+t.key):e.toString(36)}function vc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case eu:case DS:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+mf(o,0):r,c0(i)?(n="",t!=null&&(n=t.replace(d0,"$&/")+"/"),vc(i,e,n,"",function(c){return c})):i!=null&&(Ym(i)&&(i=WS(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(d0,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",c0(t))for(var a=0;a<t.length;a++){s=t[a];var u=r+mf(s,a);o+=vc(s,e,n,u,i)}else if(u=zS(t),typeof u=="function")for(t=u.call(t),a=0;!(s=t.next()).done;)s=s.value,u=r+mf(s,a++),o+=vc(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Wu(t,e,n){if(t==null)return t;var r=[],i=0;return vc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function qS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var fn={current:null},wc={transition:null},GS={ReactCurrentDispatcher:fn,ReactCurrentBatchConfig:wc,ReactCurrentOwner:Km};function Z1(){throw Error("act(...) is not supported in production builds of React.")}_e.Children={map:Wu,forEach:function(t,e,n){Wu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Wu(t,function(){e++}),e},toArray:function(t){return Wu(t,function(e){return e})||[]},only:function(t){if(!Ym(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};_e.Component=ea;_e.Fragment=OS;_e.Profiler=MS;_e.PureComponent=qm;_e.StrictMode=LS;_e.Suspense=$S;_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GS;_e.act=Z1;_e.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=G1({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Km.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)Q1.call(e,u)&&!X1.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:eu,type:t.type,key:i,ref:s,props:r,_owner:o}};_e.createContext=function(t){return t={$$typeof:FS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:VS,_context:t},t.Consumer=t};_e.createElement=J1;_e.createFactory=function(t){var e=J1.bind(null,t);return e.type=t,e};_e.createRef=function(){return{current:null}};_e.forwardRef=function(t){return{$$typeof:US,render:t}};_e.isValidElement=Ym;_e.lazy=function(t){return{$$typeof:BS,_payload:{_status:-1,_result:t},_init:qS}};_e.memo=function(t,e){return{$$typeof:jS,type:t,compare:e===void 0?null:e}};_e.startTransition=function(t){var e=wc.transition;wc.transition={};try{t()}finally{wc.transition=e}};_e.unstable_act=Z1;_e.useCallback=function(t,e){return fn.current.useCallback(t,e)};_e.useContext=function(t){return fn.current.useContext(t)};_e.useDebugValue=function(){};_e.useDeferredValue=function(t){return fn.current.useDeferredValue(t)};_e.useEffect=function(t,e){return fn.current.useEffect(t,e)};_e.useId=function(){return fn.current.useId()};_e.useImperativeHandle=function(t,e,n){return fn.current.useImperativeHandle(t,e,n)};_e.useInsertionEffect=function(t,e){return fn.current.useInsertionEffect(t,e)};_e.useLayoutEffect=function(t,e){return fn.current.useLayoutEffect(t,e)};_e.useMemo=function(t,e){return fn.current.useMemo(t,e)};_e.useReducer=function(t,e,n){return fn.current.useReducer(t,e,n)};_e.useRef=function(t){return fn.current.useRef(t)};_e.useState=function(t){return fn.current.useState(t)};_e.useSyncExternalStore=function(t,e,n){return fn.current.useSyncExternalStore(t,e,n)};_e.useTransition=function(){return fn.current.useTransition()};_e.version="18.3.1";H1.exports=_e;var O=H1.exports;const we=z1(O),KS=RS({__proto__:null,default:we},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YS=O,QS=Symbol.for("react.element"),XS=Symbol.for("react.fragment"),JS=Object.prototype.hasOwnProperty,ZS=YS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,eC={key:!0,ref:!0,__self:!0,__source:!0};function eE(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)JS.call(e,r)&&!eC.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:QS,type:t,key:s,ref:o,props:i,_owner:ZS.current}}zd.Fragment=XS;zd.jsx=eE;zd.jsxs=eE;W1.exports=zd;var Qm=W1.exports;const Rn=Qm.Fragment,p=Qm.jsx,x=Qm.jsxs;var pp={},tE={exports:{}},Ln={},nE={exports:{}},rE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(K,oe){var ne=K.length;K.push(oe);e:for(;0<ne;){var he=ne-1>>>1,ce=K[he];if(0<i(ce,oe))K[he]=oe,K[ne]=ce,ne=he;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var oe=K[0],ne=K.pop();if(ne!==oe){K[0]=ne;e:for(var he=0,ce=K.length,ve=ce>>>1;he<ve;){var $e=2*(he+1)-1,je=K[$e],Ze=$e+1,xe=K[Ze];if(0>i(je,ne))Ze<ce&&0>i(xe,je)?(K[he]=xe,K[Ze]=ne,he=Ze):(K[he]=je,K[$e]=ne,he=$e);else if(Ze<ce&&0>i(xe,ne))K[he]=xe,K[Ze]=ne,he=Ze;else break e}}return oe}function i(K,oe){var ne=K.sortIndex-oe.sortIndex;return ne!==0?ne:K.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],c=[],d=1,h=null,m=3,w=!1,_=!1,P=!1,N=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(K){for(var oe=n(c);oe!==null;){if(oe.callback===null)r(c);else if(oe.startTime<=K)r(c),oe.sortIndex=oe.expirationTime,e(u,oe);else break;oe=n(c)}}function D(K){if(P=!1,k(K),!_)if(n(u)!==null)_=!0,ue(M);else{var oe=n(c);oe!==null&&me(D,oe.startTime-K)}}function M(K,oe){_=!1,P&&(P=!1,E(v),v=-1),w=!0;var ne=m;try{for(k(oe),h=n(u);h!==null&&(!(h.expirationTime>oe)||K&&!R());){var he=h.callback;if(typeof he=="function"){h.callback=null,m=h.priorityLevel;var ce=he(h.expirationTime<=oe);oe=t.unstable_now(),typeof ce=="function"?h.callback=ce:h===n(u)&&r(u),k(oe)}else r(u);h=n(u)}if(h!==null)var ve=!0;else{var $e=n(c);$e!==null&&me(D,$e.startTime-oe),ve=!1}return ve}finally{h=null,m=ne,w=!1}}var V=!1,I=null,v=-1,C=5,A=-1;function R(){return!(t.unstable_now()-A<C)}function T(){if(I!==null){var K=t.unstable_now();A=K;var oe=!0;try{oe=I(!0,K)}finally{oe?b():(V=!1,I=null)}}else V=!1}var b;if(typeof y=="function")b=function(){y(T)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,H=W.port2;W.port1.onmessage=T,b=function(){H.postMessage(null)}}else b=function(){N(T,0)};function ue(K){I=K,V||(V=!0,b())}function me(K,oe){v=N(function(){K(t.unstable_now())},oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_continueExecution=function(){_||w||(_=!0,ue(M))},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(K){switch(m){case 1:case 2:case 3:var oe=3;break;default:oe=m}var ne=m;m=oe;try{return K()}finally{m=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(K,oe){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var ne=m;m=K;try{return oe()}finally{m=ne}},t.unstable_scheduleCallback=function(K,oe,ne){var he=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?he+ne:he):ne=he,K){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=ne+ce,K={id:d++,callback:oe,priorityLevel:K,startTime:ne,expirationTime:ce,sortIndex:-1},ne>he?(K.sortIndex=ne,e(c,K),n(u)===null&&K===n(c)&&(P?(E(v),v=-1):P=!0,me(D,ne-he))):(K.sortIndex=ce,e(u,K),_||w||(_=!0,ue(M))),K},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(K){var oe=m;return function(){var ne=m;m=oe;try{return K.apply(this,arguments)}finally{m=ne}}}})(rE);nE.exports=rE;var tC=nE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nC=O,On=tC;function q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var iE=new Set,bl={};function js(t,e){Vo(t,e),Vo(t+"Capture",e)}function Vo(t,e){for(bl[t]=e,t=0;t<e.length;t++)iE.add(e[t])}var Gr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mp=Object.prototype.hasOwnProperty,rC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h0={},f0={};function iC(t){return mp.call(f0,t)?!0:mp.call(h0,t)?!1:rC.test(t)?f0[t]=!0:(h0[t]=!0,!1)}function sC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function oC(t,e,n,r){if(e===null||typeof e>"u"||sC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function pn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var qt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){qt[t]=new pn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];qt[e]=new pn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){qt[t]=new pn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){qt[t]=new pn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){qt[t]=new pn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){qt[t]=new pn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){qt[t]=new pn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){qt[t]=new pn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){qt[t]=new pn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Xm=/[\-:]([a-z])/g;function Jm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Xm,Jm);qt[e]=new pn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Xm,Jm);qt[e]=new pn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Xm,Jm);qt[e]=new pn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){qt[t]=new pn(t,1,!1,t.toLowerCase(),null,!1,!1)});qt.xlinkHref=new pn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){qt[t]=new pn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Zm(t,e,n,r){var i=qt.hasOwnProperty(e)?qt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(oC(e,n,i,r)&&(n=null),r||i===null?iC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ri=nC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Hu=Symbol.for("react.element"),co=Symbol.for("react.portal"),ho=Symbol.for("react.fragment"),eg=Symbol.for("react.strict_mode"),gp=Symbol.for("react.profiler"),sE=Symbol.for("react.provider"),oE=Symbol.for("react.context"),tg=Symbol.for("react.forward_ref"),yp=Symbol.for("react.suspense"),vp=Symbol.for("react.suspense_list"),ng=Symbol.for("react.memo"),gi=Symbol.for("react.lazy"),aE=Symbol.for("react.offscreen"),p0=Symbol.iterator;function ka(t){return t===null||typeof t!="object"?null:(t=p0&&t[p0]||t["@@iterator"],typeof t=="function"?t:null)}var st=Object.assign,gf;function Ba(t){if(gf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);gf=e&&e[1]||""}return`
`+gf+t}var yf=!1;function vf(t,e){if(!t||yf)return"";yf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{yf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ba(t):""}function aC(t){switch(t.tag){case 5:return Ba(t.type);case 16:return Ba("Lazy");case 13:return Ba("Suspense");case 19:return Ba("SuspenseList");case 0:case 2:case 15:return t=vf(t.type,!1),t;case 11:return t=vf(t.type.render,!1),t;case 1:return t=vf(t.type,!0),t;default:return""}}function wp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ho:return"Fragment";case co:return"Portal";case gp:return"Profiler";case eg:return"StrictMode";case yp:return"Suspense";case vp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case oE:return(t.displayName||"Context")+".Consumer";case sE:return(t._context.displayName||"Context")+".Provider";case tg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ng:return e=t.displayName||null,e!==null?e:wp(t.type)||"Memo";case gi:e=t._payload,t=t._init;try{return wp(t(e))}catch{}}return null}function lC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wp(e);case 8:return e===eg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Wi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function lE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function uC(t){var e=lE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function qu(t){t._valueTracker||(t._valueTracker=uC(t))}function uE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=lE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function zc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function _p(t,e){var n=e.checked;return st({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function m0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Wi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function cE(t,e){e=e.checked,e!=null&&Zm(t,"checked",e,!1)}function Ep(t,e){cE(t,e);var n=Wi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Tp(t,e.type,n):e.hasOwnProperty("defaultValue")&&Tp(t,e.type,Wi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function g0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Tp(t,e,n){(e!=="number"||zc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var za=Array.isArray;function Io(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Wi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function bp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return st({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function y0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(q(92));if(za(n)){if(1<n.length)throw Error(q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Wi(n)}}function dE(t,e){var n=Wi(e.value),r=Wi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function v0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function hE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ip(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?hE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Gu,fE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Gu=Gu||document.createElement("div"),Gu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Gu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Il(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var tl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cC=["Webkit","ms","Moz","O"];Object.keys(tl).forEach(function(t){cC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),tl[e]=tl[t]})});function pE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||tl.hasOwnProperty(t)&&tl[t]?(""+e).trim():e+"px"}function mE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=pE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var dC=st({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pp(t,e){if(e){if(dC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function xp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sp=null;function rg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Cp=null,Po=null,xo=null;function w0(t){if(t=ru(t)){if(typeof Cp!="function")throw Error(q(280));var e=t.stateNode;e&&(e=Kd(e),Cp(t.stateNode,t.type,e))}}function gE(t){Po?xo?xo.push(t):xo=[t]:Po=t}function yE(){if(Po){var t=Po,e=xo;if(xo=Po=null,w0(t),e)for(t=0;t<e.length;t++)w0(e[t])}}function vE(t,e){return t(e)}function wE(){}var wf=!1;function _E(t,e,n){if(wf)return t(e,n);wf=!0;try{return vE(t,e,n)}finally{wf=!1,(Po!==null||xo!==null)&&(wE(),yE())}}function Pl(t,e){var n=t.stateNode;if(n===null)return null;var r=Kd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(q(231,e,typeof n));return n}var kp=!1;if(Gr)try{var Aa={};Object.defineProperty(Aa,"passive",{get:function(){kp=!0}}),window.addEventListener("test",Aa,Aa),window.removeEventListener("test",Aa,Aa)}catch{kp=!1}function hC(t,e,n,r,i,s,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var nl=!1,Wc=null,Hc=!1,Ap=null,fC={onError:function(t){nl=!0,Wc=t}};function pC(t,e,n,r,i,s,o,a,u){nl=!1,Wc=null,hC.apply(fC,arguments)}function mC(t,e,n,r,i,s,o,a,u){if(pC.apply(this,arguments),nl){if(nl){var c=Wc;nl=!1,Wc=null}else throw Error(q(198));Hc||(Hc=!0,Ap=c)}}function Bs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function EE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function _0(t){if(Bs(t)!==t)throw Error(q(188))}function gC(t){var e=t.alternate;if(!e){if(e=Bs(t),e===null)throw Error(q(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return _0(i),t;if(s===r)return _0(i),e;s=s.sibling}throw Error(q(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?t:e}function TE(t){return t=gC(t),t!==null?bE(t):null}function bE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=bE(t);if(e!==null)return e;t=t.sibling}return null}var IE=On.unstable_scheduleCallback,E0=On.unstable_cancelCallback,yC=On.unstable_shouldYield,vC=On.unstable_requestPaint,mt=On.unstable_now,wC=On.unstable_getCurrentPriorityLevel,ig=On.unstable_ImmediatePriority,PE=On.unstable_UserBlockingPriority,qc=On.unstable_NormalPriority,_C=On.unstable_LowPriority,xE=On.unstable_IdlePriority,Wd=null,Tr=null;function EC(t){if(Tr&&typeof Tr.onCommitFiberRoot=="function")try{Tr.onCommitFiberRoot(Wd,t,void 0,(t.current.flags&128)===128)}catch{}}var or=Math.clz32?Math.clz32:IC,TC=Math.log,bC=Math.LN2;function IC(t){return t>>>=0,t===0?32:31-(TC(t)/bC|0)|0}var Ku=64,Yu=4194304;function Wa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Gc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Wa(a):(s&=o,s!==0&&(r=Wa(s)))}else o=n&~i,o!==0?r=Wa(o):s!==0&&(r=Wa(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-or(e),i=1<<n,r|=t[n],e&=~i;return r}function PC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-or(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=PC(a,e)):u<=e&&(t.expiredLanes|=a),s&=~a}}function Np(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function SE(){var t=Ku;return Ku<<=1,!(Ku&4194240)&&(Ku=64),t}function _f(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function tu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-or(e),t[e]=n}function SC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-or(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function sg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-or(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ue=0;function CE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var kE,og,AE,NE,RE,Rp=!1,Qu=[],Ni=null,Ri=null,Di=null,xl=new Map,Sl=new Map,vi=[],CC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function T0(t,e){switch(t){case"focusin":case"focusout":Ni=null;break;case"dragenter":case"dragleave":Ri=null;break;case"mouseover":case"mouseout":Di=null;break;case"pointerover":case"pointerout":xl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sl.delete(e.pointerId)}}function Na(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ru(e),e!==null&&og(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function kC(t,e,n,r,i){switch(e){case"focusin":return Ni=Na(Ni,t,e,n,r,i),!0;case"dragenter":return Ri=Na(Ri,t,e,n,r,i),!0;case"mouseover":return Di=Na(Di,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return xl.set(s,Na(xl.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Sl.set(s,Na(Sl.get(s)||null,t,e,n,r,i)),!0}return!1}function DE(t){var e=vs(t.target);if(e!==null){var n=Bs(e);if(n!==null){if(e=n.tag,e===13){if(e=EE(n),e!==null){t.blockedOn=e,RE(t.priority,function(){AE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _c(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Dp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Sp=r,n.target.dispatchEvent(r),Sp=null}else return e=ru(n),e!==null&&og(e),t.blockedOn=n,!1;e.shift()}return!0}function b0(t,e,n){_c(t)&&n.delete(e)}function AC(){Rp=!1,Ni!==null&&_c(Ni)&&(Ni=null),Ri!==null&&_c(Ri)&&(Ri=null),Di!==null&&_c(Di)&&(Di=null),xl.forEach(b0),Sl.forEach(b0)}function Ra(t,e){t.blockedOn===e&&(t.blockedOn=null,Rp||(Rp=!0,On.unstable_scheduleCallback(On.unstable_NormalPriority,AC)))}function Cl(t){function e(i){return Ra(i,t)}if(0<Qu.length){Ra(Qu[0],t);for(var n=1;n<Qu.length;n++){var r=Qu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ni!==null&&Ra(Ni,t),Ri!==null&&Ra(Ri,t),Di!==null&&Ra(Di,t),xl.forEach(e),Sl.forEach(e),n=0;n<vi.length;n++)r=vi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<vi.length&&(n=vi[0],n.blockedOn===null);)DE(n),n.blockedOn===null&&vi.shift()}var So=ri.ReactCurrentBatchConfig,Kc=!0;function NC(t,e,n,r){var i=Ue,s=So.transition;So.transition=null;try{Ue=1,ag(t,e,n,r)}finally{Ue=i,So.transition=s}}function RC(t,e,n,r){var i=Ue,s=So.transition;So.transition=null;try{Ue=4,ag(t,e,n,r)}finally{Ue=i,So.transition=s}}function ag(t,e,n,r){if(Kc){var i=Dp(t,e,n,r);if(i===null)Af(t,e,r,Yc,n),T0(t,r);else if(kC(i,t,e,n,r))r.stopPropagation();else if(T0(t,r),e&4&&-1<CC.indexOf(t)){for(;i!==null;){var s=ru(i);if(s!==null&&kE(s),s=Dp(t,e,n,r),s===null&&Af(t,e,r,Yc,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Af(t,e,r,null,n)}}var Yc=null;function Dp(t,e,n,r){if(Yc=null,t=rg(r),t=vs(t),t!==null)if(e=Bs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=EE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Yc=t,null}function OE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wC()){case ig:return 1;case PE:return 4;case qc:case _C:return 16;case xE:return 536870912;default:return 16}default:return 16}}var Pi=null,lg=null,Ec=null;function LE(){if(Ec)return Ec;var t,e=lg,n=e.length,r,i="value"in Pi?Pi.value:Pi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Ec=i.slice(t,1<r?1-r:void 0)}function Tc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Xu(){return!0}function I0(){return!1}function Mn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Xu:I0,this.isPropagationStopped=I0,this}return st(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xu)},persist:function(){},isPersistent:Xu}),e}var ta={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ug=Mn(ta),nu=st({},ta,{view:0,detail:0}),DC=Mn(nu),Ef,Tf,Da,Hd=st({},nu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Da&&(Da&&t.type==="mousemove"?(Ef=t.screenX-Da.screenX,Tf=t.screenY-Da.screenY):Tf=Ef=0,Da=t),Ef)},movementY:function(t){return"movementY"in t?t.movementY:Tf}}),P0=Mn(Hd),OC=st({},Hd,{dataTransfer:0}),LC=Mn(OC),MC=st({},nu,{relatedTarget:0}),bf=Mn(MC),VC=st({},ta,{animationName:0,elapsedTime:0,pseudoElement:0}),FC=Mn(VC),UC=st({},ta,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$C=Mn(UC),jC=st({},ta,{data:0}),x0=Mn(jC),BC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},WC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=WC[t])?!!e[t]:!1}function cg(){return HC}var qC=st({},nu,{key:function(t){if(t.key){var e=BC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Tc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cg,charCode:function(t){return t.type==="keypress"?Tc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Tc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),GC=Mn(qC),KC=st({},Hd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),S0=Mn(KC),YC=st({},nu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cg}),QC=Mn(YC),XC=st({},ta,{propertyName:0,elapsedTime:0,pseudoElement:0}),JC=Mn(XC),ZC=st({},Hd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ek=Mn(ZC),tk=[9,13,27,32],dg=Gr&&"CompositionEvent"in window,rl=null;Gr&&"documentMode"in document&&(rl=document.documentMode);var nk=Gr&&"TextEvent"in window&&!rl,ME=Gr&&(!dg||rl&&8<rl&&11>=rl),C0=String.fromCharCode(32),k0=!1;function VE(t,e){switch(t){case"keyup":return tk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function FE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var fo=!1;function rk(t,e){switch(t){case"compositionend":return FE(e);case"keypress":return e.which!==32?null:(k0=!0,C0);case"textInput":return t=e.data,t===C0&&k0?null:t;default:return null}}function ik(t,e){if(fo)return t==="compositionend"||!dg&&VE(t,e)?(t=LE(),Ec=lg=Pi=null,fo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ME&&e.locale!=="ko"?null:e.data;default:return null}}var sk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function A0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!sk[t.type]:e==="textarea"}function UE(t,e,n,r){gE(r),e=Qc(e,"onChange"),0<e.length&&(n=new ug("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var il=null,kl=null;function ok(t){QE(t,0)}function qd(t){var e=go(t);if(uE(e))return t}function ak(t,e){if(t==="change")return e}var $E=!1;if(Gr){var If;if(Gr){var Pf="oninput"in document;if(!Pf){var N0=document.createElement("div");N0.setAttribute("oninput","return;"),Pf=typeof N0.oninput=="function"}If=Pf}else If=!1;$E=If&&(!document.documentMode||9<document.documentMode)}function R0(){il&&(il.detachEvent("onpropertychange",jE),kl=il=null)}function jE(t){if(t.propertyName==="value"&&qd(kl)){var e=[];UE(e,kl,t,rg(t)),_E(ok,e)}}function lk(t,e,n){t==="focusin"?(R0(),il=e,kl=n,il.attachEvent("onpropertychange",jE)):t==="focusout"&&R0()}function uk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return qd(kl)}function ck(t,e){if(t==="click")return qd(e)}function dk(t,e){if(t==="input"||t==="change")return qd(e)}function hk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ur=typeof Object.is=="function"?Object.is:hk;function Al(t,e){if(ur(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!mp.call(e,i)||!ur(t[i],e[i]))return!1}return!0}function D0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function O0(t,e){var n=D0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=D0(n)}}function BE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?BE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function zE(){for(var t=window,e=zc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=zc(t.document)}return e}function hg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function fk(t){var e=zE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&BE(n.ownerDocument.documentElement,n)){if(r!==null&&hg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=O0(n,s);var o=O0(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var pk=Gr&&"documentMode"in document&&11>=document.documentMode,po=null,Op=null,sl=null,Lp=!1;function L0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Lp||po==null||po!==zc(r)||(r=po,"selectionStart"in r&&hg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),sl&&Al(sl,r)||(sl=r,r=Qc(Op,"onSelect"),0<r.length&&(e=new ug("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=po)))}function Ju(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var mo={animationend:Ju("Animation","AnimationEnd"),animationiteration:Ju("Animation","AnimationIteration"),animationstart:Ju("Animation","AnimationStart"),transitionend:Ju("Transition","TransitionEnd")},xf={},WE={};Gr&&(WE=document.createElement("div").style,"AnimationEvent"in window||(delete mo.animationend.animation,delete mo.animationiteration.animation,delete mo.animationstart.animation),"TransitionEvent"in window||delete mo.transitionend.transition);function Gd(t){if(xf[t])return xf[t];if(!mo[t])return t;var e=mo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in WE)return xf[t]=e[n];return t}var HE=Gd("animationend"),qE=Gd("animationiteration"),GE=Gd("animationstart"),KE=Gd("transitionend"),YE=new Map,M0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ts(t,e){YE.set(t,e),js(e,[t])}for(var Sf=0;Sf<M0.length;Sf++){var Cf=M0[Sf],mk=Cf.toLowerCase(),gk=Cf[0].toUpperCase()+Cf.slice(1);ts(mk,"on"+gk)}ts(HE,"onAnimationEnd");ts(qE,"onAnimationIteration");ts(GE,"onAnimationStart");ts("dblclick","onDoubleClick");ts("focusin","onFocus");ts("focusout","onBlur");ts(KE,"onTransitionEnd");Vo("onMouseEnter",["mouseout","mouseover"]);Vo("onMouseLeave",["mouseout","mouseover"]);Vo("onPointerEnter",["pointerout","pointerover"]);Vo("onPointerLeave",["pointerout","pointerover"]);js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));js("onBeforeInput",["compositionend","keypress","textInput","paste"]);js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ha="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ha));function V0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,mC(r,e,void 0,t),t.currentTarget=null}function QE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;V0(i,a,c),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;V0(i,a,c),s=u}}}if(Hc)throw t=Ap,Hc=!1,Ap=null,t}function Ge(t,e){var n=e[$p];n===void 0&&(n=e[$p]=new Set);var r=t+"__bubble";n.has(r)||(XE(e,t,2,!1),n.add(r))}function kf(t,e,n){var r=0;e&&(r|=4),XE(n,t,r,e)}var Zu="_reactListening"+Math.random().toString(36).slice(2);function Nl(t){if(!t[Zu]){t[Zu]=!0,iE.forEach(function(n){n!=="selectionchange"&&(yk.has(n)||kf(n,!1,t),kf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Zu]||(e[Zu]=!0,kf("selectionchange",!1,e))}}function XE(t,e,n,r){switch(OE(e)){case 1:var i=NC;break;case 4:i=RC;break;default:i=ag}n=i.bind(null,e,n,t),i=void 0,!kp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Af(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=vs(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}_E(function(){var c=s,d=rg(n),h=[];e:{var m=YE.get(t);if(m!==void 0){var w=ug,_=t;switch(t){case"keypress":if(Tc(n)===0)break e;case"keydown":case"keyup":w=GC;break;case"focusin":_="focus",w=bf;break;case"focusout":_="blur",w=bf;break;case"beforeblur":case"afterblur":w=bf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=P0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=LC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=QC;break;case HE:case qE:case GE:w=FC;break;case KE:w=JC;break;case"scroll":w=DC;break;case"wheel":w=ek;break;case"copy":case"cut":case"paste":w=$C;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=S0}var P=(e&4)!==0,N=!P&&t==="scroll",E=P?m!==null?m+"Capture":null:m;P=[];for(var y=c,k;y!==null;){k=y;var D=k.stateNode;if(k.tag===5&&D!==null&&(k=D,E!==null&&(D=Pl(y,E),D!=null&&P.push(Rl(y,D,k)))),N)break;y=y.return}0<P.length&&(m=new w(m,_,null,n,d),h.push({event:m,listeners:P}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",m&&n!==Sp&&(_=n.relatedTarget||n.fromElement)&&(vs(_)||_[Kr]))break e;if((w||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,w?(_=n.relatedTarget||n.toElement,w=c,_=_?vs(_):null,_!==null&&(N=Bs(_),_!==N||_.tag!==5&&_.tag!==6)&&(_=null)):(w=null,_=c),w!==_)){if(P=P0,D="onMouseLeave",E="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(P=S0,D="onPointerLeave",E="onPointerEnter",y="pointer"),N=w==null?m:go(w),k=_==null?m:go(_),m=new P(D,y+"leave",w,n,d),m.target=N,m.relatedTarget=k,D=null,vs(d)===c&&(P=new P(E,y+"enter",_,n,d),P.target=k,P.relatedTarget=N,D=P),N=D,w&&_)t:{for(P=w,E=_,y=0,k=P;k;k=to(k))y++;for(k=0,D=E;D;D=to(D))k++;for(;0<y-k;)P=to(P),y--;for(;0<k-y;)E=to(E),k--;for(;y--;){if(P===E||E!==null&&P===E.alternate)break t;P=to(P),E=to(E)}P=null}else P=null;w!==null&&F0(h,m,w,P,!1),_!==null&&N!==null&&F0(h,N,_,P,!0)}}e:{if(m=c?go(c):window,w=m.nodeName&&m.nodeName.toLowerCase(),w==="select"||w==="input"&&m.type==="file")var M=ak;else if(A0(m))if($E)M=dk;else{M=uk;var V=lk}else(w=m.nodeName)&&w.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(M=ck);if(M&&(M=M(t,c))){UE(h,M,n,d);break e}V&&V(t,m,c),t==="focusout"&&(V=m._wrapperState)&&V.controlled&&m.type==="number"&&Tp(m,"number",m.value)}switch(V=c?go(c):window,t){case"focusin":(A0(V)||V.contentEditable==="true")&&(po=V,Op=c,sl=null);break;case"focusout":sl=Op=po=null;break;case"mousedown":Lp=!0;break;case"contextmenu":case"mouseup":case"dragend":Lp=!1,L0(h,n,d);break;case"selectionchange":if(pk)break;case"keydown":case"keyup":L0(h,n,d)}var I;if(dg)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else fo?VE(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(ME&&n.locale!=="ko"&&(fo||v!=="onCompositionStart"?v==="onCompositionEnd"&&fo&&(I=LE()):(Pi=d,lg="value"in Pi?Pi.value:Pi.textContent,fo=!0)),V=Qc(c,v),0<V.length&&(v=new x0(v,t,null,n,d),h.push({event:v,listeners:V}),I?v.data=I:(I=FE(n),I!==null&&(v.data=I)))),(I=nk?rk(t,n):ik(t,n))&&(c=Qc(c,"onBeforeInput"),0<c.length&&(d=new x0("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=I))}QE(h,e)})}function Rl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Qc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Pl(t,n),s!=null&&r.unshift(Rl(t,s,i)),s=Pl(t,e),s!=null&&r.push(Rl(t,s,i))),t=t.return}return r}function to(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function F0(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,i?(u=Pl(n,s),u!=null&&o.unshift(Rl(n,u,a))):i||(u=Pl(n,s),u!=null&&o.push(Rl(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var vk=/\r\n?/g,wk=/\u0000|\uFFFD/g;function U0(t){return(typeof t=="string"?t:""+t).replace(vk,`
`).replace(wk,"")}function ec(t,e,n){if(e=U0(e),U0(t)!==e&&n)throw Error(q(425))}function Xc(){}var Mp=null,Vp=null;function Fp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Up=typeof setTimeout=="function"?setTimeout:void 0,_k=typeof clearTimeout=="function"?clearTimeout:void 0,$0=typeof Promise=="function"?Promise:void 0,Ek=typeof queueMicrotask=="function"?queueMicrotask:typeof $0<"u"?function(t){return $0.resolve(null).then(t).catch(Tk)}:Up;function Tk(t){setTimeout(function(){throw t})}function Nf(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Cl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Cl(e)}function Oi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function j0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var na=Math.random().toString(36).slice(2),yr="__reactFiber$"+na,Dl="__reactProps$"+na,Kr="__reactContainer$"+na,$p="__reactEvents$"+na,bk="__reactListeners$"+na,Ik="__reactHandles$"+na;function vs(t){var e=t[yr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Kr]||n[yr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=j0(t);t!==null;){if(n=t[yr])return n;t=j0(t)}return e}t=n,n=t.parentNode}return null}function ru(t){return t=t[yr]||t[Kr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function go(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(q(33))}function Kd(t){return t[Dl]||null}var jp=[],yo=-1;function ns(t){return{current:t}}function Qe(t){0>yo||(t.current=jp[yo],jp[yo]=null,yo--)}function He(t,e){yo++,jp[yo]=t.current,t.current=e}var Hi={},nn=ns(Hi),Tn=ns(!1),Cs=Hi;function Fo(t,e){var n=t.type.contextTypes;if(!n)return Hi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function bn(t){return t=t.childContextTypes,t!=null}function Jc(){Qe(Tn),Qe(nn)}function B0(t,e,n){if(nn.current!==Hi)throw Error(q(168));He(nn,e),He(Tn,n)}function JE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(q(108,lC(t)||"Unknown",i));return st({},n,r)}function Zc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Hi,Cs=nn.current,He(nn,t),He(Tn,Tn.current),!0}function z0(t,e,n){var r=t.stateNode;if(!r)throw Error(q(169));n?(t=JE(t,e,Cs),r.__reactInternalMemoizedMergedChildContext=t,Qe(Tn),Qe(nn),He(nn,t)):Qe(Tn),He(Tn,n)}var Vr=null,Yd=!1,Rf=!1;function ZE(t){Vr===null?Vr=[t]:Vr.push(t)}function Pk(t){Yd=!0,ZE(t)}function rs(){if(!Rf&&Vr!==null){Rf=!0;var t=0,e=Ue;try{var n=Vr;for(Ue=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Vr=null,Yd=!1}catch(i){throw Vr!==null&&(Vr=Vr.slice(t+1)),IE(ig,rs),i}finally{Ue=e,Rf=!1}}return null}var vo=[],wo=0,ed=null,td=0,$n=[],jn=0,ks=null,Fr=1,Ur="";function fs(t,e){vo[wo++]=td,vo[wo++]=ed,ed=t,td=e}function eT(t,e,n){$n[jn++]=Fr,$n[jn++]=Ur,$n[jn++]=ks,ks=t;var r=Fr;t=Ur;var i=32-or(r)-1;r&=~(1<<i),n+=1;var s=32-or(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Fr=1<<32-or(e)+i|n<<i|r,Ur=s+t}else Fr=1<<s|n<<i|r,Ur=t}function fg(t){t.return!==null&&(fs(t,1),eT(t,1,0))}function pg(t){for(;t===ed;)ed=vo[--wo],vo[wo]=null,td=vo[--wo],vo[wo]=null;for(;t===ks;)ks=$n[--jn],$n[jn]=null,Ur=$n[--jn],$n[jn]=null,Fr=$n[--jn],$n[jn]=null}var Dn=null,An=null,Je=!1,tr=null;function tT(t,e){var n=Wn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function W0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Dn=t,An=Oi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Dn=t,An=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ks!==null?{id:Fr,overflow:Ur}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Wn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Dn=t,An=null,!0):!1;default:return!1}}function Bp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function zp(t){if(Je){var e=An;if(e){var n=e;if(!W0(t,e)){if(Bp(t))throw Error(q(418));e=Oi(n.nextSibling);var r=Dn;e&&W0(t,e)?tT(r,n):(t.flags=t.flags&-4097|2,Je=!1,Dn=t)}}else{if(Bp(t))throw Error(q(418));t.flags=t.flags&-4097|2,Je=!1,Dn=t}}}function H0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Dn=t}function tc(t){if(t!==Dn)return!1;if(!Je)return H0(t),Je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Fp(t.type,t.memoizedProps)),e&&(e=An)){if(Bp(t))throw nT(),Error(q(418));for(;e;)tT(t,e),e=Oi(e.nextSibling)}if(H0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){An=Oi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}An=null}}else An=Dn?Oi(t.stateNode.nextSibling):null;return!0}function nT(){for(var t=An;t;)t=Oi(t.nextSibling)}function Uo(){An=Dn=null,Je=!1}function mg(t){tr===null?tr=[t]:tr.push(t)}var xk=ri.ReactCurrentBatchConfig;function Oa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,t))}return t}function nc(t,e){throw t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function q0(t){var e=t._init;return e(t._payload)}function rT(t){function e(E,y){if(t){var k=E.deletions;k===null?(E.deletions=[y],E.flags|=16):k.push(y)}}function n(E,y){if(!t)return null;for(;y!==null;)e(E,y),y=y.sibling;return null}function r(E,y){for(E=new Map;y!==null;)y.key!==null?E.set(y.key,y):E.set(y.index,y),y=y.sibling;return E}function i(E,y){return E=Fi(E,y),E.index=0,E.sibling=null,E}function s(E,y,k){return E.index=k,t?(k=E.alternate,k!==null?(k=k.index,k<y?(E.flags|=2,y):k):(E.flags|=2,y)):(E.flags|=1048576,y)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function a(E,y,k,D){return y===null||y.tag!==6?(y=Uf(k,E.mode,D),y.return=E,y):(y=i(y,k),y.return=E,y)}function u(E,y,k,D){var M=k.type;return M===ho?d(E,y,k.props.children,D,k.key):y!==null&&(y.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===gi&&q0(M)===y.type)?(D=i(y,k.props),D.ref=Oa(E,y,k),D.return=E,D):(D=kc(k.type,k.key,k.props,null,E.mode,D),D.ref=Oa(E,y,k),D.return=E,D)}function c(E,y,k,D){return y===null||y.tag!==4||y.stateNode.containerInfo!==k.containerInfo||y.stateNode.implementation!==k.implementation?(y=$f(k,E.mode,D),y.return=E,y):(y=i(y,k.children||[]),y.return=E,y)}function d(E,y,k,D,M){return y===null||y.tag!==7?(y=Is(k,E.mode,D,M),y.return=E,y):(y=i(y,k),y.return=E,y)}function h(E,y,k){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Uf(""+y,E.mode,k),y.return=E,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Hu:return k=kc(y.type,y.key,y.props,null,E.mode,k),k.ref=Oa(E,null,y),k.return=E,k;case co:return y=$f(y,E.mode,k),y.return=E,y;case gi:var D=y._init;return h(E,D(y._payload),k)}if(za(y)||ka(y))return y=Is(y,E.mode,k,null),y.return=E,y;nc(E,y)}return null}function m(E,y,k,D){var M=y!==null?y.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return M!==null?null:a(E,y,""+k,D);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Hu:return k.key===M?u(E,y,k,D):null;case co:return k.key===M?c(E,y,k,D):null;case gi:return M=k._init,m(E,y,M(k._payload),D)}if(za(k)||ka(k))return M!==null?null:d(E,y,k,D,null);nc(E,k)}return null}function w(E,y,k,D,M){if(typeof D=="string"&&D!==""||typeof D=="number")return E=E.get(k)||null,a(y,E,""+D,M);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Hu:return E=E.get(D.key===null?k:D.key)||null,u(y,E,D,M);case co:return E=E.get(D.key===null?k:D.key)||null,c(y,E,D,M);case gi:var V=D._init;return w(E,y,k,V(D._payload),M)}if(za(D)||ka(D))return E=E.get(k)||null,d(y,E,D,M,null);nc(y,D)}return null}function _(E,y,k,D){for(var M=null,V=null,I=y,v=y=0,C=null;I!==null&&v<k.length;v++){I.index>v?(C=I,I=null):C=I.sibling;var A=m(E,I,k[v],D);if(A===null){I===null&&(I=C);break}t&&I&&A.alternate===null&&e(E,I),y=s(A,y,v),V===null?M=A:V.sibling=A,V=A,I=C}if(v===k.length)return n(E,I),Je&&fs(E,v),M;if(I===null){for(;v<k.length;v++)I=h(E,k[v],D),I!==null&&(y=s(I,y,v),V===null?M=I:V.sibling=I,V=I);return Je&&fs(E,v),M}for(I=r(E,I);v<k.length;v++)C=w(I,E,v,k[v],D),C!==null&&(t&&C.alternate!==null&&I.delete(C.key===null?v:C.key),y=s(C,y,v),V===null?M=C:V.sibling=C,V=C);return t&&I.forEach(function(R){return e(E,R)}),Je&&fs(E,v),M}function P(E,y,k,D){var M=ka(k);if(typeof M!="function")throw Error(q(150));if(k=M.call(k),k==null)throw Error(q(151));for(var V=M=null,I=y,v=y=0,C=null,A=k.next();I!==null&&!A.done;v++,A=k.next()){I.index>v?(C=I,I=null):C=I.sibling;var R=m(E,I,A.value,D);if(R===null){I===null&&(I=C);break}t&&I&&R.alternate===null&&e(E,I),y=s(R,y,v),V===null?M=R:V.sibling=R,V=R,I=C}if(A.done)return n(E,I),Je&&fs(E,v),M;if(I===null){for(;!A.done;v++,A=k.next())A=h(E,A.value,D),A!==null&&(y=s(A,y,v),V===null?M=A:V.sibling=A,V=A);return Je&&fs(E,v),M}for(I=r(E,I);!A.done;v++,A=k.next())A=w(I,E,v,A.value,D),A!==null&&(t&&A.alternate!==null&&I.delete(A.key===null?v:A.key),y=s(A,y,v),V===null?M=A:V.sibling=A,V=A);return t&&I.forEach(function(T){return e(E,T)}),Je&&fs(E,v),M}function N(E,y,k,D){if(typeof k=="object"&&k!==null&&k.type===ho&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case Hu:e:{for(var M=k.key,V=y;V!==null;){if(V.key===M){if(M=k.type,M===ho){if(V.tag===7){n(E,V.sibling),y=i(V,k.props.children),y.return=E,E=y;break e}}else if(V.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===gi&&q0(M)===V.type){n(E,V.sibling),y=i(V,k.props),y.ref=Oa(E,V,k),y.return=E,E=y;break e}n(E,V);break}else e(E,V);V=V.sibling}k.type===ho?(y=Is(k.props.children,E.mode,D,k.key),y.return=E,E=y):(D=kc(k.type,k.key,k.props,null,E.mode,D),D.ref=Oa(E,y,k),D.return=E,E=D)}return o(E);case co:e:{for(V=k.key;y!==null;){if(y.key===V)if(y.tag===4&&y.stateNode.containerInfo===k.containerInfo&&y.stateNode.implementation===k.implementation){n(E,y.sibling),y=i(y,k.children||[]),y.return=E,E=y;break e}else{n(E,y);break}else e(E,y);y=y.sibling}y=$f(k,E.mode,D),y.return=E,E=y}return o(E);case gi:return V=k._init,N(E,y,V(k._payload),D)}if(za(k))return _(E,y,k,D);if(ka(k))return P(E,y,k,D);nc(E,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,y!==null&&y.tag===6?(n(E,y.sibling),y=i(y,k),y.return=E,E=y):(n(E,y),y=Uf(k,E.mode,D),y.return=E,E=y),o(E)):n(E,y)}return N}var $o=rT(!0),iT=rT(!1),nd=ns(null),rd=null,_o=null,gg=null;function yg(){gg=_o=rd=null}function vg(t){var e=nd.current;Qe(nd),t._currentValue=e}function Wp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Co(t,e){rd=t,gg=_o=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_n=!0),t.firstContext=null)}function qn(t){var e=t._currentValue;if(gg!==t)if(t={context:t,memoizedValue:e,next:null},_o===null){if(rd===null)throw Error(q(308));_o=t,rd.dependencies={lanes:0,firstContext:t}}else _o=_o.next=t;return e}var ws=null;function wg(t){ws===null?ws=[t]:ws.push(t)}function sT(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,wg(e)):(n.next=i.next,i.next=n),e.interleaved=n,Yr(t,r)}function Yr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var yi=!1;function _g(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Li(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ae&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Yr(t,n)}return i=r.interleaved,i===null?(e.next=e,wg(r)):(e.next=i.next,i.next=e),r.interleaved=e,Yr(t,n)}function bc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sg(t,n)}}function G0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function id(t,e,n,r){var i=t.updateQueue;yi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=u))}if(s!==null){var h=i.baseState;o=0,d=c=u=null,a=s;do{var m=a.lane,w=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:w,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,P=a;switch(m=e,w=n,P.tag){case 1:if(_=P.payload,typeof _=="function"){h=_.call(w,h,m);break e}h=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=P.payload,m=typeof _=="function"?_.call(w,h,m):_,m==null)break e;h=st({},h,m);break e;case 2:yi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else w={eventTime:w,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=w,u=h):d=d.next=w,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(1);if(d===null&&(u=h),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ns|=o,t.lanes=o,t.memoizedState=h}}function K0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(q(191,i));i.call(r)}}}var iu={},br=ns(iu),Ol=ns(iu),Ll=ns(iu);function _s(t){if(t===iu)throw Error(q(174));return t}function Eg(t,e){switch(He(Ll,e),He(Ol,t),He(br,iu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ip(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ip(e,t)}Qe(br),He(br,e)}function jo(){Qe(br),Qe(Ol),Qe(Ll)}function aT(t){_s(Ll.current);var e=_s(br.current),n=Ip(e,t.type);e!==n&&(He(Ol,t),He(br,n))}function Tg(t){Ol.current===t&&(Qe(br),Qe(Ol))}var tt=ns(0);function sd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Df=[];function bg(){for(var t=0;t<Df.length;t++)Df[t]._workInProgressVersionPrimary=null;Df.length=0}var Ic=ri.ReactCurrentDispatcher,Of=ri.ReactCurrentBatchConfig,As=0,it=null,xt=null,Mt=null,od=!1,ol=!1,Ml=0,Sk=0;function Qt(){throw Error(q(321))}function Ig(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ur(t[n],e[n]))return!1;return!0}function Pg(t,e,n,r,i,s){if(As=s,it=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ic.current=t===null||t.memoizedState===null?Nk:Rk,t=n(r,i),ol){s=0;do{if(ol=!1,Ml=0,25<=s)throw Error(q(301));s+=1,Mt=xt=null,e.updateQueue=null,Ic.current=Dk,t=n(r,i)}while(ol)}if(Ic.current=ad,e=xt!==null&&xt.next!==null,As=0,Mt=xt=it=null,od=!1,e)throw Error(q(300));return t}function xg(){var t=Ml!==0;return Ml=0,t}function pr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?it.memoizedState=Mt=t:Mt=Mt.next=t,Mt}function Gn(){if(xt===null){var t=it.alternate;t=t!==null?t.memoizedState:null}else t=xt.next;var e=Mt===null?it.memoizedState:Mt.next;if(e!==null)Mt=e,xt=t;else{if(t===null)throw Error(q(310));xt=t,t={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},Mt===null?it.memoizedState=Mt=t:Mt=Mt.next=t}return Mt}function Vl(t,e){return typeof e=="function"?e(t):e}function Lf(t){var e=Gn(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=xt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,c=s;do{var d=c.lane;if((As&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=h,o=r):u=u.next=h,it.lanes|=d,Ns|=d}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=a,ur(r,e.memoizedState)||(_n=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,it.lanes|=s,Ns|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Mf(t){var e=Gn(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);ur(s,e.memoizedState)||(_n=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function lT(){}function uT(t,e){var n=it,r=Gn(),i=e(),s=!ur(r.memoizedState,i);if(s&&(r.memoizedState=i,_n=!0),r=r.queue,Sg(hT.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Mt!==null&&Mt.memoizedState.tag&1){if(n.flags|=2048,Fl(9,dT.bind(null,n,r,i,e),void 0,null),Ft===null)throw Error(q(349));As&30||cT(n,e,i)}return i}function cT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function dT(t,e,n,r){e.value=n,e.getSnapshot=r,fT(e)&&pT(t)}function hT(t,e,n){return n(function(){fT(e)&&pT(t)})}function fT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ur(t,n)}catch{return!0}}function pT(t){var e=Yr(t,1);e!==null&&ar(e,t,1,-1)}function Y0(t){var e=pr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vl,lastRenderedState:t},e.queue=t,t=t.dispatch=Ak.bind(null,it,t),[e.memoizedState,t]}function Fl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function mT(){return Gn().memoizedState}function Pc(t,e,n,r){var i=pr();it.flags|=t,i.memoizedState=Fl(1|e,n,void 0,r===void 0?null:r)}function Qd(t,e,n,r){var i=Gn();r=r===void 0?null:r;var s=void 0;if(xt!==null){var o=xt.memoizedState;if(s=o.destroy,r!==null&&Ig(r,o.deps)){i.memoizedState=Fl(e,n,s,r);return}}it.flags|=t,i.memoizedState=Fl(1|e,n,s,r)}function Q0(t,e){return Pc(8390656,8,t,e)}function Sg(t,e){return Qd(2048,8,t,e)}function gT(t,e){return Qd(4,2,t,e)}function yT(t,e){return Qd(4,4,t,e)}function vT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function wT(t,e,n){return n=n!=null?n.concat([t]):null,Qd(4,4,vT.bind(null,e,t),n)}function Cg(){}function _T(t,e){var n=Gn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ig(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ET(t,e){var n=Gn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ig(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function TT(t,e,n){return As&21?(ur(n,e)||(n=SE(),it.lanes|=n,Ns|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_n=!0),t.memoizedState=n)}function Ck(t,e){var n=Ue;Ue=n!==0&&4>n?n:4,t(!0);var r=Of.transition;Of.transition={};try{t(!1),e()}finally{Ue=n,Of.transition=r}}function bT(){return Gn().memoizedState}function kk(t,e,n){var r=Vi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},IT(t))PT(e,n);else if(n=sT(t,e,n,r),n!==null){var i=un();ar(n,t,r,i),xT(n,e,r)}}function Ak(t,e,n){var r=Vi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(IT(t))PT(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ur(a,o)){var u=e.interleaved;u===null?(i.next=i,wg(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=sT(t,e,i,r),n!==null&&(i=un(),ar(n,t,r,i),xT(n,e,r))}}function IT(t){var e=t.alternate;return t===it||e!==null&&e===it}function PT(t,e){ol=od=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function xT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sg(t,n)}}var ad={readContext:qn,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useInsertionEffect:Qt,useLayoutEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useMutableSource:Qt,useSyncExternalStore:Qt,useId:Qt,unstable_isNewReconciler:!1},Nk={readContext:qn,useCallback:function(t,e){return pr().memoizedState=[t,e===void 0?null:e],t},useContext:qn,useEffect:Q0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Pc(4194308,4,vT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Pc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Pc(4,2,t,e)},useMemo:function(t,e){var n=pr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=pr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=kk.bind(null,it,t),[r.memoizedState,t]},useRef:function(t){var e=pr();return t={current:t},e.memoizedState=t},useState:Y0,useDebugValue:Cg,useDeferredValue:function(t){return pr().memoizedState=t},useTransition:function(){var t=Y0(!1),e=t[0];return t=Ck.bind(null,t[1]),pr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=it,i=pr();if(Je){if(n===void 0)throw Error(q(407));n=n()}else{if(n=e(),Ft===null)throw Error(q(349));As&30||cT(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Q0(hT.bind(null,r,s,t),[t]),r.flags|=2048,Fl(9,dT.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=pr(),e=Ft.identifierPrefix;if(Je){var n=Ur,r=Fr;n=(r&~(1<<32-or(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ml++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Sk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Rk={readContext:qn,useCallback:_T,useContext:qn,useEffect:Sg,useImperativeHandle:wT,useInsertionEffect:gT,useLayoutEffect:yT,useMemo:ET,useReducer:Lf,useRef:mT,useState:function(){return Lf(Vl)},useDebugValue:Cg,useDeferredValue:function(t){var e=Gn();return TT(e,xt.memoizedState,t)},useTransition:function(){var t=Lf(Vl)[0],e=Gn().memoizedState;return[t,e]},useMutableSource:lT,useSyncExternalStore:uT,useId:bT,unstable_isNewReconciler:!1},Dk={readContext:qn,useCallback:_T,useContext:qn,useEffect:Sg,useImperativeHandle:wT,useInsertionEffect:gT,useLayoutEffect:yT,useMemo:ET,useReducer:Mf,useRef:mT,useState:function(){return Mf(Vl)},useDebugValue:Cg,useDeferredValue:function(t){var e=Gn();return xt===null?e.memoizedState=t:TT(e,xt.memoizedState,t)},useTransition:function(){var t=Mf(Vl)[0],e=Gn().memoizedState;return[t,e]},useMutableSource:lT,useSyncExternalStore:uT,useId:bT,unstable_isNewReconciler:!1};function Jn(t,e){if(t&&t.defaultProps){e=st({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Hp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:st({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Xd={isMounted:function(t){return(t=t._reactInternals)?Bs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=un(),i=Vi(t),s=Wr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Li(t,s,i),e!==null&&(ar(e,t,i,r),bc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=un(),i=Vi(t),s=Wr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Li(t,s,i),e!==null&&(ar(e,t,i,r),bc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=un(),r=Vi(t),i=Wr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Li(t,i,r),e!==null&&(ar(e,t,r,n),bc(e,t,r))}};function X0(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Al(n,r)||!Al(i,s):!0}function ST(t,e,n){var r=!1,i=Hi,s=e.contextType;return typeof s=="object"&&s!==null?s=qn(s):(i=bn(e)?Cs:nn.current,r=e.contextTypes,s=(r=r!=null)?Fo(t,i):Hi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Xd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function J0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Xd.enqueueReplaceState(e,e.state,null)}function qp(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},_g(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=qn(s):(s=bn(e)?Cs:nn.current,i.context=Fo(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Hp(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Xd.enqueueReplaceState(i,i.state,null),id(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Bo(t,e){try{var n="",r=e;do n+=aC(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Vf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Gp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Ok=typeof WeakMap=="function"?WeakMap:Map;function CT(t,e,n){n=Wr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ud||(ud=!0,rm=r),Gp(t,e)},n}function kT(t,e,n){n=Wr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Gp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Gp(t,e),typeof r!="function"&&(Mi===null?Mi=new Set([this]):Mi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Z0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Ok;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Kk.bind(null,t,e,n),e.then(t,t))}function ew(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function tw(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Wr(-1,1),e.tag=2,Li(n,e,1))),n.lanes|=1),t)}var Lk=ri.ReactCurrentOwner,_n=!1;function on(t,e,n,r){e.child=t===null?iT(e,null,n,r):$o(e,t.child,n,r)}function nw(t,e,n,r,i){n=n.render;var s=e.ref;return Co(e,i),r=Pg(t,e,n,r,s,i),n=xg(),t!==null&&!_n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Qr(t,e,i)):(Je&&n&&fg(e),e.flags|=1,on(t,e,r,i),e.child)}function rw(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Mg(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,AT(t,e,s,r,i)):(t=kc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Al,n(o,r)&&t.ref===e.ref)return Qr(t,e,i)}return e.flags|=1,t=Fi(s,r),t.ref=e.ref,t.return=e,e.child=t}function AT(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Al(s,r)&&t.ref===e.ref)if(_n=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(_n=!0);else return e.lanes=t.lanes,Qr(t,e,i)}return Kp(t,e,n,r,i)}function NT(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(To,kn),kn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,He(To,kn),kn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,He(To,kn),kn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,He(To,kn),kn|=r;return on(t,e,i,n),e.child}function RT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Kp(t,e,n,r,i){var s=bn(n)?Cs:nn.current;return s=Fo(e,s),Co(e,i),n=Pg(t,e,n,r,s,i),r=xg(),t!==null&&!_n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Qr(t,e,i)):(Je&&r&&fg(e),e.flags|=1,on(t,e,n,i),e.child)}function iw(t,e,n,r,i){if(bn(n)){var s=!0;Zc(e)}else s=!1;if(Co(e,i),e.stateNode===null)xc(t,e),ST(e,n,r),qp(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=qn(c):(c=bn(n)?Cs:nn.current,c=Fo(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&J0(e,o,r,c),yi=!1;var m=e.memoizedState;o.state=m,id(e,r,o,i),u=e.memoizedState,a!==r||m!==u||Tn.current||yi?(typeof d=="function"&&(Hp(e,n,d,r),u=e.memoizedState),(a=yi||X0(e,n,a,r,m,u,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,oT(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Jn(e.type,a),o.props=c,h=e.pendingProps,m=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=qn(u):(u=bn(n)?Cs:nn.current,u=Fo(e,u));var w=n.getDerivedStateFromProps;(d=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||m!==u)&&J0(e,o,r,u),yi=!1,m=e.memoizedState,o.state=m,id(e,r,o,i);var _=e.memoizedState;a!==h||m!==_||Tn.current||yi?(typeof w=="function"&&(Hp(e,n,w,r),_=e.memoizedState),(c=yi||X0(e,n,c,r,m,_,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Yp(t,e,n,r,s,i)}function Yp(t,e,n,r,i,s){RT(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&z0(e,n,!1),Qr(t,e,s);r=e.stateNode,Lk.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=$o(e,t.child,null,s),e.child=$o(e,null,a,s)):on(t,e,a,s),e.memoizedState=r.state,i&&z0(e,n,!0),e.child}function DT(t){var e=t.stateNode;e.pendingContext?B0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&B0(t,e.context,!1),Eg(t,e.containerInfo)}function sw(t,e,n,r,i){return Uo(),mg(i),e.flags|=256,on(t,e,n,r),e.child}var Qp={dehydrated:null,treeContext:null,retryLane:0};function Xp(t){return{baseLanes:t,cachePool:null,transitions:null}}function OT(t,e,n){var r=e.pendingProps,i=tt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),He(tt,i&1),t===null)return zp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=eh(o,r,0,null),t=Is(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Xp(n),e.memoizedState=Qp,t):kg(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Mk(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Fi(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Fi(a,s):(s=Is(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Xp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Qp,r}return s=t.child,t=s.sibling,r=Fi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function kg(t,e){return e=eh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function rc(t,e,n,r){return r!==null&&mg(r),$o(e,t.child,null,n),t=kg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Mk(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Vf(Error(q(422))),rc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=eh({mode:"visible",children:r.children},i,0,null),s=Is(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&$o(e,t.child,null,o),e.child.memoizedState=Xp(o),e.memoizedState=Qp,s);if(!(e.mode&1))return rc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(q(419)),r=Vf(s,r,void 0),rc(t,e,o,r)}if(a=(o&t.childLanes)!==0,_n||a){if(r=Ft,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Yr(t,i),ar(r,t,i,-1))}return Lg(),r=Vf(Error(q(421))),rc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Yk.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,An=Oi(i.nextSibling),Dn=e,Je=!0,tr=null,t!==null&&($n[jn++]=Fr,$n[jn++]=Ur,$n[jn++]=ks,Fr=t.id,Ur=t.overflow,ks=e),e=kg(e,r.children),e.flags|=4096,e)}function ow(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Wp(t.return,e,n)}function Ff(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function LT(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(on(t,e,r.children,n),r=tt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ow(t,n,e);else if(t.tag===19)ow(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(He(tt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&sd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ff(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&sd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ff(e,!0,n,null,s);break;case"together":Ff(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function xc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Qr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ns|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,n=Fi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Fi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Vk(t,e,n){switch(e.tag){case 3:DT(e),Uo();break;case 5:aT(e);break;case 1:bn(e.type)&&Zc(e);break;case 4:Eg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;He(nd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(He(tt,tt.current&1),e.flags|=128,null):n&e.child.childLanes?OT(t,e,n):(He(tt,tt.current&1),t=Qr(t,e,n),t!==null?t.sibling:null);He(tt,tt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return LT(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),He(tt,tt.current),r)break;return null;case 22:case 23:return e.lanes=0,NT(t,e,n)}return Qr(t,e,n)}var MT,Jp,VT,FT;MT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Jp=function(){};VT=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,_s(br.current);var s=null;switch(n){case"input":i=_p(t,i),r=_p(t,r),s=[];break;case"select":i=st({},i,{value:void 0}),r=st({},r,{value:void 0}),s=[];break;case"textarea":i=bp(t,i),r=bp(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Xc)}Pp(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(bl.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(bl.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Ge("scroll",t),s||a===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};FT=function(t,e,n,r){n!==r&&(e.flags|=4)};function La(t,e){if(!Je)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Xt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Fk(t,e,n){var r=e.pendingProps;switch(pg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xt(e),null;case 1:return bn(e.type)&&Jc(),Xt(e),null;case 3:return r=e.stateNode,jo(),Qe(Tn),Qe(nn),bg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(tc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,tr!==null&&(om(tr),tr=null))),Jp(t,e),Xt(e),null;case 5:Tg(e);var i=_s(Ll.current);if(n=e.type,t!==null&&e.stateNode!=null)VT(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(q(166));return Xt(e),null}if(t=_s(br.current),tc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[yr]=e,r[Dl]=s,t=(e.mode&1)!==0,n){case"dialog":Ge("cancel",r),Ge("close",r);break;case"iframe":case"object":case"embed":Ge("load",r);break;case"video":case"audio":for(i=0;i<Ha.length;i++)Ge(Ha[i],r);break;case"source":Ge("error",r);break;case"img":case"image":case"link":Ge("error",r),Ge("load",r);break;case"details":Ge("toggle",r);break;case"input":m0(r,s),Ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ge("invalid",r);break;case"textarea":y0(r,s),Ge("invalid",r)}Pp(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&ec(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ec(r.textContent,a,t),i=["children",""+a]):bl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ge("scroll",r)}switch(n){case"input":qu(r),g0(r,s,!0);break;case"textarea":qu(r),v0(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Xc)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=hE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[yr]=e,t[Dl]=r,MT(t,e,!1,!1),e.stateNode=t;e:{switch(o=xp(n,r),n){case"dialog":Ge("cancel",t),Ge("close",t),i=r;break;case"iframe":case"object":case"embed":Ge("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ha.length;i++)Ge(Ha[i],t);i=r;break;case"source":Ge("error",t),i=r;break;case"img":case"image":case"link":Ge("error",t),Ge("load",t),i=r;break;case"details":Ge("toggle",t),i=r;break;case"input":m0(t,r),i=_p(t,r),Ge("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=st({},r,{value:void 0}),Ge("invalid",t);break;case"textarea":y0(t,r),i=bp(t,r),Ge("invalid",t);break;default:i=r}Pp(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?mE(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&fE(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Il(t,u):typeof u=="number"&&Il(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(bl.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Ge("scroll",t):u!=null&&Zm(t,s,u,o))}switch(n){case"input":qu(t),g0(t,r,!1);break;case"textarea":qu(t),v0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Wi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Io(t,!!r.multiple,s,!1):r.defaultValue!=null&&Io(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Xc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Xt(e),null;case 6:if(t&&e.stateNode!=null)FT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(q(166));if(n=_s(Ll.current),_s(br.current),tc(e)){if(r=e.stateNode,n=e.memoizedProps,r[yr]=e,(s=r.nodeValue!==n)&&(t=Dn,t!==null))switch(t.tag){case 3:ec(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ec(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[yr]=e,e.stateNode=r}return Xt(e),null;case 13:if(Qe(tt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Je&&An!==null&&e.mode&1&&!(e.flags&128))nT(),Uo(),e.flags|=98560,s=!1;else if(s=tc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(q(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(q(317));s[yr]=e}else Uo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Xt(e),s=!1}else tr!==null&&(om(tr),tr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||tt.current&1?kt===0&&(kt=3):Lg())),e.updateQueue!==null&&(e.flags|=4),Xt(e),null);case 4:return jo(),Jp(t,e),t===null&&Nl(e.stateNode.containerInfo),Xt(e),null;case 10:return vg(e.type._context),Xt(e),null;case 17:return bn(e.type)&&Jc(),Xt(e),null;case 19:if(Qe(tt),s=e.memoizedState,s===null)return Xt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)La(s,!1);else{if(kt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=sd(t),o!==null){for(e.flags|=128,La(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return He(tt,tt.current&1|2),e.child}t=t.sibling}s.tail!==null&&mt()>zo&&(e.flags|=128,r=!0,La(s,!1),e.lanes=4194304)}else{if(!r)if(t=sd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),La(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Je)return Xt(e),null}else 2*mt()-s.renderingStartTime>zo&&n!==1073741824&&(e.flags|=128,r=!0,La(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=mt(),e.sibling=null,n=tt.current,He(tt,r?n&1|2:n&1),e):(Xt(e),null);case 22:case 23:return Og(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?kn&1073741824&&(Xt(e),e.subtreeFlags&6&&(e.flags|=8192)):Xt(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function Uk(t,e){switch(pg(e),e.tag){case 1:return bn(e.type)&&Jc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return jo(),Qe(Tn),Qe(nn),bg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Tg(e),null;case 13:if(Qe(tt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));Uo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Qe(tt),null;case 4:return jo(),null;case 10:return vg(e.type._context),null;case 22:case 23:return Og(),null;case 24:return null;default:return null}}var ic=!1,en=!1,$k=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Eo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ct(t,e,r)}else n.current=null}function Zp(t,e,n){try{n()}catch(r){ct(t,e,r)}}var aw=!1;function jk(t,e){if(Mp=Kc,t=zE(),hg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,c=0,d=0,h=t,m=null;t:for(;;){for(var w;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(u=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(w=h.firstChild)!==null;)m=h,h=w;for(;;){if(h===t)break t;if(m===n&&++c===i&&(a=o),m===s&&++d===r&&(u=o),(w=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=w}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Vp={focusedElem:t,selectionRange:n},Kc=!1,ie=e;ie!==null;)if(e=ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ie=t;else for(;ie!==null;){e=ie;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var P=_.memoizedProps,N=_.memoizedState,E=e.stateNode,y=E.getSnapshotBeforeUpdate(e.elementType===e.type?P:Jn(e.type,P),N);E.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(D){ct(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}return _=aw,aw=!1,_}function al(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Zp(e,n,s)}i=i.next}while(i!==r)}}function Jd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function em(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function UT(t){var e=t.alternate;e!==null&&(t.alternate=null,UT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[yr],delete e[Dl],delete e[$p],delete e[bk],delete e[Ik])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function $T(t){return t.tag===5||t.tag===3||t.tag===4}function lw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$T(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function tm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Xc));else if(r!==4&&(t=t.child,t!==null))for(tm(t,e,n),t=t.sibling;t!==null;)tm(t,e,n),t=t.sibling}function nm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(nm(t,e,n),t=t.sibling;t!==null;)nm(t,e,n),t=t.sibling}var jt=null,Zn=!1;function hi(t,e,n){for(n=n.child;n!==null;)jT(t,e,n),n=n.sibling}function jT(t,e,n){if(Tr&&typeof Tr.onCommitFiberUnmount=="function")try{Tr.onCommitFiberUnmount(Wd,n)}catch{}switch(n.tag){case 5:en||Eo(n,e);case 6:var r=jt,i=Zn;jt=null,hi(t,e,n),jt=r,Zn=i,jt!==null&&(Zn?(t=jt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):jt.removeChild(n.stateNode));break;case 18:jt!==null&&(Zn?(t=jt,n=n.stateNode,t.nodeType===8?Nf(t.parentNode,n):t.nodeType===1&&Nf(t,n),Cl(t)):Nf(jt,n.stateNode));break;case 4:r=jt,i=Zn,jt=n.stateNode.containerInfo,Zn=!0,hi(t,e,n),jt=r,Zn=i;break;case 0:case 11:case 14:case 15:if(!en&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Zp(n,e,o),i=i.next}while(i!==r)}hi(t,e,n);break;case 1:if(!en&&(Eo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ct(n,e,a)}hi(t,e,n);break;case 21:hi(t,e,n);break;case 22:n.mode&1?(en=(r=en)||n.memoizedState!==null,hi(t,e,n),en=r):hi(t,e,n);break;default:hi(t,e,n)}}function uw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new $k),e.forEach(function(r){var i=Qk.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Qn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:jt=a.stateNode,Zn=!1;break e;case 3:jt=a.stateNode.containerInfo,Zn=!0;break e;case 4:jt=a.stateNode.containerInfo,Zn=!0;break e}a=a.return}if(jt===null)throw Error(q(160));jT(s,o,i),jt=null,Zn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){ct(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)BT(e,t),e=e.sibling}function BT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Qn(e,t),hr(t),r&4){try{al(3,t,t.return),Jd(3,t)}catch(P){ct(t,t.return,P)}try{al(5,t,t.return)}catch(P){ct(t,t.return,P)}}break;case 1:Qn(e,t),hr(t),r&512&&n!==null&&Eo(n,n.return);break;case 5:if(Qn(e,t),hr(t),r&512&&n!==null&&Eo(n,n.return),t.flags&32){var i=t.stateNode;try{Il(i,"")}catch(P){ct(t,t.return,P)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&cE(i,s),xp(a,o);var c=xp(a,s);for(o=0;o<u.length;o+=2){var d=u[o],h=u[o+1];d==="style"?mE(i,h):d==="dangerouslySetInnerHTML"?fE(i,h):d==="children"?Il(i,h):Zm(i,d,h,c)}switch(a){case"input":Ep(i,s);break;case"textarea":dE(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var w=s.value;w!=null?Io(i,!!s.multiple,w,!1):m!==!!s.multiple&&(s.defaultValue!=null?Io(i,!!s.multiple,s.defaultValue,!0):Io(i,!!s.multiple,s.multiple?[]:"",!1))}i[Dl]=s}catch(P){ct(t,t.return,P)}}break;case 6:if(Qn(e,t),hr(t),r&4){if(t.stateNode===null)throw Error(q(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(P){ct(t,t.return,P)}}break;case 3:if(Qn(e,t),hr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Cl(e.containerInfo)}catch(P){ct(t,t.return,P)}break;case 4:Qn(e,t),hr(t);break;case 13:Qn(e,t),hr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Rg=mt())),r&4&&uw(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(en=(c=en)||d,Qn(e,t),en=c):Qn(e,t),hr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(ie=t,d=t.child;d!==null;){for(h=ie=d;ie!==null;){switch(m=ie,w=m.child,m.tag){case 0:case 11:case 14:case 15:al(4,m,m.return);break;case 1:Eo(m,m.return);var _=m.stateNode;if(typeof _.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(P){ct(r,n,P)}}break;case 5:Eo(m,m.return);break;case 22:if(m.memoizedState!==null){dw(h);continue}}w!==null?(w.return=m,ie=w):dw(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,u=h.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=pE("display",o))}catch(P){ct(t,t.return,P)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(P){ct(t,t.return,P)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Qn(e,t),hr(t),r&4&&uw(t);break;case 21:break;default:Qn(e,t),hr(t)}}function hr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if($T(n)){var r=n;break e}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Il(i,""),r.flags&=-33);var s=lw(t);nm(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=lw(t);tm(t,a,o);break;default:throw Error(q(161))}}catch(u){ct(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Bk(t,e,n){ie=t,zT(t)}function zT(t,e,n){for(var r=(t.mode&1)!==0;ie!==null;){var i=ie,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ic;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||en;a=ic;var c=en;if(ic=o,(en=u)&&!c)for(ie=i;ie!==null;)o=ie,u=o.child,o.tag===22&&o.memoizedState!==null?hw(i):u!==null?(u.return=o,ie=u):hw(i);for(;s!==null;)ie=s,zT(s),s=s.sibling;ie=i,ic=a,en=c}cw(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ie=s):cw(t)}}function cw(t){for(;ie!==null;){var e=ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:en||Jd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!en)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Jn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&K0(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}K0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Cl(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}en||e.flags&512&&em(e)}catch(m){ct(e,e.return,m)}}if(e===t){ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,ie=n;break}ie=e.return}}function dw(t){for(;ie!==null;){var e=ie;if(e===t){ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ie=n;break}ie=e.return}}function hw(t){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Jd(4,e)}catch(u){ct(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){ct(e,i,u)}}var s=e.return;try{em(e)}catch(u){ct(e,s,u)}break;case 5:var o=e.return;try{em(e)}catch(u){ct(e,o,u)}}}catch(u){ct(e,e.return,u)}if(e===t){ie=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ie=a;break}ie=e.return}}var zk=Math.ceil,ld=ri.ReactCurrentDispatcher,Ag=ri.ReactCurrentOwner,Hn=ri.ReactCurrentBatchConfig,Ae=0,Ft=null,_t=null,Ht=0,kn=0,To=ns(0),kt=0,Ul=null,Ns=0,Zd=0,Ng=0,ll=null,yn=null,Rg=0,zo=1/0,Mr=null,ud=!1,rm=null,Mi=null,sc=!1,xi=null,cd=0,ul=0,im=null,Sc=-1,Cc=0;function un(){return Ae&6?mt():Sc!==-1?Sc:Sc=mt()}function Vi(t){return t.mode&1?Ae&2&&Ht!==0?Ht&-Ht:xk.transition!==null?(Cc===0&&(Cc=SE()),Cc):(t=Ue,t!==0||(t=window.event,t=t===void 0?16:OE(t.type)),t):1}function ar(t,e,n,r){if(50<ul)throw ul=0,im=null,Error(q(185));tu(t,n,r),(!(Ae&2)||t!==Ft)&&(t===Ft&&(!(Ae&2)&&(Zd|=n),kt===4&&wi(t,Ht)),In(t,r),n===1&&Ae===0&&!(e.mode&1)&&(zo=mt()+500,Yd&&rs()))}function In(t,e){var n=t.callbackNode;xC(t,e);var r=Gc(t,t===Ft?Ht:0);if(r===0)n!==null&&E0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&E0(n),e===1)t.tag===0?Pk(fw.bind(null,t)):ZE(fw.bind(null,t)),Ek(function(){!(Ae&6)&&rs()}),n=null;else{switch(CE(r)){case 1:n=ig;break;case 4:n=PE;break;case 16:n=qc;break;case 536870912:n=xE;break;default:n=qc}n=XT(n,WT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function WT(t,e){if(Sc=-1,Cc=0,Ae&6)throw Error(q(327));var n=t.callbackNode;if(ko()&&t.callbackNode!==n)return null;var r=Gc(t,t===Ft?Ht:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=dd(t,r);else{e=r;var i=Ae;Ae|=2;var s=qT();(Ft!==t||Ht!==e)&&(Mr=null,zo=mt()+500,bs(t,e));do try{qk();break}catch(a){HT(t,a)}while(1);yg(),ld.current=s,Ae=i,_t!==null?e=0:(Ft=null,Ht=0,e=kt)}if(e!==0){if(e===2&&(i=Np(t),i!==0&&(r=i,e=sm(t,i))),e===1)throw n=Ul,bs(t,0),wi(t,r),In(t,mt()),n;if(e===6)wi(t,r);else{if(i=t.current.alternate,!(r&30)&&!Wk(i)&&(e=dd(t,r),e===2&&(s=Np(t),s!==0&&(r=s,e=sm(t,s))),e===1))throw n=Ul,bs(t,0),wi(t,r),In(t,mt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(q(345));case 2:ps(t,yn,Mr);break;case 3:if(wi(t,r),(r&130023424)===r&&(e=Rg+500-mt(),10<e)){if(Gc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){un(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Up(ps.bind(null,t,yn,Mr),e);break}ps(t,yn,Mr);break;case 4:if(wi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-or(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=mt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*zk(r/1960))-r,10<r){t.timeoutHandle=Up(ps.bind(null,t,yn,Mr),r);break}ps(t,yn,Mr);break;case 5:ps(t,yn,Mr);break;default:throw Error(q(329))}}}return In(t,mt()),t.callbackNode===n?WT.bind(null,t):null}function sm(t,e){var n=ll;return t.current.memoizedState.isDehydrated&&(bs(t,e).flags|=256),t=dd(t,e),t!==2&&(e=yn,yn=n,e!==null&&om(e)),t}function om(t){yn===null?yn=t:yn.push.apply(yn,t)}function Wk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ur(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function wi(t,e){for(e&=~Ng,e&=~Zd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-or(e),r=1<<n;t[n]=-1,e&=~r}}function fw(t){if(Ae&6)throw Error(q(327));ko();var e=Gc(t,0);if(!(e&1))return In(t,mt()),null;var n=dd(t,e);if(t.tag!==0&&n===2){var r=Np(t);r!==0&&(e=r,n=sm(t,r))}if(n===1)throw n=Ul,bs(t,0),wi(t,e),In(t,mt()),n;if(n===6)throw Error(q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ps(t,yn,Mr),In(t,mt()),null}function Dg(t,e){var n=Ae;Ae|=1;try{return t(e)}finally{Ae=n,Ae===0&&(zo=mt()+500,Yd&&rs())}}function Rs(t){xi!==null&&xi.tag===0&&!(Ae&6)&&ko();var e=Ae;Ae|=1;var n=Hn.transition,r=Ue;try{if(Hn.transition=null,Ue=1,t)return t()}finally{Ue=r,Hn.transition=n,Ae=e,!(Ae&6)&&rs()}}function Og(){kn=To.current,Qe(To)}function bs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,_k(n)),_t!==null)for(n=_t.return;n!==null;){var r=n;switch(pg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Jc();break;case 3:jo(),Qe(Tn),Qe(nn),bg();break;case 5:Tg(r);break;case 4:jo();break;case 13:Qe(tt);break;case 19:Qe(tt);break;case 10:vg(r.type._context);break;case 22:case 23:Og()}n=n.return}if(Ft=t,_t=t=Fi(t.current,null),Ht=kn=e,kt=0,Ul=null,Ng=Zd=Ns=0,yn=ll=null,ws!==null){for(e=0;e<ws.length;e++)if(n=ws[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ws=null}return t}function HT(t,e){do{var n=_t;try{if(yg(),Ic.current=ad,od){for(var r=it.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}od=!1}if(As=0,Mt=xt=it=null,ol=!1,Ml=0,Ag.current=null,n===null||n.return===null){kt=1,Ul=e,_t=null;break}e:{var s=t,o=n.return,a=n,u=e;if(e=Ht,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var w=ew(o);if(w!==null){w.flags&=-257,tw(w,o,a,s,e),w.mode&1&&Z0(s,c,e),e=w,u=c;var _=e.updateQueue;if(_===null){var P=new Set;P.add(u),e.updateQueue=P}else _.add(u);break e}else{if(!(e&1)){Z0(s,c,e),Lg();break e}u=Error(q(426))}}else if(Je&&a.mode&1){var N=ew(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),tw(N,o,a,s,e),mg(Bo(u,a));break e}}s=u=Bo(u,a),kt!==4&&(kt=2),ll===null?ll=[s]:ll.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var E=CT(s,u,e);G0(s,E);break e;case 1:a=u;var y=s.type,k=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Mi===null||!Mi.has(k)))){s.flags|=65536,e&=-e,s.lanes|=e;var D=kT(s,a,e);G0(s,D);break e}}s=s.return}while(s!==null)}KT(n)}catch(M){e=M,_t===n&&n!==null&&(_t=n=n.return);continue}break}while(1)}function qT(){var t=ld.current;return ld.current=ad,t===null?ad:t}function Lg(){(kt===0||kt===3||kt===2)&&(kt=4),Ft===null||!(Ns&268435455)&&!(Zd&268435455)||wi(Ft,Ht)}function dd(t,e){var n=Ae;Ae|=2;var r=qT();(Ft!==t||Ht!==e)&&(Mr=null,bs(t,e));do try{Hk();break}catch(i){HT(t,i)}while(1);if(yg(),Ae=n,ld.current=r,_t!==null)throw Error(q(261));return Ft=null,Ht=0,kt}function Hk(){for(;_t!==null;)GT(_t)}function qk(){for(;_t!==null&&!yC();)GT(_t)}function GT(t){var e=QT(t.alternate,t,kn);t.memoizedProps=t.pendingProps,e===null?KT(t):_t=e,Ag.current=null}function KT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Uk(n,e),n!==null){n.flags&=32767,_t=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{kt=6,_t=null;return}}else if(n=Fk(n,e,kn),n!==null){_t=n;return}if(e=e.sibling,e!==null){_t=e;return}_t=e=t}while(e!==null);kt===0&&(kt=5)}function ps(t,e,n){var r=Ue,i=Hn.transition;try{Hn.transition=null,Ue=1,Gk(t,e,n,r)}finally{Hn.transition=i,Ue=r}return null}function Gk(t,e,n,r){do ko();while(xi!==null);if(Ae&6)throw Error(q(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(q(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(SC(t,s),t===Ft&&(_t=Ft=null,Ht=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||sc||(sc=!0,XT(qc,function(){return ko(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Hn.transition,Hn.transition=null;var o=Ue;Ue=1;var a=Ae;Ae|=4,Ag.current=null,jk(t,n),BT(n,t),fk(Vp),Kc=!!Mp,Vp=Mp=null,t.current=n,Bk(n),vC(),Ae=a,Ue=o,Hn.transition=s}else t.current=n;if(sc&&(sc=!1,xi=t,cd=i),s=t.pendingLanes,s===0&&(Mi=null),EC(n.stateNode),In(t,mt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ud)throw ud=!1,t=rm,rm=null,t;return cd&1&&t.tag!==0&&ko(),s=t.pendingLanes,s&1?t===im?ul++:(ul=0,im=t):ul=0,rs(),null}function ko(){if(xi!==null){var t=CE(cd),e=Hn.transition,n=Ue;try{if(Hn.transition=null,Ue=16>t?16:t,xi===null)var r=!1;else{if(t=xi,xi=null,cd=0,Ae&6)throw Error(q(331));var i=Ae;for(Ae|=4,ie=t.current;ie!==null;){var s=ie,o=s.child;if(ie.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(ie=c;ie!==null;){var d=ie;switch(d.tag){case 0:case 11:case 15:al(8,d,s)}var h=d.child;if(h!==null)h.return=d,ie=h;else for(;ie!==null;){d=ie;var m=d.sibling,w=d.return;if(UT(d),d===c){ie=null;break}if(m!==null){m.return=w,ie=m;break}ie=w}}}var _=s.alternate;if(_!==null){var P=_.child;if(P!==null){_.child=null;do{var N=P.sibling;P.sibling=null,P=N}while(P!==null)}}ie=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ie=o;else e:for(;ie!==null;){if(s=ie,s.flags&2048)switch(s.tag){case 0:case 11:case 15:al(9,s,s.return)}var E=s.sibling;if(E!==null){E.return=s.return,ie=E;break e}ie=s.return}}var y=t.current;for(ie=y;ie!==null;){o=ie;var k=o.child;if(o.subtreeFlags&2064&&k!==null)k.return=o,ie=k;else e:for(o=y;ie!==null;){if(a=ie,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Jd(9,a)}}catch(M){ct(a,a.return,M)}if(a===o){ie=null;break e}var D=a.sibling;if(D!==null){D.return=a.return,ie=D;break e}ie=a.return}}if(Ae=i,rs(),Tr&&typeof Tr.onPostCommitFiberRoot=="function")try{Tr.onPostCommitFiberRoot(Wd,t)}catch{}r=!0}return r}finally{Ue=n,Hn.transition=e}}return!1}function pw(t,e,n){e=Bo(n,e),e=CT(t,e,1),t=Li(t,e,1),e=un(),t!==null&&(tu(t,1,e),In(t,e))}function ct(t,e,n){if(t.tag===3)pw(t,t,n);else for(;e!==null;){if(e.tag===3){pw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Mi===null||!Mi.has(r))){t=Bo(n,t),t=kT(e,t,1),e=Li(e,t,1),t=un(),e!==null&&(tu(e,1,t),In(e,t));break}}e=e.return}}function Kk(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=un(),t.pingedLanes|=t.suspendedLanes&n,Ft===t&&(Ht&n)===n&&(kt===4||kt===3&&(Ht&130023424)===Ht&&500>mt()-Rg?bs(t,0):Ng|=n),In(t,e)}function YT(t,e){e===0&&(t.mode&1?(e=Yu,Yu<<=1,!(Yu&130023424)&&(Yu=4194304)):e=1);var n=un();t=Yr(t,e),t!==null&&(tu(t,e,n),In(t,n))}function Yk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),YT(t,n)}function Qk(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(e),YT(t,n)}var QT;QT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Tn.current)_n=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return _n=!1,Vk(t,e,n);_n=!!(t.flags&131072)}else _n=!1,Je&&e.flags&1048576&&eT(e,td,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;xc(t,e),t=e.pendingProps;var i=Fo(e,nn.current);Co(e,n),i=Pg(null,e,r,t,i,n);var s=xg();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,bn(r)?(s=!0,Zc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,_g(e),i.updater=Xd,e.stateNode=i,i._reactInternals=e,qp(e,r,t,n),e=Yp(null,e,r,!0,s,n)):(e.tag=0,Je&&s&&fg(e),on(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(xc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Jk(r),t=Jn(r,t),i){case 0:e=Kp(null,e,r,t,n);break e;case 1:e=iw(null,e,r,t,n);break e;case 11:e=nw(null,e,r,t,n);break e;case 14:e=rw(null,e,r,Jn(r.type,t),n);break e}throw Error(q(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Jn(r,i),Kp(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Jn(r,i),iw(t,e,r,i,n);case 3:e:{if(DT(e),t===null)throw Error(q(387));r=e.pendingProps,s=e.memoizedState,i=s.element,oT(t,e),id(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Bo(Error(q(423)),e),e=sw(t,e,r,n,i);break e}else if(r!==i){i=Bo(Error(q(424)),e),e=sw(t,e,r,n,i);break e}else for(An=Oi(e.stateNode.containerInfo.firstChild),Dn=e,Je=!0,tr=null,n=iT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Uo(),r===i){e=Qr(t,e,n);break e}on(t,e,r,n)}e=e.child}return e;case 5:return aT(e),t===null&&zp(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Fp(r,i)?o=null:s!==null&&Fp(r,s)&&(e.flags|=32),RT(t,e),on(t,e,o,n),e.child;case 6:return t===null&&zp(e),null;case 13:return OT(t,e,n);case 4:return Eg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=$o(e,null,r,n):on(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Jn(r,i),nw(t,e,r,i,n);case 7:return on(t,e,e.pendingProps,n),e.child;case 8:return on(t,e,e.pendingProps.children,n),e.child;case 12:return on(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,He(nd,r._currentValue),r._currentValue=o,s!==null)if(ur(s.value,o)){if(s.children===i.children&&!Tn.current){e=Qr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Wr(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Wp(s.return,n,e),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(q(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Wp(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}on(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Co(e,n),i=qn(i),r=r(i),e.flags|=1,on(t,e,r,n),e.child;case 14:return r=e.type,i=Jn(r,e.pendingProps),i=Jn(r.type,i),rw(t,e,r,i,n);case 15:return AT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Jn(r,i),xc(t,e),e.tag=1,bn(r)?(t=!0,Zc(e)):t=!1,Co(e,n),ST(e,r,i),qp(e,r,i,n),Yp(null,e,r,!0,t,n);case 19:return LT(t,e,n);case 22:return NT(t,e,n)}throw Error(q(156,e.tag))};function XT(t,e){return IE(t,e)}function Xk(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(t,e,n,r){return new Xk(t,e,n,r)}function Mg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Jk(t){if(typeof t=="function")return Mg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===tg)return 11;if(t===ng)return 14}return 2}function Fi(t,e){var n=t.alternate;return n===null?(n=Wn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function kc(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Mg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ho:return Is(n.children,i,s,e);case eg:o=8,i|=8;break;case gp:return t=Wn(12,n,e,i|2),t.elementType=gp,t.lanes=s,t;case yp:return t=Wn(13,n,e,i),t.elementType=yp,t.lanes=s,t;case vp:return t=Wn(19,n,e,i),t.elementType=vp,t.lanes=s,t;case aE:return eh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case sE:o=10;break e;case oE:o=9;break e;case tg:o=11;break e;case ng:o=14;break e;case gi:o=16,r=null;break e}throw Error(q(130,t==null?t:typeof t,""))}return e=Wn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Is(t,e,n,r){return t=Wn(7,t,r,e),t.lanes=n,t}function eh(t,e,n,r){return t=Wn(22,t,r,e),t.elementType=aE,t.lanes=n,t.stateNode={isHidden:!1},t}function Uf(t,e,n){return t=Wn(6,t,null,e),t.lanes=n,t}function $f(t,e,n){return e=Wn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Zk(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_f(0),this.expirationTimes=_f(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_f(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vg(t,e,n,r,i,s,o,a,u){return t=new Zk(t,e,n,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Wn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_g(s),t}function eA(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:co,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function JT(t){if(!t)return Hi;t=t._reactInternals;e:{if(Bs(t)!==t||t.tag!==1)throw Error(q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(bn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(t.tag===1){var n=t.type;if(bn(n))return JE(t,n,e)}return e}function ZT(t,e,n,r,i,s,o,a,u){return t=Vg(n,r,!0,t,i,s,o,a,u),t.context=JT(null),n=t.current,r=un(),i=Vi(n),s=Wr(r,i),s.callback=e??null,Li(n,s,i),t.current.lanes=i,tu(t,i,r),In(t,r),t}function th(t,e,n,r){var i=e.current,s=un(),o=Vi(i);return n=JT(n),e.context===null?e.context=n:e.pendingContext=n,e=Wr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Li(i,e,o),t!==null&&(ar(t,i,o,s),bc(t,i,o)),o}function hd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function mw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Fg(t,e){mw(t,e),(t=t.alternate)&&mw(t,e)}function tA(){return null}var eb=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ug(t){this._internalRoot=t}nh.prototype.render=Ug.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));th(t,e,null,null)};nh.prototype.unmount=Ug.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Rs(function(){th(null,t,null,null)}),e[Kr]=null}};function nh(t){this._internalRoot=t}nh.prototype.unstable_scheduleHydration=function(t){if(t){var e=NE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<vi.length&&e!==0&&e<vi[n].priority;n++);vi.splice(n,0,t),n===0&&DE(t)}};function $g(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function rh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function gw(){}function nA(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=hd(o);s.call(c)}}var o=ZT(e,r,t,0,null,!1,!1,"",gw);return t._reactRootContainer=o,t[Kr]=o.current,Nl(t.nodeType===8?t.parentNode:t),Rs(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=hd(u);a.call(c)}}var u=Vg(t,0,!1,null,null,!1,!1,"",gw);return t._reactRootContainer=u,t[Kr]=u.current,Nl(t.nodeType===8?t.parentNode:t),Rs(function(){th(e,u,n,r)}),u}function ih(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=hd(o);a.call(u)}}th(e,o,t,i)}else o=nA(n,e,t,i,r);return hd(o)}kE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Wa(e.pendingLanes);n!==0&&(sg(e,n|1),In(e,mt()),!(Ae&6)&&(zo=mt()+500,rs()))}break;case 13:Rs(function(){var r=Yr(t,1);if(r!==null){var i=un();ar(r,t,1,i)}}),Fg(t,1)}};og=function(t){if(t.tag===13){var e=Yr(t,134217728);if(e!==null){var n=un();ar(e,t,134217728,n)}Fg(t,134217728)}};AE=function(t){if(t.tag===13){var e=Vi(t),n=Yr(t,e);if(n!==null){var r=un();ar(n,t,e,r)}Fg(t,e)}};NE=function(){return Ue};RE=function(t,e){var n=Ue;try{return Ue=t,e()}finally{Ue=n}};Cp=function(t,e,n){switch(e){case"input":if(Ep(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Kd(r);if(!i)throw Error(q(90));uE(r),Ep(r,i)}}}break;case"textarea":dE(t,n);break;case"select":e=n.value,e!=null&&Io(t,!!n.multiple,e,!1)}};vE=Dg;wE=Rs;var rA={usingClientEntryPoint:!1,Events:[ru,go,Kd,gE,yE,Dg]},Ma={findFiberByHostInstance:vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iA={bundleType:Ma.bundleType,version:Ma.version,rendererPackageName:Ma.rendererPackageName,rendererConfig:Ma.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ri.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=TE(t),t===null?null:t.stateNode},findFiberByHostInstance:Ma.findFiberByHostInstance||tA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oc.isDisabled&&oc.supportsFiber)try{Wd=oc.inject(iA),Tr=oc}catch{}}Ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rA;Ln.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$g(e))throw Error(q(200));return eA(t,e,null,n)};Ln.createRoot=function(t,e){if(!$g(t))throw Error(q(299));var n=!1,r="",i=eb;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Vg(t,1,!1,null,null,n,!1,r,i),t[Kr]=e.current,Nl(t.nodeType===8?t.parentNode:t),new Ug(e)};Ln.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=TE(e),t=t===null?null:t.stateNode,t};Ln.flushSync=function(t){return Rs(t)};Ln.hydrate=function(t,e,n){if(!rh(e))throw Error(q(200));return ih(null,t,e,!0,n)};Ln.hydrateRoot=function(t,e,n){if(!$g(t))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=eb;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=ZT(e,null,t,1,n??null,i,!1,s,o),t[Kr]=e.current,Nl(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new nh(e)};Ln.render=function(t,e,n){if(!rh(e))throw Error(q(200));return ih(null,t,e,!1,n)};Ln.unmountComponentAtNode=function(t){if(!rh(t))throw Error(q(40));return t._reactRootContainer?(Rs(function(){ih(null,null,t,!1,function(){t._reactRootContainer=null,t[Kr]=null})}),!0):!1};Ln.unstable_batchedUpdates=Dg;Ln.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!rh(n))throw Error(q(200));if(t==null||t._reactInternals===void 0)throw Error(q(38));return ih(t,e,n,!1,r)};Ln.version="18.3.1-next-f1338f8080-20240426";function tb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tb)}catch(t){console.error(t)}}tb(),tE.exports=Ln;var nb=tE.exports,yw=nb;pp.createRoot=yw.createRoot,pp.hydrateRoot=yw.hydrateRoot;/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $l(){return $l=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$l.apply(this,arguments)}var Si;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Si||(Si={}));const vw="popstate";function sA(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return am("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:ib(i)}return aA(e,n,null,t)}function At(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function rb(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function oA(){return Math.random().toString(36).substr(2,8)}function ww(t,e){return{usr:t.state,key:t.key,idx:e}}function am(t,e,n,r){return n===void 0&&(n=null),$l({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ra(e):e,{state:n,key:e&&e.key||r||oA()})}function ib(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ra(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function aA(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Si.Pop,u=null,c=d();c==null&&(c=0,o.replaceState($l({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Si.Pop;let N=d(),E=N==null?null:N-c;c=N,u&&u({action:a,location:P.location,delta:E})}function m(N,E){a=Si.Push;let y=am(P.location,N,E);n&&n(y,N),c=d()+1;let k=ww(y,c),D=P.createHref(y);try{o.pushState(k,"",D)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(D)}s&&u&&u({action:a,location:P.location,delta:1})}function w(N,E){a=Si.Replace;let y=am(P.location,N,E);n&&n(y,N),c=d();let k=ww(y,c),D=P.createHref(y);o.replaceState(k,"",D),s&&u&&u({action:a,location:P.location,delta:0})}function _(N){let E=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof N=="string"?N:ib(N);return y=y.replace(/ $/,"%20"),At(E,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,E)}let P={get action(){return a},get location(){return t(i,o)},listen(N){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(vw,h),u=N,()=>{i.removeEventListener(vw,h),u=null}},createHref(N){return e(i,N)},createURL:_,encodeLocation(N){let E=_(N);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:m,replace:w,go(N){return o.go(N)}};return P}var _w;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(_w||(_w={}));function lA(t,e,n){return n===void 0&&(n="/"),uA(t,e,n,!1)}function uA(t,e,n,r){let i=typeof e=="string"?ra(e):e,s=ab(i.pathname||"/",n);if(s==null)return null;let o=sb(t);cA(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let c=EA(s);a=wA(o[u],c,r)}return a}function sb(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(At(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=Ps([r,u.relativePath]),d=n.concat(u);s.children&&s.children.length>0&&(At(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),sb(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:yA(c,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of ob(s.path))i(s,o,u)}),e}function ob(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=ob(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function cA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:vA(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const dA=/^:[\w-]+$/,hA=3,fA=2,pA=1,mA=10,gA=-2,Ew=t=>t==="*";function yA(t,e){let n=t.split("/"),r=n.length;return n.some(Ew)&&(r+=gA),e&&(r+=fA),n.filter(i=>!Ew(i)).reduce((i,s)=>i+(dA.test(s)?hA:s===""?pA:mA),r)}function vA(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function wA(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],c=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=Tw({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},d),m=u.route;if(!h&&c&&n&&!r[r.length-1].route.index&&(h=Tw({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},d)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:Ps([s,h.pathname]),pathnameBase:SA(Ps([s,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(s=Ps([s,h.pathnameBase]))}return o}function Tw(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=_A(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:m,isOptional:w}=d;if(m==="*"){let P=a[h]||"";o=s.slice(0,s.length-P.length).replace(/(.)\/+$/,"$1")}const _=a[h];return w&&!_?c[m]=void 0:c[m]=(_||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function _A(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),rb(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function EA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return rb(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ab(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function TA(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ra(t):t;return{pathname:n?n.startsWith("/")?n:bA(n,e):e,search:CA(r),hash:kA(i)}}function bA(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function jf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function IA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function PA(t,e){let n=IA(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function xA(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=ra(t):(i=$l({},t),At(!i.pathname||!i.pathname.includes("?"),jf("?","pathname","search",i)),At(!i.pathname||!i.pathname.includes("#"),jf("#","pathname","hash",i)),At(!i.search||!i.search.includes("#"),jf("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;i.pathname=m.join("/")}a=h>=0?e[h]:"/"}let u=TA(i,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||d)&&(u.pathname+="/"),u}const Ps=t=>t.join("/").replace(/\/\/+/g,"/"),SA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),CA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,kA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function AA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const lb=["post","put","patch","delete"];new Set(lb);const NA=["get",...lb];new Set(NA);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jl(){return jl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jl.apply(this,arguments)}const jg=O.createContext(null),RA=O.createContext(null),sh=O.createContext(null),oh=O.createContext(null),zs=O.createContext({outlet:null,matches:[],isDataRoute:!1}),ub=O.createContext(null);function ah(){return O.useContext(oh)!=null}function lh(){return ah()||At(!1),O.useContext(oh).location}function cb(t){O.useContext(sh).static||O.useLayoutEffect(t)}function xn(){let{isDataRoute:t}=O.useContext(zs);return t?HA():DA()}function DA(){ah()||At(!1);let t=O.useContext(jg),{basename:e,future:n,navigator:r}=O.useContext(sh),{matches:i}=O.useContext(zs),{pathname:s}=lh(),o=JSON.stringify(PA(i,n.v7_relativeSplatPath)),a=O.useRef(!1);return cb(()=>{a.current=!0}),O.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=xA(c,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Ps([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,s,t])}function Bg(){let{matches:t}=O.useContext(zs),e=t[t.length-1];return e?e.params:{}}function OA(t,e){return LA(t,e)}function LA(t,e,n,r){ah()||At(!1);let{navigator:i}=O.useContext(sh),{matches:s}=O.useContext(zs),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let c=lh(),d;if(e){var h;let N=typeof e=="string"?ra(e):e;u==="/"||(h=N.pathname)!=null&&h.startsWith(u)||At(!1),d=N}else d=c;let m=d.pathname||"/",w=m;if(u!=="/"){let N=u.replace(/^\//,"").split("/");w="/"+m.replace(/^\//,"").split("/").slice(N.length).join("/")}let _=lA(t,{pathname:w}),P=$A(_&&_.map(N=>Object.assign({},N,{params:Object.assign({},a,N.params),pathname:Ps([u,i.encodeLocation?i.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?u:Ps([u,i.encodeLocation?i.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),s,n,r);return e&&P?O.createElement(oh.Provider,{value:{location:jl({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Si.Pop}},P):P}function MA(){let t=WA(),e=AA(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:i},n):null,s)}const VA=O.createElement(MA,null);class FA extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(zs.Provider,{value:this.props.routeContext},O.createElement(ub.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function UA(t){let{routeContext:e,match:n,children:r}=t,i=O.useContext(jg);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(zs.Provider,{value:e},r)}function $A(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||At(!1),o=o.slice(0,Math.min(o.length,d+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:m,errors:w}=n,_=h.route.loader&&m[h.route.id]===void 0&&(!w||w[h.route.id]===void 0);if(h.route.lazy||_){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,m)=>{let w,_=!1,P=null,N=null;n&&(w=a&&h.route.id?a[h.route.id]:void 0,P=h.route.errorElement||VA,u&&(c<0&&m===0?(qA("route-fallback",!1),_=!0,N=null):c===m&&(_=!0,N=h.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,m+1)),y=()=>{let k;return w?k=P:_?k=N:h.route.Component?k=O.createElement(h.route.Component,null):h.route.element?k=h.route.element:k=d,O.createElement(UA,{match:h,routeContext:{outlet:d,matches:E,isDataRoute:n!=null},children:k})};return n&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?O.createElement(FA,{location:n.location,revalidation:n.revalidation,component:P,error:w,children:y(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):y()},null)}var db=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(db||{}),fd=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(fd||{});function jA(t){let e=O.useContext(jg);return e||At(!1),e}function BA(t){let e=O.useContext(RA);return e||At(!1),e}function zA(t){let e=O.useContext(zs);return e||At(!1),e}function hb(t){let e=zA(),n=e.matches[e.matches.length-1];return n.route.id||At(!1),n.route.id}function WA(){var t;let e=O.useContext(ub),n=BA(fd.UseRouteError),r=hb(fd.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function HA(){let{router:t}=jA(db.UseNavigateStable),e=hb(fd.UseNavigateStable),n=O.useRef(!1);return cb(()=>{n.current=!0}),O.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,jl({fromRouteId:e},s)))},[t,e])}const bw={};function qA(t,e,n){!e&&!bw[t]&&(bw[t]=!0)}function Xn(t){At(!1)}function GA(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Si.Pop,navigator:s,static:o=!1,future:a}=t;ah()&&At(!1);let u=e.replace(/^\/*/,"/"),c=O.useMemo(()=>({basename:u,navigator:s,static:o,future:jl({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=ra(r));let{pathname:d="/",search:h="",hash:m="",state:w=null,key:_="default"}=r,P=O.useMemo(()=>{let N=ab(d,u);return N==null?null:{location:{pathname:N,search:h,hash:m,state:w,key:_},navigationType:i}},[u,d,h,m,w,_,i]);return P==null?null:O.createElement(sh.Provider,{value:c},O.createElement(oh.Provider,{children:n,value:P}))}function KA(t){let{children:e,location:n}=t;return OA(lm(e),n)}new Promise(()=>{});function lm(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(r,i)=>{if(!O.isValidElement(r))return;let s=[...e,i];if(r.type===O.Fragment){n.push.apply(n,lm(r.props.children,s));return}r.type!==Xn&&At(!1),!r.props.index||!r.props.children||At(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=lm(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const YA="6";try{window.__reactRouterVersion=YA}catch{}const QA="startTransition",Iw=KS[QA];function XA(t){let{basename:e,children:n,future:r,window:i}=t,s=O.useRef();s.current==null&&(s.current=sA({window:i,v5Compat:!0}));let o=s.current,[a,u]=O.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=O.useCallback(h=>{c&&Iw?Iw(()=>u(h)):u(h)},[u,c]);return O.useLayoutEffect(()=>o.listen(d),[o,d]),O.createElement(GA,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var Pw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Pw||(Pw={}));var xw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(xw||(xw={}));/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),fb=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ZA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=O.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},u)=>O.createElement("svg",{ref:u,...ZA,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:fb("lucide",i),...a},[...o.map(([c,d])=>O.createElement(c,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=(t,e)=>{const n=O.forwardRef(({className:r,...i},s)=>O.createElement(eN,{ref:s,iconNode:e,className:fb(`lucide-${JA(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=Oe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qi=Oe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=Oe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=Oe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cw=Oe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kw=Oe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=Oe("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zg=Oe("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=Oe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=Oe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=Oe("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pb=Oe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wg=Oe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=Oe("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=Oe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aw=Oe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=Oe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uh=Oe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lN=Oe("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nw=Oe("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ch=Oe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pd=Oe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ou=Oe("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=Oe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=Oe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hg=Oe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=Oe("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=Oe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=Oe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gi=Oe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const um=Oe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=Oe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),gb=O.createContext(),hN=()=>{const t=O.useContext(gb);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t},dl={blue:{name:"Ocean Blue",primary:"#2563eb",secondary:"#06b6d4",accent:"#3b82f6"},green:{name:"Medical Green",primary:"#059669",secondary:"#10b981",accent:"#34d399"},purple:{name:"Royal Purple",primary:"#7c3aed",secondary:"#8b5cf6",accent:"#a78bfa"},teal:{name:"Dental Teal",primary:"#0d9488",secondary:"#14b8a6",accent:"#5eead4"},indigo:{name:"Professional Indigo",primary:"#4f46e5",secondary:"#6366f1",accent:"#818cf8"},rose:{name:"Warm Rose",primary:"#e11d48",secondary:"#f43f5e",accent:"#fb7185"}},fN=({children:t})=>{const[e,n]=O.useState(!1),[r,i]=O.useState("blue"),[s,o]=O.useState(null);O.useEffect(()=>{const m=localStorage.getItem("dental-app-theme");if(m){const _=JSON.parse(m);n(_.isDarkMode||!1),i(_.currentColor||"blue"),o(_.customColor||null)}const w=window.matchMedia("(prefers-color-scheme: dark)").matches;m||n(w)},[]),O.useEffect(()=>{const m={isDarkMode:e,currentColor:r,customColor:s};localStorage.setItem("dental-app-theme",JSON.stringify(m));const w=document.documentElement;e?w.classList.add("dark"):w.classList.remove("dark");const _=s||dl[r];w.style.setProperty("--color-primary",_.primary),w.style.setProperty("--color-secondary",_.secondary),w.style.setProperty("--color-accent",_.accent);const P=document.querySelector('meta[name="theme-color"]');P&&P.setAttribute("content",_.primary)},[e,r,s]);const h={isDarkMode:e,currentColor:r,customColor:s,themeColors:dl,toggleDarkMode:()=>{n(!e)},changeColorTheme:m=>{i(m),o(null)},setCustomColorTheme:m=>{o(m),i("custom")},getCurrentColors:()=>s||dl[r]};return p(gb.Provider,{value:h,children:t})},pN=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},mN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},vb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let m=(a&15)<<2|c>>6,w=c&63;u||(w=64,o||(m=64)),r.push(n[d],n[h],n[m],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):mN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new gN;const m=s<<2|a>>4;if(r.push(m),c!==64){const w=a<<4&240|c>>2;if(r.push(w),h!==64){const _=c<<6&192|h;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class gN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yN=function(t){const e=yb(t);return vb.encodeByteArray(e,!0)},md=function(t){return yN(t).replace(/\./g,"")},wb=function(t){try{return vb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN=()=>vN().__FIREBASE_DEFAULTS__,_N=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},EN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&wb(t[1]);return e&&JSON.parse(e)},dh=()=>{try{return pN()||wN()||_N()||EN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_b=t=>{var e,n;return(n=(e=dh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},TN=t=>{const e=_b(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Eb=()=>{var t;return(t=dh())===null||t===void 0?void 0:t.config},Tb=t=>{var e;return(e=dh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sa(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function bb(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[md(JSON.stringify(n)),md(JSON.stringify(o)),a].join(".")}const hl={};function PN(){const t={prod:[],emulator:[]};for(const e of Object.keys(hl))hl[e]?t.emulator.push(e):t.prod.push(e);return t}function xN(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Rw=!1;function Ib(t,e){if(typeof window>"u"||typeof document>"u"||!sa(window.location.host)||hl[t]===e||hl[t]||Rw)return;hl[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",s=PN().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,w){m.setAttribute("width","24"),m.setAttribute("id",w),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function c(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Rw=!0,o()},m}function d(m,w){m.setAttribute("id",w),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function h(){const m=xN(r),w=n("text"),_=document.getElementById(w)||document.createElement("span"),P=n("learnmore"),N=document.getElementById(P)||document.createElement("a"),E=n("preprendIcon"),y=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const k=m.element;a(k),d(N,P);const D=c();u(y,E),k.append(y,_,N,D),document.body.appendChild(k)}s?(_.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function SN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())}function CN(){var t;const e=(t=dh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function AN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function NN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function RN(){const t=rn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function DN(){return!CN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ON(){try{return typeof indexedDB=="object"}catch{return!1}}function LN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function p5(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN="FirebaseError";class ii extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=MN,Object.setPrototypeOf(this,ii.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,au.prototype.create)}}class au{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?VN(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ii(i,a,r)}}function VN(t,e){return t.replace(FN,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const FN=/\{\$([^}]+)}/g;function UN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ds(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Dw(s)&&Dw(o)){if(!Ds(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Dw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function qa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ga(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function $N(t,e){const n=new jN(t,e);return n.subscribe.bind(n)}class jN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");BN(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Bf),i.error===void 0&&(i.error=Bf),i.complete===void 0&&(i.complete=Bf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Bf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(t){return t&&t._delegate?t._delegate:t}class Os{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new bN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HN(e))try{this.getOrInitializeService({instanceIdentifier:ms})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ms){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ms){return this.instances.has(e)}getOptions(e=ms){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:WN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ms){return this.component?this.component.multipleInstances?e:ms:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function WN(t){return t===ms?void 0:t}function HN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ee||(Ee={}));const GN={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},KN=Ee.INFO,YN={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},QN=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=YN[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gg{constructor(e){this.name=e,this._logLevel=KN,this._logHandler=QN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?GN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}const XN=(t,e)=>e.some(n=>t instanceof n);let Ow,Lw;function JN(){return Ow||(Ow=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZN(){return Lw||(Lw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Pb=new WeakMap,cm=new WeakMap,xb=new WeakMap,zf=new WeakMap,Kg=new WeakMap;function e2(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Hr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Pb.set(n,t)}).catch(()=>{}),Kg.set(e,t),e}function t2(t){if(cm.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});cm.set(t,e)}let dm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return cm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||xb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function n2(t){dm=t(dm)}function r2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Wf(this),e,...n);return xb.set(r,e.sort?e.sort():[e]),Hr(r)}:ZN().includes(t)?function(...e){return t.apply(Wf(this),e),Hr(Pb.get(this))}:function(...e){return Hr(t.apply(Wf(this),e))}}function i2(t){return typeof t=="function"?r2(t):(t instanceof IDBTransaction&&t2(t),XN(t,JN())?new Proxy(t,dm):t)}function Hr(t){if(t instanceof IDBRequest)return e2(t);if(zf.has(t))return zf.get(t);const e=i2(t);return e!==t&&(zf.set(t,e),Kg.set(e,t)),e}const Wf=t=>Kg.get(t);function s2(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Hr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Hr(o.result),u.oldVersion,u.newVersion,Hr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}function m5(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),Hr(n).then(()=>{})}const o2=["get","getKey","getAll","getAllKeys","count"],a2=["put","add","delete","clear"],Hf=new Map;function Mw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Hf.get(e))return Hf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=a2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||o2.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&u.done]))[0]};return Hf.set(e,s),s}n2(t=>({...t,get:(e,n,r)=>Mw(e,n)||t.get(e,n,r),has:(e,n)=>!!Mw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(u2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function u2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const hm="@firebase/app",Vw="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr=new Gg("@firebase/app"),c2="@firebase/app-compat",d2="@firebase/analytics-compat",h2="@firebase/analytics",f2="@firebase/app-check-compat",p2="@firebase/app-check",m2="@firebase/auth",g2="@firebase/auth-compat",y2="@firebase/database",v2="@firebase/data-connect",w2="@firebase/database-compat",_2="@firebase/functions",E2="@firebase/functions-compat",T2="@firebase/installations",b2="@firebase/installations-compat",I2="@firebase/messaging",P2="@firebase/messaging-compat",x2="@firebase/performance",S2="@firebase/performance-compat",C2="@firebase/remote-config",k2="@firebase/remote-config-compat",A2="@firebase/storage",N2="@firebase/storage-compat",R2="@firebase/firestore",D2="@firebase/ai",O2="@firebase/firestore-compat",L2="firebase",M2="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm="[DEFAULT]",V2={[hm]:"fire-core",[c2]:"fire-core-compat",[h2]:"fire-analytics",[d2]:"fire-analytics-compat",[p2]:"fire-app-check",[f2]:"fire-app-check-compat",[m2]:"fire-auth",[g2]:"fire-auth-compat",[y2]:"fire-rtdb",[v2]:"fire-data-connect",[w2]:"fire-rtdb-compat",[_2]:"fire-fn",[E2]:"fire-fn-compat",[T2]:"fire-iid",[b2]:"fire-iid-compat",[I2]:"fire-fcm",[P2]:"fire-fcm-compat",[x2]:"fire-perf",[S2]:"fire-perf-compat",[C2]:"fire-rc",[k2]:"fire-rc-compat",[A2]:"fire-gcs",[N2]:"fire-gcs-compat",[R2]:"fire-fst",[O2]:"fire-fst-compat",[D2]:"fire-vertex","fire-js":"fire-js",[L2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd=new Map,F2=new Map,pm=new Map;function Fw(t,e){try{t.container.addComponent(e)}catch(n){Xr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Wo(t){const e=t.name;if(pm.has(e))return Xr.debug(`There were multiple attempts to register component ${e}.`),!1;pm.set(e,t);for(const n of gd.values())Fw(n,t);for(const n of F2.values())Fw(n,t);return!0}function Yg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ct(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ui=new au("app","Firebase",U2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Os("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ui.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=M2;function Sb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:fm,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Ui.create("bad-app-name",{appName:String(i)});if(n||(n=Eb()),!n)throw Ui.create("no-options");const s=gd.get(i);if(s){if(Ds(n,s.options)&&Ds(r,s.config))return s;throw Ui.create("duplicate-app",{appName:i})}const o=new qN(i);for(const u of pm.values())o.addComponent(u);const a=new $2(n,r,o);return gd.set(i,a),a}function Cb(t=fm){const e=gd.get(t);if(!e&&t===fm&&Eb())return Sb();if(!e)throw Ui.create("no-app",{appName:t});return e}function $i(t,e,n){var r;let i=(r=V2[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xr.warn(a.join(" "));return}Wo(new Os(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2="firebase-heartbeat-database",B2=1,Bl="firebase-heartbeat-store";let qf=null;function kb(){return qf||(qf=s2(j2,B2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Bl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ui.create("idb-open",{originalErrorMessage:t.message})})),qf}async function z2(t){try{const n=(await kb()).transaction(Bl),r=await n.objectStore(Bl).get(Ab(t));return await n.done,r}catch(e){if(e instanceof ii)Xr.warn(e.message);else{const n=Ui.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xr.warn(n.message)}}}async function Uw(t,e){try{const r=(await kb()).transaction(Bl,"readwrite");await r.objectStore(Bl).put(e,Ab(t)),await r.done}catch(n){if(n instanceof ii)Xr.warn(n.message);else{const r=Ui.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Xr.warn(r.message)}}}function Ab(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2=1024,H2=30;class q2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new K2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=$w();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>H2){const o=Y2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Xr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=$w(),{heartbeatsToSend:r,unsentEntries:i}=G2(this._heartbeatsCache.heartbeats),s=md(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Xr.warn(n),""}}}function $w(){return new Date().toISOString().substring(0,10)}function G2(t,e=W2){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),jw(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),jw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class K2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ON()?LN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await z2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Uw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Uw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function jw(t){return md(JSON.stringify({version:2,heartbeats:t})).length}function Y2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(t){Wo(new Os("platform-logger",e=>new l2(e),"PRIVATE")),Wo(new Os("heartbeat",e=>new q2(e),"PRIVATE")),$i(hm,Vw,t),$i(hm,Vw,"esm2017"),$i("fire-js","")}Q2("");function Qg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Nb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const X2=Nb,Rb=new au("auth","Firebase",Nb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd=new Gg("@firebase/auth");function J2(t,...e){yd.logLevel<=Ee.WARN&&yd.warn(`Auth (${aa}): ${t}`,...e)}function Ac(t,...e){yd.logLevel<=Ee.ERROR&&yd.error(`Auth (${aa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(t,...e){throw Jg(t,...e)}function Pn(t,...e){return Jg(t,...e)}function Xg(t,e,n){const r=Object.assign(Object.assign({},X2()),{[e]:n});return new au("auth","Firebase",r).create(e,{appName:t.name})}function cn(t){return Xg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hh(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Kn(t,"argument-error"),Xg(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Jg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Rb.create(t,...e)}function X(t,e,...n){if(!t)throw Jg(e,...n)}function $r(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ac(e),new Error(e)}function Jr(t,e){t||$r(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zl(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Zg(){return Bw()==="http:"||Bw()==="https:"}function Bw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Zg()||AN()||"connection"in navigator)?navigator.onLine:!0}function eR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Jr(n>e,"Short delay should be less than long delay!"),this.isMobile=SN()||NN()}get(){return Z2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(t,e){Jr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$r("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$r("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$r("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],rR=new lu(3e4,6e4);function Dt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ot(t,e,n,r,i={}){return Ob(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=oa(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},s);return kN()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&sa(t.emulatorConfig.host)&&(c.credentials="include"),Db.fetch()(await Lb(t,t.config.apiHost,n,a),c)})}async function Ob(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},tR),e);try{const i=new sR(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Ka(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ka(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Ka(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Ka(t,"user-disabled",o);const d=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Xg(t,d,c);Kn(t,d)}}catch(i){if(i instanceof ii)throw i;Kn(t,"network-request-failed",{message:String(i)})}}async function si(t,e,n,r,i={}){const s=await Ot(t,e,n,r,i);return"mfaPendingCredential"in s&&Kn(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function Lb(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?ey(t.config,i):`${t.config.apiScheme}://${i}`;return nR.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function iR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class sR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Pn(this.auth,"network-request-failed")),rR.get())})}}function Ka(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Pn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(t){return t!==void 0&&t.getResponse!==void 0}function Ww(t){return t!==void 0&&t.enterprise!==void 0}class Mb{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return iR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oR(t){return(await Ot(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function Vb(t,e){return Ot(t,"GET","/v2/recaptchaConfig",Dt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aR(t,e){return Ot(t,"POST","/v1/accounts:delete",e)}async function lR(t,e){return Ot(t,"POST","/v1/accounts:update",e)}async function vd(t,e){return Ot(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uR(t,e=!1){const n=ye(t),r=await n.getIdToken(e),i=fh(r);X(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:fl(Gf(i.auth_time)),issuedAtTime:fl(Gf(i.iat)),expirationTime:fl(Gf(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Gf(t){return Number(t)*1e3}function fh(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ac("JWT malformed, contained fewer than 3 sections"),null;try{const i=wb(n);return i?JSON.parse(i):(Ac("Failed to decode base64 JWT payload"),null)}catch(i){return Ac("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Hw(t){const e=fh(t);return X(e,"internal-error"),X(typeof e.exp<"u","internal-error"),X(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ls(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ii&&cR(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function cR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=fl(this.lastLoginAt),this.creationTime=fl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wl(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Ls(t,vd(n,{idToken:r}));X(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Fb(s.providerUserInfo):[],a=fR(t.providerData,o),u=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=u?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new mm(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function hR(t){const e=ye(t);await Wl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function fR(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Fb(t){return t.map(e=>{var{providerId:n}=e,r=Qg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pR(t,e){const n=await Ob(t,{},async()=>{const r=oa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await Lb(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:a,body:r};return t.emulatorConfig&&sa(t.emulatorConfig.host)&&(u.credentials="include"),Db.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function mR(t,e){return Ot(t,"POST","/v2/accounts:revokeToken",Dt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){X(e.idToken,"internal-error"),X(typeof e.idToken<"u","internal-error"),X(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Hw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){X(e.length!==0,"internal-error");const n=Hw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(X(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await pR(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ao;return r&&(X(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(X(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(X(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ao,this.toJSON())}_performRefresh(){return $r("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(t,e){X(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ir{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Qg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new mm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ls(this,this.stsTokenManager.getToken(this.auth,e));return X(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return uR(this,e)}reload(){return hR(this)}_assign(e){this!==e&&(X(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ir(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Wl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ct(this.auth.app))return Promise.reject(cn(this.auth));const e=await this.getIdToken();return await Ls(this,aR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,w=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,P=(a=n.tenantId)!==null&&a!==void 0?a:void 0,N=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,E=(c=n.createdAt)!==null&&c!==void 0?c:void 0,y=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:k,emailVerified:D,isAnonymous:M,providerData:V,stsTokenManager:I}=n;X(k&&I,e,"internal-error");const v=Ao.fromJSON(this.name,I);X(typeof k=="string",e,"internal-error"),fi(h,e.name),fi(m,e.name),X(typeof D=="boolean",e,"internal-error"),X(typeof M=="boolean",e,"internal-error"),fi(w,e.name),fi(_,e.name),fi(P,e.name),fi(N,e.name),fi(E,e.name),fi(y,e.name);const C=new ir({uid:k,auth:e,email:m,emailVerified:D,displayName:h,isAnonymous:M,photoURL:_,phoneNumber:w,tenantId:P,stsTokenManager:v,createdAt:E,lastLoginAt:y});return V&&Array.isArray(V)&&(C.providerData=V.map(A=>Object.assign({},A))),N&&(C._redirectEventId=N),C}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ao;i.updateFromServerResponse(n);const s=new ir({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Wl(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];X(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Fb(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Ao;a.updateFromIdToken(r);const u=new ir({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new mm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw=new Map;function jr(t){Jr(t instanceof Function,"Expected a class definition");let e=qw.get(t);return e?(Jr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,qw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Ub.type="NONE";const Gw=Ub;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nc(t,e,n){return`firebase:${t}:${e}:${n}`}class No{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Nc(this.userKey,i.apiKey,s),this.fullPersistenceKey=Nc("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await vd(this.auth,{idToken:e}).catch(()=>{});return n?ir._fromGetAccountInfoResponse(this.auth,n,e):null}return ir._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new No(jr(Gw),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||jr(Gw);const o=Nc(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){let h;if(typeof d=="string"){const m=await vd(e,{idToken:d}).catch(()=>{});if(!m)break;h=await ir._fromGetAccountInfoResponse(e,m,d)}else h=ir._fromJSON(e,d);c!==s&&(a=h),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new No(s,e,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new No(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($b(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Hb(e))return"Blackberry";if(qb(e))return"Webos";if(jb(e))return"Safari";if((e.includes("chrome/")||Bb(e))&&!e.includes("edge/"))return"Chrome";if(Wb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function $b(t=rn()){return/firefox\//i.test(t)}function jb(t=rn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Bb(t=rn()){return/crios\//i.test(t)}function zb(t=rn()){return/iemobile/i.test(t)}function Wb(t=rn()){return/android/i.test(t)}function Hb(t=rn()){return/blackberry/i.test(t)}function qb(t=rn()){return/webos/i.test(t)}function ty(t=rn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function gR(t=rn()){var e;return ty(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function yR(){return RN()&&document.documentMode===10}function Gb(t=rn()){return ty(t)||Wb(t)||qb(t)||Hb(t)||/windows phone/i.test(t)||zb(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(t,e=[]){let n;switch(t){case"Browser":n=Kw(rn());break;case"Worker":n=`${Kw(rn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${aa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wR(t,e={}){return Ot(t,"GET","/v2/passwordPolicy",Dt(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R=6;class ER{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:_R,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yw(this),this.idTokenSubscription=new Yw(this),this.beforeStateQueue=new vR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Rb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=jr(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await No.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await vd(this,{idToken:e}),r=await ir._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ct(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return X(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Wl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=eR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ct(this.app))return Promise.reject(cn(this));const n=e?ye(e):null;return n&&X(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&X(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ct(this.app)?Promise.reject(cn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ct(this.app)?Promise.reject(cn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(jr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wR(this),n=new ER(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new au("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await mR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&jr(e)||this._popupRedirectResolver;X(n,this,"argument-error"),this.redirectPersistenceManager=await No.create(this,[jr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Kb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(Ct(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&J2(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ut(t){return ye(t)}class Yw{constructor(e){this.auth=e,this.observer=null,this.addObserver=$N(n=>this.observer=n)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bR(t){uu=t}function ny(t){return uu.loadJS(t)}function IR(){return uu.recaptchaV2Script}function PR(){return uu.recaptchaEnterpriseScript}function xR(){return uu.gapiScript}function Yb(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=500,CR=6e4,ac=1e12;class kR{constructor(e){this.auth=e,this.counter=ac,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new RR(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||ac;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||ac;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||ac;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class AR{constructor(){this.enterprise=new NR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class NR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class RR{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;X(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=DR(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},CR)},SR))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function DR(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const OR="recaptcha-enterprise",pl="NO_RECAPTCHA";class Qb{constructor(e){this.type=OR,this.auth=Ut(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{Vb(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new Mb(u);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(u=>{a(u)})})}function i(s,o,a){const u=window.grecaptcha;Ww(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(pl)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new AR().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&Ww(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=PR();u.length!==0&&(u+=a),ny(u).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Va(t,e,n,r=!1,i=!1){const s=new Qb(t);let o;if(i)o=pl;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const u=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function ji(t,e,n,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Va(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await Va(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){const a=await Va(t,e,n);return r(t,a).catch(async u=>{var c;if(((c=t._getRecaptchaConfig())===null||c===void 0?void 0:c.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const d=await Va(t,e,n,!1,!0);return r(t,d)}return Promise.reject(u)})}else{const a=await Va(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")}async function LR(t){const e=Ut(t),n=await Vb(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Mb(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new Qb(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(t,e){const n=Yg(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Ds(s,e??{}))return i;Kn(i,"already-initialized")}return n.initialize({options:e})}function VR(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(jr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function FR(t,e,n){const r=Ut(t);X(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=Xb(e),{host:o,port:a}=UR(e),u=a===null?"":`:${a}`,c={url:`${s}//${o}${u}/`},d=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){X(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),X(Ds(c,r.config.emulator)&&Ds(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,sa(o)?(bb(`${s}//${o}${u}`),Ib("Auth",!0)):i||$R()}function Xb(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function UR(t){const e=Xb(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Qw(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Qw(o)}}}function Qw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function $R(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return $r("not implemented")}_getIdTokenResponse(e){return $r("not implemented")}_linkToIdToken(e,n){return $r("not implemented")}_getReauthenticationResolver(e){return $r("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jR(t,e){return Ot(t,"POST","/v1/accounts:resetPassword",Dt(t,e))}async function BR(t,e){return Ot(t,"POST","/v1/accounts:update",e)}async function zR(t,e){return Ot(t,"POST","/v1/accounts:signUp",e)}async function WR(t,e){return Ot(t,"POST","/v1/accounts:update",Dt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HR(t,e){return si(t,"POST","/v1/accounts:signInWithPassword",Dt(t,e))}async function mh(t,e){return Ot(t,"POST","/v1/accounts:sendOobCode",Dt(t,e))}async function qR(t,e){return mh(t,e)}async function GR(t,e){return mh(t,e)}async function KR(t,e){return mh(t,e)}async function YR(t,e){return mh(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QR(t,e){return si(t,"POST","/v1/accounts:signInWithEmailLink",Dt(t,e))}async function XR(t,e){return si(t,"POST","/v1/accounts:signInWithEmailLink",Dt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl extends ph{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Hl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Hl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ji(e,n,"signInWithPassword",HR,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return QR(e,{email:this._email,oobCode:this._password});default:Kn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ji(e,r,"signUpPassword",zR,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return XR(e,{idToken:n,email:this._email,oobCode:this._password});default:Kn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ro(t,e){return si(t,"POST","/v1/accounts:signInWithIdp",Dt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR="http://localhost";class Zr extends ph{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Zr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Kn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Qg(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Zr(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ro(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ro(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ro(e,n)}buildRequest(){const e={requestUri:JR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=oa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xw(t,e){return Ot(t,"POST","/v1/accounts:sendVerificationCode",Dt(t,e))}async function ZR(t,e){return si(t,"POST","/v1/accounts:signInWithPhoneNumber",Dt(t,e))}async function eD(t,e){const n=await si(t,"POST","/v1/accounts:signInWithPhoneNumber",Dt(t,e));if(n.temporaryProof)throw Ka(t,"account-exists-with-different-credential",n);return n}const tD={USER_NOT_FOUND:"user-not-found"};async function nD(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return si(t,"POST","/v1/accounts:signInWithPhoneNumber",Dt(t,n),tD)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml extends ph{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new ml({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new ml({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return ZR(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return eD(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return nD(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new ml({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function iD(t){const e=qa(Ga(t)).link,n=e?qa(Ga(e)).deep_link_id:null,r=qa(Ga(t)).deep_link_id;return(r?qa(Ga(r)).link:null)||r||n||e||t}class gh{constructor(e){var n,r,i,s,o,a;const u=qa(Ga(e)),c=(n=u.apiKey)!==null&&n!==void 0?n:null,d=(r=u.oobCode)!==null&&r!==void 0?r:null,h=rD((i=u.mode)!==null&&i!==void 0?i:null);X(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=iD(e);try{return new gh(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(){this.providerId=Ws.PROVIDER_ID}static credential(e,n){return Hl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=gh.parseLink(n);return X(r,"argument-error"),Hl._fromEmailAndCode(e,r.code,r.tenantId)}}Ws.PROVIDER_ID="password";Ws.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ws.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua extends la{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Rc extends ua{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return X("providerId"in n&&"signInMethod"in n,"argument-error"),Zr._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return X(e.idToken||e.accessToken,"argument-error"),Zr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Rc.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Rc.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new Rc(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i extends ua{constructor(){super("facebook.com")}static credential(e){return Zr._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _i.credential(e.oauthAccessToken)}catch{return null}}}_i.FACEBOOK_SIGN_IN_METHOD="facebook.com";_i.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends ua{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Zr._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return vr.credential(n,r)}catch{return null}}}vr.GOOGLE_SIGN_IN_METHOD="google.com";vr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends ua{constructor(){super("github.com")}static credential(e){return Zr._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ei.credential(e.oauthAccessToken)}catch{return null}}}Ei.GITHUB_SIGN_IN_METHOD="github.com";Ei.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends ua{constructor(){super("twitter.com")}static credential(e,n){return Zr._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ti.credential(n,r)}catch{return null}}}Ti.TWITTER_SIGN_IN_METHOD="twitter.com";Ti.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jb(t,e){return si(t,"POST","/v1/accounts:signUp",Dt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await ir._fromIdTokenResponse(e,r,i),o=Jw(r);return new Cr({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Jw(r);return new Cr({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Jw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g5(t){var e;if(Ct(t.app))return Promise.reject(cn(t));const n=Ut(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Cr({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Jb(n,{returnSecureToken:!0}),i=await Cr._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd extends ii{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,wd.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new wd(e,n,r,i)}}function Zb(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?wd._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y5(t,e){const n=ye(t);await yh(!0,n,e);const{providerUserInfo:r}=await lR(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=eI(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function tI(t,e,n=!1){const r=await Ls(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Cr._forOperation(t,"link",r)}async function yh(t,e,n){await Wl(e);const r=eI(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";X(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sD(t,e,n=!1){const{auth:r}=t;if(Ct(r.app))return Promise.reject(cn(r));const i="reauthenticate";try{const s=await Ls(t,Zb(r,i,e,t),n);X(s.idToken,r,"internal-error");const o=fh(s.idToken);X(o,r,"internal-error");const{sub:a}=o;return X(t.uid===a,r,"user-mismatch"),Cr._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Kn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nI(t,e,n=!1){if(Ct(t.app))return Promise.reject(cn(t));const r="signIn",i=await Zb(t,r,e),s=await Cr._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function vh(t,e){return nI(Ut(t),e)}async function oD(t,e){const n=ye(t);return await yh(!1,n,e.providerId),tI(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aD(t,e){return si(t,"POST","/v1/accounts:signInWithCustomToken",Dt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v5(t,e){if(Ct(t.app))return Promise.reject(cn(t));const n=Ut(t),r=await aD(n,{token:e,returnSecureToken:!0}),i=await Cr._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(t,e,n){var r;X(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),X(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),X(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(X(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(X(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ry(t){const e=Ut(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function w5(t,e,n){const r=Ut(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&wh(r,i,n),await ji(r,i,"getOobCode",GR,"EMAIL_PASSWORD_PROVIDER")}async function _5(t,e,n){await jR(ye(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ry(t),r})}async function E5(t,e){await WR(ye(t),{oobCode:e})}async function lD(t,e,n){if(Ct(t.app))return Promise.reject(cn(t));const r=Ut(t),o=await ji(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Jb,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&ry(t),u}),a=await Cr._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function uD(t,e,n){return Ct(t.app)?Promise.reject(cn(t)):vh(ye(t),Ws.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ry(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T5(t,e,n){const r=Ut(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,a){X(a.handleCodeInApp,r,"argument-error"),a&&wh(r,o,a)}s(i,n),await ji(r,i,"getOobCode",KR,"EMAIL_PASSWORD_PROVIDER")}function b5(t,e){const n=gh.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function I5(t,e,n){if(Ct(t.app))return Promise.reject(cn(t));const r=ye(t),i=Ws.credentialWithLink(e,n||zl());return X(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),vh(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cD(t,e){return Ot(t,"POST","/v1/accounts:createAuthUri",Dt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P5(t,e){const n=Zg()?zl():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await cD(ye(t),r);return i||[]}async function x5(t,e){const n=ye(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&wh(n.auth,i,e);const{email:s}=await qR(n.auth,i);s!==t.email&&await t.reload()}async function S5(t,e,n){const r=ye(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&wh(r.auth,s,n);const{email:o}=await YR(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dD(t,e){return Ot(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hD(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=ye(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Ls(r,dD(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:u})=>u==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function C5(t,e){const n=ye(t);return Ct(n.auth.app)?Promise.reject(cn(n.auth)):rI(n,e,null)}function k5(t,e){return rI(ye(t),null,e)}async function rI(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await Ls(t,BR(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const o=(n=(e=fh(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new Do(s,a)}}if(!r)return null;switch(r){case"facebook.com":return new pD(s,i);case"github.com":return new mD(s,i);case"google.com":return new gD(s,i);case"twitter.com":return new yD(s,i,t.screenName||null);case"custom":case"anonymous":return new Do(s,null);default:return new Do(s,r,i)}}class Do{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class iI extends Do{constructor(e,n,r,i){super(e,n,r),this.username=i}}class pD extends Do{constructor(e,n){super(e,"facebook.com",n)}}class mD extends iI{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class gD extends Do{constructor(e,n){super(e,"google.com",n)}}class yD extends iI{constructor(e,n,r){super(e,"twitter.com",n,r)}}function A5(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:fD(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N5(t,e){return ye(t).setPersistence(e)}function vD(t,e,n,r){return ye(t).onIdTokenChanged(e,n,r)}function wD(t,e,n){return ye(t).beforeAuthStateChanged(e,n)}function sI(t,e,n,r){return ye(t).onAuthStateChanged(e,n,r)}function _D(t){return ye(t).signOut()}function R5(t,e){return Ut(t).revokeAccessToken(e)}async function D5(t){return ye(t).delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(t,e){return Ot(t,"POST","/v2/accounts/mfaEnrollment:start",Dt(t,e))}const _d="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(_d,"1"),this.storage.removeItem(_d),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED=1e3,TD=10;class aI extends oI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Gb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);yR()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,TD):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},ED)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}aI.type="LOCAL";const bD=aI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI extends oI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}lI.type="SESSION";const uI=lI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ID(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new _h(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),u=await ID(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_h.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const c=Eh("",20);i.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const m=h;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(d),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(){return window}function xD(t){wt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(){return typeof wt().WorkerGlobalScope<"u"&&typeof wt().importScripts=="function"}async function SD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function CD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function kD(){return iy()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI="firebaseLocalStorageDb",AD=1,Ed="firebaseLocalStorage",dI="fbase_key";class cu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Th(t,e){return t.transaction([Ed],e?"readwrite":"readonly").objectStore(Ed)}function ND(){const t=indexedDB.deleteDatabase(cI);return new cu(t).toPromise()}function gm(){const t=indexedDB.open(cI,AD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ed,{keyPath:dI})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ed)?e(r):(r.close(),await ND(),e(await gm()))})})}async function e_(t,e,n){const r=Th(t,!0).put({[dI]:e,value:n});return new cu(r).toPromise()}async function RD(t,e){const n=Th(t,!1).get(e),r=await new cu(n).toPromise();return r===void 0?null:r.value}function t_(t,e){const n=Th(t,!0).delete(e);return new cu(n).toPromise()}const DD=800,OD=3;class hI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>OD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return iy()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_h._getInstance(kD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await SD(),!this.activeServiceWorker)return;this.sender=new PD(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||CD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await gm();return await e_(e,_d,"1"),await t_(e,_d),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>e_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>RD(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>t_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Th(i,!1).getAll();return new cu(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),DD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}hI.type="LOCAL";const LD=hI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(t,e){return Ot(t,"POST","/v2/accounts/mfaSignIn:start",Dt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf=Yb("rcb"),MD=new lu(3e4,6e4);class VD{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=wt().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return X(FD(n),e,"argument-error"),this.shouldResolveImmediately(n)&&zw(wt().grecaptcha)?Promise.resolve(wt().grecaptcha):new Promise((r,i)=>{const s=wt().setTimeout(()=>{i(Pn(e,"network-request-failed"))},MD.get());wt()[Kf]=()=>{wt().clearTimeout(s),delete wt()[Kf];const a=wt().grecaptcha;if(!a||!zw(a)){i(Pn(e,"internal-error"));return}const u=a.render;a.render=(c,d)=>{const h=u(c,d);return this.counter++,h},this.hostLanguage=n,r(a)};const o=`${IR()}?${oa({onload:Kf,render:"explicit",hl:n})}`;ny(o).catch(()=>{clearTimeout(s),i(Pn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=wt().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function FD(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class UD{async load(e){return new kR(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl="recaptcha",$D={theme:"light",type:"image"};class O5{constructor(e,n,r=Object.assign({},$D)){this.parameters=r,this.type=gl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ut(e),this.isInvisible=this.parameters.size==="invisible",X(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;X(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new UD:new VD,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){X(!this.parameters.sitekey,this.auth,"argument-error"),X(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),X(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=wt()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){X(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){X(Zg()&&!iy(),this.auth,"internal-error"),await jD(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await oR(this.auth);X(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return X(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function jD(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=ml._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function L5(t,e,n){if(Ct(t.app))return Promise.reject(cn(t));const r=Ut(t),i=await pI(r,e,ye(n));return new fI(i,s=>vh(r,s))}async function M5(t,e,n){const r=ye(t);await yh(!1,r,"phone");const i=await pI(r.auth,e,ye(n));return new fI(i,s=>oD(r,s))}async function pI(t,e,n){var r;if(!t._getRecaptchaConfig())try{await LR(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const s=i.session;if("phoneNumber"in i){X(s.type==="enroll",t,"internal-error");const o={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await ji(t,o,"mfaSmsEnrollment",async(d,h)=>{if(h.phoneEnrollmentInfo.captchaResponse===pl){X((n==null?void 0:n.type)===gl,d,"argument-error");const m=await Yf(d,h,n);return Zw(d,m)}return Zw(d,h)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).phoneSessionInfo.sessionInfo}else{X(s.type==="signin",t,"internal-error");const o=((r=i.multiFactorHint)===null||r===void 0?void 0:r.uid)||i.multiFactorUid;X(o,t,"missing-multi-factor-info");const a={mfaPendingCredential:s.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await ji(t,a,"mfaSmsSignIn",async(h,m)=>{if(m.phoneSignInInfo.captchaResponse===pl){X((n==null?void 0:n.type)===gl,h,"argument-error");const w=await Yf(h,m,n);return n_(h,w)}return n_(h,m)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await ji(t,s,"sendVerificationCode",async(c,d)=>{if(d.captchaResponse===pl){X((n==null?void 0:n.type)===gl,c,"argument-error");const h=await Yf(c,d,n);return Xw(c,h)}return Xw(c,d)},"PHONE_PROVIDER").catch(c=>Promise.reject(c))).sessionInfo}}finally{n==null||n._reset()}}async function Yf(t,e,n){X(n.type===gl,t,"argument-error");const r=await n.verify();X(typeof r=="string",t,"argument-error");const i=Object.assign({},e);if("phoneEnrollmentInfo"in i){const s=i.phoneEnrollmentInfo.phoneNumber,o=i.phoneEnrollmentInfo.captchaResponse,a=i.phoneEnrollmentInfo.clientType,u=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:r,captchaResponse:o,clientType:a,recaptchaVersion:u}}),i}else if("phoneSignInInfo"in i){const s=i.phoneSignInInfo.captchaResponse,o=i.phoneSignInInfo.clientType,a=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:s,clientType:o,recaptchaVersion:a}}),i}else return Object.assign(i,{recaptchaToken:r}),i}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(t,e){return e?jr(e):(X(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy extends ph{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ro(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ro(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ro(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function BD(t){return nI(t.auth,new sy(t),t.bypassAuthState)}function zD(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),sD(n,new sy(t),t.bypassAuthState)}async function WD(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),tI(n,new sy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BD;case"linkViaPopup":case"linkViaRedirect":return WD;case"reauthViaPopup":case"reauthViaRedirect":return zD;default:Kn(this.auth,"internal-error")}}resolve(e){Jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD=new lu(2e3,1e4);async function qD(t,e,n){if(Ct(t.app))return Promise.reject(Pn(t,"operation-not-supported-in-this-environment"));const r=Ut(t);hh(t,e,la);const i=du(r,n);return new Ci(r,"signInViaPopup",e,i).executeNotNull()}async function V5(t,e,n){const r=ye(t);hh(r.auth,e,la);const i=du(r.auth,n);return new Ci(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Ci extends mI{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ci.currentPopupAction&&Ci.currentPopupAction.cancel(),Ci.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return X(e,this.auth,"internal-error"),e}async onExecution(){Jr(this.filter.length===1,"Popup operations only handle one event");const e=Eh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Pn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Pn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ci.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,HD.get())};e()}}Ci.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD="pendingRedirect",Dc=new Map;class KD extends mI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Dc.get(this.auth._key());if(!e){try{const r=await YD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Dc.set(this.auth._key(),e)}return this.bypassAuthState||Dc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function YD(t,e){const n=vI(e),r=yI(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function gI(t,e){return yI(t)._set(vI(e),"true")}function QD(t,e){Dc.set(t._key(),e)}function yI(t){return jr(t._redirectPersistence)}function vI(t){return Nc(GD,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XD(t,e,n){return JD(t,e,n)}async function JD(t,e,n){if(Ct(t.app))return Promise.reject(cn(t));const r=Ut(t);hh(t,e,la),await r._initializationPromise;const i=du(r,n);return await gI(i,r),i._openRedirect(r,e,"signInViaRedirect")}function F5(t,e,n){return ZD(t,e,n)}async function ZD(t,e,n){const r=ye(t);hh(r.auth,e,la),await r.auth._initializationPromise;const i=du(r.auth,n);await yh(!1,r,e.providerId),await gI(i,r.auth);const s=await tO(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function eO(t,e){return await Ut(t)._initializationPromise,wI(t,e,!1)}async function wI(t,e,n=!1){if(Ct(t.app))return Promise.reject(cn(t));const r=Ut(t),i=du(r,e),o=await new KD(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function tO(t){const e=Eh(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO=10*60*1e3;class rO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!iO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!_I(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Pn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nO&&this.cachedEventUids.clear(),this.cachedEventUids.has(r_(e))}saveEventToCache(e){this.cachedEventUids.add(r_(e)),this.lastProcessedEventTime=Date.now()}}function r_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function _I({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function iO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _I(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sO(t,e={}){return Ot(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aO=/^https?/;async function lO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await sO(t);for(const n of e)try{if(uO(n))return}catch{}Kn(t,"unauthorized-domain")}function uO(t){const e=zl(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!aO.test(n))return!1;if(oO.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO=new lu(3e4,6e4);function i_(){const t=wt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function dO(t){return new Promise((e,n)=>{var r,i,s;function o(){i_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{i_(),n(Pn(t,"network-request-failed"))},timeout:cO.get()})}if(!((i=(r=wt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=wt().gapi)===null||s===void 0)&&s.load)o();else{const a=Yb("iframefcb");return wt()[a]=()=>{gapi.load?o():n(Pn(t,"network-request-failed"))},ny(`${xR()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw Oc=null,e})}let Oc=null;function hO(t){return Oc=Oc||dO(t),Oc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO=new lu(5e3,15e3),pO="__/auth/iframe",mO="emulator/auth/iframe",gO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vO(t){const e=t.config;X(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ey(e,mO):`https://${t.config.authDomain}/${pO}`,r={apiKey:e.apiKey,appName:t.name,v:aa},i=yO.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${oa(r).slice(1)}`}async function wO(t){const e=await hO(t),n=wt().gapi;return X(n,t,"internal-error"),e.open({where:document.body,url:vO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gO,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Pn(t,"network-request-failed"),a=wt().setTimeout(()=>{s(o)},fO.get());function u(){wt().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},EO=500,TO=600,bO="_blank",IO="http://localhost";class s_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function PO(t,e,n,r=EO,i=TO){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},_O),{width:r.toString(),height:i.toString(),top:s,left:o}),c=rn().toLowerCase();n&&(a=Bb(c)?bO:n),$b(c)&&(e=e||IO,u.scrollbars="yes");const d=Object.entries(u).reduce((m,[w,_])=>`${m}${w}=${_},`,"");if(gR(c)&&a!=="_self")return xO(e||"",a),new s_(null);const h=window.open(e||"",a,d);X(h,t,"popup-blocked");try{h.focus()}catch{}return new s_(h)}function xO(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO="__/auth/handler",CO="emulator/auth/handler",kO=encodeURIComponent("fac");async function o_(t,e,n,r,i,s){X(t.config.authDomain,t,"auth-domain-config-required"),X(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:aa,eventId:i};if(e instanceof la){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",UN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(s||{}))o[d]=h}if(e instanceof ua){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const u=await t._getAppCheckToken(),c=u?`#${kO}=${encodeURIComponent(u)}`:"";return`${AO(t)}?${oa(a).slice(1)}${c}`}function AO({config:t}){return t.emulator?ey(t,CO):`https://${t.authDomain}/${SO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qf="webStorageSupport";class NO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uI,this._completeRedirectFn=wI,this._overrideRedirectResult=QD}async _openPopup(e,n,r,i){var s;Jr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await o_(e,n,r,zl(),i);return PO(e,o,Eh())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await o_(e,n,r,zl(),i);return xD(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Jr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await wO(e),r=new rO(e);return n.register("authEvent",i=>(X(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Qf,{type:Qf},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Qf];o!==void 0&&n(!!o),Kn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=lO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Gb()||jb()||ty()}}const RO=NO;var a_="@firebase/auth",l_="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function LO(t){Wo(new Os("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;X(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Kb(t)},c=new TR(r,i,s,u);return VR(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Wo(new Os("auth-internal",e=>{const n=Ut(e.getProvider("auth").getImmediate());return(r=>new DO(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),$i(a_,l_,OO(t)),$i(a_,l_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO=5*60,VO=Tb("authIdTokenMaxAge")||MO;let u_=null;const FO=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>VO)return;const i=n==null?void 0:n.token;u_!==i&&(u_=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function EI(t=Cb()){const e=Yg(t,"auth");if(e.isInitialized())return e.getImmediate();const n=MR(t,{popupRedirectResolver:RO,persistence:[LD,bD,uI]}),r=Tb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=FO(s.toString());wD(n,o,()=>o(n.currentUser)),vD(n,a=>o(a))}}const i=_b("auth");return i&&FR(n,`http://${i}`),n}function UO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}bR({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Pn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",UO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});LO("Browser");var c_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bi,TI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,v){function C(){}C.prototype=v.prototype,I.D=v.prototype,I.prototype=new C,I.prototype.constructor=I,I.C=function(A,R,T){for(var b=Array(arguments.length-2),W=2;W<arguments.length;W++)b[W-2]=arguments[W];return v.prototype[R].apply(A,b)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,v,C){C||(C=0);var A=Array(16);if(typeof v=="string")for(var R=0;16>R;++R)A[R]=v.charCodeAt(C++)|v.charCodeAt(C++)<<8|v.charCodeAt(C++)<<16|v.charCodeAt(C++)<<24;else for(R=0;16>R;++R)A[R]=v[C++]|v[C++]<<8|v[C++]<<16|v[C++]<<24;v=I.g[0],C=I.g[1],R=I.g[2];var T=I.g[3],b=v+(T^C&(R^T))+A[0]+3614090360&4294967295;v=C+(b<<7&4294967295|b>>>25),b=T+(R^v&(C^R))+A[1]+3905402710&4294967295,T=v+(b<<12&4294967295|b>>>20),b=R+(C^T&(v^C))+A[2]+606105819&4294967295,R=T+(b<<17&4294967295|b>>>15),b=C+(v^R&(T^v))+A[3]+3250441966&4294967295,C=R+(b<<22&4294967295|b>>>10),b=v+(T^C&(R^T))+A[4]+4118548399&4294967295,v=C+(b<<7&4294967295|b>>>25),b=T+(R^v&(C^R))+A[5]+1200080426&4294967295,T=v+(b<<12&4294967295|b>>>20),b=R+(C^T&(v^C))+A[6]+2821735955&4294967295,R=T+(b<<17&4294967295|b>>>15),b=C+(v^R&(T^v))+A[7]+4249261313&4294967295,C=R+(b<<22&4294967295|b>>>10),b=v+(T^C&(R^T))+A[8]+1770035416&4294967295,v=C+(b<<7&4294967295|b>>>25),b=T+(R^v&(C^R))+A[9]+2336552879&4294967295,T=v+(b<<12&4294967295|b>>>20),b=R+(C^T&(v^C))+A[10]+4294925233&4294967295,R=T+(b<<17&4294967295|b>>>15),b=C+(v^R&(T^v))+A[11]+2304563134&4294967295,C=R+(b<<22&4294967295|b>>>10),b=v+(T^C&(R^T))+A[12]+1804603682&4294967295,v=C+(b<<7&4294967295|b>>>25),b=T+(R^v&(C^R))+A[13]+4254626195&4294967295,T=v+(b<<12&4294967295|b>>>20),b=R+(C^T&(v^C))+A[14]+2792965006&4294967295,R=T+(b<<17&4294967295|b>>>15),b=C+(v^R&(T^v))+A[15]+1236535329&4294967295,C=R+(b<<22&4294967295|b>>>10),b=v+(R^T&(C^R))+A[1]+4129170786&4294967295,v=C+(b<<5&4294967295|b>>>27),b=T+(C^R&(v^C))+A[6]+3225465664&4294967295,T=v+(b<<9&4294967295|b>>>23),b=R+(v^C&(T^v))+A[11]+643717713&4294967295,R=T+(b<<14&4294967295|b>>>18),b=C+(T^v&(R^T))+A[0]+3921069994&4294967295,C=R+(b<<20&4294967295|b>>>12),b=v+(R^T&(C^R))+A[5]+3593408605&4294967295,v=C+(b<<5&4294967295|b>>>27),b=T+(C^R&(v^C))+A[10]+38016083&4294967295,T=v+(b<<9&4294967295|b>>>23),b=R+(v^C&(T^v))+A[15]+3634488961&4294967295,R=T+(b<<14&4294967295|b>>>18),b=C+(T^v&(R^T))+A[4]+3889429448&4294967295,C=R+(b<<20&4294967295|b>>>12),b=v+(R^T&(C^R))+A[9]+568446438&4294967295,v=C+(b<<5&4294967295|b>>>27),b=T+(C^R&(v^C))+A[14]+3275163606&4294967295,T=v+(b<<9&4294967295|b>>>23),b=R+(v^C&(T^v))+A[3]+4107603335&4294967295,R=T+(b<<14&4294967295|b>>>18),b=C+(T^v&(R^T))+A[8]+1163531501&4294967295,C=R+(b<<20&4294967295|b>>>12),b=v+(R^T&(C^R))+A[13]+2850285829&4294967295,v=C+(b<<5&4294967295|b>>>27),b=T+(C^R&(v^C))+A[2]+4243563512&4294967295,T=v+(b<<9&4294967295|b>>>23),b=R+(v^C&(T^v))+A[7]+1735328473&4294967295,R=T+(b<<14&4294967295|b>>>18),b=C+(T^v&(R^T))+A[12]+2368359562&4294967295,C=R+(b<<20&4294967295|b>>>12),b=v+(C^R^T)+A[5]+4294588738&4294967295,v=C+(b<<4&4294967295|b>>>28),b=T+(v^C^R)+A[8]+2272392833&4294967295,T=v+(b<<11&4294967295|b>>>21),b=R+(T^v^C)+A[11]+1839030562&4294967295,R=T+(b<<16&4294967295|b>>>16),b=C+(R^T^v)+A[14]+4259657740&4294967295,C=R+(b<<23&4294967295|b>>>9),b=v+(C^R^T)+A[1]+2763975236&4294967295,v=C+(b<<4&4294967295|b>>>28),b=T+(v^C^R)+A[4]+1272893353&4294967295,T=v+(b<<11&4294967295|b>>>21),b=R+(T^v^C)+A[7]+4139469664&4294967295,R=T+(b<<16&4294967295|b>>>16),b=C+(R^T^v)+A[10]+3200236656&4294967295,C=R+(b<<23&4294967295|b>>>9),b=v+(C^R^T)+A[13]+681279174&4294967295,v=C+(b<<4&4294967295|b>>>28),b=T+(v^C^R)+A[0]+3936430074&4294967295,T=v+(b<<11&4294967295|b>>>21),b=R+(T^v^C)+A[3]+3572445317&4294967295,R=T+(b<<16&4294967295|b>>>16),b=C+(R^T^v)+A[6]+76029189&4294967295,C=R+(b<<23&4294967295|b>>>9),b=v+(C^R^T)+A[9]+3654602809&4294967295,v=C+(b<<4&4294967295|b>>>28),b=T+(v^C^R)+A[12]+3873151461&4294967295,T=v+(b<<11&4294967295|b>>>21),b=R+(T^v^C)+A[15]+530742520&4294967295,R=T+(b<<16&4294967295|b>>>16),b=C+(R^T^v)+A[2]+3299628645&4294967295,C=R+(b<<23&4294967295|b>>>9),b=v+(R^(C|~T))+A[0]+4096336452&4294967295,v=C+(b<<6&4294967295|b>>>26),b=T+(C^(v|~R))+A[7]+1126891415&4294967295,T=v+(b<<10&4294967295|b>>>22),b=R+(v^(T|~C))+A[14]+2878612391&4294967295,R=T+(b<<15&4294967295|b>>>17),b=C+(T^(R|~v))+A[5]+4237533241&4294967295,C=R+(b<<21&4294967295|b>>>11),b=v+(R^(C|~T))+A[12]+1700485571&4294967295,v=C+(b<<6&4294967295|b>>>26),b=T+(C^(v|~R))+A[3]+2399980690&4294967295,T=v+(b<<10&4294967295|b>>>22),b=R+(v^(T|~C))+A[10]+4293915773&4294967295,R=T+(b<<15&4294967295|b>>>17),b=C+(T^(R|~v))+A[1]+2240044497&4294967295,C=R+(b<<21&4294967295|b>>>11),b=v+(R^(C|~T))+A[8]+1873313359&4294967295,v=C+(b<<6&4294967295|b>>>26),b=T+(C^(v|~R))+A[15]+4264355552&4294967295,T=v+(b<<10&4294967295|b>>>22),b=R+(v^(T|~C))+A[6]+2734768916&4294967295,R=T+(b<<15&4294967295|b>>>17),b=C+(T^(R|~v))+A[13]+1309151649&4294967295,C=R+(b<<21&4294967295|b>>>11),b=v+(R^(C|~T))+A[4]+4149444226&4294967295,v=C+(b<<6&4294967295|b>>>26),b=T+(C^(v|~R))+A[11]+3174756917&4294967295,T=v+(b<<10&4294967295|b>>>22),b=R+(v^(T|~C))+A[2]+718787259&4294967295,R=T+(b<<15&4294967295|b>>>17),b=C+(T^(R|~v))+A[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(R+(b<<21&4294967295|b>>>11))&4294967295,I.g[2]=I.g[2]+R&4294967295,I.g[3]=I.g[3]+T&4294967295}r.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var C=v-this.blockSize,A=this.B,R=this.h,T=0;T<v;){if(R==0)for(;T<=C;)i(this,I,T),T+=this.blockSize;if(typeof I=="string"){for(;T<v;)if(A[R++]=I.charCodeAt(T++),R==this.blockSize){i(this,A),R=0;break}}else for(;T<v;)if(A[R++]=I[T++],R==this.blockSize){i(this,A),R=0;break}}this.h=R,this.o+=v},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var C=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=C&255,C/=256;for(this.u(I),I=Array(16),v=C=0;4>v;++v)for(var A=0;32>A;A+=8)I[C++]=this.g[v]>>>A&255;return I};function s(I,v){var C=a;return Object.prototype.hasOwnProperty.call(C,I)?C[I]:C[I]=v(I)}function o(I,v){this.h=v;for(var C=[],A=!0,R=I.length-1;0<=R;R--){var T=I[R]|0;A&&T==v||(C[R]=T,A=!1)}this.g=C}var a={};function u(I){return-128<=I&&128>I?s(I,function(v){return new o([v|0],0>v?-1:0)}):new o([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return h;if(0>I)return N(c(-I));for(var v=[],C=1,A=0;I>=C;A++)v[A]=I/C|0,C*=4294967296;return new o(v,0)}function d(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return N(d(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=c(Math.pow(v,8)),A=h,R=0;R<I.length;R+=8){var T=Math.min(8,I.length-R),b=parseInt(I.substring(R,R+T),v);8>T?(T=c(Math.pow(v,T)),A=A.j(T).add(c(b))):(A=A.j(C),A=A.add(c(b)))}return A}var h=u(0),m=u(1),w=u(16777216);t=o.prototype,t.m=function(){if(P(this))return-N(this).m();for(var I=0,v=1,C=0;C<this.g.length;C++){var A=this.i(C);I+=(0<=A?A:4294967296+A)*v,v*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(_(this))return"0";if(P(this))return"-"+N(this).toString(I);for(var v=c(Math.pow(I,6)),C=this,A="";;){var R=D(C,v).g;C=E(C,R.j(v));var T=((0<C.g.length?C.g[0]:C.h)>>>0).toString(I);if(C=R,_(C))return T+A;for(;6>T.length;)T="0"+T;A=T+A}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function _(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function P(I){return I.h==-1}t.l=function(I){return I=E(this,I),P(I)?-1:_(I)?0:1};function N(I){for(var v=I.g.length,C=[],A=0;A<v;A++)C[A]=~I.g[A];return new o(C,~I.h).add(m)}t.abs=function(){return P(this)?N(this):this},t.add=function(I){for(var v=Math.max(this.g.length,I.g.length),C=[],A=0,R=0;R<=v;R++){var T=A+(this.i(R)&65535)+(I.i(R)&65535),b=(T>>>16)+(this.i(R)>>>16)+(I.i(R)>>>16);A=b>>>16,T&=65535,b&=65535,C[R]=b<<16|T}return new o(C,C[C.length-1]&-2147483648?-1:0)};function E(I,v){return I.add(N(v))}t.j=function(I){if(_(this)||_(I))return h;if(P(this))return P(I)?N(this).j(N(I)):N(N(this).j(I));if(P(I))return N(this.j(N(I)));if(0>this.l(w)&&0>I.l(w))return c(this.m()*I.m());for(var v=this.g.length+I.g.length,C=[],A=0;A<2*v;A++)C[A]=0;for(A=0;A<this.g.length;A++)for(var R=0;R<I.g.length;R++){var T=this.i(A)>>>16,b=this.i(A)&65535,W=I.i(R)>>>16,H=I.i(R)&65535;C[2*A+2*R]+=b*H,y(C,2*A+2*R),C[2*A+2*R+1]+=T*H,y(C,2*A+2*R+1),C[2*A+2*R+1]+=b*W,y(C,2*A+2*R+1),C[2*A+2*R+2]+=T*W,y(C,2*A+2*R+2)}for(A=0;A<v;A++)C[A]=C[2*A+1]<<16|C[2*A];for(A=v;A<2*v;A++)C[A]=0;return new o(C,0)};function y(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function k(I,v){this.g=I,this.h=v}function D(I,v){if(_(v))throw Error("division by zero");if(_(I))return new k(h,h);if(P(I))return v=D(N(I),v),new k(N(v.g),N(v.h));if(P(v))return v=D(I,N(v)),new k(N(v.g),v.h);if(30<I.g.length){if(P(I)||P(v))throw Error("slowDivide_ only works with positive integers.");for(var C=m,A=v;0>=A.l(I);)C=M(C),A=M(A);var R=V(C,1),T=V(A,1);for(A=V(A,2),C=V(C,2);!_(A);){var b=T.add(A);0>=b.l(I)&&(R=R.add(C),T=b),A=V(A,1),C=V(C,1)}return v=E(I,R.j(v)),new k(R,v)}for(R=h;0<=I.l(v);){for(C=Math.max(1,Math.floor(I.m()/v.m())),A=Math.ceil(Math.log(C)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),T=c(C),b=T.j(v);P(b)||0<b.l(I);)C-=A,T=c(C),b=T.j(v);_(T)&&(T=m),R=R.add(T),I=E(I,b)}return new k(R,I)}t.A=function(I){return D(this,I).h},t.and=function(I){for(var v=Math.max(this.g.length,I.g.length),C=[],A=0;A<v;A++)C[A]=this.i(A)&I.i(A);return new o(C,this.h&I.h)},t.or=function(I){for(var v=Math.max(this.g.length,I.g.length),C=[],A=0;A<v;A++)C[A]=this.i(A)|I.i(A);return new o(C,this.h|I.h)},t.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),C=[],A=0;A<v;A++)C[A]=this.i(A)^I.i(A);return new o(C,this.h^I.h)};function M(I){for(var v=I.g.length+1,C=[],A=0;A<v;A++)C[A]=I.i(A)<<1|I.i(A-1)>>>31;return new o(C,I.h)}function V(I,v){var C=v>>5;v%=32;for(var A=I.g.length-C,R=[],T=0;T<A;T++)R[T]=0<v?I.i(T+C)>>>v|I.i(T+C+1)<<32-v:I.i(T+C);return new o(R,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,TI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Bi=o}).apply(typeof c_<"u"?c_:typeof self<"u"?self:typeof window<"u"?window:{});var lc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bI,Ya,II,Lc,ym,PI,xI,SI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,g){return l==Array.prototype||l==Object.prototype||(l[f]=g.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof lc=="object"&&lc];for(var f=0;f<l.length;++f){var g=l[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(l,f){if(f)e:{var g=r;l=l.split(".");for(var S=0;S<l.length-1;S++){var F=l[S];if(!(F in g))break e;g=g[F]}l=l[l.length-1],S=g[l],f=f(S),f!=S&&f!=null&&e(g,l,{configurable:!0,writable:!0,value:f})}}function s(l,f){l instanceof String&&(l+="");var g=0,S=!1,F={next:function(){if(!S&&g<l.length){var $=g++;return{value:f($,l[$]),done:!1}}return S=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}i("Array.prototype.values",function(l){return l||function(){return s(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function c(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function d(l,f,g){return l.call.apply(l.bind,arguments)}function h(l,f,g){if(!l)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,S),l.apply(f,F)}}return function(){return l.apply(f,arguments)}}function m(l,f,g){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,m.apply(null,arguments)}function w(l,f){var g=Array.prototype.slice.call(arguments,1);return function(){var S=g.slice();return S.push.apply(S,arguments),l.apply(this,S)}}function _(l,f){function g(){}g.prototype=f.prototype,l.aa=f.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(S,F,$){for(var Y=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)Y[ze-2]=arguments[ze];return f.prototype[F].apply(S,Y)}}function P(l){const f=l.length;if(0<f){const g=Array(f);for(let S=0;S<f;S++)g[S]=l[S];return g}return[]}function N(l,f){for(let g=1;g<arguments.length;g++){const S=arguments[g];if(u(S)){const F=l.length||0,$=S.length||0;l.length=F+$;for(let Y=0;Y<$;Y++)l[F+Y]=S[Y]}else l.push(S)}}class E{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function y(l){return/^[\s\xa0]*$/.test(l)}function k(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function D(l){return D[" "](l),l}D[" "]=function(){};var M=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function V(l,f,g){for(const S in l)f.call(g,l[S],S,l)}function I(l,f){for(const g in l)f.call(void 0,l[g],g,l)}function v(l){const f={};for(const g in l)f[g]=l[g];return f}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(l,f){let g,S;for(let F=1;F<arguments.length;F++){S=arguments[F];for(g in S)l[g]=S[g];for(let $=0;$<C.length;$++)g=C[$],Object.prototype.hasOwnProperty.call(S,g)&&(l[g]=S[g])}}function R(l){var f=1;l=l.split(":");const g=[];for(;0<f&&l.length;)g.push(l.shift()),f--;return l.length&&g.push(l.join(":")),g}function T(l){a.setTimeout(()=>{throw l},0)}function b(){var l=oe;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class W{constructor(){this.h=this.g=null}add(f,g){const S=H.get();S.set(f,g),this.h?this.h.next=S:this.g=S,this.h=S}}var H=new E(()=>new ue,l=>l.reset());class ue{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let me,K=!1,oe=new W,ne=()=>{const l=a.Promise.resolve(void 0);me=()=>{l.then(he)}};var he=()=>{for(var l;l=b();){try{l.h.call(l.g)}catch(g){T(g)}var f=H;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}K=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ve(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}ve.prototype.h=function(){this.defaultPrevented=!0};var $e=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return l}();function je(l,f){if(ve.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,S=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(M){e:{try{D(f.nodeName);var F=!0;break e}catch{}F=!1}F||(f=null)}}else g=="mouseover"?f=l.fromElement:g=="mouseout"&&(f=l.toElement);this.relatedTarget=f,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Ze[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&je.aa.h.call(this)}}_(je,ve);var Ze={2:"touch",3:"pen",4:"mouse"};je.prototype.h=function(){je.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var xe="closure_listenable_"+(1e6*Math.random()|0),Xe=0;function Le(l,f,g,S,F){this.listener=l,this.proxy=null,this.src=f,this.type=g,this.capture=!!S,this.ha=F,this.key=++Xe,this.da=this.fa=!1}function It(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Fn(l){this.src=l,this.g={},this.h=0}Fn.prototype.add=function(l,f,g,S,F){var $=l.toString();l=this.g[$],l||(l=this.g[$]=[],this.h++);var Y=Nr(l,f,S,F);return-1<Y?(f=l[Y],g||(f.fa=!1)):(f=new Le(f,this.src,$,!!S,F),f.fa=g,l.push(f)),f};function ai(l,f){var g=f.type;if(g in l.g){var S=l.g[g],F=Array.prototype.indexOf.call(S,f,void 0),$;($=0<=F)&&Array.prototype.splice.call(S,F,1),$&&(It(f),l.g[g].length==0&&(delete l.g[g],l.h--))}}function Nr(l,f,g,S){for(var F=0;F<l.length;++F){var $=l[F];if(!$.da&&$.listener==f&&$.capture==!!g&&$.ha==S)return F}return-1}var dr="closure_lm_"+(1e6*Math.random()|0),as={};function Yh(l,f,g,S,F){if(S&&S.once)return U(l,f,g,S,F);if(Array.isArray(f)){for(var $=0;$<f.length;$++)Yh(l,f[$],g,S,F);return null}return g=lt(g),l&&l[xe]?l.K(f,g,c(S)?!!S.capture:!!S,F):Qh(l,f,g,!1,S,F)}function Qh(l,f,g,S,F,$){if(!f)throw Error("Invalid event type");var Y=c(F)?!!F.capture:!!F,ze=ae(l);if(ze||(l[dr]=ze=new Fn(l)),g=ze.add(f,g,S,Y,$),g.proxy)return g;if(S=L(),g.proxy=S,S.src=l,S.listener=g,l.addEventListener)$e||(F=Y),F===void 0&&(F=!1),l.addEventListener(f.toString(),S,F);else if(l.attachEvent)l.attachEvent(Q(f.toString()),S);else if(l.addListener&&l.removeListener)l.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return g}function L(){function l(g){return f.call(l.src,l.listener,g)}const f=G;return l}function U(l,f,g,S,F){if(Array.isArray(f)){for(var $=0;$<f.length;$++)U(l,f[$],g,S,F);return null}return g=lt(g),l&&l[xe]?l.L(f,g,c(S)?!!S.capture:!!S,F):Qh(l,f,g,!0,S,F)}function j(l,f,g,S,F){if(Array.isArray(f))for(var $=0;$<f.length;$++)j(l,f[$],g,S,F);else S=c(S)?!!S.capture:!!S,g=lt(g),l&&l[xe]?(l=l.i,f=String(f).toString(),f in l.g&&($=l.g[f],g=Nr($,g,S,F),-1<g&&(It($[g]),Array.prototype.splice.call($,g,1),$.length==0&&(delete l.g[f],l.h--)))):l&&(l=ae(l))&&(f=l.g[f.toString()],l=-1,f&&(l=Nr(f,g,S,F)),(g=-1<l?f[l]:null)&&Z(g))}function Z(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[xe])ai(f.i,l);else{var g=l.type,S=l.proxy;f.removeEventListener?f.removeEventListener(g,S,l.capture):f.detachEvent?f.detachEvent(Q(g),S):f.addListener&&f.removeListener&&f.removeListener(S),(g=ae(f))?(ai(g,l),g.h==0&&(g.src=null,f[dr]=null)):It(l)}}}function Q(l){return l in as?as[l]:as[l]="on"+l}function G(l,f){if(l.da)l=!0;else{f=new je(f,this);var g=l.listener,S=l.ha||l.src;l.fa&&Z(l),l=g.call(S,f)}return l}function ae(l){return l=l[dr],l instanceof Fn?l:null}var Se="__closure_events_fn_"+(1e9*Math.random()>>>0);function lt(l){return typeof l=="function"?l:(l[Se]||(l[Se]=function(f){return l.handleEvent(f)}),l[Se])}function be(){ce.call(this),this.i=new Fn(this),this.M=this,this.F=null}_(be,ce),be.prototype[xe]=!0,be.prototype.removeEventListener=function(l,f,g,S){j(this,l,f,g,S)};function et(l,f){var g,S=l.F;if(S)for(g=[];S;S=S.F)g.push(S);if(l=l.M,S=f.type||f,typeof f=="string")f=new ve(f,l);else if(f instanceof ve)f.target=f.target||l;else{var F=f;f=new ve(S,l),A(f,F)}if(F=!0,g)for(var $=g.length-1;0<=$;$--){var Y=f.g=g[$];F=Ks(Y,S,!0,f)&&F}if(Y=f.g=l,F=Ks(Y,S,!0,f)&&F,F=Ks(Y,S,!1,f)&&F,g)for($=0;$<g.length;$++)Y=f.g=g[$],F=Ks(Y,S,!1,f)&&F}be.prototype.N=function(){if(be.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var g=l.g[f],S=0;S<g.length;S++)It(g[S]);delete l.g[f],l.h--}}this.F=null},be.prototype.K=function(l,f,g,S){return this.i.add(String(l),f,!1,g,S)},be.prototype.L=function(l,f,g,S){return this.i.add(String(l),f,!0,g,S)};function Ks(l,f,g,S){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var F=!0,$=0;$<f.length;++$){var Y=f[$];if(Y&&!Y.da&&Y.capture==g){var ze=Y.listener,$t=Y.ha||Y.src;Y.fa&&ai(l.i,Y),F=ze.call($t,S)!==!1&&F}}return F&&!S.defaultPrevented}function Ys(l,f,g){if(typeof l=="function")g&&(l=m(l,g));else if(l&&typeof l.handleEvent=="function")l=m(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(l,f||0)}function Qs(l){l.g=Ys(()=>{l.g=null,l.i&&(l.i=!1,Qs(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class Xh extends ce{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Qs(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function li(l){ce.call(this),this.h=l,this.g={}}_(li,ce);var Cu=[];function ga(l){V(l.g,function(f,g){this.g.hasOwnProperty(g)&&Z(f)},l),l.g={}}li.prototype.N=function(){li.aa.N.call(this),ga(this)},li.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Jh=a.JSON.stringify,aS=a.JSON.parse,lS=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Zh(){}Zh.prototype.h=null;function vv(l){return l.h||(l.h=l.i())}function wv(){}var ya={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ef(){ve.call(this,"d")}_(ef,ve);function tf(){ve.call(this,"c")}_(tf,ve);var ls={},_v=null;function ku(){return _v=_v||new be}ls.La="serverreachability";function Ev(l){ve.call(this,ls.La,l)}_(Ev,ve);function va(l){const f=ku();et(f,new Ev(f))}ls.STAT_EVENT="statevent";function Tv(l,f){ve.call(this,ls.STAT_EVENT,l),this.stat=f}_(Tv,ve);function sn(l){const f=ku();et(f,new Tv(f,l))}ls.Ma="timingevent";function bv(l,f){ve.call(this,ls.Ma,l),this.size=f}_(bv,ve);function wa(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},f)}function _a(){this.g=!0}_a.prototype.xa=function(){this.g=!1};function uS(l,f,g,S,F,$){l.info(function(){if(l.g)if($)for(var Y="",ze=$.split("&"),$t=0;$t<ze.length;$t++){var De=ze[$t].split("=");if(1<De.length){var Kt=De[0];De=De[1];var Yt=Kt.split("_");Y=2<=Yt.length&&Yt[1]=="type"?Y+(Kt+"="+De+"&"):Y+(Kt+"=redacted&")}}else Y=null;else Y=$;return"XMLHTTP REQ ("+S+") [attempt "+F+"]: "+f+`
`+g+`
`+Y})}function cS(l,f,g,S,F,$,Y){l.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+F+"]: "+f+`
`+g+`
`+$+" "+Y})}function Xs(l,f,g,S){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+hS(l,g)+(S?" "+S:"")})}function dS(l,f){l.info(function(){return"TIMEOUT: "+f})}_a.prototype.info=function(){};function hS(l,f){if(!l.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var S=g[l];if(!(2>S.length)){var F=S[1];if(Array.isArray(F)&&!(1>F.length)){var $=F[0];if($!="noop"&&$!="stop"&&$!="close")for(var Y=1;Y<F.length;Y++)F[Y]=""}}}}return Jh(g)}catch{return f}}var Au={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Iv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},nf;function Nu(){}_(Nu,Zh),Nu.prototype.g=function(){return new XMLHttpRequest},Nu.prototype.i=function(){return{}},nf=new Nu;function ui(l,f,g,S){this.j=l,this.i=f,this.l=g,this.R=S||1,this.U=new li(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pv}function Pv(){this.i=null,this.g="",this.h=!1}var xv={},rf={};function sf(l,f,g){l.L=1,l.v=Lu(Rr(f)),l.m=g,l.P=!0,Sv(l,null)}function Sv(l,f){l.F=Date.now(),Ru(l),l.A=Rr(l.v);var g=l.A,S=l.R;Array.isArray(S)||(S=[String(S)]),jv(g.i,"t",S),l.C=0,g=l.j.J,l.h=new Pv,l.g=s0(l.j,g?f:null,!l.m),0<l.O&&(l.M=new Xh(m(l.Y,l,l.g),l.O)),f=l.U,g=l.g,S=l.ca;var F="readystatechange";Array.isArray(F)||(F&&(Cu[0]=F.toString()),F=Cu);for(var $=0;$<F.length;$++){var Y=Yh(g,F[$],S||f.handleEvent,!1,f.h||f);if(!Y)break;f.g[Y.key]=Y}f=l.H?v(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),va(),uS(l.i,l.u,l.A,l.l,l.R,l.m)}ui.prototype.ca=function(l){l=l.target;const f=this.M;f&&Dr(l)==3?f.j():this.Y(l)},ui.prototype.Y=function(l){try{if(l==this.g)e:{const Yt=Dr(this.g);var f=this.g.Ba();const eo=this.g.Z();if(!(3>Yt)&&(Yt!=3||this.g&&(this.h.h||this.g.oa()||Kv(this.g)))){this.J||Yt!=4||f==7||(f==8||0>=eo?va(3):va(2)),of(this);var g=this.g.Z();this.X=g;t:if(Cv(this)){var S=Kv(this.g);l="";var F=S.length,$=Dr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){us(this),Ea(this);var Y="";break t}this.h.i=new a.TextDecoder}for(f=0;f<F;f++)this.h.h=!0,l+=this.h.i.decode(S[f],{stream:!($&&f==F-1)});S.length=0,this.h.g+=l,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=g==200,cS(this.i,this.u,this.A,this.l,this.R,Yt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,$t=this.g;if((ze=$t.g?$t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(ze)){var De=ze;break t}}De=null}if(g=De)Xs(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,af(this,g);else{this.o=!1,this.s=3,sn(12),us(this),Ea(this);break e}}if(this.P){g=!0;let Yn;for(;!this.J&&this.C<Y.length;)if(Yn=fS(this,Y),Yn==rf){Yt==4&&(this.s=4,sn(14),g=!1),Xs(this.i,this.l,null,"[Incomplete Response]");break}else if(Yn==xv){this.s=4,sn(15),Xs(this.i,this.l,Y,"[Invalid Chunk]"),g=!1;break}else Xs(this.i,this.l,Yn,null),af(this,Yn);if(Cv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Yt!=4||Y.length!=0||this.h.h||(this.s=1,sn(16),g=!1),this.o=this.o&&g,!g)Xs(this.i,this.l,Y,"[Invalid Chunked Response]"),us(this),Ea(this);else if(0<Y.length&&!this.W){this.W=!0;var Kt=this.j;Kt.g==this&&Kt.ba&&!Kt.M&&(Kt.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),ff(Kt),Kt.M=!0,sn(11))}}else Xs(this.i,this.l,Y,null),af(this,Y);Yt==4&&us(this),this.o&&!this.J&&(Yt==4?t0(this.j,this):(this.o=!1,Ru(this)))}else AS(this.g),g==400&&0<Y.indexOf("Unknown SID")?(this.s=3,sn(12)):(this.s=0,sn(13)),us(this),Ea(this)}}}catch{}finally{}};function Cv(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function fS(l,f){var g=l.C,S=f.indexOf(`
`,g);return S==-1?rf:(g=Number(f.substring(g,S)),isNaN(g)?xv:(S+=1,S+g>f.length?rf:(f=f.slice(S,S+g),l.C=S+g,f)))}ui.prototype.cancel=function(){this.J=!0,us(this)};function Ru(l){l.S=Date.now()+l.I,kv(l,l.I)}function kv(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=wa(m(l.ba,l),f)}function of(l){l.B&&(a.clearTimeout(l.B),l.B=null)}ui.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(dS(this.i,this.A),this.L!=2&&(va(),sn(17)),us(this),this.s=2,Ea(this)):kv(this,this.S-l)};function Ea(l){l.j.G==0||l.J||t0(l.j,l)}function us(l){of(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,ga(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function af(l,f){try{var g=l.j;if(g.G!=0&&(g.g==l||lf(g.h,l))){if(!l.K&&lf(g.h,l)&&g.G==3){try{var S=g.Da.g.parse(f)}catch{S=null}if(Array.isArray(S)&&S.length==3){var F=S;if(F[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)ju(g),Uu(g);else break e;hf(g),sn(18)}}else g.za=F[1],0<g.za-g.T&&37500>F[2]&&g.F&&g.v==0&&!g.C&&(g.C=wa(m(g.Za,g),6e3));if(1>=Rv(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else ds(g,11)}else if((l.K||g.g==l)&&ju(g),!y(f))for(F=g.Da.g.parse(f),f=0;f<F.length;f++){let De=F[f];if(g.T=De[0],De=De[1],g.G==2)if(De[0]=="c"){g.K=De[1],g.ia=De[2];const Kt=De[3];Kt!=null&&(g.la=Kt,g.j.info("VER="+g.la));const Yt=De[4];Yt!=null&&(g.Aa=Yt,g.j.info("SVER="+g.Aa));const eo=De[5];eo!=null&&typeof eo=="number"&&0<eo&&(S=1.5*eo,g.L=S,g.j.info("backChannelRequestTimeoutMs_="+S)),S=g;const Yn=l.g;if(Yn){const zu=Yn.g?Yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zu){var $=S.h;$.g||zu.indexOf("spdy")==-1&&zu.indexOf("quic")==-1&&zu.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(uf($,$.h),$.h=null))}if(S.D){const pf=Yn.g?Yn.g.getResponseHeader("X-HTTP-Session-Id"):null;pf&&(S.ya=pf,qe(S.I,S.D,pf))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),S=g;var Y=l;if(S.qa=i0(S,S.J?S.ia:null,S.W),Y.K){Dv(S.h,Y);var ze=Y,$t=S.L;$t&&(ze.I=$t),ze.B&&(of(ze),Ru(ze)),S.g=Y}else Zv(S);0<g.i.length&&$u(g)}else De[0]!="stop"&&De[0]!="close"||ds(g,7);else g.G==3&&(De[0]=="stop"||De[0]=="close"?De[0]=="stop"?ds(g,7):df(g):De[0]!="noop"&&g.l&&g.l.ta(De),g.v=0)}}va(4)}catch{}}var pS=class{constructor(l,f){this.g=l,this.map=f}};function Av(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Nv(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Rv(l){return l.h?1:l.g?l.g.size:0}function lf(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function uf(l,f){l.g?l.g.add(f):l.h=f}function Dv(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}Av.prototype.cancel=function(){if(this.i=Ov(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Ov(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const g of l.g.values())f=f.concat(g.D);return f}return P(l.i)}function mS(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var f=[],g=l.length,S=0;S<g;S++)f.push(l[S]);return f}f=[],g=0;for(S in l)f[g++]=l[S];return f}function gS(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var f=[];l=l.length;for(var g=0;g<l;g++)f.push(g);return f}f=[],g=0;for(const S in l)f[g++]=S;return f}}}function Lv(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var g=gS(l),S=mS(l),F=S.length,$=0;$<F;$++)f.call(void 0,S[$],g&&g[$],l)}var Mv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yS(l,f){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var S=l[g].indexOf("="),F=null;if(0<=S){var $=l[g].substring(0,S);F=l[g].substring(S+1)}else $=l[g];f($,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function cs(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof cs){this.h=l.h,Du(this,l.j),this.o=l.o,this.g=l.g,Ou(this,l.s),this.l=l.l;var f=l.i,g=new Ia;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),Vv(this,g),this.m=l.m}else l&&(f=String(l).match(Mv))?(this.h=!1,Du(this,f[1]||"",!0),this.o=Ta(f[2]||""),this.g=Ta(f[3]||"",!0),Ou(this,f[4]),this.l=Ta(f[5]||"",!0),Vv(this,f[6]||"",!0),this.m=Ta(f[7]||"")):(this.h=!1,this.i=new Ia(null,this.h))}cs.prototype.toString=function(){var l=[],f=this.j;f&&l.push(ba(f,Fv,!0),":");var g=this.g;return(g||f=="file")&&(l.push("//"),(f=this.o)&&l.push(ba(f,Fv,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(ba(g,g.charAt(0)=="/"?_S:wS,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",ba(g,TS)),l.join("")};function Rr(l){return new cs(l)}function Du(l,f,g){l.j=g?Ta(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function Ou(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function Vv(l,f,g){f instanceof Ia?(l.i=f,bS(l.i,l.h)):(g||(f=ba(f,ES)),l.i=new Ia(f,l.h))}function qe(l,f,g){l.i.set(f,g)}function Lu(l){return qe(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Ta(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function ba(l,f,g){return typeof l=="string"?(l=encodeURI(l).replace(f,vS),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function vS(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Fv=/[#\/\?@]/g,wS=/[#\?:]/g,_S=/[#\?]/g,ES=/[#\?@]/g,TS=/#/g;function Ia(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function ci(l){l.g||(l.g=new Map,l.h=0,l.i&&yS(l.i,function(f,g){l.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=Ia.prototype,t.add=function(l,f){ci(this),this.i=null,l=Js(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(f),this.h+=1,this};function Uv(l,f){ci(l),f=Js(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function $v(l,f){return ci(l),f=Js(l,f),l.g.has(f)}t.forEach=function(l,f){ci(this),this.g.forEach(function(g,S){g.forEach(function(F){l.call(f,F,S,this)},this)},this)},t.na=function(){ci(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let S=0;S<f.length;S++){const F=l[S];for(let $=0;$<F.length;$++)g.push(f[S])}return g},t.V=function(l){ci(this);let f=[];if(typeof l=="string")$v(this,l)&&(f=f.concat(this.g.get(Js(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)f=f.concat(l[g])}return f},t.set=function(l,f){return ci(this),this.i=null,l=Js(this,l),$v(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},t.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function jv(l,f,g){Uv(l,f),0<g.length&&(l.i=null,l.g.set(Js(l,f),P(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var S=f[g];const $=encodeURIComponent(String(S)),Y=this.V(S);for(S=0;S<Y.length;S++){var F=$;Y[S]!==""&&(F+="="+encodeURIComponent(String(Y[S]))),l.push(F)}}return this.i=l.join("&")};function Js(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function bS(l,f){f&&!l.j&&(ci(l),l.i=null,l.g.forEach(function(g,S){var F=S.toLowerCase();S!=F&&(Uv(this,S),jv(this,F,g))},l)),l.j=f}function IS(l,f){const g=new _a;if(a.Image){const S=new Image;S.onload=w(di,g,"TestLoadImage: loaded",!0,f,S),S.onerror=w(di,g,"TestLoadImage: error",!1,f,S),S.onabort=w(di,g,"TestLoadImage: abort",!1,f,S),S.ontimeout=w(di,g,"TestLoadImage: timeout",!1,f,S),a.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=l}else f(!1)}function PS(l,f){const g=new _a,S=new AbortController,F=setTimeout(()=>{S.abort(),di(g,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:S.signal}).then($=>{clearTimeout(F),$.ok?di(g,"TestPingServer: ok",!0,f):di(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(F),di(g,"TestPingServer: error",!1,f)})}function di(l,f,g,S,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),S(g)}catch{}}function xS(){this.g=new lS}function SS(l,f,g){const S=g||"";try{Lv(l,function(F,$){let Y=F;c(F)&&(Y=Jh(F)),f.push(S+$+"="+encodeURIComponent(Y))})}catch(F){throw f.push(S+"type="+encodeURIComponent("_badmap")),F}}function Mu(l){this.l=l.Ub||null,this.j=l.eb||!1}_(Mu,Zh),Mu.prototype.g=function(){return new Vu(this.l,this.j)},Mu.prototype.i=function(l){return function(){return l}}({});function Vu(l,f){be.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(Vu,be),t=Vu.prototype,t.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,xa(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Pa(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,xa(this)),this.g&&(this.readyState=3,xa(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bv(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Bv(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?Pa(this):xa(this),this.readyState==3&&Bv(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Pa(this))},t.Qa=function(l){this.g&&(this.response=l,Pa(this))},t.ga=function(){this.g&&Pa(this)};function Pa(l){l.readyState=4,l.l=null,l.j=null,l.v=null,xa(l)}t.setRequestHeader=function(l,f){this.u.append(l,f)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=f.next();return l.join(`\r
`)};function xa(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Vu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function zv(l){let f="";return V(l,function(g,S){f+=S,f+=":",f+=g,f+=`\r
`}),f}function cf(l,f,g){e:{for(S in g){var S=!1;break e}S=!0}S||(g=zv(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):qe(l,f,g))}function ut(l){be.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(ut,be);var CS=/^https?$/i,kS=["POST","PUT"];t=ut.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,f,g,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():nf.g(),this.v=this.o?vv(this.o):vv(nf),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch($){Wv(this,$);return}if(l=g||"",g=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var F in S)g.set(F,S[F]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const $ of S.keys())g.set($,S.get($));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(g.keys()).find($=>$.toLowerCase()=="content-type"),F=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(kS,f,void 0))||S||F||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,Y]of g)this.g.setRequestHeader($,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Gv(this),this.u=!0,this.g.send(l),this.u=!1}catch($){Wv(this,$)}};function Wv(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,Hv(l),Fu(l)}function Hv(l){l.A||(l.A=!0,et(l,"complete"),et(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,et(this,"complete"),et(this,"abort"),Fu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fu(this,!0)),ut.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?qv(this):this.bb())},t.bb=function(){qv(this)};function qv(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Dr(l)!=4||l.Z()!=2)){if(l.u&&Dr(l)==4)Ys(l.Ea,0,l);else if(et(l,"readystatechange"),Dr(l)==4){l.h=!1;try{const Y=l.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var S;if(S=Y===0){var F=String(l.D).match(Mv)[1]||null;!F&&a.self&&a.self.location&&(F=a.self.location.protocol.slice(0,-1)),S=!CS.test(F?F.toLowerCase():"")}g=S}if(g)et(l,"complete"),et(l,"success");else{l.m=6;try{var $=2<Dr(l)?l.g.statusText:""}catch{$=""}l.l=$+" ["+l.Z()+"]",Hv(l)}}finally{Fu(l)}}}}function Fu(l,f){if(l.g){Gv(l);const g=l.g,S=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||et(l,"ready");try{g.onreadystatechange=S}catch{}}}function Gv(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Dr(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Dr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),aS(f)}};function Kv(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function AS(l){const f={};l=(l.g&&2<=Dr(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<l.length;S++){if(y(l[S]))continue;var g=R(l[S]);const F=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const $=f[F]||[];f[F]=$,$.push(g)}I(f,function(S){return S.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Sa(l,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||f}function Yv(l){this.Aa=0,this.i=[],this.j=new _a,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Sa("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Sa("baseRetryDelayMs",5e3,l),this.cb=Sa("retryDelaySeedMs",1e4,l),this.Wa=Sa("forwardChannelMaxRetries",2,l),this.wa=Sa("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Av(l&&l.concurrentRequestLimit),this.Da=new xS,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Yv.prototype,t.la=8,t.G=1,t.connect=function(l,f,g,S){sn(0),this.W=l,this.H=f||{},g&&S!==void 0&&(this.H.OSID=g,this.H.OAID=S),this.F=this.X,this.I=i0(this,null,this.W),$u(this)};function df(l){if(Qv(l),l.G==3){var f=l.U++,g=Rr(l.I);if(qe(g,"SID",l.K),qe(g,"RID",f),qe(g,"TYPE","terminate"),Ca(l,g),f=new ui(l,l.j,f),f.L=2,f.v=Lu(Rr(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=s0(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Ru(f)}r0(l)}function Uu(l){l.g&&(ff(l),l.g.cancel(),l.g=null)}function Qv(l){Uu(l),l.u&&(a.clearTimeout(l.u),l.u=null),ju(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function $u(l){if(!Nv(l.h)&&!l.s){l.s=!0;var f=l.Ga;me||ne(),K||(me(),K=!0),oe.add(f,l),l.B=0}}function NS(l,f){return Rv(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=wa(m(l.Ga,l,f),n0(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const F=new ui(this,this.j,l);let $=this.o;if(this.S&&($?($=v($),A($,this.S)):$=this.S),this.m!==null||this.O||(F.H=$,$=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var S=this.i[g];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(f+=S,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=Jv(this,F,f),g=Rr(this.I),qe(g,"RID",l),qe(g,"CVER",22),this.D&&qe(g,"X-HTTP-Session-Id",this.D),Ca(this,g),$&&(this.O?f="headers="+encodeURIComponent(String(zv($)))+"&"+f:this.m&&cf(g,this.m,$)),uf(this.h,F),this.Ua&&qe(g,"TYPE","init"),this.P?(qe(g,"$req",f),qe(g,"SID","null"),F.T=!0,sf(F,g,null)):sf(F,g,f),this.G=2}}else this.G==3&&(l?Xv(this,l):this.i.length==0||Nv(this.h)||Xv(this))};function Xv(l,f){var g;f?g=f.l:g=l.U++;const S=Rr(l.I);qe(S,"SID",l.K),qe(S,"RID",g),qe(S,"AID",l.T),Ca(l,S),l.m&&l.o&&cf(S,l.m,l.o),g=new ui(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),f&&(l.i=f.D.concat(l.i)),f=Jv(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),uf(l.h,g),sf(g,S,f)}function Ca(l,f){l.H&&V(l.H,function(g,S){qe(f,S,g)}),l.l&&Lv({},function(g,S){qe(f,S,g)})}function Jv(l,f,g){g=Math.min(l.i.length,g);var S=l.l?m(l.l.Na,l.l,l):null;e:{var F=l.i;let $=-1;for(;;){const Y=["count="+g];$==-1?0<g?($=F[0].g,Y.push("ofs="+$)):$=0:Y.push("ofs="+$);let ze=!0;for(let $t=0;$t<g;$t++){let De=F[$t].g;const Kt=F[$t].map;if(De-=$,0>De)$=Math.max(0,F[$t].g-100),ze=!1;else try{SS(Kt,Y,"req"+De+"_")}catch{S&&S(Kt)}}if(ze){S=Y.join("&");break e}}}return l=l.i.splice(0,g),f.D=l,S}function Zv(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;me||ne(),K||(me(),K=!0),oe.add(f,l),l.v=0}}function hf(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=wa(m(l.Fa,l),n0(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,e0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=wa(m(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,sn(10),Uu(this),e0(this))};function ff(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function e0(l){l.g=new ui(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=Rr(l.qa);qe(f,"RID","rpc"),qe(f,"SID",l.K),qe(f,"AID",l.T),qe(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&qe(f,"TO",l.ja),qe(f,"TYPE","xmlhttp"),Ca(l,f),l.m&&l.o&&cf(f,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=Lu(Rr(f)),g.m=null,g.P=!0,Sv(g,l)}t.Za=function(){this.C!=null&&(this.C=null,Uu(this),hf(this),sn(19))};function ju(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function t0(l,f){var g=null;if(l.g==f){ju(l),ff(l),l.g=null;var S=2}else if(lf(l.h,f))g=f.D,Dv(l.h,f),S=1;else return;if(l.G!=0){if(f.o)if(S==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var F=l.B;S=ku(),et(S,new bv(S,g)),$u(l)}else Zv(l);else if(F=f.s,F==3||F==0&&0<f.X||!(S==1&&NS(l,f)||S==2&&hf(l)))switch(g&&0<g.length&&(f=l.h,f.i=f.i.concat(g)),F){case 1:ds(l,5);break;case 4:ds(l,10);break;case 3:ds(l,6);break;default:ds(l,2)}}}function n0(l,f){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*f}function ds(l,f){if(l.j.info("Error code "+f),f==2){var g=m(l.fb,l),S=l.Xa;const F=!S;S=new cs(S||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Du(S,"https"),Lu(S),F?IS(S.toString(),g):PS(S.toString(),g)}else sn(2);l.G=0,l.l&&l.l.sa(f),r0(l),Qv(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),sn(2)):(this.j.info("Failed to ping google.com"),sn(1))};function r0(l){if(l.G=0,l.ka=[],l.l){const f=Ov(l.h);(f.length!=0||l.i.length!=0)&&(N(l.ka,f),N(l.ka,l.i),l.h.i.length=0,P(l.i),l.i.length=0),l.l.ra()}}function i0(l,f,g){var S=g instanceof cs?Rr(g):new cs(g);if(S.g!="")f&&(S.g=f+"."+S.g),Ou(S,S.s);else{var F=a.location;S=F.protocol,f=f?f+"."+F.hostname:F.hostname,F=+F.port;var $=new cs(null);S&&Du($,S),f&&($.g=f),F&&Ou($,F),g&&($.l=g),S=$}return g=l.D,f=l.ya,g&&f&&qe(S,g,f),qe(S,"VER",l.la),Ca(l,S),S}function s0(l,f,g){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new ut(new Mu({eb:g})):new ut(l.pa),f.Ha(l.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function o0(){}t=o0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Bu(){}Bu.prototype.g=function(l,f){return new Cn(l,f)};function Cn(l,f){be.call(this),this.g=new Yv(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!y(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!y(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new Zs(this)}_(Cn,be),Cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){df(this.g)},Cn.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=Jh(l),l=g);f.i.push(new pS(f.Ya++,l)),f.G==3&&$u(f)},Cn.prototype.N=function(){this.g.l=null,delete this.j,df(this.g),delete this.g,Cn.aa.N.call(this)};function a0(l){ef.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const g in f){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}_(a0,ef);function l0(){tf.call(this),this.status=1}_(l0,tf);function Zs(l){this.g=l}_(Zs,o0),Zs.prototype.ua=function(){et(this.g,"a")},Zs.prototype.ta=function(l){et(this.g,new a0(l))},Zs.prototype.sa=function(l){et(this.g,new l0)},Zs.prototype.ra=function(){et(this.g,"b")},Bu.prototype.createWebChannel=Bu.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,SI=function(){return new Bu},xI=function(){return ku()},PI=ls,ym={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Au.NO_ERROR=0,Au.TIMEOUT=8,Au.HTTP_ERROR=6,Lc=Au,Iv.COMPLETE="complete",II=Iv,wv.EventType=ya,ya.OPEN="a",ya.CLOSE="b",ya.ERROR="c",ya.MESSAGE="d",be.prototype.listen=be.prototype.K,Ya=wv,ut.prototype.listenOnce=ut.prototype.L,ut.prototype.getLastError=ut.prototype.Ka,ut.prototype.getLastErrorCode=ut.prototype.Ba,ut.prototype.getStatus=ut.prototype.Z,ut.prototype.getResponseJson=ut.prototype.Oa,ut.prototype.getResponseText=ut.prototype.oa,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Ha,bI=ut}).apply(typeof lc<"u"?lc:typeof self<"u"?self:typeof window<"u"?window:{});const d_="@firebase/firestore",h_="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Zt.UNAUTHENTICATED=new Zt(null),Zt.GOOGLE_CREDENTIALS=new Zt("google-credentials-uid"),Zt.FIRST_PARTY=new Zt("first-party-uid"),Zt.MOCK_USER=new Zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ca="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new Gg("@firebase/firestore");function so(){return Ms.logLevel}function te(t,...e){if(Ms.logLevel<=Ee.DEBUG){const n=e.map(oy);Ms.debug(`Firestore (${ca}): ${t}`,...n)}}function ei(t,...e){if(Ms.logLevel<=Ee.ERROR){const n=e.map(oy);Ms.error(`Firestore (${ca}): ${t}`,...n)}}function Ki(t,...e){if(Ms.logLevel<=Ee.WARN){const n=e.map(oy);Ms.warn(`Firestore (${ca}): ${t}`,...n)}}function oy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function de(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,CI(t,r,n)}function CI(t,e,n){let r=`FIRESTORE (${ca}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ei(r),new Error(r)}function Ve(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||CI(e,i,r)}function pe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends ii{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $O{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Zt.UNAUTHENTICATED))}shutdown(){}}class jO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class BO{constructor(e){this.t=e,this.currentUser=Zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ve(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new qr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new qr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new qr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ve(typeof r.accessToken=="string",31837,{l:r}),new kI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ve(e===null||typeof e=="string",2055,{h:e}),new Zt(e)}}class zO{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Zt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class WO{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new zO(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Zt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class f_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class HO{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ct(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ve(this.o===void 0,3512);const r=s=>{s.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,te("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new f_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ve(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new f_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=qO(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function ge(t,e){return t<e?-1:t>e?1:0}function vm(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return ge(r,i);{const s=AI(),o=GO(s.encode(p_(t,n)),s.encode(p_(e,n)));return o!==0?o:ge(r,i)}}n+=r>65535?2:1}return ge(t.length,e.length)}function p_(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function GO(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ge(t[n],e[n]);return ge(t.length,e.length)}function Ho(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_="__name__";class mr{constructor(e,n,r){n===void 0?n=0:n>e.length&&de(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&de(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return mr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof mr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=mr.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return ge(e.length,n.length)}static compareSegments(e,n){const r=mr.isNumericId(e),i=mr.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?mr.extractNumericId(e).compare(mr.extractNumericId(n)):vm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Bi.fromString(e.substring(4,e.length-2))}}class We extends mr{construct(e,n,r){return new We(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new We(n)}static emptyPath(){return new We([])}}const KO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends mr{construct(e,n,r){return new Wt(e,n,r)}static isValidIdentifier(e){return KO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===m_}static keyField(){return new Wt([m_])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new J(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new J(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new J(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new J(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wt(n)}static emptyPath(){return new Wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.path=e}static fromPath(e){return new le(We.fromString(e))}static fromName(e){return new le(We.fromString(e).popFirst(5))}static empty(){return new le(We.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&We.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return We.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new le(new We(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NI(t,e,n){if(!n)throw new J(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function YO(t,e,n,r){if(e===!0&&r===!0)throw new J(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function g_(t){if(!le.isDocumentKey(t))throw new J(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function y_(t){if(le.isDocumentKey(t))throw new J(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function RI(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function bh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":de(12329,{type:typeof t})}function dn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=bh(t);throw new J(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function QO(t,e){if(e<=0)throw new J(B.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(t,e){const n={typeString:t};return e&&(n.value=e),n}function hu(t,e){if(!RI(t))throw new J(B.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new J(B.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_=-62135596800,w_=1e6;class Ye{static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*w_);return new Ye(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<v_)throw new J(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/w_}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(hu(e,Ye._jsonSchema))return new Ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-v_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ye._jsonSchemaVersion="firestore/timestamp/1.0",Ye._jsonSchema={type:Tt("string",Ye._jsonSchemaVersion),seconds:Tt("number"),nanoseconds:Tt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{static fromTimestamp(e){return new fe(e)}static min(){return new fe(new Ye(0,0))}static max(){return new fe(new Ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql=-1;function XO(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=fe.fromTimestamp(r===1e9?new Ye(n+1,0):new Ye(n,r));return new Yi(i,le.empty(),e)}function JO(t){return new Yi(t.readTime,t.key,ql)}class Yi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Yi(fe.min(),le.empty(),ql)}static max(){return new Yi(fe.max(),le.empty(),ql)}}function ZO(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=le.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function da(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==eL)throw t;te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&de(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,r)=>{n(e)})}static reject(e){return new z((n,r)=>{r(e)})}static waitFor(e){return new z((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=z.resolve(!1);for(const r of e)n=n.next(i=>i?z.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new z((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(d=>{o[c]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new z((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function nL(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ha(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Ih.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly=-1;function Ph(t){return t==null}function Td(t){return t===0&&1/t==-1/0}function rL(t){return typeof t=="number"&&Number.isInteger(t)&&!Td(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI="";function iL(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=__(e)),e=sL(t.get(n),e);return __(e)}function sL(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case DI:n+="";break;default:n+=s}}return n}function __(t){return t+DI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function is(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function OI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n){this.comparator=e,this.root=n||Bt.EMPTY}insert(e,n){return new ot(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Bt.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uc(this.root,e,this.comparator,!1)}getReverseIterator(){return new uc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uc(this.root,e,this.comparator,!0)}}class uc{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Bt.RED,this.left=i??Bt.EMPTY,this.right=s??Bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Bt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Bt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw de(43730,{key:this.key,value:this.value});if(this.right.isRed())throw de(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw de(27949);return e+(this.isRed()?0:1)}}Bt.EMPTY=null,Bt.RED=!0,Bt.BLACK=!1;Bt.EMPTY=new class{constructor(){this.size=0}get key(){throw de(57766)}get value(){throw de(16141)}get color(){throw de(16727)}get left(){throw de(29726)}get right(){throw de(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new Bt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new T_(this.data.getIterator())}getIteratorFrom(e){return new T_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Nt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Nt(this.comparator);return n.data=e,n}}class T_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new Nn([])}unionWith(e){let n=new Nt(Wt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Nn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ho(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new LI("Invalid base64 string: "+s):s}}(e);return new Gt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Gt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gt.EMPTY_BYTE_STRING=new Gt("");const oL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qi(t){if(Ve(!!t,39018),typeof t=="string"){let e=0;const n=oL.exec(t);if(Ve(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pt(t.seconds),nanos:pt(t.nanos)}}function pt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Xi(t){return typeof t=="string"?Gt.fromBase64String(t):Gt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI="server_timestamp",VI="__type__",FI="__previous_value__",UI="__local_write_time__";function uy(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[VI])===null||n===void 0?void 0:n.stringValue)===MI}function xh(t){const e=t.mapValue.fields[FI];return uy(e)?xh(e):e}function Gl(t){const e=Qi(t.mapValue.fields[UI].timestampValue);return new Ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e,n,r,i,s,o,a,u,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=d}}const bd="(default)";class Kl{constructor(e,n){this.projectId=e,this.database=n||bd}static empty(){return new Kl("","")}get isDefaultDatabase(){return this.database===bd}isEqual(e){return e instanceof Kl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I="__type__",jI="__max__",cc={mapValue:{fields:{__type__:{stringValue:jI}}}},BI="__vector__",Id="value";function Ji(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?uy(t)?4:uL(t)?9007199254740991:lL(t)?10:11:de(28295,{value:t})}function kr(t,e){if(t===e)return!0;const n=Ji(t);if(n!==Ji(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Gl(t).isEqual(Gl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Qi(i.timestampValue),a=Qi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Xi(i.bytesValue).isEqual(Xi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return pt(i.geoPointValue.latitude)===pt(s.geoPointValue.latitude)&&pt(i.geoPointValue.longitude)===pt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return pt(i.integerValue)===pt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=pt(i.doubleValue),a=pt(s.doubleValue);return o===a?Td(o)===Td(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ho(t.arrayValue.values||[],e.arrayValue.values||[],kr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(E_(o)!==E_(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!kr(o[u],a[u])))return!1;return!0}(t,e);default:return de(52216,{left:t})}}function Yl(t,e){return(t.values||[]).find(n=>kr(n,e))!==void 0}function qo(t,e){if(t===e)return 0;const n=Ji(t),r=Ji(e);if(n!==r)return ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=pt(s.integerValue||s.doubleValue),u=pt(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return b_(t.timestampValue,e.timestampValue);case 4:return b_(Gl(t),Gl(e));case 5:return vm(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Xi(s),u=Xi(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){const d=ge(a[c],u[c]);if(d!==0)return d}return ge(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ge(pt(s.latitude),pt(o.latitude));return a!==0?a:ge(pt(s.longitude),pt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return I_(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,c,d;const h=s.fields||{},m=o.fields||{},w=(a=h[Id])===null||a===void 0?void 0:a.arrayValue,_=(u=m[Id])===null||u===void 0?void 0:u.arrayValue,P=ge(((c=w==null?void 0:w.values)===null||c===void 0?void 0:c.length)||0,((d=_==null?void 0:_.values)===null||d===void 0?void 0:d.length)||0);return P!==0?P:I_(w,_)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===cc.mapValue&&o===cc.mapValue)return 0;if(s===cc.mapValue)return 1;if(o===cc.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),c=o.fields||{},d=Object.keys(c);u.sort(),d.sort();for(let h=0;h<u.length&&h<d.length;++h){const m=vm(u[h],d[h]);if(m!==0)return m;const w=qo(a[u[h]],c[d[h]]);if(w!==0)return w}return ge(u.length,d.length)}(t.mapValue,e.mapValue);default:throw de(23264,{le:n})}}function b_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);const n=Qi(t),r=Qi(e),i=ge(n.seconds,r.seconds);return i!==0?i:ge(n.nanos,r.nanos)}function I_(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=qo(n[i],r[i]);if(s)return s}return ge(n.length,r.length)}function Go(t){return wm(t)}function wm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Qi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Xi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return le.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=wm(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${wm(n.fields[o])}`;return i+"}"}(t.mapValue):de(61005,{value:t})}function Mc(t){switch(Ji(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=xh(t);return e?16+Mc(e):16;case 5:return 2*t.stringValue.length;case 6:return Xi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Mc(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return is(r.fields,(s,o)=>{i+=s.length+Mc(o)}),i}(t.mapValue);default:throw de(13486,{value:t})}}function P_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function _m(t){return!!t&&"integerValue"in t}function cy(t){return!!t&&"arrayValue"in t}function x_(t){return!!t&&"nullValue"in t}function S_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Vc(t){return!!t&&"mapValue"in t}function lL(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[$I])===null||n===void 0?void 0:n.stringValue)===BI}function yl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return is(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=yl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=yl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function uL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===jI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.value=e}static empty(){return new wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Vc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=yl(n)}setAll(e){let n=Wt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=yl(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Vc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return kr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Vc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){is(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new wn(yl(this.value))}}function zI(t){const e=[];return is(t.fields,(n,r)=>{const i=new Wt([n]);if(Vc(r)){const s=zI(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Nn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new tn(e,0,fe.min(),fe.min(),fe.min(),wn.empty(),0)}static newFoundDocument(e,n,r,i){return new tn(e,1,n,fe.min(),r,i,0)}static newNoDocument(e,n){return new tn(e,2,n,fe.min(),fe.min(),wn.empty(),0)}static newUnknownDocument(e,n){return new tn(e,3,n,fe.min(),fe.min(),wn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,n){this.position=e,this.inclusive=n}}function C_(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=le.comparator(le.fromName(o.referenceValue),n.key):r=qo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function k_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!kr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,n="asc"){this.field=e,this.dir=n}}function cL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{}class Et extends WI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new hL(e,n,r):n==="array-contains"?new mL(e,r):n==="in"?new gL(e,r):n==="not-in"?new yL(e,r):n==="array-contains-any"?new vL(e,r):new Et(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new fL(e,r):new pL(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(qo(n,this.value)):n!==null&&Ji(this.value)===Ji(n)&&this.matchesComparison(qo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return de(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cr extends WI{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new cr(e,n)}matches(e){return HI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function HI(t){return t.op==="and"}function qI(t){return dL(t)&&HI(t)}function dL(t){for(const e of t.filters)if(e instanceof cr)return!1;return!0}function Em(t){if(t instanceof Et)return t.field.canonicalString()+t.op.toString()+Go(t.value);if(qI(t))return t.filters.map(e=>Em(e)).join(",");{const e=t.filters.map(n=>Em(n)).join(",");return`${t.op}(${e})`}}function GI(t,e){return t instanceof Et?function(r,i){return i instanceof Et&&r.op===i.op&&r.field.isEqual(i.field)&&kr(r.value,i.value)}(t,e):t instanceof cr?function(r,i){return i instanceof cr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&GI(o,i.filters[a]),!0):!1}(t,e):void de(19439)}function KI(t){return t instanceof Et?function(n){return`${n.field.canonicalString()} ${n.op} ${Go(n.value)}`}(t):t instanceof cr?function(n){return n.op.toString()+" {"+n.getFilters().map(KI).join(" ,")+"}"}(t):"Filter"}class hL extends Et{constructor(e,n,r){super(e,n,r),this.key=le.fromName(r.referenceValue)}matches(e){const n=le.comparator(e.key,this.key);return this.matchesComparison(n)}}class fL extends Et{constructor(e,n){super(e,"in",n),this.keys=YI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class pL extends Et{constructor(e,n){super(e,"not-in",n),this.keys=YI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function YI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>le.fromName(r.referenceValue))}class mL extends Et{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return cy(n)&&Yl(n.arrayValue,this.value)}}class gL extends Et{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Yl(this.value.arrayValue,n)}}class yL extends Et{constructor(e,n){super(e,"not-in",n)}matches(e){if(Yl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Yl(this.value.arrayValue,n)}}class vL extends Et{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!cy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Yl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}}function A_(t,e=null,n=[],r=[],i=null,s=null,o=null){return new wL(t,e,n,r,i,s,o)}function dy(t){const e=pe(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Em(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ph(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Go(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Go(r)).join(",")),e.Pe=n}return e.Pe}function hy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!cL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!GI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!k_(t.startAt,e.startAt)&&k_(t.endAt,e.endAt)}function Tm(t){return le.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function _L(t,e,n,r,i,s,o,a){return new fa(t,e,n,r,i,s,o,a)}function Sh(t){return new fa(t)}function N_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function QI(t){return t.collectionGroup!==null}function vl(t){const e=pe(t);if(e.Te===null){e.Te=[];const n=new Set;for(const s of e.explicitOrderBy)e.Te.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Nt(Wt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Te.push(new Ql(s,r))}),n.has(Wt.keyField().canonicalString())||e.Te.push(new Ql(Wt.keyField(),r))}return e.Te}function Ir(t){const e=pe(t);return e.Ie||(e.Ie=EL(e,vl(t))),e.Ie}function EL(t,e){if(t.limitType==="F")return A_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Ql(i.field,s)});const n=t.endAt?new Pd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Pd(t.startAt.position,t.startAt.inclusive):null;return A_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function bm(t,e){const n=t.filters.concat([e]);return new fa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function xd(t,e,n){return new fa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ch(t,e){return hy(Ir(t),Ir(e))&&t.limitType===e.limitType}function XI(t){return`${dy(Ir(t))}|lt:${t.limitType}`}function oo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>KI(i)).join(", ")}]`),Ph(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Go(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Go(i)).join(",")),`Target(${r})`}(Ir(t))}; limitType=${t.limitType})`}function kh(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):le.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of vl(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){const c=C_(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,vl(r),i)||r.endAt&&!function(o,a,u){const c=C_(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,vl(r),i))}(t,e)}function TL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function JI(t){return(e,n)=>{let r=!1;for(const i of vl(t)){const s=bL(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function bL(t,e,n){const r=t.field.isKeyField()?le.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),c=a.data.field(s);return u!==null&&c!==null?qo(u,c):de(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return de(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){is(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return OI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL=new ot(le.comparator);function ti(){return IL}const ZI=new ot(le.comparator);function Qa(...t){let e=ZI;for(const n of t)e=e.insert(n.key,n);return e}function eP(t){let e=ZI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Es(){return wl()}function tP(){return wl()}function wl(){return new Hs(t=>t.toString(),(t,e)=>t.isEqual(e))}const PL=new ot(le.comparator),xL=new Nt(le.comparator);function Te(...t){let e=xL;for(const n of t)e=e.add(n);return e}const SL=new Nt(ge);function CL(){return SL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Td(e)?"-0":e}}function nP(t){return{integerValue:""+t}}function kL(t,e){return rL(e)?nP(e):fy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(){this._=void 0}}function AL(t,e,n){return t instanceof Xl?function(i,s){const o={fields:{[VI]:{stringValue:MI},[UI]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&uy(s)&&(s=xh(s)),s&&(o.fields[FI]=s),{mapValue:o}}(n,e):t instanceof Jl?iP(t,e):t instanceof Zl?sP(t,e):function(i,s){const o=rP(i,s),a=R_(o)+R_(i.Ee);return _m(o)&&_m(i.Ee)?nP(a):fy(i.serializer,a)}(t,e)}function NL(t,e,n){return t instanceof Jl?iP(t,e):t instanceof Zl?sP(t,e):n}function rP(t,e){return t instanceof Sd?function(r){return _m(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Xl extends Ah{}class Jl extends Ah{constructor(e){super(),this.elements=e}}function iP(t,e){const n=oP(e);for(const r of t.elements)n.some(i=>kr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Zl extends Ah{constructor(e){super(),this.elements=e}}function sP(t,e){let n=oP(e);for(const r of t.elements)n=n.filter(i=>!kr(i,r));return{arrayValue:{values:n}}}class Sd extends Ah{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function R_(t){return pt(t.integerValue||t.doubleValue)}function oP(t){return cy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(e,n){this.field=e,this.transform=n}}function DL(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Jl&&i instanceof Jl||r instanceof Zl&&i instanceof Zl?Ho(r.elements,i.elements,kr):r instanceof Sd&&i instanceof Sd?kr(r.Ee,i.Ee):r instanceof Xl&&i instanceof Xl}(t.transform,e.transform)}class OL{constructor(e,n){this.version=e,this.transformResults=n}}class hn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new hn}static exists(e){return new hn(void 0,e)}static updateTime(e){return new hn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Nh{}function aP(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Rh(t.key,hn.none()):new fu(t.key,t.data,hn.none());{const n=t.data,r=wn.empty();let i=new Nt(Wt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ss(t.key,r,new Nn(i.toArray()),hn.none())}}function LL(t,e,n){t instanceof fu?function(i,s,o){const a=i.value.clone(),u=O_(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ss?function(i,s,o){if(!Fc(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=O_(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(lP(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function _l(t,e,n,r){return t instanceof fu?function(s,o,a,u){if(!Fc(s.precondition,o))return a;const c=s.value.clone(),d=L_(s.fieldTransforms,u,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ss?function(s,o,a,u){if(!Fc(s.precondition,o))return a;const c=L_(s.fieldTransforms,u,o),d=o.data;return d.setAll(lP(s)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return Fc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function ML(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=rP(r.transform,i||null);s!=null&&(n===null&&(n=wn.empty()),n.set(r.field,s))}return n||null}function D_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ho(r,i,(s,o)=>DL(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class fu extends Nh{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ss extends Nh{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function lP(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function O_(t,e,n){const r=new Map;Ve(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,NL(o,a,n[i]))}return r}function L_(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,AL(s,o,e))}return r}class Rh extends Nh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class VL extends Nh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&LL(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=_l(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=_l(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=tP();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=aP(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(fe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Te())}isEqual(e){return this.batchId===e.batchId&&Ho(this.mutations,e.mutations,(n,r)=>D_(n,r))&&Ho(this.baseMutations,e.baseMutations,(n,r)=>D_(n,r))}}class py{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ve(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return PL}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new py(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vt,Ce;function jL(t){switch(t){case B.OK:return de(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return de(15467,{code:t})}}function uP(t){if(t===void 0)return ei("GRPC error has no .code"),B.UNKNOWN;switch(t){case vt.OK:return B.OK;case vt.CANCELLED:return B.CANCELLED;case vt.UNKNOWN:return B.UNKNOWN;case vt.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case vt.INTERNAL:return B.INTERNAL;case vt.UNAVAILABLE:return B.UNAVAILABLE;case vt.UNAUTHENTICATED:return B.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case vt.NOT_FOUND:return B.NOT_FOUND;case vt.ALREADY_EXISTS:return B.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return B.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case vt.ABORTED:return B.ABORTED;case vt.OUT_OF_RANGE:return B.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return B.UNIMPLEMENTED;case vt.DATA_LOSS:return B.DATA_LOSS;default:return de(39323,{code:t})}}(Ce=vt||(vt={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BL=new Bi([4294967295,4294967295],0);function M_(t){const e=AI().encode(t),n=new TI;return n.update(e),new Uint8Array(n.digest())}function V_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Bi([n,r],0),new Bi([i,s],0)]}class my{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Xa(`Invalid padding: ${n}`);if(r<0)throw new Xa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Xa(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Xa(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Bi.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Bi.fromNumber(r)));return i.compare(BL)===1&&(i=new Bi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=M_(e),[r,i]=V_(n);for(let s=0;s<this.hashCount;s++){const o=this.pe(r,i,s);if(!this.ye(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new my(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;const n=M_(e),[r,i]=V_(n);for(let s=0;s<this.hashCount;s++){const o=this.pe(r,i,s);this.we(o)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Xa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,pu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Dh(fe.min(),i,new ot(ge),ti(),Te())}}class pu{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new pu(r,n,Te(),Te(),Te())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class cP{constructor(e,n){this.targetId=e,this.De=n}}class dP{constructor(e,n,r=Gt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class F_{constructor(){this.ve=0,this.Ce=U_(),this.Fe=Gt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Te(),n=Te(),r=Te();return this.Ce.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:de(38017,{changeType:s})}}),new pu(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=U_()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ve(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class zL{constructor(e){this.We=e,this.Ge=new Map,this.ze=ti(),this.je=dc(),this.Je=dc(),this.He=new ot(ge)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:de(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const s=i.target;if(Tm(s))if(r===0){const o=new le(s.path);this.Xe(n,o,tn.newNoDocument(o,fe.min()))}else Ve(r===1,20013,{expectedCount:r});else{const o=this.ot(n);if(o!==r){const a=this._t(e),u=a?this.ut(a,e,o):1;if(u!==0){this.rt(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,c)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Xi(r).toUint8Array()}catch(u){if(u instanceof LI)return Ki("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new my(o,i,s)}catch(u){return Ki(u instanceof Xa?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,s,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((s,o)=>{const a=this.st(o);if(a){if(s.current&&Tm(a.target)){const u=new le(a.target.path);this.Tt(u).has(o)||this.It(o,u)||this.Xe(o,u,tn.newNoDocument(u,e))}s.Ne&&(n.set(o,s.Le()),s.ke())}});let r=Te();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.st(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));const i=new Dh(e,n,this.He,this.ze,r);return this.ze=ti(),this.je=dc(),this.Je=dc(),this.He=new ot(ge),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new F_,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Nt(ge),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Nt(ge),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||te("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new F_),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function dc(){return new ot(le.comparator)}function U_(){return new ot(le.comparator)}const WL=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),HL=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),qL=(()=>({and:"AND",or:"OR"}))();class GL{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Im(t,e){return t.useProto3Json||Ph(e)?e:{value:e}}function Cd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hP(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function KL(t,e){return Cd(t,e.toTimestamp())}function Pr(t){return Ve(!!t,49232),fe.fromTimestamp(function(n){const r=Qi(n);return new Ye(r.seconds,r.nanos)}(t))}function gy(t,e){return Pm(t,e).canonicalString()}function Pm(t,e){const n=function(i){return new We(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function fP(t){const e=We.fromString(t);return Ve(vP(e),10190,{key:e.toString()}),e}function xm(t,e){return gy(t.databaseId,e.path)}function Xf(t,e){const n=fP(e);if(n.get(1)!==t.databaseId.projectId)throw new J(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new le(mP(n))}function pP(t,e){return gy(t.databaseId,e)}function YL(t){const e=fP(t);return e.length===4?We.emptyPath():mP(e)}function Sm(t){return new We(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function mP(t){return Ve(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function $_(t,e,n){return{name:xm(t,e),fields:n.value.mapValue.fields}}function QL(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:de(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(Ve(d===void 0||typeof d=="string",58123),Gt.fromBase64String(d||"")):(Ve(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Gt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?B.UNKNOWN:uP(c.code);return new J(d,c.message||"")}(o);n=new dP(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Xf(t,r.document.name),s=Pr(r.document.updateTime),o=r.document.createTime?Pr(r.document.createTime):fe.min(),a=new wn({mapValue:{fields:r.document.fields}}),u=tn.newFoundDocument(i,s,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Uc(c,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Xf(t,r.document),s=r.readTime?Pr(r.readTime):fe.min(),o=tn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Uc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Xf(t,r.document),s=r.removedTargetIds||[];n=new Uc([],s,i,null)}else{if(!("filter"in e))return de(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new $L(i,s),a=r.targetId;n=new cP(a,o)}}return n}function XL(t,e){let n;if(e instanceof fu)n={update:$_(t,e.key,e.value)};else if(e instanceof Rh)n={delete:xm(t,e.key)};else if(e instanceof ss)n={update:$_(t,e.key,e.data),updateMask:o4(e.fieldMask)};else{if(!(e instanceof VL))return de(16599,{Rt:e.type});n={verify:xm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Xl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Jl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Zl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Sd)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw de(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:KL(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:de(27497)}(t,e.precondition)),n}function JL(t,e){return t&&t.length>0?(Ve(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?Pr(i.updateTime):Pr(s);return o.isEqual(fe.min())&&(o=Pr(s)),new OL(o,i.transformResults||[])}(n,e))):[]}function ZL(t,e){return{documents:[pP(t,e.path)]}}function e4(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=pP(t,i);const s=function(c){if(c.length!==0)return yP(cr.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(d=>function(m){return{field:ao(m.field),direction:r4(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Im(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{Vt:n,parent:i}}function t4(t){let e=YL(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ve(r===1,65062);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(h){const m=gP(h);return m instanceof cr&&qI(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(m=>function(_){return new Ql(lo(_.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(h){let m;return m=typeof h=="object"?h.value:h,Ph(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(h){const m=!!h.before,w=h.values||[];return new Pd(w,m)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const m=!h.before,w=h.values||[];return new Pd(w,m)}(n.endAt)),_L(e,i,o,s,a,"F",u,c)}function n4(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return de(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function gP(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=lo(n.unaryFilter.field);return Et.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=lo(n.unaryFilter.field);return Et.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=lo(n.unaryFilter.field);return Et.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=lo(n.unaryFilter.field);return Et.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return de(61313);default:return de(60726)}}(t):t.fieldFilter!==void 0?function(n){return Et.create(lo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return de(58110);default:return de(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return cr.create(n.compositeFilter.filters.map(r=>gP(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return de(1026)}}(n.compositeFilter.op))}(t):de(30097,{filter:t})}function r4(t){return WL[t]}function i4(t){return HL[t]}function s4(t){return qL[t]}function ao(t){return{fieldPath:t.canonicalString()}}function lo(t){return Wt.fromServerFormat(t.fieldPath)}function yP(t){return t instanceof Et?function(n){if(n.op==="=="){if(S_(n.value))return{unaryFilter:{field:ao(n.field),op:"IS_NAN"}};if(x_(n.value))return{unaryFilter:{field:ao(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(S_(n.value))return{unaryFilter:{field:ao(n.field),op:"IS_NOT_NAN"}};if(x_(n.value))return{unaryFilter:{field:ao(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ao(n.field),op:i4(n.op),value:n.value}}}(t):t instanceof cr?function(n){const r=n.getFilters().map(i=>yP(i));return r.length===1?r[0]:{compositeFilter:{op:s4(n.op),filters:r}}}(t):de(54877,{filter:t})}function o4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function vP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e,n,r,i,s=fe.min(),o=fe.min(),a=Gt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new ki(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ki(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(e){this.gt=e}}function l4(t){const e=t4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?xd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(){this.Dn=new c4}addToCollectionParentIndex(e,n){return this.Dn.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(Yi.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(Yi.min())}updateCollectionGroup(e,n,r){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class c4{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Nt(We.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Nt(We.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wP=41943040;class gn{static withCacheSize(e){return new gn(e,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(wP,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Ko(0)}static ur(){return new Ko(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="LruGarbageCollector",d4=1048576;function z_([t,e],[n,r]){const i=ge(t,n);return i===0?ge(e,r):i}class h4{constructor(e){this.Tr=e,this.buffer=new Nt(z_),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();z_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class f4{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){te(B_,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ha(n)?te(B_,"Ignoring IndexedDB error during garbage collection: ",n):await da(n)}await this.Rr(3e5)})}}class p4{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return z.resolve(Ih.ue);const r=new h4(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(te("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(j_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),j_):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,s,o,a,u,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),so()<=Ee.DEBUG&&te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${h} documents in `+(c-u)+`ms
Total Duration: ${c-d}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}function m4(t,e){return new p4(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(){this.changes=new Hs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,tn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&_l(r.mutation,i,Nn.empty(),Ye.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Te()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Te()){const i=Es();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Qa();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Es();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Te()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=ti();const o=wl(),a=function(){return wl()}();return n.forEach((u,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof ss)?s=s.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),_l(d.mutation,c,d.mutation.getFieldMask(),Ye.now())):o.set(c.key,Nn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var h;return a.set(c,new y4(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=wl();let i=new ot((o,a)=>o-a),s=Te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let d=r.get(u)||Nn.empty();d=a.applyToLocalView(c,d),r.set(u,d);const h=(i.get(a.batchId)||Te()).add(u);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,d=u.value,h=tP();d.forEach(m=>{if(!s.has(m)){const w=aP(n.get(m),r.get(m));w!==null&&h.set(m,w),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return le.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):QI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):z.resolve(Es());let a=ql,u=s;return o.next(c=>z.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?z.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,Te())).next(d=>({batchId:a,changes:eP(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new le(n)).next(r=>{let i=Qa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Qa();return this.indexManager.getCollectionParents(e,s).next(a=>z.forEach(a,u=>{const c=function(h,m){return new fa(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(d=>{d.forEach((h,m)=>{o=o.insert(h,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,tn.newInvalidDocument(d)))});let a=Qa();return o.forEach((u,c)=>{const d=s.get(u);d!==void 0&&_l(d.mutation,c,Nn.empty(),Ye.now()),kh(n,c)&&(a=a.insert(u,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return z.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Pr(i.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:l4(i.bundledQuery),readTime:Pr(i.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(){this.overlays=new ot(le.comparator),this.kr=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Es();return z.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.wt(e,n,s)}),z.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),z.resolve()}getOverlaysForCollection(e,n,r){const i=Es(),s=n.length+1,o=new le(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return z.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new ot((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=s.get(c.largestBatchId);d===null&&(d=Es(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Es(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return z.resolve(a)}wt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new UL(n,r));let s=this.kr.get(n);s===void 0&&(s=Te(),this.kr.set(n,s)),this.kr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(){this.qr=new Nt(Lt.Qr),this.$r=new Nt(Lt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Lt(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Lt(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new le(new We([])),r=new Lt(n,e),i=new Lt(n,e+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new le(new We([])),r=new Lt(n,e),i=new Lt(n,e+1);let s=Te();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Lt(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Lt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return le.comparator(e.key,n.key)||ge(e.Hr,n.Hr)}static Ur(e,n){return ge(e.Hr,n.Hr)||le.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Nt(Lt.Qr)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new FL(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Yr=this.Yr.add(new Lt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,n){return z.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),s=i<0?0:i;return z.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?ly:this.er-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Lt(n,0),i=new Lt(n,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{const a=this.Zr(o.Hr);s.push(a)}),z.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Nt(ge);return n.forEach(i=>{const s=new Lt(i,0),o=new Lt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),z.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;le.isDocumentKey(s)||(s=s.child(""));const o=new Lt(new le(s),0);let a=new Nt(ge);return this.Yr.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.Hr)),!0)},o),z.resolve(this.ei(a))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ve(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return z.forEach(n.mutations,i=>{const s=new Lt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new Lt(n,0),i=this.Yr.firstAfterOrEqual(r);return z.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e){this.ni=e,this.docs=function(){return new ot(le.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():tn.newInvalidDocument(n))}getEntries(e,n){let r=ti();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():tn.newInvalidDocument(i))}),z.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ti();const o=n.path,a=new le(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:d}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||ZO(JO(d),r)<=0||(i.has(d.key)||kh(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return z.resolve(s)}getAllFromCollectionGroup(e,n,r,i){de(9500)}ri(e,n){return z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new I4(this)}getSize(e){return z.resolve(this.size)}}class I4 extends g4{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),z.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e){this.persistence=e,this.ii=new Hs(n=>dy(n),hy),this.lastRemoteSnapshotVersion=fe.min(),this.highestTargetId=0,this.si=0,this.oi=new yy,this.targetCount=0,this._i=Ko.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),z.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Ko(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.hr(n),z.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),z.waitFor(s).next(()=>i)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return z.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),z.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),z.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return z.resolve(r)}containsKey(e,n){return z.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e,n){this.ai={},this.overlays={},this.ui=new Ih(0),this.ci=!1,this.ci=!0,this.li=new E4,this.referenceDelegate=e(this),this.hi=new P4(this),this.indexManager=new u4,this.remoteDocumentCache=function(i){return new b4(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new a4(n),this.Ti=new w4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new _4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new T4(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){te("MemoryPersistence","Starting transaction:",e);const i=new x4(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,n){return z.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class x4 extends tL{constructor(e){super(),this.currentSequenceNumber=e}}class vy{constructor(e){this.persistence=e,this.Ai=new yy,this.Ri=null}static Vi(e){return new vy(e)}get mi(){if(this.Ri)return this.Ri;throw de(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),z.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),z.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.mi,r=>{const i=le.fromPath(r);return this.fi(e,i).next(s=>{s||n.removeEntry(i,fe.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return z.or([()=>z.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class kd{constructor(e,n){this.persistence=e,this.gi=new Hs(r=>iL(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=m4(this,n)}static Vi(e,n){return new kd(e,n)}Ii(){}di(e){return z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return z.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?z.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,o=>this.Sr(e,o,n).next(a=>{a||(r++,s.removeEntry(o,fe.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),z.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),z.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),z.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),z.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Mc(e.data.value)),n}Sr(e,n,r){return z.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return z.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=Te(),i=Te();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new wy(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return DN()?8:nL(rn())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ps(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new S4;return this.ws(e,n,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,n,o,a.size)})}).next(()=>s.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(so()<=Ee.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",oo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),z.resolve()):(so()<=Ee.DEBUG&&te("QueryEngine","Query:",oo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(so()<=Ee.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",oo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ir(n))):z.resolve())}ps(e,n){if(N_(n))return z.resolve(null);let r=Ir(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=xd(n,null,"F"),r=Ir(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Te(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.bs(n,a);return this.Ds(n,c,o,u.readTime)?this.ps(e,xd(n,null,"F")):this.vs(e,c,n,u)}))})))}ys(e,n,r,i){return N_(n)||i.isEqual(fe.min())?z.resolve(null):this.gs.getDocuments(e,r).next(s=>{const o=this.bs(n,s);return this.Ds(n,o,r,i)?z.resolve(null):(so()<=Ee.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),oo(n)),this.vs(e,o,n,XO(i,ql)).next(a=>a))})}bs(e,n){let r=new Nt(JI(e));return n.forEach((i,s)=>{kh(e,s)&&(r=r.add(s))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,n,r){return so()<=Ee.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",oo(n)),this.gs.getDocumentsMatchingQuery(e,n,Yi.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y="LocalStore",k4=3e8;class A4{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new ot(ge),this.Ms=new Hs(s=>dy(s),hy),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new v4(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function N4(t,e,n,r){return new A4(t,e,n,r)}async function EP(t,e){const n=pe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Te();for(const c of i){o.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next(c=>({Bs:c,removedBatchIds:o,addedBatchIds:a}))})})}function R4(t,e){const n=pe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Os.newChangeBuffer({trackRemovals:!0});return function(a,u,c,d){const h=c.batch,m=h.keys();let w=z.resolve();return m.forEach(_=>{w=w.next(()=>d.getEntry(u,_)).next(P=>{const N=c.docVersions.get(_);Ve(N!==null,48541),P.version.compareTo(N)<0&&(h.applyToRemoteDocument(P,c),P.isValidDocument()&&(P.setReadTime(c.commitVersion),d.addEntry(P)))})}),w.next(()=>a.mutationQueue.removeMutationBatch(u,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Te();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function TP(t){const e=pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function D4(t,e){const n=pe(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const a=[];e.targetChanges.forEach((d,h)=>{const m=i.get(h);if(!m)return;a.push(n.hi.removeMatchingKeys(s,d.removedDocuments,h).next(()=>n.hi.addMatchingKeys(s,d.addedDocuments,h)));let w=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?w=w.withResumeToken(Gt.EMPTY_BYTE_STRING,fe.min()).withLastLimboFreeSnapshotVersion(fe.min()):d.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(d.resumeToken,r)),i=i.insert(h,w),function(P,N,E){return P.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=k4?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(m,w,d)&&a.push(n.hi.updateTargetData(s,w))});let u=ti(),c=Te();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(O4(s,o,e.documentUpdates).next(d=>{u=d.Ls,c=d.ks})),!r.isEqual(fe.min())){const d=n.hi.getLastRemoteSnapshotVersion(s).next(h=>n.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return z.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.Fs=i,s))}function O4(t,e,n){let r=Te(),i=Te();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ti();return n.forEach((a,u)=>{const c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(fe.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):te(_y,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{Ls:o,ks:i}})}function L4(t,e){const n=pe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ly),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function M4(t,e){const n=pe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(s=>s?(i=s,z.resolve(i)):n.hi.allocateTargetId(r).next(o=>(i=new ki(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function Cm(t,e,n){const r=pe(t),i=r.Fs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ha(o))throw o;te(_y,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function W_(t,e,n){const r=pe(t);let i=fe.min(),s=Te();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,d){const h=pe(u),m=h.Ms.get(d);return m!==void 0?z.resolve(h.Fs.get(m)):h.hi.getTargetData(c,d)}(r,o,Ir(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?i:fe.min(),n?s:Te())).next(a=>(V4(r,TL(e),a),{documents:a,qs:s})))}function V4(t,e,n){let r=t.xs.get(e)||fe.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.xs.set(e,r)}class H_{constructor(){this.activeTargetIds=CL()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class F4{constructor(){this.Fo=new H_,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new H_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_="ConnectivityMonitor";class G_{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){te(q_,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){te(q_,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hc=null;function km(){return hc===null?hc=function(){return 268435456+Math.round(2147483648*Math.random())}():hc++,"0x"+hc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf="RestConnection",$4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class j4{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===bd?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,s){const o=km(),a=this.Go(e,n.toUriEncodedString());te(Jf,`Sending RPC '${e}' ${o}:`,a,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,s);const{host:c}=new URL(a),d=sa(c);return this.jo(e,a,u,r,d).then(h=>(te(Jf,`Received RPC '${e}' ${o}: `,h),h),h=>{throw Ki(Jf,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Jo(e,n,r,i,s,o){return this.Wo(e,n,r,i,s)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ca}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,n){const r=$4[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt="WebChannelConnection";class z4 extends j4{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,s){const o=km();return new Promise((a,u)=>{const c=new bI;c.setWithCredentials(!0),c.listenOnce(II.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Lc.NO_ERROR:const h=c.getResponseJson();te(Jt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case Lc.TIMEOUT:te(Jt,`RPC '${e}' ${o} timed out`),u(new J(B.DEADLINE_EXCEEDED,"Request time out"));break;case Lc.HTTP_ERROR:const m=c.getStatus();if(te(Jt,`RPC '${e}' ${o} failed with status:`,m,"response text:",c.getResponseText()),m>0){let w=c.getResponseJson();Array.isArray(w)&&(w=w[0]);const _=w==null?void 0:w.error;if(_&&_.status&&_.message){const P=function(E){const y=E.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(y)>=0?y:B.UNKNOWN}(_.status);u(new J(P,_.message))}else u(new J(B.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new J(B.UNAVAILABLE,"Connection failed."));break;default:de(9055,{c_:e,streamId:o,l_:c.getLastErrorCode(),h_:c.getLastError()})}}finally{te(Jt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(i);te(Jt,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",d,r,15)})}P_(e,n,r){const i=km(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=SI(),a=xI(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const d=s.join("");te(Jt,`Creating RPC '${e}' stream ${i}: ${d}`,u);const h=o.createWebChannel(d,u);this.T_(h);let m=!1,w=!1;const _=new B4({Ho:N=>{w?te(Jt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(te(Jt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),m=!0),te(Jt,`RPC '${e}' stream ${i} sending:`,N),h.send(N))},Yo:()=>h.close()}),P=(N,E,y)=>{N.listen(E,k=>{try{y(k)}catch(D){setTimeout(()=>{throw D},0)}})};return P(h,Ya.EventType.OPEN,()=>{w||(te(Jt,`RPC '${e}' stream ${i} transport opened.`),_.s_())}),P(h,Ya.EventType.CLOSE,()=>{w||(w=!0,te(Jt,`RPC '${e}' stream ${i} transport closed`),_.__(),this.I_(h))}),P(h,Ya.EventType.ERROR,N=>{w||(w=!0,Ki(Jt,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),_.__(new J(B.UNAVAILABLE,"The operation could not be completed")))}),P(h,Ya.EventType.MESSAGE,N=>{var E;if(!w){const y=N.data[0];Ve(!!y,16349);const k=y,D=(k==null?void 0:k.error)||((E=k[0])===null||E===void 0?void 0:E.error);if(D){te(Jt,`RPC '${e}' stream ${i} received error:`,D);const M=D.status;let V=function(C){const A=vt[C];if(A!==void 0)return uP(A)}(M),I=D.message;V===void 0&&(V=B.INTERNAL,I="Unknown error status: "+M+" with message "+D.message),w=!0,_.__(new J(V,I)),h.close()}else te(Jt,`RPC '${e}' stream ${i} received:`,y),_.a_(y)}}),P(a,PI.STAT_EVENT,N=>{N.stat===ym.PROXY?te(Jt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===ym.NOPROXY&&te(Jt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.o_()},0),_}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Zf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(t){return new GL(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&te("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="PersistentStream";class IP{constructor(e,n,r,i,s,o,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new bP(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(ei(n.toString()),ei("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new J(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return te(K_,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(te(K_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class W4 extends IP{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=QL(this.serializer,e),r=function(s){if(!("targetChange"in s))return fe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?fe.min():o.readTime?Pr(o.readTime):fe.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=Sm(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=Tm(u)?{documents:ZL(s,u)}:{query:e4(s,u).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=hP(s,o.resumeToken);const c=Im(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(fe.min())>0){a.readTime=Cd(s,o.snapshotVersion.toTimestamp());const c=Im(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=n4(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=Sm(this.serializer),n.removeTarget=e,this.k_(n)}}class H4 extends IP{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=JL(e.writeResults,e.commitTime),r=Pr(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=Sm(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>XL(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{}class G4 extends q4{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new J(B.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,Pm(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new J(B.UNKNOWN,s.toString())})}Jo(e,n,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,Pm(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new J(B.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class K4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ei(n),this._a=!1):te("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs="RemoteStore";class Y4{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{qs(this)&&(te(Vs,"Restarting streams for network reachability change."),await async function(u){const c=pe(u);c.Ia.add(4),await mu(c),c.Aa.set("Unknown"),c.Ia.delete(4),await Lh(c)}(this))})}),this.Aa=new K4(r,i)}}async function Lh(t){if(qs(t))for(const e of t.da)await e(!0)}async function mu(t){for(const e of t.da)await e(!1)}function PP(t,e){const n=pe(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Iy(n)?by(n):pa(n).x_()&&Ty(n,e))}function Ey(t,e){const n=pe(t),r=pa(n);n.Ta.delete(e),r.x_()&&xP(n,e),n.Ta.size===0&&(r.x_()?r.B_():qs(n)&&n.Aa.set("Unknown"))}function Ty(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(fe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}pa(t).H_(e)}function xP(t,e){t.Ra.$e(e),pa(t).Y_(e)}function by(t){t.Ra=new zL({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),pa(t).start(),t.Aa.aa()}function Iy(t){return qs(t)&&!pa(t).M_()&&t.Ta.size>0}function qs(t){return pe(t).Ia.size===0}function SP(t){t.Ra=void 0}async function Q4(t){t.Aa.set("Online")}async function X4(t){t.Ta.forEach((e,n)=>{Ty(t,e)})}async function J4(t,e){SP(t),Iy(t)?(t.Aa.la(e),by(t)):t.Aa.set("Unknown")}async function Z4(t,e,n){if(t.Aa.set("Online"),e instanceof dP&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ta.delete(a),i.Ra.removeTarget(a))}(t,e)}catch(r){te(Vs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ad(t,r)}else if(e instanceof Uc?t.Ra.Ye(e):e instanceof cP?t.Ra.it(e):t.Ra.et(e),!n.isEqual(fe.min()))try{const r=await TP(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Ra.Pt(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const d=s.Ta.get(c);d&&s.Ta.set(c,d.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{const d=s.Ta.get(u);if(!d)return;s.Ta.set(u,d.withResumeToken(Gt.EMPTY_BYTE_STRING,d.snapshotVersion)),xP(s,u);const h=new ki(d.target,u,c,d.sequenceNumber);Ty(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){te(Vs,"Failed to raise snapshot:",r),await Ad(t,r)}}async function Ad(t,e,n){if(!ha(e))throw e;t.Ia.add(1),await mu(t),t.Aa.set("Offline"),n||(n=()=>TP(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{te(Vs,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Lh(t)})}function CP(t,e){return e().catch(n=>Ad(t,n,e))}async function Mh(t){const e=pe(t),n=Zi(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:ly;for(;eM(e);)try{const i=await L4(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,tM(e,i)}catch(i){await Ad(e,i)}kP(e)&&AP(e)}function eM(t){return qs(t)&&t.Pa.length<10}function tM(t,e){t.Pa.push(e);const n=Zi(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function kP(t){return qs(t)&&!Zi(t).M_()&&t.Pa.length>0}function AP(t){Zi(t).start()}async function nM(t){Zi(t).na()}async function rM(t){const e=Zi(t);for(const n of t.Pa)e.X_(n.mutations)}async function iM(t,e,n){const r=t.Pa.shift(),i=py.from(r,e,n);await CP(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Mh(t)}async function sM(t,e){e&&Zi(t).Z_&&await async function(r,i){if(function(o){return jL(o)&&o!==B.ABORTED}(i.code)){const s=r.Pa.shift();Zi(r).N_(),await CP(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Mh(r)}}(t,e),kP(t)&&AP(t)}async function Y_(t,e){const n=pe(t);n.asyncQueue.verifyOperationInProgress(),te(Vs,"RemoteStore received new credentials");const r=qs(n);n.Ia.add(3),await mu(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Lh(n)}async function oM(t,e){const n=pe(t);e?(n.Ia.delete(2),await Lh(n)):e||(n.Ia.add(2),await mu(n),n.Aa.set("Unknown"))}function pa(t){return t.Va||(t.Va=function(n,r,i){const s=pe(n);return s.ia(),new W4(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:Q4.bind(null,t),e_:X4.bind(null,t),n_:J4.bind(null,t),J_:Z4.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Iy(t)?by(t):t.Aa.set("Unknown")):(await t.Va.stop(),SP(t))})),t.Va}function Zi(t){return t.ma||(t.ma=function(n,r,i){const s=pe(n);return s.ia(),new H4(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:nM.bind(null,t),n_:sM.bind(null,t),ea:rM.bind(null,t),ta:iM.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Mh(t)):(await t.ma.stop(),t.Pa.length>0&&(te(Vs,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Py(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xy(t,e){if(ei("AsyncQueue",`${e}: ${t}`),ha(t))return new J(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{static emptySet(e){return new Oo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||le.comparator(n.key,r.key):(n,r)=>le.comparator(n.key,r.key),this.keyedMap=Qa(),this.sortedSet=new ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Oo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Oo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(){this.fa=new ot(le.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):de(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Yo{constructor(e,n,r,i,s,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Yo(e,n,Oo.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ch(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class lM{constructor(){this.queries=X_(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const i=pe(n),s=i.queries;i.queries=X_(),s.forEach((o,a)=>{for(const u of a.wa)u.onError(r)})})(this,new J(B.ABORTED,"Firestore shutting down"))}}function X_(){return new Hs(t=>XI(t),Ch)}async function Sy(t,e){const n=pe(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new aM,r=e.ba()?0:1);try{switch(r){case 0:s.ya=await n.onListen(i,!0);break;case 1:s.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=xy(o,`Initialization of query '${oo(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.wa.push(e),e.va(n.onlineState),s.ya&&e.Ca(s.ya)&&ky(n)}async function Cy(t,e){const n=pe(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function uM(t,e){const n=pe(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.wa)a.Ca(i)&&(r=!0);o.ya=i}}r&&ky(n)}function cM(t,e,n){const r=pe(t),i=r.queries.get(e);if(i)for(const s of i.wa)s.onError(n);r.queries.delete(e)}function ky(t){t.Da.forEach(e=>{e.next()})}var Am,J_;(J_=Am||(Am={})).Fa="default",J_.Cache="cache";class Ay{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Yo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Yo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Am.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e){this.key=e}}class RP{constructor(e){this.key=e}}class dM{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Te(),this.mutatedKeys=Te(),this.Xa=JI(e),this.eu=new Oo(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new Q_,i=n?n.eu:this.eu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const m=i.get(d),w=kh(this.query,h)?h:null,_=!!m&&this.mutatedKeys.has(m.key),P=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let N=!1;m&&w?m.data.isEqual(w.data)?_!==P&&(r.track({type:3,doc:w}),N=!0):this.iu(m,w)||(r.track({type:2,doc:w}),N=!0,(u&&this.Xa(w,u)>0||c&&this.Xa(w,c)<0)&&(a=!0)):!m&&w?(r.track({type:0,doc:w}),N=!0):m&&!w&&(r.track({type:1,doc:m}),N=!0,(u||c)&&(a=!0)),N&&(w?(o=o.add(w),s=P?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{eu:o,ru:r,Ds:a,mutatedKeys:s}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((d,h)=>function(w,_){const P=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return de(20277,{At:N})}};return P(w)-P(_)}(d.type,h.type)||this.Xa(d.doc,h.doc)),this.su(r),i=i!=null&&i;const a=n&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,c=u!==this.Ya;return this.Ya=u,o.length!==0||c?{snapshot:new Yo(this.query,e.eu,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Q_,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Te(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new RP(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new NP(r))}),n}uu(e){this.Ha=e.qs,this.Za=Te();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Yo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Ny="SyncEngine";class hM{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class fM{constructor(e){this.key=e,this.lu=!1}}class pM{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new Hs(a=>XI(a),Ch),this.Tu=new Map,this.Iu=new Set,this.du=new ot(le.comparator),this.Eu=new Map,this.Au=new yy,this.Ru={},this.Vu=new Map,this.mu=Ko.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function mM(t,e,n=!0){const r=FP(t);let i;const s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await DP(r,e,n,!0),i}async function gM(t,e){const n=FP(t);await DP(n,e,!0,!1)}async function DP(t,e,n,r){const i=await M4(t.localStore,Ir(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await yM(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&PP(t.remoteStore,i),a}async function yM(t,e,n,r,i){t.gu=(h,m,w)=>async function(P,N,E,y){let k=N.view.nu(E);k.Ds&&(k=await W_(P.localStore,N.query,!1).then(({documents:I})=>N.view.nu(I,k)));const D=y&&y.targetChanges.get(N.targetId),M=y&&y.targetMismatches.get(N.targetId)!=null,V=N.view.applyChanges(k,P.isPrimaryClient,D,M);return e1(P,N.targetId,V._u),V.snapshot}(t,h,m,w);const s=await W_(t.localStore,e,!0),o=new dM(e,s.qs),a=o.nu(s.documents),u=pu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,u);e1(t,n,c._u);const d=new hM(e,n,o);return t.Pu.set(e,d),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),c.snapshot}async function vM(t,e,n){const r=pe(t),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(o=>!Ch(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Cm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Ey(r.remoteStore,i.targetId),Nm(r,i.targetId)}).catch(da)):(Nm(r,i.targetId),await Cm(r.localStore,i.targetId,!0))}async function wM(t,e){const n=pe(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ey(n.remoteStore,r.targetId))}async function _M(t,e,n){const r=SM(t);try{const i=await function(o,a){const u=pe(o),c=Ye.now(),d=a.reduce((w,_)=>w.add(_.key),Te());let h,m;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let _=ti(),P=Te();return u.Os.getEntries(w,d).next(N=>{_=N,_.forEach((E,y)=>{y.isValidDocument()||(P=P.add(E))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,_)).next(N=>{h=N;const E=[];for(const y of a){const k=ML(y,h.get(y.key).overlayedDocument);k!=null&&E.push(new ss(y.key,k,zI(k.value.mapValue),hn.exists(!0)))}return u.mutationQueue.addMutationBatch(w,c,E,a)}).next(N=>{m=N;const E=N.applyToLocalDocumentSet(h,P);return u.documentOverlayCache.saveOverlays(w,N.batchId,E)})}).then(()=>({batchId:m.batchId,changes:eP(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let c=o.Ru[o.currentUser.toKey()];c||(c=new ot(ge)),c=c.insert(a,u),o.Ru[o.currentUser.toKey()]=c}(r,i.batchId,n),await gu(r,i.changes),await Mh(r.remoteStore)}catch(i){const s=xy(i,"Failed to persist write");n.reject(s)}}async function OP(t,e){const n=pe(t);try{const r=await D4(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Eu.get(s);o&&(Ve(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?Ve(o.lu,14607):i.removedDocuments.size>0&&(Ve(o.lu,42227),o.lu=!1))}),await gu(n,r,e)}catch(r){await da(r)}}function Z_(t,e,n){const r=pe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Pu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=pe(o);u.onlineState=a;let c=!1;u.queries.forEach((d,h)=>{for(const m of h.wa)m.va(a)&&(c=!0)}),c&&ky(u)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function EM(t,e,n){const r=pe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),s=i&&i.key;if(s){let o=new ot(le.comparator);o=o.insert(s,tn.newNoDocument(s,fe.min()));const a=Te().add(s),u=new Dh(fe.min(),new Map,new ot(ge),o,a);await OP(r,u),r.du=r.du.remove(s),r.Eu.delete(e),Ry(r)}else await Cm(r.localStore,e,!1).then(()=>Nm(r,e,n)).catch(da)}async function TM(t,e){const n=pe(t),r=e.batch.batchId;try{const i=await R4(n.localStore,e);MP(n,r,null),LP(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await gu(n,i)}catch(i){await da(i)}}async function bM(t,e,n){const r=pe(t);try{const i=await function(o,a){const u=pe(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return u.mutationQueue.lookupMutationBatch(c,a).next(h=>(Ve(h!==null,37113),d=h.keys(),u.mutationQueue.removeMutationBatch(c,h))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>u.localDocuments.getDocuments(c,d))})}(r.localStore,e);MP(r,e,n),LP(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await gu(r,i)}catch(i){await da(i)}}function LP(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function MP(t,e,n){const r=pe(t);let i=r.Ru[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Nm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||VP(t,r)})}function VP(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Ey(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Ry(t))}function e1(t,e,n){for(const r of n)r instanceof NP?(t.Au.addReference(r.key,e),IM(t,r)):r instanceof RP?(te(Ny,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||VP(t,r.key)):de(19791,{yu:r})}function IM(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(te(Ny,"New document in limbo: "+n),t.Iu.add(r),Ry(t))}function Ry(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new le(We.fromString(e)),r=t.mu.next();t.Eu.set(r,new fM(n)),t.du=t.du.insert(n,r),PP(t.remoteStore,new ki(Ir(Sh(n.path)),r,"TargetPurposeLimboResolution",Ih.ue))}}async function gu(t,e,n){const r=pe(t),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{o.push(r.gu(u,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(c){i.push(c);const h=wy.Es(u.targetId,c);s.push(h)}}))}),await Promise.all(o),r.hu.J_(i),await async function(u,c){const d=pe(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>z.forEach(c,m=>z.forEach(m.Is,w=>d.persistence.referenceDelegate.addReference(h,m.targetId,w)).next(()=>z.forEach(m.ds,w=>d.persistence.referenceDelegate.removeReference(h,m.targetId,w)))))}catch(h){if(!ha(h))throw h;te(_y,"Failed to update sequence numbers: "+h)}for(const h of c){const m=h.targetId;if(!h.fromCache){const w=d.Fs.get(m),_=w.snapshotVersion,P=w.withLastLimboFreeSnapshotVersion(_);d.Fs=d.Fs.insert(m,P)}}}(r.localStore,s))}async function PM(t,e){const n=pe(t);if(!n.currentUser.isEqual(e)){te(Ny,"User change. New user:",e.toKey());const r=await EP(n.localStore,e);n.currentUser=e,function(s,o){s.Vu.forEach(a=>{a.forEach(u=>{u.reject(new J(B.CANCELLED,o))})}),s.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await gu(n,r.Bs)}}function xM(t,e){const n=pe(t),r=n.Eu.get(e);if(r&&r.lu)return Te().add(r.key);{let i=Te();const s=n.Tu.get(e);if(!s)return i;for(const o of s){const a=n.Pu.get(o);i=i.unionWith(a.view.tu)}return i}}function FP(t){const e=pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=OP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=EM.bind(null,e),e.hu.J_=uM.bind(null,e.eventManager),e.hu.pu=cM.bind(null,e.eventManager),e}function SM(t){const e=pe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bM.bind(null,e),e}class Nd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Oh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return N4(this.persistence,new C4,e.initialUser,this.serializer)}Du(e){return new _P(vy.Vi,this.serializer)}bu(e){return new F4}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nd.provider={build:()=>new Nd};class CM extends Nd{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Ve(this.persistence.referenceDelegate instanceof kd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new f4(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new _P(r=>kd.Vi(r,n),this.serializer)}}class Rm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Z_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=PM.bind(null,this.syncEngine),await oM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new lM}()}createDatastore(e){const n=Oh(e.databaseInfo.databaseId),r=function(s){return new z4(s)}(e.databaseInfo);return function(s,o,a,u){return new G4(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new Y4(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Z_(this.syncEngine,n,0),function(){return G_.C()?new G_:new U4}())}createSyncEngine(e,n){return function(i,s,o,a,u,c,d){const h=new pM(i,s,o,a,u,c);return d&&(h.fu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=pe(i);te(Vs,"RemoteStore shutting down."),s.Ia.add(5),await mu(s),s.Ea.shutdown(),s.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Rm.provider={build:()=>new Rm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ei("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es="FirestoreClient";class kM{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Zt.UNAUTHENTICATED,this.clientId=ay.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{te(es,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(te(es,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=xy(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ep(t,e){t.asyncQueue.verifyOperationInProgress(),te(es,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await EP(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{Ki("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{te("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Ki("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function t1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await AM(t);te(es,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Y_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Y_(e.remoteStore,i)),t._onlineComponents=e}async function AM(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){te(es,"Using user provided OfflineComponentProvider");try{await ep(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===B.FAILED_PRECONDITION||i.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ki("Error using user provided cache. Falling back to memory cache: "+n),await ep(t,new Nd)}}else te(es,"Using default OfflineComponentProvider"),await ep(t,new CM(void 0));return t._offlineComponents}async function UP(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(te(es,"Using user provided OnlineComponentProvider"),await t1(t,t._uninitializedComponentsProvider._online)):(te(es,"Using default OnlineComponentProvider"),await t1(t,new Rm))),t._onlineComponents}function NM(t){return UP(t).then(e=>e.syncEngine)}async function Rd(t){const e=await UP(t),n=e.eventManager;return n.onListen=mM.bind(null,e.syncEngine),n.onUnlisten=vM.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=gM.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=wM.bind(null,e.syncEngine),n}function RM(t,e,n={}){const r=new qr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,c){const d=new Dy({next:m=>{d.Ou(),o.enqueueAndForget(()=>Cy(s,h));const w=m.docs.has(a);!w&&m.fromCache?c.reject(new J(B.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&m.fromCache&&u&&u.source==="server"?c.reject(new J(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new Ay(Sh(a.path),d,{includeMetadataChanges:!0,ka:!0});return Sy(s,h)}(await Rd(t),t.asyncQueue,e,n,r)),r.promise}function DM(t,e,n={}){const r=new qr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,c){const d=new Dy({next:m=>{d.Ou(),o.enqueueAndForget(()=>Cy(s,h)),m.fromCache&&u.source==="server"?c.reject(new J(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new Ay(a,d,{includeMetadataChanges:!0,ka:!0});return Sy(s,h)}(await Rd(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP="firestore.googleapis.com",r1=!0;class i1{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new J(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=jP,this.ssl=r1}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:r1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=wP;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<d4)throw new J(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}YO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$P((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new J(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new J(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new J(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new i1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new J(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new i1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new $O;switch(r.type){case"firstParty":return new WO(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=n1.get(n);r&&(te("ComponentProvider","Removing Datastore"),n1.delete(n),r.terminate())}(this),Promise.resolve()}}function OM(t,e,n,r={}){var i;t=dn(t,Vh);const s=sa(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;s&&(bb(`https://${u}`),Ib("Firestore",!0)),o.host!==jP&&o.host!==u&&Ki("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:u,ssl:s,emulatorOptions:r});if(!Ds(c,a)&&(t._setSettings(c),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=Zt.MOCK_USER;else{d=IN(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new J(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Zt(m)}t._authCredentials=new jO(new kI(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new oi(this.firestore,e,this._query)}}class dt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dt(this.firestore,e,this._key)}toJSON(){return{type:dt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(hu(n,dt._jsonSchema))return new dt(e,r||null,new le(We.fromString(n.referencePath)))}}dt._jsonSchemaVersion="firestore/documentReference/1.0",dt._jsonSchema={type:Tt("string",dt._jsonSchemaVersion),referencePath:Tt("string")};class zi extends oi{constructor(e,n,r){super(e,n,Sh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dt(this.firestore,null,new le(e))}withConverter(e){return new zi(this.firestore,e,this._path)}}function vn(t,e,...n){if(t=ye(t),NI("collection","path",e),t instanceof Vh){const r=We.fromString(e,...n);return y_(r),new zi(t,null,r)}{if(!(t instanceof dt||t instanceof zi))throw new J(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(We.fromString(e,...n));return y_(r),new zi(t.firestore,null,r)}}function St(t,e,...n){if(t=ye(t),arguments.length===1&&(e=ay.newId()),NI("doc","path",e),t instanceof Vh){const r=We.fromString(e,...n);return g_(r),new dt(t,null,new le(r))}{if(!(t instanceof dt||t instanceof zi))throw new J(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(We.fromString(e,...n));return g_(r),new dt(t.firestore,t instanceof zi?t.converter:null,new le(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1="AsyncQueue";class o1{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new bP(this,"async_queue_retry"),this.oc=()=>{const r=Zf();r&&te(s1,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Zf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Zf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new qr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ha(e))throw e;te(s1,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,ei("INTERNAL UNHANDLED ERROR: ",a1(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=Py.createAndSchedule(this,e,n,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&de(47125,{hc:a1(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function a1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Ar extends Vh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new o1,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new o1(e),this._firestoreClient=void 0,await e}}}function BP(t,e){const n=typeof t=="object"?t:Cb(),r=typeof t=="string"?t:e||bd,i=Yg(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=TN("firestore");s&&OM(i,...s)}return i}function yu(t){if(t._terminated)throw new J(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||LM(t),t._firestoreClient}function LM(t){var e,n,r;const i=t._freezeSettings(),s=function(a,u,c,d){return new aL(a,u,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,$P(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new kM(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bn(Gt.fromBase64String(e))}catch(n){throw new J(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Bn(Gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Bn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(hu(e,Bn._jsonSchema))return Bn.fromBase64String(e.bytes)}}Bn._jsonSchemaVersion="firestore/bytes/1.0",Bn._jsonSchema={type:Tt("string",Bn._jsonSchemaVersion),bytes:Tt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new J(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:xr._jsonSchemaVersion}}static fromJSON(e){if(hu(e,xr._jsonSchema))return new xr(e.latitude,e.longitude)}}xr._jsonSchemaVersion="firestore/geoPoint/1.0",xr._jsonSchema={type:Tt("string",xr._jsonSchemaVersion),latitude:Tt("number"),longitude:Tt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Sr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(hu(e,Sr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Sr(e.vectorValues);throw new J(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Sr._jsonSchemaVersion="firestore/vectorValue/1.0",Sr._jsonSchema={type:Tt("string",Sr._jsonSchemaVersion),vectorValues:Tt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM=/^__.*__$/;class VM{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ss(e,this.data,this.fieldMask,n,this.fieldTransforms):new fu(e,this.data,n,this.fieldTransforms)}}class zP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ss(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function WP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw de(40011,{Ec:t})}}class Oy{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Oy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Dd(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(WP(this.Ec)&&MM.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class FM{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Oh(e)}Dc(e,n,r,i=!1){return new Oy({Ec:e,methodName:n,bc:r,path:Wt.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wu(t){const e=t._freezeSettings(),n=Oh(t._databaseId);return new FM(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ly(t,e,n,r,i,s={}){const o=t.Dc(s.merge||s.mergeFields?2:0,e,n,i);Vy("Data must be an object, but it was:",o,r);const a=GP(r,o);let u,c;if(s.merge)u=new Nn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const m=Dm(e,h,n);if(!o.contains(m))throw new J(B.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);YP(d,m)||d.push(m)}u=new Nn(d),c=o.fieldTransforms.filter(h=>u.covers(h.field))}else u=null,c=o.fieldTransforms;return new VM(new wn(a),u,c)}class Uh extends Fh{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Uh}}class My extends Fh{_toFieldTransform(e){return new RL(e.path,new Xl)}isEqual(e){return e instanceof My}}function HP(t,e,n,r){const i=t.Dc(1,e,n);Vy("Data must be an object, but it was:",i,r);const s=[],o=wn.empty();is(r,(u,c)=>{const d=Fy(e,u,n);c=ye(c);const h=i.gc(d);if(c instanceof Uh)s.push(d);else{const m=_u(c,h);m!=null&&(s.push(d),o.set(d,m))}});const a=new Nn(s);return new zP(o,a,i.fieldTransforms)}function qP(t,e,n,r,i,s){const o=t.Dc(1,e,n),a=[Dm(e,r,n)],u=[i];if(s.length%2!=0)throw new J(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(Dm(e,s[m])),u.push(s[m+1]);const c=[],d=wn.empty();for(let m=a.length-1;m>=0;--m)if(!YP(c,a[m])){const w=a[m];let _=u[m];_=ye(_);const P=o.gc(w);if(_ instanceof Uh)c.push(w);else{const N=_u(_,P);N!=null&&(c.push(w),d.set(w,N))}}const h=new Nn(c);return new zP(d,h,o.fieldTransforms)}function UM(t,e,n,r=!1){return _u(n,t.Dc(r?4:3,e))}function _u(t,e){if(KP(t=ye(t)))return Vy("Unsupported field value:",e,t),GP(t,e);if(t instanceof Fh)return function(r,i){if(!WP(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=_u(a,i.yc(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ye(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return kL(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ye.fromDate(r);return{timestampValue:Cd(i.serializer,s)}}if(r instanceof Ye){const s=new Ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Cd(i.serializer,s)}}if(r instanceof xr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Bn)return{bytesValue:hP(i.serializer,r._byteString)};if(r instanceof dt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:gy(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Sr)return function(o,a){return{mapValue:{fields:{[$I]:{stringValue:BI},[Id]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.wc("VectorValues must only contain numeric values.");return fy(a.serializer,c)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${bh(r)}`)}(t,e)}function GP(t,e){const n={};return OI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):is(t,(r,i)=>{const s=_u(i,e.Vc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function KP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ye||t instanceof xr||t instanceof Bn||t instanceof dt||t instanceof Fh||t instanceof Sr)}function Vy(t,e,n){if(!KP(n)||!RI(n)){const r=bh(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function Dm(t,e,n){if((e=ye(e))instanceof vu)return e._internalPath;if(typeof e=="string")return Fy(t,e);throw Dd("Field path arguments must be of type string or ",t,!1,void 0,n)}const $M=new RegExp("[~\\*/\\[\\]]");function Fy(t,e,n){if(e.search($M)>=0)throw Dd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new vu(...e.split("."))._internalPath}catch{throw Dd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Dd(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new J(B.INVALID_ARGUMENT,a+t+u)}function YP(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new jM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field($h("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class jM extends QP{data(){return super.data()}}function $h(t,e){return typeof e=="string"?Fy(t,e):e instanceof vu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new J(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Uy{}class $y extends Uy{}function nr(t,e,...n){let r=[];e instanceof Uy&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof jy).length,a=s.filter(u=>u instanceof jh).length;if(o>1||o>0&&a>0)throw new J(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class jh extends $y{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new jh(e,n,r)}_apply(e){const n=this._parse(e);return JP(e._query,n),new oi(e.firestore,e.converter,bm(e._query,n))}_parse(e){const n=wu(e.firestore);return function(s,o,a,u,c,d,h){let m;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new J(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){c1(h,d);const _=[];for(const P of h)_.push(u1(u,s,P));m={arrayValue:{values:_}}}else m=u1(u,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||c1(h,d),m=UM(a,o,h,d==="in"||d==="not-in");return Et.create(c,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function zt(t,e,n){const r=e,i=$h("where",t);return jh._create(i,r,n)}class jy extends Uy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new jy(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:cr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)JP(o,u),o=bm(o,u)}(e._query,n),new oi(e.firestore,e.converter,bm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class By extends $y{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new By(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new J(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new J(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ql(s,o)}(e._query,this._field,this._direction);return new oi(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new fa(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Lo(t,e="asc"){const n=e,r=$h("orderBy",t);return By._create(r,n)}class zy extends $y{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new zy(e,n,r)}_apply(e){return new oi(e.firestore,e.converter,xd(e._query,this._limit,this._limitType))}}function BM(t){return QO("limit",t),zy._create("limit",t,"F")}function u1(t,e,n){if(typeof(n=ye(n))=="string"){if(n==="")throw new J(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!QI(e)&&n.indexOf("/")!==-1)throw new J(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(We.fromString(n));if(!le.isDocumentKey(r))throw new J(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return P_(t,new le(r))}if(n instanceof dt)return P_(t,n._key);throw new J(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bh(n)}.`)}function c1(t,e){if(!Array.isArray(t)||t.length===0)throw new J(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function JP(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new J(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new J(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class zM{convertValue(e,n="none"){switch(Ji(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw de(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return is(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Id].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>pt(o.doubleValue));return new Sr(s)}convertGeoPoint(e){return new xr(pt(e.latitude),pt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=xh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Gl(e));default:return null}}convertTimestamp(e){const n=Qi(e);return new Ye(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=We.fromString(e);Ve(vP(r),9688,{name:e});const i=new Kl(r.get(1),r.get(3)),s=new le(r.popFirst(5));return i.isEqual(n)||ei(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wy(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Ja{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xs extends QP{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new $c(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field($h("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new J(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=xs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}xs._jsonSchemaVersion="firestore/documentSnapshot/1.0",xs._jsonSchema={type:Tt("string",xs._jsonSchemaVersion),bundleSource:Tt("string","DocumentSnapshot"),bundleName:Tt("string"),bundle:Tt("string")};class $c extends xs{data(e={}){return super.data(e)}}class Ss{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ja(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new $c(this._firestore,this._userDataWriter,r.key,r,new Ja(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new J(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new $c(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ja(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new $c(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ja(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:WM(a.type),doc:u,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new J(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ss._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ay.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function WM(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return de(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(t){t=dn(t,dt);const e=dn(t.firestore,Ar);return RM(yu(e),t._key).then(n=>ex(e,t,n))}Ss._jsonSchemaVersion="firestore/querySnapshot/1.0",Ss._jsonSchema={type:Tt("string",Ss._jsonSchemaVersion),bundleSource:Tt("string","QuerySnapshot"),bundleName:Tt("string"),bundle:Tt("string")};class Hy extends zM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new dt(this.firestore,null,n)}}function Br(t){t=dn(t,oi);const e=dn(t.firestore,Ar),n=yu(e),r=new Hy(e);return XP(t._query),DM(n,t._query).then(i=>new Ss(e,r,t,i))}function Za(t,e,n){t=dn(t,dt);const r=dn(t.firestore,Ar),i=Wy(t.converter,e,n);return Eu(r,[Ly(wu(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,hn.none())])}function bi(t,e,n,...r){t=dn(t,dt);const i=dn(t.firestore,Ar),s=wu(i);let o;return o=typeof(e=ye(e))=="string"||e instanceof vu?qP(s,"updateDoc",t._key,e,n,r):HP(s,"updateDoc",t._key,e),Eu(i,[o.toMutation(t._key,hn.exists(!0))])}function qy(t){return Eu(dn(t.firestore,Ar),[new Rh(t._key,hn.none())])}function Gy(t,e){const n=dn(t.firestore,Ar),r=St(t),i=Wy(t.converter,e);return Eu(n,[Ly(wu(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,hn.exists(!1))]).then(()=>r)}function ZP(t,...e){var n,r,i;t=ye(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||l1(e[o])||(s=e[o++]);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(l1(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let u,c,d;if(t instanceof dt)c=dn(t.firestore,Ar),d=Sh(t._key.path),u={next:h=>{e[o]&&e[o](ex(c,t,h))},error:e[o+1],complete:e[o+2]};else{const h=dn(t,oi);c=dn(h.firestore,Ar),d=h._query;const m=new Hy(c);u={next:w=>{e[o]&&e[o](new Ss(c,m,h,w))},error:e[o+1],complete:e[o+2]},XP(t._query)}return function(m,w,_,P){const N=new Dy(P),E=new Ay(w,N,_);return m.asyncQueue.enqueueAndForget(async()=>Sy(await Rd(m),E)),()=>{N.Ou(),m.asyncQueue.enqueueAndForget(async()=>Cy(await Rd(m),E))}}(yu(c),d,a,u)}function Eu(t,e){return function(r,i){const s=new qr;return r.asyncQueue.enqueueAndForget(async()=>_M(await NM(r),i,s)),s.promise}(yu(t),e)}function ex(t,e,n){const r=n.docs.get(e._key),i=new Hy(t);return new xs(t,i,e._key,r,new Ja(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=wu(e)}set(e,n,r){this._verifyNotCommitted();const i=tp(e,this._firestore),s=Wy(i.converter,n,r),o=Ly(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,hn.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=tp(e,this._firestore);let o;return o=typeof(n=ye(n))=="string"||n instanceof vu?qP(this._dataReader,"WriteBatch.update",s._key,n,r,i):HP(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,hn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=tp(e,this._firestore);return this._mutations=this._mutations.concat(new Rh(n._key,hn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new J(B.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function tp(t,e){if((t=ye(t)).firestore!==e)throw new J(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function nt(){return new My("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(t){return yu(t=dn(t,Ar)),new HM(t,e=>Eu(t,e))}(function(e,n=!0){(function(i){ca=i})(aa),Wo(new Os("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Ar(new BO(r.getProvider("auth-internal")),new HO(o,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new J(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kl(c.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),$i(d_,h_,e),$i(d_,h_,"esm2017")})();var qM="firebase",GM="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$i(qM,GM,"app");/*! Capacitor: https://capacitorjs.com/ - MIT License */var Qo;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Qo||(Qo={}));let np=class extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}};const KM=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},YM=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},i=()=>e!==null?e.name:KM(t),s=()=>i()!=="web",o=h=>{const m=c.get(h);return!!(m!=null&&m.platforms.has(i())||a(h))},a=h=>{var m;return(m=n.PluginHeaders)===null||m===void 0?void 0:m.find(w=>w.name===h)},u=h=>t.console.error(h),c=new Map,d=(h,m={})=>{const w=c.get(h);if(w)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),w.proxy;const _=i(),P=a(h);let N;const E=async()=>(!N&&_ in m?N=typeof m[_]=="function"?N=await m[_]():N=m[_]:e!==null&&!N&&"web"in m&&(N=typeof m.web=="function"?N=await m.web():N=m.web),N),y=(v,C)=>{var A,R;if(P){const T=P==null?void 0:P.methods.find(b=>C===b.name);if(T)return T.rtype==="promise"?b=>n.nativePromise(h,C.toString(),b):(b,W)=>n.nativeCallback(h,C.toString(),b,W);if(v)return(A=v[C])===null||A===void 0?void 0:A.bind(v)}else{if(v)return(R=v[C])===null||R===void 0?void 0:R.bind(v);throw new np(`"${h}" plugin is not implemented on ${_}`,Qo.Unimplemented)}},k=v=>{let C;const A=(...R)=>{const T=E().then(b=>{const W=y(b,v);if(W){const H=W(...R);return C=H==null?void 0:H.remove,H}else throw new np(`"${h}.${v}()" is not implemented on ${_}`,Qo.Unimplemented)});return v==="addListener"&&(T.remove=async()=>C()),T};return A.toString=()=>`${v.toString()}() { [capacitor code] }`,Object.defineProperty(A,"name",{value:v,writable:!1,configurable:!1}),A},D=k("addListener"),M=k("removeListener"),V=(v,C)=>{const A=D({eventName:v},C),R=async()=>{const b=await A;M({eventName:v,callbackId:b},C)},T=new Promise(b=>A.then(()=>b({remove:R})));return T.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await R()},T},I=new Proxy({},{get(v,C){switch(C){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return P?V:D;case"removeListener":return M;default:return k(C)}}});return r[h]=I,c.set(h,{name:h,proxy:I,platforms:new Set([...Object.keys(m),...P?[_]:[]])}),I};return n.convertFileSrc||(n.convertFileSrc=h=>h),n.getPlatform=i,n.handleError=u,n.isNativePlatform=s,n.isPluginAvailable=o,n.registerPlugin=d,n.Exception=np,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},QM=t=>t.Capacitor=YM(t),Fs=QM(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Gs=Fs.registerPlugin;let tx=class{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const s=this.windowListeners[e];s&&!s.registered&&this.addWindowListener(s),r&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const i=this.listeners[e];if(!i){if(r){let s=this.retainedEventArguments[e];s||(s=[]),s.push(n),this.retainedEventArguments[e]=s}return}i.forEach(s=>s(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new Fs.Exception(e,Qo.Unimplemented)}unavailable(e="not available"){return new Fs.Exception(e,Qo.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const i=r.indexOf(n);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}};const d1=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),h1=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class XM extends tx{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[i,s]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=h1(i).trim(),s=h1(s).trim(),n[i]=s}),n}async setCookie(e){try{const n=d1(e.key),r=d1(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,s=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${i}; path=${s}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Gs("CapacitorCookies",{web:()=>new XM});const JM=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const i=r.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>n(i),r.readAsDataURL(t)}),ZM=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(i=>i.toLocaleLowerCase()).reduce((i,s,o)=>(i[s]=t[e[o]],i),{})},eV=(t,e=!0)=>t?Object.entries(t).reduce((r,i)=>{const[s,o]=i;let a,u;return Array.isArray(o)?(u="",o.forEach(c=>{a=e?encodeURIComponent(c):c,u+=`${s}=${a}&`}),u.slice(0,-1)):(a=e?encodeURIComponent(o):o,u=`${s}=${a}`),`${r}&${u}`},"").substr(1):null,tV=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),i=ZM(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(i.includes("application/x-www-form-urlencoded")){const s=new URLSearchParams;for(const[o,a]of Object.entries(t.data||{}))s.set(o,a);n.body=s.toString()}else if(i.includes("multipart/form-data")||t.data instanceof FormData){const s=new FormData;if(t.data instanceof FormData)t.data.forEach((a,u)=>{s.append(u,a)});else for(const a of Object.keys(t.data))s.append(a,t.data[a]);n.body=s;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(i.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class nV extends tx{async request(e){const n=tV(e,e.webFetchExtra),r=eV(e.params,e.shouldEncodeUrlParams),i=r?`${e.url}?${r}`:e.url,s=await fetch(i,n),o=s.headers.get("content-type")||"";let{responseType:a="text"}=s.ok?e:{};o.includes("application/json")&&(a="json");let u,c;switch(a){case"arraybuffer":case"blob":c=await s.blob(),u=await JM(c);break;case"json":u=await s.json();break;case"document":case"text":default:u=await s.text()}const d={};return s.headers.forEach((h,m)=>{d[m]=h}),{data:u,headers:d,status:s.status,url:s.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Gs("CapacitorHttp",{web:()=>new nV});const Ai=Gs("PushNotifications",{}),rV={apiKey:"AIzaSyA-ArIwmJG4_Qlh4wGw-AZkbPt0omfRU4Y",authDomain:"followups-a83a7.firebaseapp.com",projectId:"followups-a83a7",storageBucket:"followups-a83a7.firebasestorage.app",messagingSenderId:"622370701795",appId:"1:622370701795:web:017cbdcd0d0753612e60d6"},nx=Sb(rV),pi=EI(nx),ke=BP(nx),iV=async()=>{const t=Fs.getPlatform();try{if(t==="web")return console.warn("Push notifications not fully supported on web. Skipping FCM token retrieval."),null;if((await Ai.requestPermissions()).receive!=="granted")throw new Error("Notification permission denied");return await Ai.register(),new Promise((n,r)=>{Ai.addListener("registration",i=>{console.log("FCM token registered:",i.value),n(i.value)}),Ai.addListener("registrationError",i=>{console.error("FCM registration error:",i),r(new Error(`FCM registration error: ${i.error}`))})})}catch(e){throw console.error("Notification permission error:",e),e}},rx=we.createContext(void 0),sV=({message:t,type:e="info",duration:n=5e3,onClose:r})=>{const[i,s]=O.useState(!0);O.useEffect(()=>{const d=setTimeout(()=>{s(!1),setTimeout(()=>r&&r(),300)},n);return()=>clearTimeout(d)},[n,r]);const o=()=>{s(!1),setTimeout(()=>r&&r(),300)},a=()=>{const d="fixed top-4 right-4 z-50 max-w-sm w-full bg-white dark:bg-slate-800 rounded-lg shadow-lg border p-4 transition-all duration-300 transform";if(!i)return`${d} translate-x-full opacity-0`;switch(e){case"success":return`${d} border-green-200 dark:border-green-800`;case"error":return`${d} border-red-200 dark:border-red-800`;case"warning":return`${d} border-yellow-200 dark:border-yellow-800`;default:return`${d} border-blue-200 dark:border-blue-800`}},u=()=>{const d={className:"w-5 h-5 flex-shrink-0"};switch(e){case"success":return p(zg,{...d,className:"w-5 h-5 flex-shrink-0 text-green-600 dark:text-green-400"});case"error":return p(nN,{...d,className:"w-5 h-5 flex-shrink-0 text-red-600 dark:text-red-400"});case"warning":return p(tN,{...d,className:"w-5 h-5 flex-shrink-0 text-yellow-600 dark:text-yellow-400"});default:return p(oN,{...d,className:"w-5 h-5 flex-shrink-0 text-blue-600 dark:text-blue-400"})}},c=()=>{switch(e){case"success":return"text-green-800 dark:text-green-200";case"error":return"text-red-800 dark:text-red-200";case"warning":return"text-yellow-800 dark:text-yellow-200";default:return"text-blue-800 dark:text-blue-200"}};return p("div",{className:a(),children:x("div",{className:"flex items-start space-x-3",children:[u(),p("div",{className:"flex-1",children:p("p",{className:`text-sm font-medium ${c()}`,children:t})}),p("button",{onClick:o,className:"flex-shrink-0 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:p(qg,{className:"w-4 h-4"})})]})})},Vn=()=>{const t=we.useContext(rx);if(!t)throw new Error("useToast must be used within a ToastProvider");return t},oV=({children:t})=>{const[e,n]=O.useState([]),r=(c,d="info",h=5e3)=>{const m=Date.now()+Math.random(),w={id:m,message:c,type:d,duration:h};n(_=>[..._,w]),setTimeout(()=>{i(m)},h+300)},i=c=>{n(d=>d.filter(h=>h.id!==c))},s=(c,d)=>r(c,"success",d),o=(c,d)=>r(c,"error",d),a=(c,d)=>r(c,"warning",d),u=(c,d)=>r(c,"info",d);return x(rx.Provider,{value:{addToast:r,showSuccess:s,showError:o,showWarning:a,showInfo:u},children:[t,e.map(c=>p(sV,{message:c.message,type:c.type,duration:c.duration,onClose:()=>i(c.id)},c.id))]})},aV="modulepreload",lV=function(t){return"/"+t},f1={},Xo=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=lV(s),s in f1)return;f1[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let d=i.length-1;d>=0;d--){const h=i[d];if(h.href===s&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":aV,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((d,h)=>{c.addEventListener("load",d),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var p1;(function(t){t.IndexedDbLocal="INDEXED_DB_LOCAL",t.InMemory="IN_MEMORY",t.BrowserLocal="BROWSER_LOCAL",t.BrowserSession="BROWSER_SESSION"})(p1||(p1={}));var m1;(function(t){t.APPLE="apple.com",t.FACEBOOK="facebook.com",t.GAME_CENTER="gc.apple.com",t.GITHUB="github.com",t.GOOGLE="google.com",t.MICROSOFT="microsoft.com",t.PLAY_GAMES="playgames.google.com",t.TWITTER="twitter.com",t.YAHOO="yahoo.com",t.PASSWORD="password",t.PHONE="phone"})(m1||(m1={}));const uV=Gs("FirebaseAuthentication",{web:()=>Xo(()=>import("./web-362502b7.js"),[]).then(t=>new t.FirebaseAuthenticationWeb)}),ix=O.createContext({currentUser:null,userProfile:null,loading:!0,signInWithGoogle:async()=>({user:null,error:"Not implemented"}),signInWithEmail:async()=>({user:null,error:"Not implemented"}),signUpWithEmail:async()=>({user:null,error:"Not implemented"}),logout:async()=>({error:"Not implemented"}),updateUserProfile:async()=>({error:"Not implemented"}),createUserProfile:async()=>({error:"Not implemented"})}),Sn=()=>{const t=O.useContext(ix);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},cV=({children:t})=>{const[e,n]=O.useState(null),[r,i]=O.useState(!0),[s,o]=O.useState(null),{showError:a}=Vn(),u=Fs.getPlatform()!=="web",c=async(D=3,M=1e3)=>{for(let V=1;V<=D;V++){try{const I=await iV();if(I&&typeof I=="string"&&I.length>10)return console.log(`FCM token retrieved on attempt ${V}: ${I}`),I;console.warn(`Invalid or empty FCM token on attempt ${V}: ${I}`)}catch(I){console.error(`FCM permission error on attempt ${V}:`,I)}V<D&&await new Promise(I=>setTimeout(I,M))}return a("Failed to retrieve valid FCM token after retries. Notifications may not work."),null},d=async()=>{var V,I;const D=new vr;D.addScope("email profile");const M=new Map([["auth/popup-closed-by-user","Sign-in cancelled."],["auth/popup-blocked","Pop-up blocked. Trying redirect..."],["auth/cancelled-popup-request","Sign-in cancelled."],["auth/network-request-failed","Network error. Check your connection."],["auth/too-many-requests","Too many attempts. Try again later."],["auth/user-disabled","Account disabled. Contact support."],["auth/account-exists-with-different-credential","Account exists with different credentials."]]);try{if(u)try{const v=await uV.signInWithGoogle(),C=((V=v.credential)==null?void 0:V.idToken)??null,A=((I=v.credential)==null?void 0:I.accessToken)??null;if(!C)throw new Error("No valid Google ID token from native sign-in");const R=vr.credential(C,A),b=(await vh(pi,R)).user,W=await _(b);if(W.error)throw new Error(W.error);const H=await c();if(H){const ue=await P(b.uid,H);if(ue.error)throw new Error(ue.error)}return{user:b,error:null}}catch(v){throw console.warn("Native Google sign-in failed:",v),new Error("Native sign-in failed. Please try email/password.")}try{const C=(await qD(pi,D)).user,A=await _(C);if(A.error)throw new Error(A.error);const R=await c();if(R){const T=await P(C.uid,R);if(T.error)throw new Error(T.error)}return{user:C,error:null}}catch(v){if(v.code==="auth/popup-blocked"||v.code==="auth/popup-closed-by-user"||v.code==="auth/cancelled-popup-request")return await XD(pi,D),{user:null,error:null,pending:!0};throw v}}catch(v){const C=M.get(v.code)||v.message||"Sign-in failed.";return a(C),{user:null,error:C}}},h=async(D,M)=>{const V=new Map([["auth/user-not-found","No account found."],["auth/wrong-password","Incorrect password."],["auth/invalid-email","Invalid email address."],["auth/user-disabled","Account disabled."],["auth/too-many-requests","Too many attempts."],["auth/network-request-failed","Network error."]]);try{const v=(await uD(pi,D,M)).user,C=await _(v);if(C.error)throw new Error(C.error);const A=await c();if(A){const R=await P(v.uid,A);if(R.error)throw new Error(R.error)}return{user:v,error:null}}catch(I){const v=V.get(I.code)||"Sign-in failed.";return a(v),{user:null,error:v}}},m=async(D,M,V)=>{const I=new Map([["auth/email-already-in-use","Email already in use."],["auth/invalid-email","Invalid email address."],["auth/weak-password","Password too weak."],["auth/operation-not-allowed","Email/password not enabled."],["auth/network-request-failed","Network error."]]);try{const C=(await lD(pi,D,M)).user;await hD(C,{displayName:V});const A=await _(C,{displayName:V});if(A.error)throw new Error(A.error);const R=await c();if(R){const T=await P(C.uid,R);if(T.error)throw new Error(T.error)}return{user:C,error:null}}catch(v){const C=I.get(v.code)||"Account creation failed.";return a(C),{user:null,error:C}}},w=async()=>{try{return await _D(pi),o(null),{error:null}}catch(D){const M=D.message||"Sign-out failed.";return a(M),{error:M}}},_=async(D,M={})=>{if(!D)return{error:"No user provided"};const V=St(ke,"users",D.uid);try{return(await ln(V)).exists()?(await Za(V,{lastLoginAt:nt(),updatedAt:nt()},{merge:!0}),console.log(`User profile updated for ${D.uid}`)):(await Za(V,{displayName:D.displayName||M.displayName||"User",email:D.email||"",photoURL:D.photoURL||"",role:"dentist",createdAt:nt(),updatedAt:nt(),lastLoginAt:nt(),preferences:{theme:"light",notifications:!0,language:"en"},...M}),console.log(`User profile created for ${D.uid}`)),{error:null}}catch(I){const v=I.message||"Failed to create/update user profile";return console.error("Error creating/updating user profile:",I),{error:v}}},P=async(D,M)=>{if(!M||typeof M!="string"||M.length<10){const V="Invalid FCM token provided";return console.error(V,M),{error:V}}try{const V=St(ke,"users",D);return(await ln(V)).exists()?(await Za(V,{fcmToken:M,updatedAt:nt()},{merge:!0}),console.log(`FCM token updated for ${D}: ${M}`),{error:null}):{error:"User profile not found"}}catch(V){const I=V.message||"Failed to update FCM token";return console.error("Error updating FCM token:",V),{error:I}}},N=async D=>{try{const M=St(ke,"users",D),V=await ln(M);return V.exists()?V.data():(console.warn(`No user profile found for ${D}`),null)}catch(M){return console.error("Error getting user profile:",M),null}},E=async(D,M)=>{try{const V=St(ke,"users",D);return await Za(V,{...M,updatedAt:nt()},{merge:!0}),o(I=>I?{...I,...M}:null),console.log(`User profile updated for ${D}`),{error:null}}catch(V){const I=V.message||"Update failed";return a(I),{error:I}}},y=O.useCallback(async D=>{if(D){n(D);const M=await N(D.uid);if(!M){const I=await _(D);if(I.error){a(I.error),i(!1);return}}o(M);const V=await c();if(V){const I=await P(D.uid,V);I.error&&a(I.error)}i(!1)}else n(null),o(null),i(!1)},[a]);O.useEffect(()=>{const D=sI(pi,y);return Fs.getPlatform()==="web"&&eO(pi).then(async M=>{M&&await y(M.user)}).catch(M=>{console.error("Redirect result error:",M),a(M.message||"Redirect sign-in failed."),i(!1)}),()=>D()},[y]);const k={currentUser:e,userProfile:s,loading:r,signInWithGoogle:d,signInWithEmail:h,signUpWithEmail:m,logout:w,updateUserProfile:E,createUserProfile:_};return p(ix.Provider,{value:k,children:r?p("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-secondary-50 dark:from-slate-900 dark:to-slate-800 flex items-center justify-center",children:x("div",{className:"text-center",children:[p("div",{className:"w-16 h-16 bg-primary rounded-2xl flex items-center justify-center mx-auto mb-6 animate-pulse",children:p("div",{className:"w-8 h-8 bg-white rounded-full"})}),p("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),p("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"DentalCare"}),p("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading your dental practice..."})]})}):t})},er="patients",fr="followups",uo="treatments";async function g1(t,e){try{const n=nr(vn(ke,uo),zt("patientId","==",t),zt("userId","==",e),Lo("date","desc"),BM(1)),r=await Br(n);return r.empty?null:r.docs[0].data().date}catch{return null}}const lr={async create(t,e){try{const n={name:t.name||"",email:t.email||null,phone:t.phone||null,dateOfBirth:t.dateOfBirth||null,gender:t.gender||null,address:t.address||null,city:t.city||null,zipCode:t.zipCode||null,emergencyContact:t.emergencyContact||null,allergies:t.allergies||null,medications:t.medications||null,medicalHistory:t.medicalHistory||null,insuranceProvider:t.insuranceProvider||null,policyNumber:t.policyNumber||null,notes:t.notes||null,nextAppointment:t.nextAppointment||null,userId:e,lastVisit:null,createdAt:nt(),updatedAt:nt()};return{id:(await Gy(vn(ke,er),n)).id,error:null}}catch(n){return{id:null,error:n.message||"Failed to create patient"}}},async getById(t){try{const e=St(ke,er,t),n=await ln(e);if(n.exists()){const r=n.data();return{patient:{id:n.id,...r},error:null}}return{patient:null,error:"Patient not found"}}catch(e){return{patient:null,error:e.message||"Failed to fetch patient"}}},async getAll(t){try{const e=nr(vn(ke,er),zt("userId","==",t));return{patients:(await Br(e)).docs.map(i=>{const s=i.data();return{id:i.id,...s}}),error:null}}catch(e){return{patients:[],error:e.message||"Failed to fetch patients"}}},async update(t,e,n){try{const r=St(ke,er,t),i=await ln(r);if(!i.exists())return{error:"Patient not found"};const s=i.data();if(s.userId!==n)return{error:"Unauthorized: userId does not match"};const o={...s,...e,updatedAt:nt()};return await bi(r,o),{error:null}}catch(r){return{error:r.message||"Failed to update patient"}}},async delete(t,e){try{const n=St(ke,er,t),r=await ln(n);return r.exists()?r.data().userId!==e?{error:"Unauthorized: userId does not match"}:(await qy(n),{error:null}):{error:null}}catch(n){return{error:n.message||"Failed to delete patient"}}},onSnapshot(t,e){const n=nr(vn(ke,er),zt("userId","==",t),Lo("createdAt","desc"));return ZP(n,r=>{const i=r.docs.map(s=>{const o=s.data();return{id:s.id,...o}});e(i)},r=>{})},async search(t,e){try{const n=nr(vn(ke,er),zt("userId","==",t));return{patients:(await Br(n)).docs.map(o=>{const a=o.data();return{id:o.id,...a}}).filter(o=>o.name.toLowerCase().includes(e.toLowerCase())||o.email&&o.email.toLowerCase().includes(e.toLowerCase())||o.phone&&o.phone.includes(e)),error:null}}catch(n){return{patients:[],error:n.message||"Failed to search patients"}}}},En={async create(t,e,n){try{const r={...t,userId:e,patientId:n,status:t.status||"pending",createdAt:nt(),updatedAt:nt(),completedAt:null,completionNotes:null,isRead:!1};return{id:(await Gy(vn(ke,fr),r)).id,error:null}}catch(r){return{id:null,error:r.message||"Failed to create follow-up"}}},async getAll(t){try{const e=nr(vn(ke,fr),zt("userId","==",t));return{followUps:(await Br(e)).docs.map(i=>({id:i.id,...i.data()})),error:null}}catch(e){return{followUps:[],error:e.message||"Failed to fetch follow-ups"}}},async getByPatient(t,e){try{const n=nr(vn(ke,fr),zt("userId","==",e),zt("patientId","==",t),Lo("scheduledDate","desc"));return{followUps:(await Br(n)).docs.map(s=>({id:s.id,...s.data()})),error:null}}catch(n){return{followUps:[],error:n.message||"Failed to fetch follow-ups by patient"}}},async getOverdue(t){try{const e=nr(vn(ke,fr),zt("userId","==",t),zt("status","==","overdue"),Lo("scheduledDate","desc"));return{followUps:(await Br(e)).docs.map(i=>({id:i.id,...i.data()})),error:null}}catch(e){return{followUps:[],error:e.message||"Failed to fetch overdue follow-ups"}}},async updateStatus(t,e,n){try{const r=St(ke,fr,t);return(await ln(r)).exists()?(await bi(r,{status:e,completionNotes:n,updatedAt:nt(),completedAt:e==="completed"?nt():null}),{error:null}):{error:"Follow-up not found"}}catch(r){return{error:r.message||"Failed to update follow-up status"}}},async update(t,e,n){try{const r=St(ke,fr,t),i=await ln(r);return i.exists()?i.data().userId!==n?{error:"Unauthorized: userId does not match"}:(await bi(r,{...e,updatedAt:nt()}),{error:null}):{error:"Follow-up not found"}}catch(r){return{error:r.message||"Failed to update follow-up"}}},async delete(t,e){try{const n=St(ke,fr,t),r=await ln(n);return r.exists()?r.data().userId!==e?{error:"Unauthorized: userId does not match"}:(await qy(n),{error:null}):{error:null}}catch(n){return{error:n.message||"Failed to delete follow-up"}}},async deleteByPatientId(t,e){try{const n=nr(vn(ke,fr),zt("patientId","==",t),zt("userId","==",e)),r=await Br(n);if(r.empty)return{error:null};const i=Om(ke);return r.forEach(s=>{i.delete(s.ref)}),await i.commit(),{error:null}}catch(n){return{error:n.message||"Failed to delete follow-ups for patient"}}},onSnapshot(t,e){const n=nr(vn(ke,fr),zt("userId","==",t),Lo("scheduledDate","desc"));return ZP(n,r=>{const i=r.docs.map(s=>({id:s.id,...s.data()}));e(i)},r=>{})},async updateOverdueStatus(t){try{const{followUps:e}=await this.getAll(t),n=new Date().toISOString().split("T")[0],r=Om(ke);return e.forEach(i=>{i.status==="pending"&&i.scheduledDate<n&&r.update(St(ke,fr,i.id),{status:"overdue",updatedAt:nt()})}),await r.commit(),{error:null}}catch(e){return{error:e.message||"Failed to update overdue status"}}}},el={async create(t,e){let n;try{n=await Gy(vn(ke,uo),{...t,userId:e,createdAt:nt(),updatedAt:nt()})}catch(r){return{id:null,error:r.message||"Failed to create treatment"}}try{const r=St(ke,er,t.patientId),i=await ln(r);if(i.exists()){const s=i.data();if(s.userId===e){const o=s.lastVisit?new Date(s.lastVisit):null,a=new Date(t.date);(!o||a>o)&&await bi(r,{lastVisit:t.date,updatedAt:nt()})}}}catch{}return{id:n.id,error:null}},async getByPatient(t,e){try{const n=nr(vn(ke,uo),zt("userId","==",e),zt("patientId","==",t),Lo("date","desc"));return{treatments:(await Br(n)).docs.map(s=>({id:s.id,...s.data()})),error:null}}catch(n){return{treatments:[],error:n.message||"Failed to fetch treatments"}}},async update(t,e,n){try{const r=St(ke,uo,t),i=await ln(r);if(!i.exists())return{error:"Treatment not found"};if(i.data().userId!==n)return{error:"Unauthorized: userId does not match"};if(await bi(r,{...e,updatedAt:nt()}),e.date&&e.patientId)try{const o=St(ke,er,e.patientId),a=await ln(o);if(a.exists()&&a.data().userId===n){const u=await g1(e.patientId,n);await bi(o,{lastVisit:u,updatedAt:nt()})}}catch{}return{error:null}}catch(r){return{error:r.message||"Failed to update treatment"}}},async delete(t,e){try{const n=St(ke,uo,t),r=await ln(n);if(!r.exists())return{error:null};const i=r.data();if(i.userId!==e)return{error:"Unauthorized: userId does not match"};await qy(n);try{const s=St(ke,er,i.patientId),o=await ln(s);if(o.exists()&&o.data().userId===e){const a=await g1(i.patientId,e);await bi(s,{lastVisit:a,updatedAt:nt()})}}catch{}return{error:null}}catch(n){return{error:n.message||"Failed to delete treatment"}}},async deleteByPatientId(t,e){try{const n=nr(vn(ke,uo),zt("patientId","==",t),zt("userId","==",e)),r=await Br(n);if(r.empty)return{error:null};const i=Om(ke);r.forEach(s=>{i.delete(s.ref)}),await i.commit();try{const s=St(ke,er,t),o=await ln(s);o.exists()&&o.data().userId===e&&await bi(s,{lastVisit:null,updatedAt:nt()})}catch{}return{error:null}}catch(n){return{error:n.message||"Failed to delete treatments for patient"}}}},sx=O.createContext(void 0),dV=({children:t})=>{const{currentUser:e}=Sn(),{showError:n}=Vn(),[r,i]=O.useState([]),[s,o]=O.useState(0),a=async d=>{try{const{error:h}=await En.updateOverdueStatus(d);if(h){n(`Failed to update overdue statuses: ${h}`);return}const m=new Date().toISOString().split("T")[0],{followUps:w,error:_}=await En.getAll(d);if(_){n(`Failed to fetch notifications: ${_}`);return}const P=w.filter(N=>(N.status==="pending"||N.status==="overdue")&&N.scheduledDate<=m).sort((N,E)=>new Date(N.scheduledDate).getTime()-new Date(E.scheduledDate).getTime());i(P),o(P.filter(N=>!N.isRead).length)}catch(h){n(`Unexpected error fetching notifications: ${h.message}`)}};O.useEffect(()=>{if(!(e!=null&&e.uid)){i([]),o(0);return}a(e.uid);const d=En.onSnapshot(e.uid,h=>{const m=new Date().toISOString().split("T")[0],w=h.filter(_=>(_.status==="pending"||_.status==="overdue")&&_.scheduledDate<=m).sort((_,P)=>new Date(_.scheduledDate).getTime()-new Date(P.scheduledDate).getTime());i(w),o(w.filter(_=>!_.isRead).length)});return()=>d()},[e]);const u=async d=>{try{const{error:h}=await En.update(d,{isRead:!0},(e==null?void 0:e.uid)||"");if(h){n(`Failed to mark notification as read: ${h}`);return}i(m=>m.map(w=>w.id===d?{...w,isRead:!0}:w)),o(m=>m-1)}catch(h){n(`Unexpected error marking notification as read: ${h.message}`)}},c=()=>{e!=null&&e.uid&&a(e.uid)};return p(sx.Provider,{value:{notifications:r,unreadCount:s,markAsRead:u,refreshNotifications:c},children:t})},Bh=()=>{const t=O.useContext(sx);if(!t)throw new Error("useNotifications must be used within a NotificationProvider");return t};var ox={},Lm={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.LogLevel=void 0,function(n){n[n.None=0]="None",n[n.Fatal=1]="Fatal",n[n.Error=2]="Error",n[n.Warn=3]="Warn",n[n.Info=4]="Info",n[n.Debug=5]="Debug",n[n.Verbose=6]="Verbose"}(t.LogLevel||(t.LogLevel={}));var e=function(){function n(){}return n.prototype.setLogLevel=function(r){window.cordova.exec(function(){},function(){},"OneSignalPush","setLogLevel",[r])},n.prototype.setAlertLevel=function(r){window.cordova.exec(function(){},function(){},"OneSignalPush","setAlertLevel",[r])},n}();t.default=e})(Lm);var Ky={};Object.defineProperty(Ky,"__esModule",{value:!0});var hV=function(){function t(){this._inAppMessageClickListeners=[],this._willDisplayInAppMessageListeners=[],this._didDisplayInAppMessageListeners=[],this._willDismissInAppMessageListeners=[],this._didDismissInAppMessageListeners=[]}return t.prototype._processFunctionList=function(e,n){for(var r=0;r<e.length;r++)e[r](n)},t.prototype.addEventListener=function(e,n){var r=this;if(e==="click"){this._inAppMessageClickListeners.push(n);var i=function(c){r._processFunctionList(r._inAppMessageClickListeners,c)};window.cordova.exec(i,function(){},"OneSignalPush","setInAppMessageClickHandler",[])}else if(e==="willDisplay"){this._willDisplayInAppMessageListeners.push(n);var s=function(c){r._processFunctionList(r._willDisplayInAppMessageListeners,c)};window.cordova.exec(s,function(){},"OneSignalPush","setOnWillDisplayInAppMessageHandler",[])}else if(e==="didDisplay"){this._didDisplayInAppMessageListeners.push(n);var o=function(c){r._processFunctionList(r._didDisplayInAppMessageListeners,c)};window.cordova.exec(o,function(){},"OneSignalPush","setOnDidDisplayInAppMessageHandler",[])}else if(e==="willDismiss"){this._willDismissInAppMessageListeners.push(n);var a=function(c){r._processFunctionList(r._willDismissInAppMessageListeners,c)};window.cordova.exec(a,function(){},"OneSignalPush","setOnWillDismissInAppMessageHandler",[])}else if(e==="didDismiss"){this._didDismissInAppMessageListeners.push(n);var u=function(c){r._processFunctionList(r._didDismissInAppMessageListeners,c)};window.cordova.exec(u,function(){},"OneSignalPush","setOnDidDismissInAppMessageHandler",[])}else return},t.prototype.removeEventListener=function(e,n){if(e==="click"){var r=this._inAppMessageClickListeners.indexOf(n);r!==-1&&this._inAppMessageClickListeners.splice(r,1)}else if(e==="willDisplay"){var r=this._willDisplayInAppMessageListeners.indexOf(n);r!==-1&&this._willDisplayInAppMessageListeners.splice(r,1)}else if(e==="didDisplay"){var r=this._didDisplayInAppMessageListeners.indexOf(n);r!==-1&&this._willDisplayInAppMessageListeners.splice(r,1)}else if(e==="willDismiss"){var r=this._willDismissInAppMessageListeners.indexOf(n);r!==-1&&this._willDismissInAppMessageListeners.splice(r,1)}else if(e==="didDismiss"){var r=this._didDismissInAppMessageListeners.indexOf(n);r!==-1&&this._didDismissInAppMessageListeners.splice(r,1)}else return},t.prototype.addTrigger=function(e,n){var r,i=(r={},r[e]=n,r);this.addTriggers(i)},t.prototype.addTriggers=function(e){Object.keys(e).forEach(function(n){typeof e[n]!="string"&&(e[n]=JSON.stringify(e[n]))}),window.cordova.exec(function(){},function(){},"OneSignalPush","addTriggers",[e])},t.prototype.removeTrigger=function(e){this.removeTriggers([e])},t.prototype.removeTriggers=function(e){Array.isArray(e)||console.error("OneSignal: removeTriggers: argument must be of type Array"),window.cordova.exec(function(){},function(){},"OneSignalPush","removeTriggers",[e])},t.prototype.clearTriggers=function(){window.cordova.exec(function(){},function(){},"OneSignalPush","clearTriggers")},t.prototype.setPaused=function(e){window.cordova.exec(function(){},function(){},"OneSignalPush","setPaused",[e])},t.prototype.getPaused=function(){return new Promise(function(e,n){window.cordova.exec(e,n,"OneSignalPush","isPaused",[])})},t}();Ky.default=hV;var Yy={};Object.defineProperty(Yy,"__esModule",{value:!0});var fV=function(){function t(){}return t.prototype.enter=function(e,n,r,i){r==null&&(r=function(){}),i==null&&(i=function(){}),window.cordova.exec(r,i,"OneSignalPush","enterLiveActivity",[e,n])},t.prototype.exit=function(e,n,r){n==null&&(n=function(){}),r==null&&(r=function(){}),window.cordova.exec(n,r,"OneSignalPush","exitLiveActivity",[e])},t.prototype.setPushToStartToken=function(e,n){window.cordova.exec(function(){},function(){},"OneSignalPush","setPushToStartToken",[e,n])},t.prototype.removePushToStartToken=function(e){window.cordova.exec(function(){},function(){},"OneSignalPush","removePushToStartToken",[e])},t.prototype.setupDefault=function(e){window.cordova.exec(function(){},function(){},"OneSignalPush","setupDefaultLiveActivity",[e])},t.prototype.startDefault=function(e,n,r){window.cordova.exec(function(){},function(){},"OneSignalPush","startDefaultLiveActivity",[e,n,r])},t}();Yy.default=fV;var Qy={};Object.defineProperty(Qy,"__esModule",{value:!0});var pV=function(){function t(){}return t.prototype.requestPermission=function(){window.cordova.exec(function(){},function(){},"OneSignalPush","requestLocationPermission",[])},t.prototype.setShared=function(e){window.cordova.exec(function(){},function(){},"OneSignalPush","setLocationShared",[e])},t.prototype.isShared=function(){return new Promise(function(e,n){window.cordova.exec(e,n,"OneSignalPush","isLocationShared",[])})},t}();Qy.default=pV;var Mm={},Tu={},bu={};Object.defineProperty(bu,"__esModule",{value:!0});bu.OSNotification=void 0;var mV=function(){function t(e){this.notificationId=e.notificationId,this.body=e.body,this.title=e.title,this.additionalData=e.additionalData,typeof e.rawPayload=="string"?this.rawPayload=JSON.parse(e.rawPayload):this.rawPayload=e.rawPayload,this.launchURL=e.launchURL,this.sound=e.sound,e.actionButtons&&(this.actionButtons=e.actionButtons),e.groupKey&&(this.groupKey=e.groupKey),e.ledColor&&(this.ledColor=e.ledColor),typeof e.priority<"u"&&(this.priority=e.priority),e.smallIcon&&(this.smallIcon=e.smallIcon),e.largeIcon&&(this.largeIcon=e.largeIcon),e.bigPicture&&(this.bigPicture=e.bigPicture),e.collapseId&&(this.collapseId=e.collapseId),e.groupMessage&&(this.groupMessage=e.groupMessage),e.fromProjectNumber&&(this.fromProjectNumber=e.fromProjectNumber),e.smallIconAccentColor&&(this.smallIconAccentColor=e.smallIconAccentColor),e.lockScreenVisibility&&(this.lockScreenVisibility=e.lockScreenVisibility),e.androidNotificationId&&(this.androidNotificationId=e.androidNotificationId),e.groupedNotifications&&e.groupedNotifications.length&&(this.groupedNotifications=e.groupedNotifications),e.badge&&(this.badge=e.badge),e.category&&(this.category=e.category),e.threadId&&(this.threadId=e.threadId),e.subtitle&&(this.subtitle=e.subtitle),e.templateId&&(this.templateId=e.templateId),e.attachments&&(this.attachments=e.attachments),e.templateName&&(this.templateName=e.templateName),e.mutableContent&&(this.mutableContent=e.mutableContent),e.badgeIncrement&&(this.badgeIncrement=e.badgeIncrement),e.contentAvailable&&(this.contentAvailable=e.contentAvailable),e.relevanceScore&&(this.relevanceScore=e.relevanceScore),e.interruptionLevel&&(this.interruptionLevel=e.interruptionLevel)}return t.prototype.display=function(){window.cordova.exec(function(){},function(){},"OneSignalPush","displayNotification",[this.notificationId])},t}();bu.OSNotification=mV;Object.defineProperty(Tu,"__esModule",{value:!0});Tu.NotificationWillDisplayEvent=void 0;var gV=bu,yV=function(){function t(e){this.notification=new gV.OSNotification(e)}return t.prototype.preventDefault=function(e){e===void 0&&(e=!1),window.cordova.exec(function(){},function(){},"OneSignalPush","preventDefault",[this.notification.notificationId,e])},t.prototype.getNotification=function(){return this.notification},t}();Tu.NotificationWillDisplayEvent=yV;(function(t){var e=zn&&zn.__awaiter||function(s,o,a,u){function c(d){return d instanceof a?d:new a(function(h){h(d)})}return new(a||(a=Promise))(function(d,h){function m(P){try{_(u.next(P))}catch(N){h(N)}}function w(P){try{_(u.throw(P))}catch(N){h(N)}}function _(P){P.done?d(P.value):c(P.value).then(m,w)}_((u=u.apply(s,o||[])).next())})},n=zn&&zn.__generator||function(s,o){var a={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},u,c,d,h;return h={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function m(_){return function(P){return w([_,P])}}function w(_){if(u)throw new TypeError("Generator is already executing.");for(;a;)try{if(u=1,c&&(d=_[0]&2?c.return:_[0]?c.throw||((d=c.return)&&d.call(c),0):c.next)&&!(d=d.call(c,_[1])).done)return d;switch(c=0,d&&(_=[_[0]&2,d.value]),_[0]){case 0:case 1:d=_;break;case 4:return a.label++,{value:_[1],done:!1};case 5:a.label++,c=_[1],_=[0];continue;case 7:_=a.ops.pop(),a.trys.pop();continue;default:if(d=a.trys,!(d=d.length>0&&d[d.length-1])&&(_[0]===6||_[0]===2)){a=0;continue}if(_[0]===3&&(!d||_[1]>d[0]&&_[1]<d[3])){a.label=_[1];break}if(_[0]===6&&a.label<d[1]){a.label=d[1],d=_;break}if(d&&a.label<d[2]){a.label=d[2],a.ops.push(_);break}d[2]&&a.ops.pop(),a.trys.pop();continue}_=o.call(s,a)}catch(P){_=[6,P],c=0}finally{u=d=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0}),t.OSNotificationPermission=void 0;var r=Tu;(function(s){s[s.NotDetermined=0]="NotDetermined",s[s.Denied=1]="Denied",s[s.Authorized=2]="Authorized",s[s.Provisional=3]="Provisional",s[s.Ephemeral=4]="Ephemeral"})(t.OSNotificationPermission||(t.OSNotificationPermission={}));var i=function(){function s(){this._permissionObserverList=[],this._notificationClickedListeners=[],this._notificationWillDisplayListeners=[]}return s.prototype._processFunctionList=function(o,a){for(var u=0;u<o.length;u++)o[u](a)},s.prototype._setPropertyAndObserver=function(){var o=this,a=function(u){o._permission=u};window.cordova.exec(a,function(){},"OneSignalPush","getPermissionInternal"),this.addEventListener("permissionChange",function(u){o._permission=u})},s.prototype.hasPermission=function(){return this._permission||!1},s.prototype.getPermissionAsync=function(){return e(this,void 0,void 0,function(){return n(this,function(o){return[2,new Promise(function(a,u){window.cordova.exec(a,u,"OneSignalPush","getPermissionInternal")})]})})},s.prototype.permissionNative=function(){return new Promise(function(o,a){window.cordova.exec(o,a,"OneSignalPush","permissionNative",[])})},s.prototype.requestPermission=function(o){var a=o??!1;return new Promise(function(u,c){window.cordova.exec(u,c,"OneSignalPush","requestPermission",[a])})},s.prototype.canRequestPermission=function(){return new Promise(function(o,a){window.cordova.exec(o,a,"OneSignalPush","canRequestPermission",[])})},s.prototype.registerForProvisionalAuthorization=function(o){o===void 0&&(o=function(){}),window.cordova.exec(o,function(){},"OneSignalPush","registerForProvisionalAuthorization",[])},s.prototype.addEventListener=function(o,a){var u=this;if(o==="click"){this._notificationClickedListeners.push(a);var c=function(m){u._processFunctionList(u._notificationClickedListeners,m)};window.cordova.exec(c,function(){},"OneSignalPush","addNotificationClickListener",[])}else if(o==="foregroundWillDisplay"){this._notificationWillDisplayListeners.push(a);var d=function(m){u._notificationWillDisplayListeners.forEach(function(w){w(new r.NotificationWillDisplayEvent(m))}),window.cordova.exec(function(){},function(){},"OneSignalPush","proceedWithWillDisplay",[m.notificationId])};window.cordova.exec(d,function(){},"OneSignalPush","addForegroundLifecycleListener",[])}else if(o==="permissionChange"){this._permissionObserverList.push(a);var h=function(m){u._processFunctionList(u._permissionObserverList,m)};window.cordova.exec(h,function(){},"OneSignalPush","addPermissionObserver",[])}else return},s.prototype.removeEventListener=function(o,a){if(o==="click"){var u=this._notificationClickedListeners.indexOf(a);u!==-1&&this._notificationClickedListeners.splice(u,1)}else if(o==="foregroundWillDisplay"){var u=this._notificationWillDisplayListeners.indexOf(a);u!==-1&&this._notificationWillDisplayListeners.splice(u,1)}else if(o==="permissionChange"){var u=this._permissionObserverList.indexOf(a);u!==-1&&this._permissionObserverList.splice(u,1)}else return},s.prototype.clearAll=function(){window.cordova.exec(function(){},function(){},"OneSignalPush","clearAllNotifications",[])},s.prototype.removeNotification=function(o){window.cordova.exec(function(){},function(){},"OneSignalPush","removeNotification",[o])},s.prototype.removeGroupedNotifications=function(o){window.cordova.exec(function(){},function(){},"OneSignalPush","removeGroupedNotifications",[o])},s}();t.default=i})(Mm);var Xy={};Object.defineProperty(Xy,"__esModule",{value:!0});var vV=function(){function t(){}return t.prototype.addOutcome=function(e){window.cordova.exec(function(){},function(){},"OneSignalPush","addOutcome",[e])},t.prototype.addUniqueOutcome=function(e){window.cordova.exec(function(){},function(){},"OneSignalPush","addUniqueOutcome",[e])},t.prototype.addOutcomeWithValue=function(e,n){window.cordova.exec(function(){},function(){},"OneSignalPush","addOutcomeWithValue",[e,n])},t}();Xy.default=vV;var Jy={},Zy={};Object.defineProperty(Zy,"__esModule",{value:!0});var wV=function(){function t(){this._subscriptionObserverList=[]}return t.prototype._processFunctionList=function(e,n){for(var r=0;r<e.length;r++)e[r](n)},t.prototype._setPropertiesAndObserver=function(){var e=this,n=function(s){e._id=s};window.cordova.exec(n,function(){},"OneSignalPush","getPushSubscriptionId");var r=function(s){e._token=s};window.cordova.exec(r,function(){},"OneSignalPush","getPushSubscriptionToken");var i=function(s){e._optedIn=s};window.cordova.exec(i,function(){},"OneSignalPush","getPushSubscriptionOptedIn"),this.addEventListener("change",function(s){e._id=s.current.id,e._token=s.current.token,e._optedIn=s.current.optedIn})},Object.defineProperty(t.prototype,"id",{get:function(){return console.warn("OneSignal: This method has been deprecated. Use getIdAsync instead for getting push subscription id."),this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"token",{get:function(){return console.warn("OneSignal: This method has been deprecated. Use getTokenAsync instead for getting push subscription token."),this._token},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"optedIn",{get:function(){return console.warn("OneSignal: This method has been deprecated. Use getOptedInAsync instead for getting push subscription opted in status."),this._optedIn||!1},enumerable:!1,configurable:!0}),t.prototype.getIdAsync=function(){return new Promise(function(e,n){window.cordova.exec(e,n,"OneSignalPush","getPushSubscriptionId")})},t.prototype.getTokenAsync=function(){return new Promise(function(e,n){window.cordova.exec(e,n,"OneSignalPush","getPushSubscriptionToken")})},t.prototype.getOptedInAsync=function(){return new Promise(function(e,n){window.cordova.exec(e,n,"OneSignalPush","getPushSubscriptionOptedIn")})},t.prototype.addEventListener=function(e,n){var r=this;this._subscriptionObserverList.push(n);var i=function(s){r._processFunctionList(r._subscriptionObserverList,s)};window.cordova.exec(i,function(){},"OneSignalPush","addPushSubscriptionObserver",[])},t.prototype.removeEventListener=function(e,n){var r=this._subscriptionObserverList.indexOf(n);r!==-1&&this._subscriptionObserverList.splice(r,1)},t.prototype.optIn=function(){window.cordova.exec(function(){},function(){},"OneSignalPush","optInPushSubscription")},t.prototype.optOut=function(){window.cordova.exec(function(){},function(){},"OneSignalPush","optOutPushSubscription")},t}();Zy.default=wV;var y1=zn&&zn.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function u(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):i(d.value).then(a,u)}c((r=r.apply(t,e||[])).next())})},v1=zn&&zn.__generator||function(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return u([c,d])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},_V=zn&&zn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Jy,"__esModule",{value:!0});var EV=_V(Zy),TV=function(){function t(){this.pushSubscription=new EV.default,this._userStateObserverList=[]}return t.prototype._processFunctionList=function(e,n){for(var r=0;r<e.length;r++)e[r](n)},t.prototype.setLanguage=function(e){window.cordova.exec(function(){},function(){},"OneSignalPush","setLanguage",[e])},t.prototype.addAlias=function(e,n){var r,i=(r={},r[e]=n,r);window.cordova.exec(function(){},function(){},"OneSignalPush","addAliases",[i])},t.prototype.addAliases=function(e){window.cordova.exec(function(){},function(){},"OneSignalPush","addAliases",[e])},t.prototype.removeAlias=function(e){window.cordova.exec(function(){},function(){},"OneSignalPush","removeAliases",[e])},t.prototype.removeAliases=function(e){window.cordova.exec(function(){},function(){},"OneSignalPush","removeAliases",e)},t.prototype.addEmail=function(e){window.cordova.exec(function(){},function(){},"OneSignalPush","addEmail",[e])},t.prototype.removeEmail=function(e){window.cordova.exec(function(){},function(){},"OneSignalPush","removeEmail",[e])},t.prototype.addSms=function(e){window.cordova.exec(function(){},function(){},"OneSignalPush","addSms",[e])},t.prototype.removeSms=function(e){window.cordova.exec(function(){},function(){},"OneSignalPush","removeSms",[e])},t.prototype.addTag=function(e,n){var r,i=(r={},r[e]=n,r);window.cordova.exec(function(){},function(){},"OneSignalPush","addTags",[i])},t.prototype.addTags=function(e){var n=e;Object.keys(e).forEach(function(r){typeof n[r]!="string"&&(n[r]=JSON.stringify(n[r]))}),window.cordova.exec(function(){},function(){},"OneSignalPush","addTags",[n])},t.prototype.removeTag=function(e){window.cordova.exec(function(){},function(){},"OneSignalPush","removeTags",[e])},t.prototype.removeTags=function(e){window.cordova.exec(function(){},function(){},"OneSignalPush","removeTags",e)},t.prototype.getTags=function(){return new Promise(function(e,n){window.cordova.exec(e,n,"OneSignalPush","getTags",[])})},t.prototype.addEventListener=function(e,n){var r=this;this._userStateObserverList.push(n);var i=function(s){r._processFunctionList(r._userStateObserverList,s)};window.cordova.exec(i,function(){},"OneSignalPush","addUserStateObserver",[])},t.prototype.removeEventListener=function(e,n){var r=this._userStateObserverList.indexOf(n);r!==-1&&this._userStateObserverList.splice(r,1)},t.prototype.getOnesignalId=function(){return y1(this,void 0,void 0,function(){return v1(this,function(e){return[2,new Promise(function(n,r){window.cordova.exec(n,r,"OneSignalPush","getOnesignalId",[])})]})})},t.prototype.getExternalId=function(){return y1(this,void 0,void 0,function(){return v1(this,function(e){return[2,new Promise(function(n,r){window.cordova.exec(n,r,"OneSignalPush","getExternalId",[])})]})})},t}();Jy.default=TV;(function(t){var e=zn&&zn.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(t,"__esModule",{value:!0}),t.OSNotification=t.OSNotificationPermission=t.NotificationWillDisplayEvent=t.LogLevel=t.OneSignalPlugin=void 0;var n=e(Lm),r=e(Ky),i=e(Yy),s=e(Qy),o=e(Mm),a=e(Xy),u=e(Jy),c=function(){function P(){this.User=new u.default,this.Debug=new n.default,this.Session=new a.default,this.Location=new s.default,this.InAppMessages=new r.default,this.Notifications=new o.default,this.LiveActivities=new i.default,this._appID=""}return P.prototype.initialize=function(N){var E=this;this._appID=N;var y=function(){E.User.pushSubscription._setPropertiesAndObserver(),E.Notifications._setPropertyAndObserver()};window.cordova.exec(y,function(){},"OneSignalPush","init",[this._appID])},P.prototype.login=function(N){window.cordova.exec(function(){},function(){},"OneSignalPush","login",[N])},P.prototype.logout=function(){window.cordova.exec(function(){},function(){},"OneSignalPush","logout")},P.prototype.setConsentRequired=function(N){window.cordova.exec(function(){},function(){},"OneSignalPush","setPrivacyConsentRequired",[N])},P.prototype.setConsentGiven=function(N){window.cordova.exec(function(){},function(){},"OneSignalPush","setPrivacyConsentGiven",[N])},P}();t.OneSignalPlugin=c;var d=new c;window.plugins||(window.plugins={}),window.plugins.OneSignal||(window.plugins.OneSignal=d);var h=Lm;Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return h.LogLevel}});var m=Tu;Object.defineProperty(t,"NotificationWillDisplayEvent",{enumerable:!0,get:function(){return m.NotificationWillDisplayEvent}});var w=Mm;Object.defineProperty(t,"OSNotificationPermission",{enumerable:!0,get:function(){return w.OSNotificationPermission}});var _=bu;Object.defineProperty(t,"OSNotification",{enumerable:!0,get:function(){return _.OSNotification}}),t.default=d})(ox);const no=z1(ox);var w1;(function(t){t[t.Min=1]="Min",t[t.Low=2]="Low",t[t.Default=3]="Default",t[t.High=4]="High",t[t.Max=5]="Max"})(w1||(w1={}));var _1;(function(t){t[t.Secret=-1]="Secret",t[t.Private=0]="Private",t[t.Public=1]="Public"})(_1||(_1={}));const bV=Gs("FirebaseMessaging",{web:()=>Xo(()=>import("./web-a4cbd26d.js"),[]).then(t=>new t.FirebaseMessagingWeb)}),E1=Gs("App",{web:()=>Xo(()=>import("./web-b07942fd.js"),[]).then(t=>new t.AppWeb)});function ni(t){"@babel/helpers - typeof";return ni=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ni(t)}function Rt(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function Be(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function at(t){Be(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||ni(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function ax(t,e){Be(2,arguments);var n=at(t),r=Rt(e);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}function IV(t,e){Be(2,arguments);var n=at(t).getTime(),r=Rt(e);return new Date(n+r)}var PV={};function ma(){return PV}function lx(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function T1(t){Be(1,arguments);var e=at(t);return e.setHours(0,0,0,0),e}var ev=6e4,tv=36e5,xV=1e3;function SV(t,e){Be(2,arguments);var n=T1(t),r=T1(e);return n.getTime()===r.getTime()}function CV(t){return Be(1,arguments),t instanceof Date||ni(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function kV(t){if(Be(1,arguments),!CV(t)&&typeof t!="number")return!1;var e=at(t);return!isNaN(Number(e))}function ux(t,e){Be(2,arguments);var n=Rt(e);return IV(t,-n)}var AV=864e5;function NV(t){Be(1,arguments);var e=at(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),i=n-r;return Math.floor(i/AV)+1}function Jo(t){Be(1,arguments);var e=1,n=at(t),r=n.getUTCDay(),i=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function cx(t){Be(1,arguments);var e=at(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=Jo(r),s=new Date(0);s.setUTCFullYear(n,0,4),s.setUTCHours(0,0,0,0);var o=Jo(s);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function RV(t){Be(1,arguments);var e=cx(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=Jo(n);return r}var DV=6048e5;function dx(t){Be(1,arguments);var e=at(t),n=Jo(e).getTime()-RV(e).getTime();return Math.round(n/DV)+1}function Us(t,e){var n,r,i,s,o,a,u,c;Be(1,arguments);var d=ma(),h=Rt((n=(r=(i=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&i!==void 0?i:d.weekStartsOn)!==null&&r!==void 0?r:(u=d.locale)===null||u===void 0||(c=u.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=at(t),w=m.getUTCDay(),_=(w<h?7:0)+w-h;return m.setUTCDate(m.getUTCDate()-_),m.setUTCHours(0,0,0,0),m}function nv(t,e){var n,r,i,s,o,a,u,c;Be(1,arguments);var d=at(t),h=d.getUTCFullYear(),m=ma(),w=Rt((n=(r=(i=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:m.firstWeekContainsDate)!==null&&r!==void 0?r:(u=m.locale)===null||u===void 0||(c=u.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(w>=1&&w<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var _=new Date(0);_.setUTCFullYear(h+1,0,w),_.setUTCHours(0,0,0,0);var P=Us(_,e),N=new Date(0);N.setUTCFullYear(h,0,w),N.setUTCHours(0,0,0,0);var E=Us(N,e);return d.getTime()>=P.getTime()?h+1:d.getTime()>=E.getTime()?h:h-1}function OV(t,e){var n,r,i,s,o,a,u,c;Be(1,arguments);var d=ma(),h=Rt((n=(r=(i=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:d.firstWeekContainsDate)!==null&&r!==void 0?r:(u=d.locale)===null||u===void 0||(c=u.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:1),m=nv(t,e),w=new Date(0);w.setUTCFullYear(m,0,h),w.setUTCHours(0,0,0,0);var _=Us(w,e);return _}var LV=6048e5;function hx(t,e){Be(1,arguments);var n=at(t),r=Us(n,e).getTime()-OV(n,e).getTime();return Math.round(r/LV)+1}function Fe(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var MV={y:function(e,n){var r=e.getUTCFullYear(),i=r>0?r:1-r;return Fe(n==="yy"?i%100:i,n.length)},M:function(e,n){var r=e.getUTCMonth();return n==="M"?String(r+1):Fe(r+1,2)},d:function(e,n){return Fe(e.getUTCDate(),n.length)},a:function(e,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(e,n){return Fe(e.getUTCHours()%12||12,n.length)},H:function(e,n){return Fe(e.getUTCHours(),n.length)},m:function(e,n){return Fe(e.getUTCMinutes(),n.length)},s:function(e,n){return Fe(e.getUTCSeconds(),n.length)},S:function(e,n){var r=n.length,i=e.getUTCMilliseconds(),s=Math.floor(i*Math.pow(10,r-3));return Fe(s,n.length)}};const mi=MV;var ro={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},VV={G:function(e,n,r){var i=e.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});case"GGGG":default:return r.era(i,{width:"wide"})}},y:function(e,n,r){if(n==="yo"){var i=e.getUTCFullYear(),s=i>0?i:1-i;return r.ordinalNumber(s,{unit:"year"})}return mi.y(e,n)},Y:function(e,n,r,i){var s=nv(e,i),o=s>0?s:1-s;if(n==="YY"){var a=o%100;return Fe(a,2)}return n==="Yo"?r.ordinalNumber(o,{unit:"year"}):Fe(o,n.length)},R:function(e,n){var r=cx(e);return Fe(r,n.length)},u:function(e,n){var r=e.getUTCFullYear();return Fe(r,n.length)},Q:function(e,n,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"Q":return String(i);case"QQ":return Fe(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,n,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"q":return String(i);case"qq":return Fe(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,n,r){var i=e.getUTCMonth();switch(n){case"M":case"MM":return mi.M(e,n);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(e,n,r){var i=e.getUTCMonth();switch(n){case"L":return String(i+1);case"LL":return Fe(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(e,n,r,i){var s=hx(e,i);return n==="wo"?r.ordinalNumber(s,{unit:"week"}):Fe(s,n.length)},I:function(e,n,r){var i=dx(e);return n==="Io"?r.ordinalNumber(i,{unit:"week"}):Fe(i,n.length)},d:function(e,n,r){return n==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):mi.d(e,n)},D:function(e,n,r){var i=NV(e);return n==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):Fe(i,n.length)},E:function(e,n,r){var i=e.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});case"EEEE":default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(e,n,r,i){var s=e.getUTCDay(),o=(s-i.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return Fe(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,n,r,i){var s=e.getUTCDay(),o=(s-i.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return Fe(o,n.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,n,r){var i=e.getUTCDay(),s=i===0?7:i;switch(n){case"i":return String(s);case"ii":return Fe(s,n.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});case"iiii":default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(e,n,r){var i=e.getUTCHours(),s=i/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,n,r){var i=e.getUTCHours(),s;switch(i===12?s=ro.noon:i===0?s=ro.midnight:s=i/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,n,r){var i=e.getUTCHours(),s;switch(i>=17?s=ro.evening:i>=12?s=ro.afternoon:i>=4?s=ro.morning:s=ro.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,n,r){if(n==="ho"){var i=e.getUTCHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return mi.h(e,n)},H:function(e,n,r){return n==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):mi.H(e,n)},K:function(e,n,r){var i=e.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(i,{unit:"hour"}):Fe(i,n.length)},k:function(e,n,r){var i=e.getUTCHours();return i===0&&(i=24),n==="ko"?r.ordinalNumber(i,{unit:"hour"}):Fe(i,n.length)},m:function(e,n,r){return n==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):mi.m(e,n)},s:function(e,n,r){return n==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):mi.s(e,n)},S:function(e,n){return mi.S(e,n)},X:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();if(o===0)return"Z";switch(n){case"X":return I1(o);case"XXXX":case"XX":return gs(o);case"XXXXX":case"XXX":default:return gs(o,":")}},x:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();switch(n){case"x":return I1(o);case"xxxx":case"xx":return gs(o);case"xxxxx":case"xxx":default:return gs(o,":")}},O:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+b1(o,":");case"OOOO":default:return"GMT"+gs(o,":")}},z:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+b1(o,":");case"zzzz":default:return"GMT"+gs(o,":")}},t:function(e,n,r,i){var s=i._originalDate||e,o=Math.floor(s.getTime()/1e3);return Fe(o,n.length)},T:function(e,n,r,i){var s=i._originalDate||e,o=s.getTime();return Fe(o,n.length)}};function b1(t,e){var n=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),s=r%60;if(s===0)return n+String(i);var o=e||"";return n+String(i)+o+Fe(s,2)}function I1(t,e){if(t%60===0){var n=t>0?"-":"+";return n+Fe(Math.abs(t)/60,2)}return gs(t,e)}function gs(t,e){var n=e||"",r=t>0?"-":"+",i=Math.abs(t),s=Fe(Math.floor(i/60),2),o=Fe(i%60,2);return r+s+n+o}const FV=VV;var P1=function(e,n){switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},fx=function(e,n){switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},UV=function(e,n){var r=e.match(/(P+)(p+)?/)||[],i=r[1],s=r[2];if(!s)return P1(e,n);var o;switch(i){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;case"PPPP":default:o=n.dateTime({width:"full"});break}return o.replace("{{date}}",P1(i,n)).replace("{{time}}",fx(s,n))},$V={p:fx,P:UV};const Vm=$V;var jV=["D","DD"],BV=["YY","YYYY"];function px(t){return jV.indexOf(t)!==-1}function mx(t){return BV.indexOf(t)!==-1}function Od(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var zV={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},WV=function(e,n,r){var i,s=zV[e];return typeof s=="string"?i=s:n===1?i=s.one:i=s.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};const HV=WV;function rp(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}var qV={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},GV={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},KV={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},YV={date:rp({formats:qV,defaultWidth:"full"}),time:rp({formats:GV,defaultWidth:"full"}),dateTime:rp({formats:KV,defaultWidth:"full"})};const QV=YV;var XV={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},JV=function(e,n,r,i){return XV[e]};const ZV=JV;function Fa(t){return function(e,n){var r=n!=null&&n.context?String(n.context):"standalone",i;if(r==="formatting"&&t.formattingValues){var s=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):s;i=t.formattingValues[o]||t.formattingValues[s]}else{var a=t.defaultWidth,u=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[u]||t.values[a]}var c=t.argumentCallback?t.argumentCallback(e):e;return i[c]}}var eF={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},tF={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},nF={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},rF={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},iF={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},sF={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},oF=function(e,n){var r=Number(e),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},aF={ordinalNumber:oF,era:Fa({values:eF,defaultWidth:"wide"}),quarter:Fa({values:tF,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Fa({values:nF,defaultWidth:"wide"}),day:Fa({values:rF,defaultWidth:"wide"}),dayPeriod:Fa({values:iF,defaultWidth:"wide",formattingValues:sF,defaultFormattingWidth:"wide"})};const lF=aF;function Ua(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;var o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(a)?cF(a,function(h){return h.test(o)}):uF(a,function(h){return h.test(o)}),c;c=t.valueCallback?t.valueCallback(u):u,c=n.valueCallback?n.valueCallback(c):c;var d=e.slice(o.length);return{value:c,rest:d}}}function uF(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function cF(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function dF(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var i=r[0],s=e.match(t.parsePattern);if(!s)return null;var o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;var a=e.slice(i.length);return{value:o,rest:a}}}var hF=/^(\d+)(th|st|nd|rd)?/i,fF=/\d+/i,pF={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},mF={any:[/^b/i,/^(a|c)/i]},gF={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},yF={any:[/1/i,/2/i,/3/i,/4/i]},vF={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},wF={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},_F={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},EF={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},TF={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},bF={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},IF={ordinalNumber:dF({matchPattern:hF,parsePattern:fF,valueCallback:function(e){return parseInt(e,10)}}),era:Ua({matchPatterns:pF,defaultMatchWidth:"wide",parsePatterns:mF,defaultParseWidth:"any"}),quarter:Ua({matchPatterns:gF,defaultMatchWidth:"wide",parsePatterns:yF,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Ua({matchPatterns:vF,defaultMatchWidth:"wide",parsePatterns:wF,defaultParseWidth:"any"}),day:Ua({matchPatterns:_F,defaultMatchWidth:"wide",parsePatterns:EF,defaultParseWidth:"any"}),dayPeriod:Ua({matchPatterns:TF,defaultMatchWidth:"any",parsePatterns:bF,defaultParseWidth:"any"})};const PF=IF;var xF={code:"en-US",formatDistance:HV,formatLong:QV,formatRelative:ZV,localize:lF,match:PF,options:{weekStartsOn:0,firstWeekContainsDate:1}};const gx=xF;var SF=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,CF=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,kF=/^'([^]*?)'?$/,AF=/''/g,NF=/[a-zA-Z]/;function RF(t,e,n){var r,i,s,o,a,u,c,d,h,m,w,_,P,N,E,y,k,D;Be(2,arguments);var M=String(e),V=ma(),I=(r=(i=n==null?void 0:n.locale)!==null&&i!==void 0?i:V.locale)!==null&&r!==void 0?r:gx,v=Rt((s=(o=(a=(u=n==null?void 0:n.firstWeekContainsDate)!==null&&u!==void 0?u:n==null||(c=n.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&a!==void 0?a:V.firstWeekContainsDate)!==null&&o!==void 0?o:(h=V.locale)===null||h===void 0||(m=h.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(v>=1&&v<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var C=Rt((w=(_=(P=(N=n==null?void 0:n.weekStartsOn)!==null&&N!==void 0?N:n==null||(E=n.locale)===null||E===void 0||(y=E.options)===null||y===void 0?void 0:y.weekStartsOn)!==null&&P!==void 0?P:V.weekStartsOn)!==null&&_!==void 0?_:(k=V.locale)===null||k===void 0||(D=k.options)===null||D===void 0?void 0:D.weekStartsOn)!==null&&w!==void 0?w:0);if(!(C>=0&&C<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!I.localize)throw new RangeError("locale must contain localize property");if(!I.formatLong)throw new RangeError("locale must contain formatLong property");var A=at(t);if(!kV(A))throw new RangeError("Invalid time value");var R=lx(A),T=ux(A,R),b={firstWeekContainsDate:v,weekStartsOn:C,locale:I,_originalDate:A},W=M.match(CF).map(function(H){var ue=H[0];if(ue==="p"||ue==="P"){var me=Vm[ue];return me(H,I.formatLong)}return H}).join("").match(SF).map(function(H){if(H==="''")return"'";var ue=H[0];if(ue==="'")return DF(H);var me=FV[ue];if(me)return!(n!=null&&n.useAdditionalWeekYearTokens)&&mx(H)&&Od(H,e,String(t)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&px(H)&&Od(H,e,String(t)),me(T,H,I.localize,b);if(ue.match(NF))throw new RangeError("Format string contains an unescaped latin alphabet character `"+ue+"`");return H}).join("");return W}function DF(t){var e=t.match(kF);return e?e[1].replace(AF,"'"):t}function OF(t,e){if(t==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function LF(t,e){Be(2,arguments);var n=at(t),r=at(e);return n.getTime()<r.getTime()}function x1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function MF(t,e){if(t){if(typeof t=="string")return x1(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x1(t,e):void 0}}function S1(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=MF(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var c=n.next();return o=c.done,c},e:function(c){a=!0,s=c},f:function(){try{o||n.return==null||n.return()}finally{if(a)throw s}}}}function re(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Fm(t,e){return Fm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Fm(t,e)}function Ne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fm(t,e)}function Ld(t){return Ld=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ld(t)}function yx(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yx=function(){return!!t})()}function VF(t,e){if(e&&(ni(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return re(t)}function Re(t){var e=yx();return function(){var n,r=Ld(t);if(e){var i=Ld(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return VF(this,n)}}function Ie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function FF(t,e){if(ni(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ni(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vx(t){var e=FF(t,"string");return ni(e)=="symbol"?e:e+""}function C1(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vx(r.key),r)}}function Pe(t,e,n){return e&&C1(t.prototype,e),n&&C1(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ee(t,e,n){return(e=vx(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var UF=10,wx=function(){function t(){Ie(this,t),ee(this,"priority",void 0),ee(this,"subPriority",0)}return Pe(t,[{key:"validate",value:function(n,r){return!0}}]),t}(),$F=function(t){Ne(n,t);var e=Re(n);function n(r,i,s,o,a){var u;return Ie(this,n),u=e.call(this),u.value=r,u.validateValue=i,u.setValue=s,u.priority=o,a&&(u.subPriority=a),u}return Pe(n,[{key:"validate",value:function(i,s){return this.validateValue(i,this.value,s)}},{key:"set",value:function(i,s,o){return this.setValue(i,s,this.value,o)}}]),n}(wx),jF=function(t){Ne(n,t);var e=Re(n);function n(){var r;Ie(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),ee(re(r),"priority",UF),ee(re(r),"subPriority",-1),r}return Pe(n,[{key:"set",value:function(i,s){if(s.timestampIsSet)return i;var o=new Date(0);return o.setFullYear(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()),o.setHours(i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds()),o}}]),n}(wx),Me=function(){function t(){Ie(this,t),ee(this,"incompatibleTokens",void 0),ee(this,"priority",void 0),ee(this,"subPriority",void 0)}return Pe(t,[{key:"run",value:function(n,r,i,s){var o=this.parse(n,r,i,s);return o?{setter:new $F(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}},{key:"validate",value:function(n,r,i){return!0}}]),t}(),BF=function(t){Ne(n,t);var e=Re(n);function n(){var r;Ie(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),ee(re(r),"priority",140),ee(re(r),"incompatibleTokens",["R","u","t","T"]),r}return Pe(n,[{key:"parse",value:function(i,s,o){switch(s){case"G":case"GG":case"GGG":return o.era(i,{width:"abbreviated"})||o.era(i,{width:"narrow"});case"GGGGG":return o.era(i,{width:"narrow"});case"GGGG":default:return o.era(i,{width:"wide"})||o.era(i,{width:"abbreviated"})||o.era(i,{width:"narrow"})}}},{key:"set",value:function(i,s,o){return s.era=o,i.setUTCFullYear(o,0,1),i.setUTCHours(0,0,0,0),i}}]),n}(Me),gt={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},wr={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function yt(t,e){return t&&{value:e(t.value),rest:t.rest}}function rt(t,e){var n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function _r(t,e){var n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};var r=n[1]==="+"?1:-1,i=n[2]?parseInt(n[2],10):0,s=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(i*tv+s*ev+o*xV),rest:e.slice(n[0].length)}}function _x(t){return rt(gt.anyDigitsSigned,t)}function ht(t,e){switch(t){case 1:return rt(gt.singleDigit,e);case 2:return rt(gt.twoDigits,e);case 3:return rt(gt.threeDigits,e);case 4:return rt(gt.fourDigits,e);default:return rt(new RegExp("^\\d{1,"+t+"}"),e)}}function Md(t,e){switch(t){case 1:return rt(gt.singleDigitSigned,e);case 2:return rt(gt.twoDigitsSigned,e);case 3:return rt(gt.threeDigitsSigned,e);case 4:return rt(gt.fourDigitsSigned,e);default:return rt(new RegExp("^-?\\d{1,"+t+"}"),e)}}function rv(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Ex(t,e){var n=e>0,r=n?e:1-e,i;if(r<=50)i=t||100;else{var s=r+50,o=Math.floor(s/100)*100,a=t>=s%100;i=t+o-(a?100:0)}return n?i:1-i}function Tx(t){return t%400===0||t%4===0&&t%100!==0}var zF=function(t){Ne(n,t);var e=Re(n);function n(){var r;Ie(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),ee(re(r),"priority",130),ee(re(r),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),r}return Pe(n,[{key:"parse",value:function(i,s,o){var a=function(c){return{year:c,isTwoDigitYear:s==="yy"}};switch(s){case"y":return yt(ht(4,i),a);case"yo":return yt(o.ordinalNumber(i,{unit:"year"}),a);default:return yt(ht(s.length,i),a)}}},{key:"validate",value:function(i,s){return s.isTwoDigitYear||s.year>0}},{key:"set",value:function(i,s,o){var a=i.getUTCFullYear();if(o.isTwoDigitYear){var u=Ex(o.year,a);return i.setUTCFullYear(u,0,1),i.setUTCHours(0,0,0,0),i}var c=!("era"in s)||s.era===1?o.year:1-o.year;return i.setUTCFullYear(c,0,1),i.setUTCHours(0,0,0,0),i}}]),n}(Me),WF=function(t){Ne(n,t);var e=Re(n);function n(){var r;Ie(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),ee(re(r),"priority",130),ee(re(r),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),r}return Pe(n,[{key:"parse",value:function(i,s,o){var a=function(c){return{year:c,isTwoDigitYear:s==="YY"}};switch(s){case"Y":return yt(ht(4,i),a);case"Yo":return yt(o.ordinalNumber(i,{unit:"year"}),a);default:return yt(ht(s.length,i),a)}}},{key:"validate",value:function(i,s){return s.isTwoDigitYear||s.year>0}},{key:"set",value:function(i,s,o,a){var u=nv(i,a);if(o.isTwoDigitYear){var c=Ex(o.year,u);return i.setUTCFullYear(c,0,a.firstWeekContainsDate),i.setUTCHours(0,0,0,0),Us(i,a)}var d=!("era"in s)||s.era===1?o.year:1-o.year;return i.setUTCFullYear(d,0,a.firstWeekContainsDate),i.setUTCHours(0,0,0,0),Us(i,a)}}]),n}(Me),HF=function(t){Ne(n,t);var e=Re(n);function n(){var r;Ie(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),ee(re(r),"priority",130),ee(re(r),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),r}return Pe(n,[{key:"parse",value:function(i,s){return Md(s==="R"?4:s.length,i)}},{key:"set",value:function(i,s,o){var a=new Date(0);return a.setUTCFullYear(o,0,4),a.setUTCHours(0,0,0,0),Jo(a)}}]),n}(Me),qF=function(t){Ne(n,t);var e=Re(n);function n(){var r;Ie(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),ee(re(r),"priority",130),ee(re(r),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),r}return Pe(n,[{key:"parse",value:function(i,s){return Md(s==="u"?4:s.length,i)}},{key:"set",value:function(i,s,o){return i.setUTCFullYear(o,0,1),i.setUTCHours(0,0,0,0),i}}]),n}(Me),GF=function(t){Ne(n,t);var e=Re(n);function n(){var r;Ie(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),ee(re(r),"priority",120),ee(re(r),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),r}return Pe(n,[{key:"parse",value:function(i,s,o){switch(s){case"Q":case"QQ":return ht(s.length,i);case"Qo":return o.ordinalNumber(i,{unit:"quarter"});case"QQQ":return o.quarter(i,{width:"abbreviated",context:"formatting"})||o.quarter(i,{width:"narrow",context:"formatting"});case"QQQQQ":return o.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return o.quarter(i,{width:"wide",context:"formatting"})||o.quarter(i,{width:"abbreviated",context:"formatting"})||o.quarter(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=1&&s<=4}},{key:"set",value:function(i,s,o){return i.setUTCMonth((o-1)*3,1),i.setUTCHours(0,0,0,0),i}}]),n}(Me),KF=function(t){Ne(n,t);var e=Re(n);function n(){var r;Ie(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),ee(re(r),"priority",120),ee(re(r),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),r}return Pe(n,[{key:"parse",value:function(i,s,o){switch(s){case"q":case"qq":return ht(s.length,i);case"qo":return o.ordinalNumber(i,{unit:"quarter"});case"qqq":return o.quarter(i,{width:"abbreviated",context:"standalone"})||o.quarter(i,{width:"narrow",context:"standalone"});case"qqqqq":return o.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return o.quarter(i,{width:"wide",context:"standalone"})||o.quarter(i,{width:"abbreviated",context:"standalone"})||o.quarter(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=1&&s<=4}},{key:"set",value:function(i,s,o){return i.setUTCMonth((o-1)*3,1),i.setUTCHours(0,0,0,0),i}}]),n}(Me),YF=function(t){Ne(n,t);var e=Re(n);function n(){var r;Ie(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),ee(re(r),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),ee(re(r),"priority",110),r}return Pe(n,[{key:"parse",value:function(i,s,o){var a=function(c){return c-1};switch(s){case"M":return yt(rt(gt.month,i),a);case"MM":return yt(ht(2,i),a);case"Mo":return yt(o.ordinalNumber(i,{unit:"month"}),a);case"MMM":return o.month(i,{width:"abbreviated",context:"formatting"})||o.month(i,{width:"narrow",context:"formatting"});case"MMMMM":return o.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return o.month(i,{width:"wide",context:"formatting"})||o.month(i,{width:"abbreviated",context:"formatting"})||o.month(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,o){return i.setUTCMonth(o,1),i.setUTCHours(0,0,0,0),i}}]),n}(Me),QF=function(t){Ne(n,t);var e=Re(n);function n(){var r;Ie(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),ee(re(r),"priority",110),ee(re(r),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),r}return Pe(n,[{key:"parse",value:function(i,s,o){var a=function(c){return c-1};switch(s){case"L":return yt(rt(gt.month,i),a);case"LL":return yt(ht(2,i),a);case"Lo":return yt(o.ordinalNumber(i,{unit:"month"}),a);case"LLL":return o.month(i,{width:"abbreviated",context:"standalone"})||o.month(i,{width:"narrow",context:"standalone"});case"LLLLL":return o.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return o.month(i,{width:"wide",context:"standalone"})||o.month(i,{width:"abbreviated",context:"standalone"})||o.month(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,o){return i.setUTCMonth(o,1),i.setUTCHours(0,0,0,0),i}}]),n}(Me);function XF(t,e,n){Be(2,arguments);var r=at(t),i=Rt(e),s=hx(r,n)-i;return r.setUTCDate(r.getUTCDate()-s*7),r}var JF=function(t){Ne(n,t);var e=Re(n);function n(){var r;Ie(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),ee(re(r),"priority",100),ee(re(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),r}return Pe(n,[{key:"parse",value:function(i,s,o){switch(s){case"w":return rt(gt.week,i);case"wo":return o.ordinalNumber(i,{unit:"week"});default:return ht(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=53}},{key:"set",value:function(i,s,o,a){return Us(XF(i,o,a),a)}}]),n}(Me);function ZF(t,e){Be(2,arguments);var n=at(t),r=Rt(e),i=dx(n)-r;return n.setUTCDate(n.getUTCDate()-i*7),n}var e3=function(t){Ne(n,t);var e=Re(n);function n(){var r;Ie(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),ee(re(r),"priority",100),ee(re(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),r}return Pe(n,[{key:"parse",value:function(i,s,o){switch(s){case"I":return rt(gt.week,i);case"Io":return o.ordinalNumber(i,{unit:"week"});default:return ht(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=53}},{key:"set",value:function(i,s,o){return Jo(ZF(i,o))}}]),n}(Me),t3=[31,28,31,30,31,30,31,31,30,31,30,31],n3=[31,29,31,30,31,30,31,31,30,31,30,31],r3=function(t){Ne(n,t);var e=Re(n);function n(){var r;Ie(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),ee(re(r),"priority",90),ee(re(r),"subPriority",1),ee(re(r),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),r}return Pe(n,[{key:"parse",value:function(i,s,o){switch(s){case"d":return rt(gt.date,i);case"do":return o.ordinalNumber(i,{unit:"date"});default:return ht(s.length,i)}}},{key:"validate",value:function(i,s){var o=i.getUTCFullYear(),a=Tx(o),u=i.getUTCMonth();return a?s>=1&&s<=n3[u]:s>=1&&s<=t3[u]}},{key:"set",value:function(i,s,o){return i.setUTCDate(o),i.setUTCHours(0,0,0,0),i}}]),n}(Me),i3=function(t){Ne(n,t);var e=Re(n);function n(){var r;Ie(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),ee(re(r),"priority",90),ee(re(r),"subpriority",1),ee(re(r),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),r}return Pe(n,[{key:"parse",value:function(i,s,o){switch(s){case"D":case"DD":return rt(gt.dayOfYear,i);case"Do":return o.ordinalNumber(i,{unit:"date"});default:return ht(s.length,i)}}},{key:"validate",value:function(i,s){var o=i.getUTCFullYear(),a=Tx(o);return a?s>=1&&s<=366:s>=1&&s<=365}},{key:"set",value:function(i,s,o){return i.setUTCMonth(0,o),i.setUTCHours(0,0,0,0),i}}]),n}(Me);function iv(t,e,n){var r,i,s,o,a,u,c,d;Be(2,arguments);var h=ma(),m=Rt((r=(i=(s=(o=n==null?void 0:n.weekStartsOn)!==null&&o!==void 0?o:n==null||(a=n.locale)===null||a===void 0||(u=a.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&s!==void 0?s:h.weekStartsOn)!==null&&i!==void 0?i:(c=h.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&r!==void 0?r:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var w=at(t),_=Rt(e),P=w.getUTCDay(),N=_%7,E=(N+7)%7,y=(E<m?7:0)+_-P;return w.setUTCDate(w.getUTCDate()+y),w}var s3=function(t){Ne(n,t);var e=Re(n);function n(){var r;Ie(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),ee(re(r),"priority",90),ee(re(r),"incompatibleTokens",["D","i","e","c","t","T"]),r}return Pe(n,[{key:"parse",value:function(i,s,o){switch(s){case"E":case"EE":case"EEE":return o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"});case"EEEEE":return o.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"});case"EEEE":default:return o.day(i,{width:"wide",context:"formatting"})||o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,o,a){return i=iv(i,o,a),i.setUTCHours(0,0,0,0),i}}]),n}(Me),o3=function(t){Ne(n,t);var e=Re(n);function n(){var r;Ie(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),ee(re(r),"priority",90),ee(re(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),r}return Pe(n,[{key:"parse",value:function(i,s,o,a){var u=function(d){var h=Math.floor((d-1)/7)*7;return(d+a.weekStartsOn+6)%7+h};switch(s){case"e":case"ee":return yt(ht(s.length,i),u);case"eo":return yt(o.ordinalNumber(i,{unit:"day"}),u);case"eee":return o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"});case"eeeee":return o.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"});case"eeee":default:return o.day(i,{width:"wide",context:"formatting"})||o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,o,a){return i=iv(i,o,a),i.setUTCHours(0,0,0,0),i}}]),n}(Me),a3=function(t){Ne(n,t);var e=Re(n);function n(){var r;Ie(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),ee(re(r),"priority",90),ee(re(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),r}return Pe(n,[{key:"parse",value:function(i,s,o,a){var u=function(d){var h=Math.floor((d-1)/7)*7;return(d+a.weekStartsOn+6)%7+h};switch(s){case"c":case"cc":return yt(ht(s.length,i),u);case"co":return yt(o.ordinalNumber(i,{unit:"day"}),u);case"ccc":return o.day(i,{width:"abbreviated",context:"standalone"})||o.day(i,{width:"short",context:"standalone"})||o.day(i,{width:"narrow",context:"standalone"});case"ccccc":return o.day(i,{width:"narrow",context:"standalone"});case"cccccc":return o.day(i,{width:"short",context:"standalone"})||o.day(i,{width:"narrow",context:"standalone"});case"cccc":default:return o.day(i,{width:"wide",context:"standalone"})||o.day(i,{width:"abbreviated",context:"standalone"})||o.day(i,{width:"short",context:"standalone"})||o.day(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,o,a){return i=iv(i,o,a),i.setUTCHours(0,0,0,0),i}}]),n}(Me);function l3(t,e){Be(2,arguments);var n=Rt(e);n%7===0&&(n=n-7);var r=1,i=at(t),s=i.getUTCDay(),o=n%7,a=(o+7)%7,u=(a<r?7:0)+n-s;return i.setUTCDate(i.getUTCDate()+u),i}var u3=function(t){Ne(n,t);var e=Re(n);function n(){var r;Ie(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),ee(re(r),"priority",90),ee(re(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),r}return Pe(n,[{key:"parse",value:function(i,s,o){var a=function(c){return c===0?7:c};switch(s){case"i":case"ii":return ht(s.length,i);case"io":return o.ordinalNumber(i,{unit:"day"});case"iii":return yt(o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"}),a);case"iiiii":return yt(o.day(i,{width:"narrow",context:"formatting"}),a);case"iiiiii":return yt(o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"}),a);case"iiii":default:return yt(o.day(i,{width:"wide",context:"formatting"})||o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"}),a)}}},{key:"validate",value:function(i,s){return s>=1&&s<=7}},{key:"set",value:function(i,s,o){return i=l3(i,o),i.setUTCHours(0,0,0,0),i}}]),n}(Me),c3=function(t){Ne(n,t);var e=Re(n);function n(){var r;Ie(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),ee(re(r),"priority",80),ee(re(r),"incompatibleTokens",["b","B","H","k","t","T"]),r}return Pe(n,[{key:"parse",value:function(i,s,o){switch(s){case"a":case"aa":case"aaa":return o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaaa":return o.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return o.dayPeriod(i,{width:"wide",context:"formatting"})||o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,o){return i.setUTCHours(rv(o),0,0,0),i}}]),n}(Me),d3=function(t){Ne(n,t);var e=Re(n);function n(){var r;Ie(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),ee(re(r),"priority",80),ee(re(r),"incompatibleTokens",["a","B","H","k","t","T"]),r}return Pe(n,[{key:"parse",value:function(i,s,o){switch(s){case"b":case"bb":case"bbb":return o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbbb":return o.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return o.dayPeriod(i,{width:"wide",context:"formatting"})||o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,o){return i.setUTCHours(rv(o),0,0,0),i}}]),n}(Me),h3=function(t){Ne(n,t);var e=Re(n);function n(){var r;Ie(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),ee(re(r),"priority",80),ee(re(r),"incompatibleTokens",["a","b","t","T"]),r}return Pe(n,[{key:"parse",value:function(i,s,o){switch(s){case"B":case"BB":case"BBB":return o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBBB":return o.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return o.dayPeriod(i,{width:"wide",context:"formatting"})||o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,o){return i.setUTCHours(rv(o),0,0,0),i}}]),n}(Me),f3=function(t){Ne(n,t);var e=Re(n);function n(){var r;Ie(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),ee(re(r),"priority",70),ee(re(r),"incompatibleTokens",["H","K","k","t","T"]),r}return Pe(n,[{key:"parse",value:function(i,s,o){switch(s){case"h":return rt(gt.hour12h,i);case"ho":return o.ordinalNumber(i,{unit:"hour"});default:return ht(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=12}},{key:"set",value:function(i,s,o){var a=i.getUTCHours()>=12;return a&&o<12?i.setUTCHours(o+12,0,0,0):!a&&o===12?i.setUTCHours(0,0,0,0):i.setUTCHours(o,0,0,0),i}}]),n}(Me),p3=function(t){Ne(n,t);var e=Re(n);function n(){var r;Ie(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),ee(re(r),"priority",70),ee(re(r),"incompatibleTokens",["a","b","h","K","k","t","T"]),r}return Pe(n,[{key:"parse",value:function(i,s,o){switch(s){case"H":return rt(gt.hour23h,i);case"Ho":return o.ordinalNumber(i,{unit:"hour"});default:return ht(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=23}},{key:"set",value:function(i,s,o){return i.setUTCHours(o,0,0,0),i}}]),n}(Me),m3=function(t){Ne(n,t);var e=Re(n);function n(){var r;Ie(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),ee(re(r),"priority",70),ee(re(r),"incompatibleTokens",["h","H","k","t","T"]),r}return Pe(n,[{key:"parse",value:function(i,s,o){switch(s){case"K":return rt(gt.hour11h,i);case"Ko":return o.ordinalNumber(i,{unit:"hour"});default:return ht(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,o){var a=i.getUTCHours()>=12;return a&&o<12?i.setUTCHours(o+12,0,0,0):i.setUTCHours(o,0,0,0),i}}]),n}(Me),g3=function(t){Ne(n,t);var e=Re(n);function n(){var r;Ie(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),ee(re(r),"priority",70),ee(re(r),"incompatibleTokens",["a","b","h","H","K","t","T"]),r}return Pe(n,[{key:"parse",value:function(i,s,o){switch(s){case"k":return rt(gt.hour24h,i);case"ko":return o.ordinalNumber(i,{unit:"hour"});default:return ht(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=24}},{key:"set",value:function(i,s,o){var a=o<=24?o%24:o;return i.setUTCHours(a,0,0,0),i}}]),n}(Me),y3=function(t){Ne(n,t);var e=Re(n);function n(){var r;Ie(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),ee(re(r),"priority",60),ee(re(r),"incompatibleTokens",["t","T"]),r}return Pe(n,[{key:"parse",value:function(i,s,o){switch(s){case"m":return rt(gt.minute,i);case"mo":return o.ordinalNumber(i,{unit:"minute"});default:return ht(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=59}},{key:"set",value:function(i,s,o){return i.setUTCMinutes(o,0,0),i}}]),n}(Me),v3=function(t){Ne(n,t);var e=Re(n);function n(){var r;Ie(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),ee(re(r),"priority",50),ee(re(r),"incompatibleTokens",["t","T"]),r}return Pe(n,[{key:"parse",value:function(i,s,o){switch(s){case"s":return rt(gt.second,i);case"so":return o.ordinalNumber(i,{unit:"second"});default:return ht(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=59}},{key:"set",value:function(i,s,o){return i.setUTCSeconds(o,0),i}}]),n}(Me),w3=function(t){Ne(n,t);var e=Re(n);function n(){var r;Ie(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),ee(re(r),"priority",30),ee(re(r),"incompatibleTokens",["t","T"]),r}return Pe(n,[{key:"parse",value:function(i,s){var o=function(u){return Math.floor(u*Math.pow(10,-s.length+3))};return yt(ht(s.length,i),o)}},{key:"set",value:function(i,s,o){return i.setUTCMilliseconds(o),i}}]),n}(Me),_3=function(t){Ne(n,t);var e=Re(n);function n(){var r;Ie(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),ee(re(r),"priority",10),ee(re(r),"incompatibleTokens",["t","T","x"]),r}return Pe(n,[{key:"parse",value:function(i,s){switch(s){case"X":return _r(wr.basicOptionalMinutes,i);case"XX":return _r(wr.basic,i);case"XXXX":return _r(wr.basicOptionalSeconds,i);case"XXXXX":return _r(wr.extendedOptionalSeconds,i);case"XXX":default:return _r(wr.extended,i)}}},{key:"set",value:function(i,s,o){return s.timestampIsSet?i:new Date(i.getTime()-o)}}]),n}(Me),E3=function(t){Ne(n,t);var e=Re(n);function n(){var r;Ie(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),ee(re(r),"priority",10),ee(re(r),"incompatibleTokens",["t","T","X"]),r}return Pe(n,[{key:"parse",value:function(i,s){switch(s){case"x":return _r(wr.basicOptionalMinutes,i);case"xx":return _r(wr.basic,i);case"xxxx":return _r(wr.basicOptionalSeconds,i);case"xxxxx":return _r(wr.extendedOptionalSeconds,i);case"xxx":default:return _r(wr.extended,i)}}},{key:"set",value:function(i,s,o){return s.timestampIsSet?i:new Date(i.getTime()-o)}}]),n}(Me),T3=function(t){Ne(n,t);var e=Re(n);function n(){var r;Ie(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),ee(re(r),"priority",40),ee(re(r),"incompatibleTokens","*"),r}return Pe(n,[{key:"parse",value:function(i){return _x(i)}},{key:"set",value:function(i,s,o){return[new Date(o*1e3),{timestampIsSet:!0}]}}]),n}(Me),b3=function(t){Ne(n,t);var e=Re(n);function n(){var r;Ie(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),ee(re(r),"priority",20),ee(re(r),"incompatibleTokens","*"),r}return Pe(n,[{key:"parse",value:function(i){return _x(i)}},{key:"set",value:function(i,s,o){return[new Date(o),{timestampIsSet:!0}]}}]),n}(Me),I3={G:new BF,y:new zF,Y:new WF,R:new HF,u:new qF,Q:new GF,q:new KF,M:new YF,L:new QF,w:new JF,I:new e3,d:new r3,D:new i3,E:new s3,e:new o3,c:new a3,i:new u3,a:new c3,b:new d3,B:new h3,h:new f3,H:new p3,K:new m3,k:new g3,m:new y3,s:new v3,S:new w3,X:new _3,x:new E3,t:new T3,T:new b3},P3=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,x3=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,S3=/^'([^]*?)'?$/,C3=/''/g,k3=/\S/,A3=/[a-zA-Z]/;function N3(t,e,n,r){var i,s,o,a,u,c,d,h,m,w,_,P,N,E,y,k,D,M;Be(3,arguments);var V=String(t),I=String(e),v=ma(),C=(i=(s=r==null?void 0:r.locale)!==null&&s!==void 0?s:v.locale)!==null&&i!==void 0?i:gx;if(!C.match)throw new RangeError("locale must contain match property");var A=Rt((o=(a=(u=(c=r==null?void 0:r.firstWeekContainsDate)!==null&&c!==void 0?c:r==null||(d=r.locale)===null||d===void 0||(h=d.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&u!==void 0?u:v.firstWeekContainsDate)!==null&&a!==void 0?a:(m=v.locale)===null||m===void 0||(w=m.options)===null||w===void 0?void 0:w.firstWeekContainsDate)!==null&&o!==void 0?o:1);if(!(A>=1&&A<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var R=Rt((_=(P=(N=(E=r==null?void 0:r.weekStartsOn)!==null&&E!==void 0?E:r==null||(y=r.locale)===null||y===void 0||(k=y.options)===null||k===void 0?void 0:k.weekStartsOn)!==null&&N!==void 0?N:v.weekStartsOn)!==null&&P!==void 0?P:(D=v.locale)===null||D===void 0||(M=D.options)===null||M===void 0?void 0:M.weekStartsOn)!==null&&_!==void 0?_:0);if(!(R>=0&&R<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(I==="")return V===""?at(n):new Date(NaN);var T={firstWeekContainsDate:A,weekStartsOn:R,locale:C},b=[new jF],W=I.match(x3).map(function(Xe){var Le=Xe[0];if(Le in Vm){var It=Vm[Le];return It(Xe,C.formatLong)}return Xe}).join("").match(P3),H=[],ue=S1(W),me;try{var K=function(){var Le=me.value;!(r!=null&&r.useAdditionalWeekYearTokens)&&mx(Le)&&Od(Le,I,t),!(r!=null&&r.useAdditionalDayOfYearTokens)&&px(Le)&&Od(Le,I,t);var It=Le[0],Fn=I3[It];if(Fn){var ai=Fn.incompatibleTokens;if(Array.isArray(ai)){var Nr=H.find(function(as){return ai.includes(as.token)||as.token===It});if(Nr)throw new RangeError("The format string mustn't contain `".concat(Nr.fullToken,"` and `").concat(Le,"` at the same time"))}else if(Fn.incompatibleTokens==="*"&&H.length>0)throw new RangeError("The format string mustn't contain `".concat(Le,"` and any other token at the same time"));H.push({token:It,fullToken:Le});var dr=Fn.run(V,Le,C.match,T);if(!dr)return{v:new Date(NaN)};b.push(dr.setter),V=dr.rest}else{if(It.match(A3))throw new RangeError("Format string contains an unescaped latin alphabet character `"+It+"`");if(Le==="''"?Le="'":It==="'"&&(Le=R3(Le)),V.indexOf(Le)===0)V=V.slice(Le.length);else return{v:new Date(NaN)}}};for(ue.s();!(me=ue.n()).done;){var oe=K();if(ni(oe)==="object")return oe.v}}catch(Xe){ue.e(Xe)}finally{ue.f()}if(V.length>0&&k3.test(V))return new Date(NaN);var ne=b.map(function(Xe){return Xe.priority}).sort(function(Xe,Le){return Le-Xe}).filter(function(Xe,Le,It){return It.indexOf(Xe)===Le}).map(function(Xe){return b.filter(function(Le){return Le.priority===Xe}).sort(function(Le,It){return It.subPriority-Le.subPriority})}).map(function(Xe){return Xe[0]}),he=at(n);if(isNaN(he.getTime()))return new Date(NaN);var ce=ux(he,lx(he)),ve={},$e=S1(ne),je;try{for($e.s();!(je=$e.n()).done;){var Ze=je.value;if(!Ze.validate(ce,T))return new Date(NaN);var xe=Ze.set(ce,ve,T);Array.isArray(xe)?(ce=xe[0],OF(ve,xe[1])):ce=xe}}catch(Xe){$e.e(Xe)}finally{$e.f()}return ce}function R3(t){return t.match(S3)[1].replace(C3,"'")}function sv(t,e){var n;Be(1,arguments);var r=Rt((n=e==null?void 0:e.additionalDigits)!==null&&n!==void 0?n:2);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"))return new Date(NaN);var i=M3(t),s;if(i.date){var o=V3(i.date,r);s=F3(o.restDateString,o.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);var a=s.getTime(),u=0,c;if(i.time&&(u=U3(i.time),isNaN(u)))return new Date(NaN);if(i.timezone){if(c=$3(i.timezone),isNaN(c))return new Date(NaN)}else{var d=new Date(a+u),h=new Date(0);return h.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),h.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),h}return new Date(a+u+c)}var fc={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},D3=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,O3=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,L3=/^([+-])(\d{2})(?::?(\d{2}))?$/;function M3(t){var e={},n=t.split(fc.dateTimeDelimiter),r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],fc.timeZoneDelimiter.test(e.date)&&(e.date=t.split(fc.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){var i=fc.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function V3(t,e){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};var i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((r[1]||r[2]).length)}}function F3(t,e){if(e===null)return new Date(NaN);var n=t.match(D3);if(!n)return new Date(NaN);var r=!!n[4],i=$a(n[1]),s=$a(n[2])-1,o=$a(n[3]),a=$a(n[4]),u=$a(n[5])-1;if(r)return H3(e,a,u)?j3(e,a,u):new Date(NaN);var c=new Date(0);return!z3(e,s,o)||!W3(e,i)?new Date(NaN):(c.setUTCFullYear(e,s,Math.max(i,o)),c)}function $a(t){return t?parseInt(t):1}function U3(t){var e=t.match(O3);if(!e)return NaN;var n=ip(e[1]),r=ip(e[2]),i=ip(e[3]);return q3(n,r,i)?n*tv+r*ev+i*1e3:NaN}function ip(t){return t&&parseFloat(t.replace(",","."))||0}function $3(t){if(t==="Z")return 0;var e=t.match(L3);if(!e)return 0;var n=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return G3(r,i)?n*(r*tv+i*ev):NaN}function j3(t,e,n){var r=new Date(0);r.setUTCFullYear(t,0,4);var i=r.getUTCDay()||7,s=(e-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}var B3=[31,null,31,30,31,30,31,31,30,31,30,31];function bx(t){return t%400===0||t%4===0&&t%100!==0}function z3(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(B3[e]||(bx(t)?29:28))}function W3(t,e){return e>=1&&e<=(bx(t)?366:365)}function H3(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function q3(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function G3(t,e){return e>=0&&e<=59}function K3(t,e){Be(2,arguments);var n=at(t),r=Rt(e);return n.setHours(r),n}function Y3(t,e){Be(2,arguments);var n=at(t),r=Rt(e);return n.setMinutes(r),n}function Q3(t,e){Be(2,arguments);var n=at(t),r=Rt(e);return n.setSeconds(r),n}/*! Capacitor: https://capacitorjs.com/ - MIT License */const X3=t=>{const e=new Map;e.set("web",{name:"web"});const n=t.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},r=(s,o)=>{n.platforms.set(s,o)},i=s=>{n.platforms.has(s)&&(n.currentPlatform=n.platforms.get(s))};return n.addPlatform=r,n.setPlatform=i,n},J3=t=>t.CapacitorPlatforms=X3(t),Ix=J3(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});Ix.addPlatform;Ix.setPlatform;var Zo;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Zo||(Zo={}));class sp extends Error{constructor(e,n){super(e),this.message=e,this.code=n}}const Z3=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},e6=t=>{var e,n,r,i,s;const o=t.CapacitorCustomPlatform||null,a=t.Capacitor||{},u=a.Plugins=a.Plugins||{},c=t.CapacitorPlatforms,d=()=>o!==null?o.name:Z3(t),h=((e=c==null?void 0:c.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||d,m=()=>h()!=="web",w=((n=c==null?void 0:c.currentPlatform)===null||n===void 0?void 0:n.isNativePlatform)||m,_=I=>{const v=D.get(I);return!!(v!=null&&v.platforms.has(h())||E(I))},P=((r=c==null?void 0:c.currentPlatform)===null||r===void 0?void 0:r.isPluginAvailable)||_,N=I=>{var v;return(v=a.PluginHeaders)===null||v===void 0?void 0:v.find(C=>C.name===I)},E=((i=c==null?void 0:c.currentPlatform)===null||i===void 0?void 0:i.getPluginHeader)||N,y=I=>t.console.error(I),k=(I,v,C)=>Promise.reject(`${C} does not have an implementation of "${v}".`),D=new Map,M=(I,v={})=>{const C=D.get(I);if(C)return console.warn(`Capacitor plugin "${I}" already registered. Cannot register plugins twice.`),C.proxy;const A=h(),R=E(I);let T;const b=async()=>(!T&&A in v?T=typeof v[A]=="function"?T=await v[A]():T=v[A]:o!==null&&!T&&"web"in v&&(T=typeof v.web=="function"?T=await v.web():T=v.web),T),W=(ne,he)=>{var ce,ve;if(R){const $e=R==null?void 0:R.methods.find(je=>he===je.name);if($e)return $e.rtype==="promise"?je=>a.nativePromise(I,he.toString(),je):(je,Ze)=>a.nativeCallback(I,he.toString(),je,Ze);if(ne)return(ce=ne[he])===null||ce===void 0?void 0:ce.bind(ne)}else{if(ne)return(ve=ne[he])===null||ve===void 0?void 0:ve.bind(ne);throw new sp(`"${I}" plugin is not implemented on ${A}`,Zo.Unimplemented)}},H=ne=>{let he;const ce=(...ve)=>{const $e=b().then(je=>{const Ze=W(je,ne);if(Ze){const xe=Ze(...ve);return he=xe==null?void 0:xe.remove,xe}else throw new sp(`"${I}.${ne}()" is not implemented on ${A}`,Zo.Unimplemented)});return ne==="addListener"&&($e.remove=async()=>he()),$e};return ce.toString=()=>`${ne.toString()}() { [capacitor code] }`,Object.defineProperty(ce,"name",{value:ne,writable:!1,configurable:!1}),ce},ue=H("addListener"),me=H("removeListener"),K=(ne,he)=>{const ce=ue({eventName:ne},he),ve=async()=>{const je=await ce;me({eventName:ne,callbackId:je},he)},$e=new Promise(je=>ce.then(()=>je({remove:ve})));return $e.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await ve()},$e},oe=new Proxy({},{get(ne,he){switch(he){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return R?K:ue;case"removeListener":return me;default:return H(he)}}});return u[I]=oe,D.set(I,{name:I,proxy:oe,platforms:new Set([...Object.keys(v),...R?[A]:[]])}),oe},V=((s=c==null?void 0:c.currentPlatform)===null||s===void 0?void 0:s.registerPlugin)||M;return a.convertFileSrc||(a.convertFileSrc=I=>I),a.getPlatform=h,a.handleError=y,a.isNativePlatform=w,a.isPluginAvailable=P,a.pluginMethodNoop=k,a.registerPlugin=V,a.Exception=sp,a.DEBUG=!!a.DEBUG,a.isLoggingEnabled=!!a.isLoggingEnabled,a.platform=a.getPlatform(),a.isNative=a.isNativePlatform(),a},t6=t=>t.Capacitor=e6(t),Vd=t6(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),n6=Vd.registerPlugin;Vd.Plugins;class z5{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,n){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(n);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i);const s=async()=>this.removeListener(e,n),o=Promise.resolve({remove:s});return Object.defineProperty(o,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await s()}}),o}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n){const r=this.listeners[e];r&&r.forEach(i=>i(n))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new Vd.Exception(e,Zo.Unimplemented)}unavailable(e="not available"){return new Vd.Exception(e,Zo.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const i=r.indexOf(n);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const op=n6("Http",{web:()=>Xo(()=>import("./web-eb977178.js"),[]).then(t=>new t.HttpWeb),electron:()=>Xo(()=>import("./web-eb977178.js"),[]).then(t=>new t.HttpWeb)}),zh=()=>p("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-secondary-50 dark:from-slate-900 dark:to-slate-800 flex items-center justify-center",children:x("div",{className:"text-center",children:[p("div",{className:"w-16 h-16 bg-primary rounded-2xl flex items-center justify-center mx-auto mb-6 animate-pulse",children:p("div",{className:"w-8 h-8 bg-white rounded-full"})}),p("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),p("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"DentalCare"}),p("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading your dental practice..."})]})}),Vt=(t,e="MMM d, yyyy")=>{if(!t)return"N/A";try{const n=typeof t=="string"?sv(t):t;return RF(n,e)}catch(n){return console.error("Error formatting date:",{date:t,formatString:e,error:n}),"N/A"}},r6=t=>{if(!t)return"N/A";try{const e=typeof t=="string"?sv(t):t,n=new Date;let r=n.getFullYear()-e.getFullYear();const i=n.getMonth()-e.getMonth();return(i<0||i===0&&n.getDate()<e.getDate())&&r--,r.toString()}catch(e){return console.error("Error calculating age:",{dateOfBirth:t,error:e}),"N/A"}},i6=(t,e)=>{if(!t)return null;try{const n=typeof t=="string"?sv(t):t,r=(e==null?void 0:e.defaultDays)??7;return ax(n,r)}catch(n){return console.error("Error calculating next follow-up date:",{lastTreatmentDate:t,followUpType:e,error:n}),null}},hs=t=>{if(!t)return null;if(typeof t=="object"&&typeof t.toDate=="function")return t.toDate();const e=new Date(t);return isNaN(e.getTime())?null:e},pc=({icon:t,title:e,value:n,subtitle:r,color:i="blue",onClick:s})=>p("div",{className:`card cursor-pointer transform transition-all duration-200 hover:scale-105 ${s?"hover:shadow-md":""}`,onClick:s,children:x("div",{className:"flex items-center justify-between",children:[x("div",{children:[p("p",{className:"text-sm text-gray-600 mb-1",children:e}),p("p",{className:`text-2xl font-bold text-${i}-600`,children:n}),r&&p("p",{className:"text-xs text-gray-500 mt-1",children:r})]}),p("div",{className:`p-3 bg-${i}-100 rounded-full`,children:p(t,{className:`w-6 h-6 text-${i}-600`})})]})}),s6=()=>{const t=xn(),{currentUser:e}=Sn(),{showError:n}=Vn(),[r,i]=O.useState([]),[s,o]=O.useState([]),[a,u]=O.useState(!0);if(O.useEffect(()=>{if(!(e!=null&&e.uid)){u(!1);return}(async()=>{u(!0);try{const[y,k]=await Promise.all([lr.getAll(e.uid),En.getAll(e.uid)]);y.error?(n(y.error),i([])):i(y.patients||[]),k.error?(n(k.error),o([])):o(k.followUps||[])}catch(y){n(y.message||"Failed to load dashboard data"),i([]),o([])}finally{u(!1)}})()},[e,n]),a)return p(zh,{});const c=r.reduce((E,y)=>(y&&y.id&&(E[y.id]=y),E),{}),d=s.map(E=>{var y;return{...E,patientName:E.patientName||((y=c[E.patientId])==null?void 0:y.name)||"Unknown"}}),h=r.length,m=d.filter(E=>E.status==="pending").length,w=d.filter(E=>E.status==="overdue").length,_=d.filter(E=>{if(E.status!=="completed")return!1;const y=hs(E.scheduledDate)??new Date(E.scheduledDate);return Vt(y)===Vt(new Date)}).length,P=[...d].sort((E,y)=>{const k=hs(E.scheduledDate),D=hs(y.scheduledDate);return!k&&!D?0:k?D?D.getTime()-k.getTime():-1:1}).slice(0,4),N=new Date().getTime();return[...r].filter(E=>{if(!E.nextAppointment)return!1;const y=hs(E.nextAppointment);return y?y.getTime()>=N:new Date(E.nextAppointment).getTime()>=N}).sort((E,y)=>{const k=hs(E.nextAppointment)??new Date(E.nextAppointment),D=hs(y.nextAppointment)??new Date(y.nextAppointment);return k.getTime()-D.getTime()}).slice(0,4),x("div",{className:"space-y-6",children:[x("div",{className:"text-center py-4",children:[p("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Welcome back, Doctor!"}),p("p",{className:"text-gray-600",children:"Here's your practice overview for today"})]}),x("div",{className:"grid grid-cols-2 gap-4",children:[p(pc,{icon:um,title:"Total Patients",value:h,subtitle:"Active patients",color:"blue",onClick:()=>t("/patients")}),p(pc,{icon:qi,title:"Pending Follow-ups",value:m,subtitle:"Need attention",color:"yellow",onClick:()=>t("/followups")}),p(pc,{icon:mb,title:"Overdue",value:w,subtitle:"Requires immediate action",color:"red",onClick:()=>t("/followups")}),p(pc,{icon:zg,title:"Completed Today",value:_,subtitle:"Follow-ups done",color:"green"})]}),x("div",{className:"card",children:[x("div",{className:"flex items-center justify-between mb-4",children:[p("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Follow-ups"}),p("button",{onClick:()=>t("/followups"),className:"text-dental-primary text-sm font-medium",children:"View All"})]}),p("div",{className:"space-y-3",children:P.length>0?P.map(E=>x("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0",children:[x("div",{children:[p("p",{className:"font-medium text-gray-900",children:E.patientName}),p("p",{className:"text-sm text-gray-600",children:E.notes||""})]}),x("div",{className:"text-right",children:[p("p",{className:"text-sm text-gray-500",children:Vt(hs(E.scheduledDate)??E.scheduledDate)}),p("span",{className:`status-${E.status}`,children:E.status})]})]},E.id)):p("p",{className:"text-gray-500 text-center py-4",children:"No recent follow-ups"})})]}),x("div",{className:"grid grid-cols-2 gap-4",children:[x("button",{onClick:()=>t("/add-patient"),className:"card text-center hover:shadow-md transition-shadow",children:[p(um,{className:"w-8 h-8 text-dental-primary mx-auto mb-2"}),p("p",{className:"font-medium text-gray-900",children:"Add Patient"}),p("p",{className:"text-sm text-gray-600",children:"Register new patient"})]}),x("button",{onClick:()=>t("/add-followup"),className:"card text-center hover:shadow-md transition-shadow",children:[p(qi,{className:"w-8 h-8 text-dental-primary mx-auto mb-2"}),p("p",{className:"font-medium text-gray-900",children:"Schedule Follow-up"}),p("p",{className:"text-sm text-gray-600",children:"Create follow-up reminder"})]})]})]})},o6=()=>{const t=xn(),{currentUser:e}=Sn(),{showError:n}=Vn(),[r,i]=O.useState([]),[s,o]=O.useState(!0),[a,u]=O.useState(""),[c,d]=O.useState(1),h=10;O.useEffect(()=>{if(!e){console.log("No current user, skipping patient fetch"),o(!1);return}(async()=>{try{console.log("Fetching patients for userId:",e.uid);const{patients:y,error:k}=await lr.getAll(e.uid);k?(console.error("Patient fetch error:",k),n(k)):i(y)}catch(y){console.error("Unexpected error fetching patients:",y),n(y.message)}finally{o(!1)}})()},[e,n]);const m=async E=>{const y=E.target.value;if(u(y),d(1),!!e)try{const{patients:k,error:D}=y.trim()===""?await lr.getAll(e.uid):await lr.search(e.uid,y);D?n(D):i(k)}catch(k){n(k.message)}};if(s)return p(zh,{});const w=c*h,_=w-h,P=r.slice(_,w),N=Math.ceil(r.length/h);return x("div",{className:"space-y-6",children:[x("div",{className:"flex items-center justify-between",children:[p("h2",{className:"text-2xl font-bold text-gray-900",children:"Patients"}),x("button",{onClick:()=>t("/add-patient"),className:"btn-primary text-sm py-2 px-4",children:[p(pd,{className:"w-4 h-4 mr-2"}),"Add Patient"]})]}),p("input",{type:"text",placeholder:"Search patients...",value:a,onChange:m,className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),P.length>0?x(Rn,{children:[p("div",{className:"space-y-3",children:P.map(E=>x("div",{className:"card flex items-center space-x-4 cursor-pointer",onClick:()=>t(`/patients/${E.id}`),children:[p("div",{className:"w-12 h-12 bg-primary rounded-full flex items-center justify-center",children:p(Gi,{className:"w-6 h-6 text-white"})}),x("div",{className:"flex-1",children:[p("h3",{className:"font-semibold text-gray-900",children:E.name}),p("p",{className:"text-sm text-gray-600",children:E.phone}),x("p",{className:"text-sm text-gray-600",children:["Last Visit: ",E.lastVisit?Vt(E.lastVisit):"N/A"]})]}),p("button",{onClick:y=>{y.stopPropagation(),t(`/patients/${E.id}/edit`)},className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:p(Hg,{className:"w-5 h-5 text-gray-600"})})]},E.id))}),x("div",{className:"flex justify-center mt-4 space-x-2",children:[p("button",{disabled:c===1,onClick:()=>d(E=>E-1),className:"px-3 py-1 border rounded disabled:opacity-50",children:"Prev"}),Array.from({length:N},(E,y)=>p("button",{onClick:()=>d(y+1),className:`px-3 py-1 border rounded ${c===y+1?"bg-primary text-white":""}`,children:y+1},y+1)),p("button",{disabled:c===N,onClick:()=>d(E=>E+1),className:"px-3 py-1 border rounded disabled:opacity-50",children:"Next"})]})]}):x("div",{className:"text-center py-8 text-gray-500",children:[p(Gi,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),p("p",{children:"No patients found"}),p("button",{onClick:()=>t("/add-patient"),className:"btn-primary mt-4",children:"Add Your First Patient"})]})]})},a6=we.memo(({treatment:t,onSave:e,onCancel:n})=>{const[r,i]=O.useState({treatment:t.treatment,date:t.date,cost:t.cost,notes:t.notes,patientId:t.patientId}),s=(o,a)=>{i(u=>({...u,[a]:a==="cost"?Number(o.target.value):o.target.value}))};return x("div",{className:"space-y-4",children:[x("div",{children:[p("label",{className:"block text-sm font-medium text-gray-600",children:"Treatment"}),p("input",{type:"text",value:r.treatment||"",onChange:o=>s(o,"treatment"),className:"mt-1 w-full border border-gray-300 rounded-lg p-2 text-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter treatment name"})]}),x("div",{children:[p("label",{className:"block text-sm font-medium text-gray-600",children:"Date"}),p("input",{type:"date",value:r.date||"",onChange:o=>s(o,"date"),className:"mt-1 w-full border border-gray-300 rounded-lg p-2 text-sm focus:ring-blue-500 focus:border-blue-500"})]}),x("div",{children:[p("label",{className:"block text-sm font-medium text-gray-600",children:"Cost"}),p("input",{type:"number",value:r.cost||"",onChange:o=>s(o,"cost"),className:"mt-1 w-full border border-gray-300 rounded-lg p-2 text-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter cost"})]}),x("div",{children:[p("label",{className:"block text-sm font-medium text-gray-600",children:"Notes"}),p("textarea",{value:r.notes||"",onChange:o=>s(o,"notes"),className:"mt-1 w-full border border-gray-300 rounded-lg p-2 text-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter notes",rows:4})]}),x("div",{className:"flex justify-end space-x-2",children:[p("button",{onClick:n,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-sm font-medium",children:"Cancel"}),p("button",{onClick:()=>e(r),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm font-medium",children:"Save"})]})]})});var Iu=t=>t.type==="checkbox",bo=t=>t instanceof Date,an=t=>t==null;const Px=t=>typeof t=="object";var bt=t=>!an(t)&&!Array.isArray(t)&&Px(t)&&!bo(t),l6=t=>bt(t)&&t.target?Iu(t.target)?t.target.checked:t.target.value:t,u6=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,c6=(t,e)=>t.has(u6(e)),d6=t=>{const e=t.constructor&&t.constructor.prototype;return bt(e)&&e.hasOwnProperty("isPrototypeOf")},ov=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Un(t){let e;const n=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(ov&&(t instanceof Blob||t instanceof FileList))&&(n||bt(t)))if(e=n?[]:{},!n&&!d6(t))e=t;else for(const r in t)t.hasOwnProperty(r)&&(e[r]=Un(t[r]));else return t;return e}var Wh=t=>Array.isArray(t)?t.filter(Boolean):[],ft=t=>t===void 0,se=(t,e,n)=>{if(!e||!bt(t))return n;const r=Wh(e.split(/[,[\].]+?/)).reduce((i,s)=>an(i)?i:i[s],t);return ft(r)||r===t?ft(t[e])?n:t[e]:r},gr=t=>typeof t=="boolean",av=t=>/^\w*$/.test(t),xx=t=>Wh(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Ke=(t,e,n)=>{let r=-1;const i=av(e)?[e]:xx(e),s=i.length,o=s-1;for(;++r<s;){const a=i[r];let u=n;if(r!==o){const c=t[a];u=bt(c)||Array.isArray(c)?c:isNaN(+i[r+1])?{}:[]}if(a==="__proto__")return;t[a]=u,t=t[a]}return t};const k1={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},rr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Or={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};we.createContext(null);var h6=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==rr.all&&(e._proxyFormState[o]=!r||rr.all),n&&(n[o]=!0),t[o]}});return i},mn=t=>bt(t)&&!Object.keys(t).length,f6=(t,e,n,r)=>{n(t);const{name:i,...s}=t;return mn(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!r||rr.all))},jc=t=>Array.isArray(t)?t:[t];function p6(t){const e=we.useRef(t);e.current=t,we.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}var Er=t=>typeof t=="string",m6=(t,e,n,r,i)=>Er(t)?(r&&e.watch.add(t),se(n,t,i)):Array.isArray(t)?t.map(s=>(r&&e.watch.add(s),se(n,s))):(r&&(e.watchAll=!0),n),g6=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},A1=t=>({isOnSubmit:!t||t===rr.onSubmit,isOnBlur:t===rr.onBlur,isOnChange:t===rr.onChange,isOnAll:t===rr.all,isOnTouch:t===rr.onTouched}),N1=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const El=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const s=se(t,i);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(El(a,e))break}else if(bt(a)&&El(a,e))break}}};var y6=(t,e,n)=>{const r=jc(se(t,n));return Ke(r,"root",e[n]),Ke(t,n,r),t},lv=t=>t.type==="file",zr=t=>typeof t=="function",Fd=t=>{if(!ov)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Bc=t=>Er(t),uv=t=>t.type==="radio",Ud=t=>t instanceof RegExp;const R1={value:!1,isValid:!1},D1={value:!0,isValid:!0};var Sx=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!ft(t[0].attributes.value)?ft(t[0].value)||t[0].value===""?D1:{value:t[0].value,isValid:!0}:D1:R1}return R1};const O1={isValid:!1,value:null};var Cx=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,O1):O1;function L1(t,e,n="validate"){if(Bc(t)||Array.isArray(t)&&t.every(Bc)||gr(t)&&!t)return{type:n,message:Bc(t)?t:"",ref:e}}var io=t=>bt(t)&&!Ud(t)?t:{value:t,message:""},M1=async(t,e,n,r,i)=>{const{ref:s,refs:o,required:a,maxLength:u,minLength:c,min:d,max:h,pattern:m,validate:w,name:_,valueAsNumber:P,mount:N,disabled:E}=t._f,y=se(e,_);if(!N||E)return{};const k=o?o[0]:s,D=T=>{r&&k.reportValidity&&(k.setCustomValidity(gr(T)?"":T||""),k.reportValidity())},M={},V=uv(s),I=Iu(s),v=V||I,C=(P||lv(s))&&ft(s.value)&&ft(y)||Fd(s)&&s.value===""||y===""||Array.isArray(y)&&!y.length,A=g6.bind(null,_,n,M),R=(T,b,W,H=Or.maxLength,ue=Or.minLength)=>{const me=T?b:W;M[_]={type:T?H:ue,message:me,ref:s,...A(T?H:ue,me)}};if(i?!Array.isArray(y)||!y.length:a&&(!v&&(C||an(y))||gr(y)&&!y||I&&!Sx(o).isValid||V&&!Cx(o).isValid)){const{value:T,message:b}=Bc(a)?{value:!!a,message:a}:io(a);if(T&&(M[_]={type:Or.required,message:b,ref:k,...A(Or.required,b)},!n))return D(b),M}if(!C&&(!an(d)||!an(h))){let T,b;const W=io(h),H=io(d);if(!an(y)&&!isNaN(y)){const ue=s.valueAsNumber||y&&+y;an(W.value)||(T=ue>W.value),an(H.value)||(b=ue<H.value)}else{const ue=s.valueAsDate||new Date(y),me=ne=>new Date(new Date().toDateString()+" "+ne),K=s.type=="time",oe=s.type=="week";Er(W.value)&&y&&(T=K?me(y)>me(W.value):oe?y>W.value:ue>new Date(W.value)),Er(H.value)&&y&&(b=K?me(y)<me(H.value):oe?y<H.value:ue<new Date(H.value))}if((T||b)&&(R(!!T,W.message,H.message,Or.max,Or.min),!n))return D(M[_].message),M}if((u||c)&&!C&&(Er(y)||i&&Array.isArray(y))){const T=io(u),b=io(c),W=!an(T.value)&&y.length>+T.value,H=!an(b.value)&&y.length<+b.value;if((W||H)&&(R(W,T.message,b.message),!n))return D(M[_].message),M}if(m&&!C&&Er(y)){const{value:T,message:b}=io(m);if(Ud(T)&&!y.match(T)&&(M[_]={type:Or.pattern,message:b,ref:s,...A(Or.pattern,b)},!n))return D(b),M}if(w){if(zr(w)){const T=await w(y,e),b=L1(T,k);if(b&&(M[_]={...b,...A(Or.validate,b.message)},!n))return D(b.message),M}else if(bt(w)){let T={};for(const b in w){if(!mn(T)&&!n)break;const W=L1(await w[b](y,e),k,b);W&&(T={...W,...A(b,W.message)},D(W.message),n&&(M[_]=T))}if(!mn(T)&&(M[_]={ref:k,...T},!n))return M}}return D(!0),M};function v6(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=ft(t)?r++:t[e[r++]];return t}function w6(t){for(const e in t)if(t.hasOwnProperty(e)&&!ft(t[e]))return!1;return!0}function Pt(t,e){const n=Array.isArray(e)?e:av(e)?[e]:xx(e),r=n.length===1?t:v6(t,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(bt(r)&&mn(r)||Array.isArray(r)&&w6(r))&&Pt(t,n.slice(0,-1)),t}var ap=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}},$d=t=>an(t)||!Px(t);function Ii(t,e){if($d(t)||$d(e))return t===e;if(bo(t)&&bo(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){const s=t[i];if(!r.includes(i))return!1;if(i!=="ref"){const o=e[i];if(bo(s)&&bo(o)||bt(s)&&bt(o)||Array.isArray(s)&&Array.isArray(o)?!Ii(s,o):s!==o)return!1}}return!0}var kx=t=>t.type==="select-multiple",_6=t=>uv(t)||Iu(t),lp=t=>Fd(t)&&t.isConnected,Ax=t=>{for(const e in t)if(zr(t[e]))return!0;return!1};function jd(t,e={}){const n=Array.isArray(t);if(bt(t)||n)for(const r in t)Array.isArray(t[r])||bt(t[r])&&!Ax(t[r])?(e[r]=Array.isArray(t[r])?[]:{},jd(t[r],e[r])):an(t[r])||(e[r]=!0);return e}function Nx(t,e,n){const r=Array.isArray(t);if(bt(t)||r)for(const i in t)Array.isArray(t[i])||bt(t[i])&&!Ax(t[i])?ft(e)||$d(n[i])?n[i]=Array.isArray(t[i])?jd(t[i],[]):{...jd(t[i])}:Nx(t[i],an(e)?{}:e[i],n[i]):n[i]=!Ii(t[i],e[i]);return n}var mc=(t,e)=>Nx(t,e,jd(e)),Rx=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>ft(t)?t:e?t===""?NaN:t&&+t:n&&Er(t)?new Date(t):r?r(t):t;function up(t){const e=t.ref;if(!(t.refs?t.refs.every(n=>n.disabled):e.disabled))return lv(e)?e.files:uv(e)?Cx(t.refs).value:kx(e)?[...e.selectedOptions].map(({value:n})=>n):Iu(e)?Sx(t.refs).value:Rx(ft(e.value)?t.ref.value:e.value,t)}var E6=(t,e,n,r)=>{const i={};for(const s of t){const o=se(e,s);o&&Ke(i,s,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},ja=t=>ft(t)?t:Ud(t)?t.source:bt(t)?Ud(t.value)?t.value.source:t.value:t;const V1="AsyncFunction";var T6=t=>(!t||!t.validate)&&!!(zr(t.validate)&&t.validate.constructor.name===V1||bt(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===V1)),b6=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function F1(t,e,n){const r=se(t,n);if(r||av(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),o=se(e,s),a=se(t,s);if(o&&!Array.isArray(o)&&n!==s)return{name:n};if(a&&a.type)return{name:s,error:a};i.pop()}return{name:n}}var I6=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,P6=(t,e)=>!Wh(se(t,e)).length&&Pt(t,e);const x6={mode:rr.onSubmit,reValidateMode:rr.onChange,shouldFocusError:!0};function S6(t={}){let e={...x6,...t},n={submitCount:0,isDirty:!1,isLoading:zr(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=bt(e.defaultValues)||bt(e.values)?Un(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:Un(i),o={action:!1,mount:!1,watch:!1},a={mount:new Set,unMount:new Set,array:new Set,watch:new Set},u,c=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:ap(),array:ap(),state:ap()},m=A1(e.mode),w=A1(e.reValidateMode),_=e.criteriaMode===rr.all,P=L=>U=>{clearTimeout(c),c=setTimeout(L,U)},N=async L=>{if(d.isValid||L){const U=e.resolver?mn((await v()).errors):await A(r,!0);U!==n.isValid&&h.state.next({isValid:U})}},E=(L,U)=>{(d.isValidating||d.validatingFields)&&((L||Array.from(a.mount)).forEach(j=>{j&&(U?Ke(n.validatingFields,j,U):Pt(n.validatingFields,j))}),h.state.next({validatingFields:n.validatingFields,isValidating:!mn(n.validatingFields)}))},y=(L,U=[],j,Z,Q=!0,G=!0)=>{if(Z&&j){if(o.action=!0,G&&Array.isArray(se(r,L))){const ae=j(se(r,L),Z.argA,Z.argB);Q&&Ke(r,L,ae)}if(G&&Array.isArray(se(n.errors,L))){const ae=j(se(n.errors,L),Z.argA,Z.argB);Q&&Ke(n.errors,L,ae),P6(n.errors,L)}if(d.touchedFields&&G&&Array.isArray(se(n.touchedFields,L))){const ae=j(se(n.touchedFields,L),Z.argA,Z.argB);Q&&Ke(n.touchedFields,L,ae)}d.dirtyFields&&(n.dirtyFields=mc(i,s)),h.state.next({name:L,isDirty:T(L,U),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Ke(s,L,U)},k=(L,U)=>{Ke(n.errors,L,U),h.state.next({errors:n.errors})},D=L=>{n.errors=L,h.state.next({errors:n.errors,isValid:!1})},M=(L,U,j,Z)=>{const Q=se(r,L);if(Q){const G=se(s,L,ft(j)?se(i,L):j);ft(G)||Z&&Z.defaultChecked||U?Ke(s,L,U?G:up(Q._f)):H(L,G),o.mount&&N()}},V=(L,U,j,Z,Q)=>{let G=!1,ae=!1;const Se={name:L},lt=!!(se(r,L)&&se(r,L)._f&&se(r,L)._f.disabled);if(!j||Z){d.isDirty&&(ae=n.isDirty,n.isDirty=Se.isDirty=T(),G=ae!==Se.isDirty);const be=lt||Ii(se(i,L),U);ae=!!(!lt&&se(n.dirtyFields,L)),be||lt?Pt(n.dirtyFields,L):Ke(n.dirtyFields,L,!0),Se.dirtyFields=n.dirtyFields,G=G||d.dirtyFields&&ae!==!be}if(j){const be=se(n.touchedFields,L);be||(Ke(n.touchedFields,L,j),Se.touchedFields=n.touchedFields,G=G||d.touchedFields&&be!==j)}return G&&Q&&h.state.next(Se),G?Se:{}},I=(L,U,j,Z)=>{const Q=se(n.errors,L),G=d.isValid&&gr(U)&&n.isValid!==U;if(t.delayError&&j?(u=P(()=>k(L,j)),u(t.delayError)):(clearTimeout(c),u=null,j?Ke(n.errors,L,j):Pt(n.errors,L)),(j?!Ii(Q,j):Q)||!mn(Z)||G){const ae={...Z,...G&&gr(U)?{isValid:U}:{},errors:n.errors,name:L};n={...n,...ae},h.state.next(ae)}},v=async L=>{E(L,!0);const U=await e.resolver(s,e.context,E6(L||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return E(L),U},C=async L=>{const{errors:U}=await v(L);if(L)for(const j of L){const Z=se(U,j);Z?Ke(n.errors,j,Z):Pt(n.errors,j)}else n.errors=U;return U},A=async(L,U,j={valid:!0})=>{for(const Z in L){const Q=L[Z];if(Q){const{_f:G,...ae}=Q;if(G){const Se=a.array.has(G.name),lt=Q._f&&T6(Q._f);lt&&d.validatingFields&&E([Z],!0);const be=await M1(Q,s,_,e.shouldUseNativeValidation&&!U,Se);if(lt&&d.validatingFields&&E([Z]),be[G.name]&&(j.valid=!1,U))break;!U&&(se(be,G.name)?Se?y6(n.errors,be,G.name):Ke(n.errors,G.name,be[G.name]):Pt(n.errors,G.name))}!mn(ae)&&await A(ae,U,j)}}return j.valid},R=()=>{for(const L of a.unMount){const U=se(r,L);U&&(U._f.refs?U._f.refs.every(j=>!lp(j)):!lp(U._f.ref))&&Ze(L)}a.unMount=new Set},T=(L,U)=>(L&&U&&Ke(s,L,U),!Ii(he(),i)),b=(L,U,j)=>m6(L,a,{...o.mount?s:ft(U)?i:Er(L)?{[L]:U}:U},j,U),W=L=>Wh(se(o.mount?s:i,L,t.shouldUnregister?se(i,L,[]):[])),H=(L,U,j={})=>{const Z=se(r,L);let Q=U;if(Z){const G=Z._f;G&&(!G.disabled&&Ke(s,L,Rx(U,G)),Q=Fd(G.ref)&&an(U)?"":U,kx(G.ref)?[...G.ref.options].forEach(ae=>ae.selected=Q.includes(ae.value)):G.refs?Iu(G.ref)?G.refs.length>1?G.refs.forEach(ae=>(!ae.defaultChecked||!ae.disabled)&&(ae.checked=Array.isArray(Q)?!!Q.find(Se=>Se===ae.value):Q===ae.value)):G.refs[0]&&(G.refs[0].checked=!!Q):G.refs.forEach(ae=>ae.checked=ae.value===Q):lv(G.ref)?G.ref.value="":(G.ref.value=Q,G.ref.type||h.values.next({name:L,values:{...s}})))}(j.shouldDirty||j.shouldTouch)&&V(L,Q,j.shouldTouch,j.shouldDirty,!0),j.shouldValidate&&ne(L)},ue=(L,U,j)=>{for(const Z in U){const Q=U[Z],G=`${L}.${Z}`,ae=se(r,G);(a.array.has(L)||!$d(Q)||ae&&!ae._f)&&!bo(Q)?ue(G,Q,j):H(G,Q,j)}},me=(L,U,j={})=>{const Z=se(r,L),Q=a.array.has(L),G=Un(U);Ke(s,L,G),Q?(h.array.next({name:L,values:{...s}}),(d.isDirty||d.dirtyFields)&&j.shouldDirty&&h.state.next({name:L,dirtyFields:mc(i,s),isDirty:T(L,G)})):Z&&!Z._f&&!an(G)?ue(L,G,j):H(L,G,j),N1(L,a)&&h.state.next({...n}),h.values.next({name:o.mount?L:void 0,values:{...s}})},K=async L=>{o.mount=!0;const U=L.target;let j=U.name,Z=!0;const Q=se(r,j),G=()=>U.type?up(Q._f):l6(L),ae=Se=>{Z=Number.isNaN(Se)||Ii(Se,se(s,j,Se))};if(Q){let Se,lt;const be=G(),et=L.type===k1.BLUR||L.type===k1.FOCUS_OUT,Ks=!b6(Q._f)&&!e.resolver&&!se(n.errors,j)&&!Q._f.deps||I6(et,se(n.touchedFields,j),n.isSubmitted,w,m),Ys=N1(j,a,et);Ke(s,j,be),et?(Q._f.onBlur&&Q._f.onBlur(L),u&&u(0)):Q._f.onChange&&Q._f.onChange(L);const Qs=V(j,be,et,!1),Xh=!mn(Qs)||Ys;if(!et&&h.values.next({name:j,type:L.type,values:{...s}}),Ks)return d.isValid&&(t.mode==="onBlur"?et&&N():N()),Xh&&h.state.next({name:j,...Ys?{}:Qs});if(!et&&Ys&&h.state.next({...n}),e.resolver){const{errors:li}=await v([j]);if(ae(be),Z){const Cu=F1(n.errors,r,j),ga=F1(li,r,Cu.name||j);Se=ga.error,j=ga.name,lt=mn(li)}}else E([j],!0),Se=(await M1(Q,s,_,e.shouldUseNativeValidation))[j],E([j]),ae(be),Z&&(Se?lt=!1:d.isValid&&(lt=await A(r,!0)));Z&&(Q._f.deps&&ne(Q._f.deps),I(j,lt,Se,Qs))}},oe=(L,U)=>{if(se(n.errors,U)&&L.focus)return L.focus(),1},ne=async(L,U={})=>{let j,Z;const Q=jc(L);if(e.resolver){const G=await C(ft(L)?L:Q);j=mn(G),Z=L?!Q.some(ae=>se(G,ae)):j}else L?(Z=(await Promise.all(Q.map(async G=>{const ae=se(r,G);return await A(ae&&ae._f?{[G]:ae}:ae)}))).every(Boolean),!(!Z&&!n.isValid)&&N()):Z=j=await A(r);return h.state.next({...!Er(L)||d.isValid&&j!==n.isValid?{}:{name:L},...e.resolver||!L?{isValid:j}:{},errors:n.errors}),U.shouldFocus&&!Z&&El(r,oe,L?Q:a.mount),Z},he=L=>{const U={...o.mount?s:i};return ft(L)?U:Er(L)?se(U,L):L.map(j=>se(U,j))},ce=(L,U)=>({invalid:!!se((U||n).errors,L),isDirty:!!se((U||n).dirtyFields,L),error:se((U||n).errors,L),isValidating:!!se(n.validatingFields,L),isTouched:!!se((U||n).touchedFields,L)}),ve=L=>{L&&jc(L).forEach(U=>Pt(n.errors,U)),h.state.next({errors:L?n.errors:{}})},$e=(L,U,j)=>{const Z=(se(r,L,{_f:{}})._f||{}).ref,Q=se(n.errors,L)||{},{ref:G,message:ae,type:Se,...lt}=Q;Ke(n.errors,L,{...lt,...U,ref:Z}),h.state.next({name:L,errors:n.errors,isValid:!1}),j&&j.shouldFocus&&Z&&Z.focus&&Z.focus()},je=(L,U)=>zr(L)?h.values.subscribe({next:j=>L(b(void 0,U),j)}):b(L,U,!0),Ze=(L,U={})=>{for(const j of L?jc(L):a.mount)a.mount.delete(j),a.array.delete(j),U.keepValue||(Pt(r,j),Pt(s,j)),!U.keepError&&Pt(n.errors,j),!U.keepDirty&&Pt(n.dirtyFields,j),!U.keepTouched&&Pt(n.touchedFields,j),!U.keepIsValidating&&Pt(n.validatingFields,j),!e.shouldUnregister&&!U.keepDefaultValue&&Pt(i,j);h.values.next({values:{...s}}),h.state.next({...n,...U.keepDirty?{isDirty:T()}:{}}),!U.keepIsValid&&N()},xe=({disabled:L,name:U,field:j,fields:Z,value:Q})=>{if(gr(L)&&o.mount||L){const G=L?void 0:ft(Q)?up(j?j._f:se(Z,U)._f):Q;Ke(s,U,G),V(U,G,!1,!1,!0)}},Xe=(L,U={})=>{let j=se(r,L);const Z=gr(U.disabled)||gr(t.disabled);return Ke(r,L,{...j||{},_f:{...j&&j._f?j._f:{ref:{name:L}},name:L,mount:!0,...U}}),a.mount.add(L),j?xe({field:j,disabled:gr(U.disabled)?U.disabled:t.disabled,name:L,value:U.value}):M(L,!0,U.value),{...Z?{disabled:U.disabled||t.disabled}:{},...e.progressive?{required:!!U.required,min:ja(U.min),max:ja(U.max),minLength:ja(U.minLength),maxLength:ja(U.maxLength),pattern:ja(U.pattern)}:{},name:L,onChange:K,onBlur:K,ref:Q=>{if(Q){Xe(L,U),j=se(r,L);const G=ft(Q.value)&&Q.querySelectorAll&&Q.querySelectorAll("input,select,textarea")[0]||Q,ae=_6(G),Se=j._f.refs||[];if(ae?Se.find(lt=>lt===G):G===j._f.ref)return;Ke(r,L,{_f:{...j._f,...ae?{refs:[...Se.filter(lp),G,...Array.isArray(se(i,L))?[{}]:[]],ref:{type:G.type,name:L}}:{ref:G}}}),M(L,!1,void 0,G)}else j=se(r,L,{}),j._f&&(j._f.mount=!1),(e.shouldUnregister||U.shouldUnregister)&&!(c6(a.array,L)&&o.action)&&a.unMount.add(L)}}},Le=()=>e.shouldFocusError&&El(r,oe,a.mount),It=L=>{gr(L)&&(h.state.next({disabled:L}),El(r,(U,j)=>{const Z=se(r,j);Z&&(U.disabled=Z._f.disabled||L,Array.isArray(Z._f.refs)&&Z._f.refs.forEach(Q=>{Q.disabled=Z._f.disabled||L}))},0,!1))},Fn=(L,U)=>async j=>{let Z;j&&(j.preventDefault&&j.preventDefault(),j.persist&&j.persist());let Q=Un(s);if(h.state.next({isSubmitting:!0}),e.resolver){const{errors:G,values:ae}=await v();n.errors=G,Q=ae}else await A(r);if(Pt(n.errors,"root"),mn(n.errors)){h.state.next({errors:{}});try{await L(Q,j)}catch(G){Z=G}}else U&&await U({...n.errors},j),Le(),setTimeout(Le);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:mn(n.errors)&&!Z,submitCount:n.submitCount+1,errors:n.errors}),Z)throw Z},ai=(L,U={})=>{se(r,L)&&(ft(U.defaultValue)?me(L,Un(se(i,L))):(me(L,U.defaultValue),Ke(i,L,Un(U.defaultValue))),U.keepTouched||Pt(n.touchedFields,L),U.keepDirty||(Pt(n.dirtyFields,L),n.isDirty=U.defaultValue?T(L,Un(se(i,L))):T()),U.keepError||(Pt(n.errors,L),d.isValid&&N()),h.state.next({...n}))},Nr=(L,U={})=>{const j=L?Un(L):i,Z=Un(j),Q=mn(L),G=Q?i:Z;if(U.keepDefaultValues||(i=j),!U.keepValues){if(U.keepDirtyValues)for(const ae of a.mount)se(n.dirtyFields,ae)?Ke(G,ae,se(s,ae)):me(ae,se(G,ae));else{if(ov&&ft(L))for(const ae of a.mount){const Se=se(r,ae);if(Se&&Se._f){const lt=Array.isArray(Se._f.refs)?Se._f.refs[0]:Se._f.ref;if(Fd(lt)){const be=lt.closest("form");if(be){be.reset();break}}}}r={}}s=t.shouldUnregister?U.keepDefaultValues?Un(i):{}:Un(G),h.array.next({values:{...G}}),h.values.next({values:{...G}})}a={mount:U.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!U.keepIsValid||!!U.keepDirtyValues,o.watch=!!t.shouldUnregister,h.state.next({submitCount:U.keepSubmitCount?n.submitCount:0,isDirty:Q?!1:U.keepDirty?n.isDirty:!!(U.keepDefaultValues&&!Ii(L,i)),isSubmitted:U.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Q?{}:U.keepDirtyValues?U.keepDefaultValues&&s?mc(i,s):n.dirtyFields:U.keepDefaultValues&&L?mc(i,L):U.keepDirty?n.dirtyFields:{},touchedFields:U.keepTouched?n.touchedFields:{},errors:U.keepErrors?n.errors:{},isSubmitSuccessful:U.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},dr=(L,U)=>Nr(zr(L)?L(s):L,U);return{control:{register:Xe,unregister:Ze,getFieldState:ce,handleSubmit:Fn,setError:$e,_executeSchema:v,_getWatch:b,_getDirty:T,_updateValid:N,_removeUnmounted:R,_updateFieldArray:y,_updateDisabledField:xe,_getFieldArray:W,_reset:Nr,_resetDefaultValues:()=>zr(e.defaultValues)&&e.defaultValues().then(L=>{dr(L,e.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:L=>{n={...n,...L}},_disableForm:It,_subjects:h,_proxyFormState:d,_setErrors:D,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(L){o=L},get _defaultValues(){return i},get _names(){return a},set _names(L){a=L},get _formState(){return n},set _formState(L){n=L},get _options(){return e},set _options(L){e={...e,...L}}},trigger:ne,register:Xe,handleSubmit:Fn,watch:je,setValue:me,getValues:he,reset:dr,resetField:ai,clearErrors:ve,unregister:Ze,setError:$e,setFocus:(L,U={})=>{const j=se(r,L),Z=j&&j._f;if(Z){const Q=Z.refs?Z.refs[0]:Z.ref;Q.focus&&(Q.focus(),U.shouldSelect&&Q.select())}},getFieldState:ce}}function Pu(t={}){const e=we.useRef(),n=we.useRef(),[r,i]=we.useState({isDirty:!1,isValidating:!1,isLoading:zr(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:zr(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...S6(t),formState:r});const s=e.current.control;return s._options=t,p6({subject:s._subjects.state,next:o=>{f6(o,s._proxyFormState,s._updateFormState,!0)&&i({...s._formState})}}),we.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),we.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==r.isDirty&&s._subjects.state.next({isDirty:o})}},[s,r.isDirty]),we.useEffect(()=>{t.values&&!Ii(t.values,n.current)?(s._reset(t.values,s._options.resetOptions),n.current=t.values,i(o=>({...o}))):s._resetDefaultValues()},[t.values,s]),we.useEffect(()=>{t.errors&&s._setErrors(t.errors)},[t.errors,s]),we.useEffect(()=>{s._state.mount||(s._updateValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),we.useEffect(()=>{t.shouldUnregister&&s._subjects.values.next({values:s._getWatch()})},[t.shouldUnregister,s]),e.current.formState=h6(r,s),e.current}const C6=[{id:"post-treatment",name:"Post-Treatment"},{id:"appointment-reminder",name:"Appointment Reminder"},{id:"satisfaction-survey",name:"Satisfaction Survey"},{id:"treatment-decision",name:"Treatment Decision"},{id:"payment-reminder",name:"Payment Reminder"}],k6=({followUp:t,onSave:e,onCancel:n})=>{const{register:r,handleSubmit:i,formState:{errors:s}}=Pu({defaultValues:{type:t.type,scheduledDate:Vt(t.scheduledDate,"yyyy-MM-dd"),scheduledTime:t.scheduledTime||"",notes:t.notes,priority:t.priority,sendReminder:t.sendReminder}});return x("form",{onSubmit:i(a=>{e(a)}),className:"space-y-4",children:[x("div",{children:[x("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[p(qi,{className:"w-4 h-4 mr-2 text-blue-500"}),"Follow-up Type *"]}),x("select",{id:"type",...r("type",{required:"Please select a follow-up type"}),className:`w-full px-3 py-2 border rounded-lg ${s.type?"border-red-500":"border-gray-300"}`,children:[p("option",{value:"",children:"Choose type..."}),C6.map(a=>p("option",{value:a.id,children:a.name},a.id))]}),s.type&&p("p",{className:"text-red-500 text-sm mt-1",children:s.type.message})]}),x("div",{children:[x("label",{htmlFor:"scheduledDate",className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[p(su,{className:"w-4 h-4 mr-2 text-blue-500"}),"Scheduled Date *"]}),p("input",{id:"scheduledDate",type:"date",...r("scheduledDate",{required:"Please select a date"}),className:`w-full px-3 py-2 border rounded-lg ${s.scheduledDate?"border-red-500":"border-gray-300"}`,min:Vt(new Date,"yyyy-MM-dd")}),s.scheduledDate&&p("p",{className:"text-red-500 text-sm mt-1",children:s.scheduledDate.message})]}),x("div",{children:[p("label",{htmlFor:"scheduledTime",className:"block text-sm font-medium text-gray-700 mb-1",children:"Preferred Time"}),x("select",{id:"scheduledTime",...r("scheduledTime"),className:"w-full px-3 py-2 border rounded-lg border-gray-300",children:[p("option",{value:"",children:"Any time"}),p("option",{value:"morning",children:"Morning (9:00 AM - 12:00 PM)"}),p("option",{value:"afternoon",children:"Afternoon (12:00 PM - 5:00 PM)"}),p("option",{value:"evening",children:"Evening (5:00 PM - 8:00 PM)"})]})]}),x("div",{children:[x("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[p(Wg,{className:"w-4 h-4 mr-2 text-blue-500"}),"Notes *"]}),p("textarea",{id:"notes",...r("notes",{required:"Please provide notes",minLength:{value:10,message:"Notes must be at least 10 characters"}}),rows:4,className:`w-full px-3 py-2 border rounded-lg resize-none ${s.notes?"border-red-500":"border-gray-300"}`}),s.notes&&p("p",{className:"text-red-500 text-sm mt-1",children:s.notes.message})]}),x("div",{children:[p("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),x("select",{id:"priority",...r("priority"),className:"w-full px-3 py-2 border rounded-lg border-gray-300",children:[p("option",{value:"normal",children:"Normal"}),p("option",{value:"high",children:"High"}),p("option",{value:"urgent",children:"Urgent"})]})]}),x("div",{className:"flex items-center space-x-2",children:[p("input",{id:"sendReminder",type:"checkbox",...r("sendReminder"),className:"w-4 h-4 text-blue-500 border-gray-300 rounded focus:ring-blue-500"}),p("label",{htmlFor:"sendReminder",className:"text-sm font-medium text-gray-700",children:"Send automatic reminder"})]}),x("div",{className:"flex space-x-2",children:[x("button",{type:"button",onClick:n,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:[p(qg,{className:"w-4 h-4 mr-2 inline"}),"Cancel"]}),x("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:[p(ou,{className:"w-4 h-4 mr-2 inline"}),"Save"]})]})]})},Dx=({followUp:t,onUpdate:e,onDelete:n})=>{const r=xn(),{currentUser:i}=Sn(),{showError:s}=Vn(),{refreshNotifications:o}=Bh(),[a,u]=O.useState(!1),[c,d]=O.useState(null),h=P=>{switch(P){case"completed":return p(zg,{className:"w-5 h-5 text-green-600"});case"overdue":return p(mb,{className:"w-5 h-5 text-red-600"});default:return p(rN,{className:"w-5 h-5 text-yellow-600"})}},m=P=>({"post-treatment":"bg-blue-100 text-blue-800","appointment-reminder":"bg-green-100 text-green-800","satisfaction-survey":"bg-purple-100 text-purple-800","treatment-decision":"bg-orange-100 text-orange-800","payment-reminder":"bg-red-100 text-red-800"})[P]||"bg-gray-100 text-gray-800",w=()=>{if(!(i!=null&&i.uid)){console.error("FollowUpCard: Cannot delete follow-up: missing currentUser or uid"),s("Cannot delete follow-up: please log in again"),d(null);return}n(t.id),o(),d(null)},_=()=>{e(t.id,{status:"completed",completedAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),o()};return x("div",{className:"card cursor-pointer hover:shadow-md transition-shadow",onClick:()=>!a&&r(`/patients/${t.patientId}`),children:[a?p(k6,{followUp:t,onSave:P=>{e(t.id,P),u(!1)},onCancel:()=>u(!1)}):x("div",{className:"space-y-3",children:[x("div",{className:"flex items-start justify-between mb-3",children:[x("div",{className:"flex items-center space-x-3",children:[h(t.status),x("div",{children:[p("h3",{className:"font-semibold text-gray-900",children:t.patientName||"Unknown"}),p("p",{className:"text-sm text-gray-600",children:t.patientPhone||"N/A"})]})]}),p("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${m(t.type)}`,children:t.type.replace("-"," ")})]}),x("div",{className:"mb-3",children:[p("p",{className:"text-gray-900 mb-1",children:t.notes}),x("div",{className:"flex items-center justify-between text-sm",children:[x("span",{className:"text-gray-500",children:["Scheduled: ",Vt(t.scheduledDate)]}),p("span",{className:`capitalize status-${t.status}`,children:t.status})]})]}),x("div",{className:"flex space-x-2",children:[p("button",{onClick:P=>{P.stopPropagation(),u(!0)},className:"p-2 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors",title:"Edit Follow-up",children:p(Hg,{className:"w-5 h-5 text-gray-600"})}),p("button",{onClick:P=>{P.stopPropagation(),d(t.id)},className:"p-2 rounded-lg bg-red-50 hover:bg-red-100 text-red-600 transition-colors",title:"Delete Follow-up",children:p(cl,{className:"w-5 h-5"})}),t.status!=="completed"&&x(Rn,{children:[p("button",{className:"flex-1 py-2 px-3 bg-green-100 text-green-700 rounded-lg text-sm font-medium hover:bg-green-200 transition-colors",onClick:P=>{P.stopPropagation(),_()},children:"Mark Complete"}),x("button",{className:"flex-1 py-2 px-3 bg-blue-100 text-blue-700 rounded-lg text-sm font-medium hover:bg-blue-200 transition-colors",onClick:P=>{P.stopPropagation(),window.open(`tel:${t.patientPhone||""}`)},children:[p(ch,{className:"w-4 h-4 mr-1 inline"}),"Call"]})]})]})]}),c&&p("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:x("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg p-6 max-w-md w-full border border-gray-200 dark:border-slate-700",children:[x("div",{className:"flex items-center space-x-3 mb-4",children:[p(cl,{className:"w-8 h-8 text-red-500 flex-shrink-0"}),x("div",{children:[p("p",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"Delete Follow-up?"}),p("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"This action cannot be undone. The follow-up record will be permanently removed."})]})]}),x("div",{className:"flex justify-end space-x-3",children:[p("button",{className:"px-4 py-2 bg-gray-200 text-gray-700 dark:bg-slate-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-slate-600 transition-colors text-sm font-medium",onClick:()=>d(null),children:"Cancel"}),p("button",{className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm font-medium flex items-center",onClick:w,children:"Delete"})]})]})})]})},A6=()=>{var R;const{id:t}=Bg(),e=xn(),{currentUser:n}=Sn(),{showSuccess:r,showError:i}=Vn(),s=10,[o,a]=O.useState({activeTab:"overview",patient:null,treatments:[],followUps:[],isDeleting:!1,showDeleteModal:!1,deletingTreatmentId:null,loading:!0,error:null,treatmentsPage:1,followUpsPage:1}),u=O.useCallback(async()=>{if(!t){i("Invalid patient ID"),a(T=>({...T,error:"Invalid patient ID",loading:!1})),e("/patients");return}if(!n){i("You must be logged in to view patient details"),a(T=>({...T,error:"Authentication required",loading:!1})),e("/patients");return}try{const[T,b,W]=await Promise.all([lr.getById(t),el.getByPatient(t,n.uid),En.getByPatient(t,n.uid)]);if(T.error||!T.patient){i(T.error||"Patient not found"),a(H=>({...H,error:T.error||"Patient not found",loading:!1})),e("/patients");return}if(T.patient.userId!==n.uid){i("Unauthorized: you cannot view this patient"),a(H=>({...H,error:"Unauthorized access",loading:!1})),e("/patients");return}a(H=>({...H,patient:T.patient,treatments:b.error?[]:(b.treatments||[]).sort((ue,me)=>new Date(me.date).getTime()-new Date(ue.date).getTime()),followUps:W.error?[]:(W.followUps||[]).sort((ue,me)=>new Date(me.scheduledDate).getTime()-new Date(ue.scheduledDate).getTime()),loading:!1,error:b.error||W.error||null,treatmentsPage:1,followUpsPage:1})),b.error&&i(`Error fetching treatments: ${b.error}`),W.error&&i(`Error fetching follow-ups: ${W.error}`)}catch(T){const b=T.message.includes("permission-denied")?"Permission denied: check Firestore rules":`Unexpected error fetching patient: ${T.message}`;i(b),a(W=>({...W,error:b,loading:!1})),e("/patients")}},[t,n,e,i]);O.useEffect(()=>{u()},[u]);const c=()=>{if(!n||!t||!o.patient){i("Cannot delete: missing user, ID, or patient data");return}a(T=>({...T,showDeleteModal:!0,deletingTreatmentId:null}))},d=async()=>{if(!n||!t||!o.patient){i("Cannot delete: missing user, ID, or patient data"),a(T=>({...T,showDeleteModal:!1,deletingTreatmentId:null}));return}if(o.deletingTreatmentId){a(T=>({...T,isDeleting:!0}));try{const{error:T}=await el.delete(o.deletingTreatmentId,n.uid);if(T){i(`Failed to delete treatment: ${T}`),a(b=>({...b,isDeleting:!1,showDeleteModal:!1,deletingTreatmentId:null}));return}a(b=>({...b,treatments:b.treatments.filter(W=>W.id!==o.deletingTreatmentId),isDeleting:!1,showDeleteModal:!1,deletingTreatmentId:null})),r("Treatment deleted successfully!")}catch(T){const b=T.message.includes("permission-denied")?"Insufficient permissions: please check your access rights":`Unexpected error deleting treatment: ${T.message}`;i(b),a(W=>({...W,isDeleting:!1,showDeleteModal:!1,deletingTreatmentId:null}))}}else{a(T=>({...T,isDeleting:!0}));try{const{error:T}=await En.deleteByPatientId(t,n.uid);if(T){i(`Failed to delete follow-ups: ${T}`),a(H=>({...H,isDeleting:!1,showDeleteModal:!1}));return}const{error:b}=await el.deleteByPatientId(t,n.uid);if(b){i(`Failed to delete treatments: ${b}`),a(H=>({...H,isDeleting:!1,showDeleteModal:!1}));return}const{error:W}=await lr.delete(t,n.uid);if(W){i(`Failed to delete patient: ${W}`),a(H=>({...H,isDeleting:!1,showDeleteModal:!1}));return}r("Patient deleted successfully!"),e("/patients",{replace:!0})}catch(T){const b=T.message.includes("permission-denied")?"Permission denied: check Firestore rules":`Unexpected error: ${T.message}`;i(b),a(W=>({...W,isDeleting:!1,showDeleteModal:!1}))}}},h=()=>{var T;if(!((T=o.patient)!=null&&T.id)){i("Invalid patient ID");return}e(`/patients/${o.patient.id}/treatments/new`,{state:{patientId:o.patient.id}})},m=async(T,b)=>{if(!n||!o.patient){i("Cannot update treatment: please log in again");return}try{const W=await el.update(T,b,n.uid);if(W.error){i(`Failed to update treatment: ${W.error}`);return}a(H=>({...H,treatments:H.treatments.map(ue=>ue.id===T?{...ue,...b}:ue)})),r("Treatment updated successfully!")}catch(W){const H=W.message.includes("permission-denied")?"Permission denied: check Firestore rules":`Failed to update treatment: ${W.message}`;i(H)}},w=async T=>{if(!(n!=null&&n.uid)){i("Cannot delete treatment: please log in again");return}a(b=>({...b,showDeleteModal:!0,deletingTreatmentId:T}))},_=async(T,b)=>{if(!n||!o.patient){i("Cannot update follow-up: please log in again");return}try{const W=await En.update(T,b,n.uid);if(W.error){i(`Failed to update follow-up: ${W.error}`);return}a(H=>({...H,followUps:H.followUps.map(ue=>ue.id===T?{...ue,...b}:ue)})),r("Follow-up updated successfully!")}catch(W){const H=W.message.includes("permission-denied")?"Permission denied: check Firestore rules":`Failed to update follow-up: ${W.message}`;i(H)}},P=async T=>{if(!(n!=null&&n.uid)){i("Cannot delete follow-up: please log in again");return}try{const{error:b}=await En.delete(T,n.uid);if(b){i(`Failed to delete follow-up: ${b}`);return}a(W=>({...W,followUps:W.followUps.filter(H=>H.id!==T)})),r("Follow-up deleted successfully!")}catch(b){const W=b.message.includes("permission-denied")?"Insufficient permissions: please check your access rights":`Unexpected error deleting follow-up: ${b.message}`;i(W)}},N=T=>{a(b=>({...b,treatmentsPage:T}))},E=T=>{a(b=>({...b,followUpsPage:T}))};if(o.loading)return p(zh,{});if(o.error||!o.patient)return x("div",{className:"text-center py-8",children:[p("p",{className:"text-red-600",children:o.error||"Patient not found"}),p("button",{onClick:()=>e("/patients"),className:"mt-4 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors",children:"Back to Patients"})]});const y=Math.ceil(o.treatments.length/s),k=Math.ceil(o.followUps.length/s),D=o.treatments.slice((o.treatmentsPage-1)*s,o.treatmentsPage*s),M=o.followUps.slice((o.followUpsPage-1)*s,o.followUpsPage*s),V=o.followUps.filter(T=>T.status==="completed"),I=o.followUps.filter(T=>T.status==="pending"),v=o.followUps.filter(T=>T.status==="overdue"),C=({treatment:T})=>{const[b,W]=O.useState(!1);return p("div",{className:"border-b border-gray-100 py-2 last:border-b-0",children:b?p(a6,{treatment:T,onSave:H=>{m(T.id,H),W(!1)},onCancel:()=>W(!1)}):x("div",{className:"flex items-center justify-between",children:[x("div",{children:[p("p",{className:"font-medium text-gray-900",children:T.treatment}),x("p",{className:"text-sm text-gray-600",children:["Date: ",Vt(T.date)]}),T.cost&&x("p",{className:"text-sm text-gray-600",children:["Cost: $",T.cost.toFixed(2)]}),T.notes&&x("p",{className:"text-sm text-gray-600",children:["Notes: ",T.notes]})]}),x("div",{className:"flex space-x-2",children:[p("button",{onClick:H=>{H.stopPropagation(),W(!0)},className:"p-2 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors",children:p(Hg,{className:"w-5 h-5 text-gray-600"})}),p("button",{onClick:H=>{H.stopPropagation(),w(T.id)},className:"p-2 rounded-lg bg-red-50 hover:bg-red-100 text-red-600 transition-colors",children:p(cl,{className:"w-5 h-5"})})]})]})})},A=({id:T,label:b,count:W})=>x("button",{onClick:()=>a(H=>({...H,activeTab:T})),className:`flex-1 py-2 px-4 text-sm font-medium rounded-md transition-colors ${o.activeTab===T?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[b,W!==void 0&&p("span",{className:`ml-2 px-2 py-1 rounded-full text-xs ${o.activeTab===T?"bg-white text-blue-500":"bg-gray-300 text-gray-600"}`,children:W})]});return x("div",{className:"space-y-6",children:[x("div",{className:"flex items-center space-x-4",children:[p("button",{onClick:()=>e("/patients"),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:p(ia,{className:"w-5 h-5 text-gray-600"})}),x("div",{className:"flex-1",children:[p("h2",{className:"text-2xl font-bold text-gray-900",children:o.patient.name}),x("p",{className:"text-gray-600",children:[o.patient.dateOfBirth?r6(o.patient.dateOfBirth):"Age not specified"," years old"]})]}),p("button",{onClick:c,className:"p-2 rounded-lg bg-red-50 hover:bg-red-100 text-red-600 transition-colors",children:p(cl,{className:"w-5 h-5"})})]}),x("div",{className:"bg-white shadow-md rounded-lg p-4",children:[x("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[x("div",{children:[x("div",{className:"flex items-center space-x-2 text-gray-600",children:[p(ch,{className:"w-4 h-4"}),p("span",{children:o.patient.phone})]}),x("div",{className:"flex items-center space-x-2 text-gray-600",children:[p(uh,{className:"w-4 h-4"}),p("span",{children:o.patient.email||"N/A"})]})]}),x("div",{children:[x("div",{className:"flex items-center space-x-2 text-gray-600",children:[p(su,{className:"w-4 h-4"}),x("span",{children:["Last visit: ",o.patient.lastVisit?Vt(o.patient.lastVisit):"N/A"]})]}),x("div",{className:"flex items-center space-x-2 text-gray-600",children:[p(Gi,{className:"w-4 h-4"}),x("span",{children:["Gender: ",o.patient.gender||"N/A"]})]})]})]}),p("div",{className:"border-t border-gray-100 pt-4",children:p("p",{className:"text-gray-600",children:o.patient.notes||"No notes available"})})]}),x("div",{className:"bg-white shadow-md rounded-lg p-4",children:[p("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Summary"}),x("div",{className:"grid grid-cols-3 gap-4",children:[x("div",{className:"text-center",children:[p("div",{className:"text-2xl font-bold text-yellow-600",children:I.length}),p("div",{className:"text-sm text-gray-600",children:"Pending"})]}),x("div",{className:"text-center",children:[p("div",{className:"text-2xl font-bold text-red-600",children:v.length}),p("div",{className:"text-sm text-gray-600",children:"Overdue"})]}),x("div",{className:"text-center",children:[p("div",{className:"text-2xl font-bold text-green-600",children:V.length}),p("div",{className:"text-sm text-gray-600",children:"Completed"})]})]})]}),x("div",{className:"flex space-x-2 bg-gray-100 p-1 rounded-lg",children:[p(A,{id:"overview",label:"Overview"}),p(A,{id:"followups",label:"Follow-ups",count:o.followUps.length}),p(A,{id:"treatments",label:"Treatments",count:o.treatments.length})]}),o.activeTab==="overview"&&x("div",{className:"space-y-4",children:[x("div",{className:"bg-white shadow-md rounded-lg p-4",children:[p("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),p("div",{className:"space-y-3",children:M.length>0?M.slice(0,3).map(T=>x("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0",children:[x("div",{children:[p("p",{className:"font-medium text-gray-900",children:T.notes}),p("p",{className:"text-sm text-gray-600",children:Vt(T.scheduledDate)})]}),p("span",{className:"capitalize text-sm font-medium text-gray-600",children:T.status})]},T.id)):p("p",{className:"text-gray-600",children:"No recent activity"})})]}),x("div",{className:"bg-white shadow-md rounded-lg p-4",children:[p("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Latest Treatment"}),D.length>0?p(C,{treatment:D[0]}):p("div",{className:"text-center py-4 text-gray-600",children:p("p",{children:"No recent treatment"})})]})]}),o.activeTab==="followups"&&x("div",{className:"space-y-4",children:[x("div",{className:"flex items-center justify-between",children:[p("h3",{className:"text-lg font-semibold text-gray-900",children:"Follow-ups"}),x("button",{onClick:()=>e("/add-followup",{state:{patientId:o.patient.id}}),className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors",children:[p(pd,{className:"w-4 h-4 mr-2 inline"}),"Add Follow-up"]})]}),M.length>0?x("div",{className:"space-y-3",children:[M.map(T=>p(Dx,{followUp:{...T,patientName:o.patient.name,patientPhone:o.patient.phone},onUpdate:_,onDelete:P},T.id)),x("div",{className:"flex justify-between items-center mt-4",children:[x("button",{onClick:()=>E(o.followUpsPage-1),disabled:o.followUpsPage===1,className:`px-4 py-2 rounded-lg flex items-center ${o.followUpsPage===1?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:[p(Cw,{className:"w-4 h-4 mr-2"}),"Previous"]}),x("span",{className:"text-gray-600",children:["Page ",o.followUpsPage," of ",k]}),x("button",{onClick:()=>E(o.followUpsPage+1),disabled:o.followUpsPage===k,className:`px-4 py-2 rounded-lg flex items-center ${o.followUpsPage===k?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:["Next",p(kw,{className:"w-4 h-4 ml-2"})]})]})]}):x("div",{className:"text-center py-8 text-gray-600",children:[p(qi,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),p("p",{children:"No follow-ups scheduled"})]})]}),o.activeTab==="treatments"&&x("div",{className:"space-y-4",children:[x("div",{className:"flex items-center justify-between",children:[p("h3",{className:"text-lg font-semibold text-gray-900",children:"Treatment History"}),x("button",{onClick:h,className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors",children:[p(pd,{className:"w-4 h-4 mr-2 inline"}),"Add Treatment"]})]}),D.length>0?x("div",{className:"space-y-3",children:[D.map(T=>p(C,{treatment:T},T.id)),x("div",{className:"flex justify-between items-center mt-4",children:[x("button",{onClick:()=>N(o.treatmentsPage-1),disabled:o.treatmentsPage===1,className:`px-4 py-2 rounded-lg flex items-center ${o.treatmentsPage===1?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:[p(Cw,{className:"w-4 h-4 mr-2"}),"Previous"]}),x("span",{className:"text-gray-600",children:["Page ",o.treatmentsPage," of ",y]}),x("button",{onClick:()=>N(o.treatmentsPage+1),disabled:o.treatmentsPage===y,className:`px-4 py-2 rounded-lg flex items-center ${o.treatmentsPage===y?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:["Next",p(kw,{className:"w-4 h-4 ml-2"})]})]})]}):x("div",{className:"text-center py-8 text-gray-600",children:[p(Wg,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),p("p",{children:"No treatment history available"})]})]}),o.showDeleteModal&&p("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:x("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg p-6 max-w-md w-full border border-gray-200 dark:border-slate-700",children:[x("div",{className:"flex items-center space-x-3 mb-4",children:[p(cl,{className:"w-8 h-8 text-red-500 flex-shrink-0"}),p("div",{children:o.deletingTreatmentId?x(Rn,{children:[x("p",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:["Delete ",((R=o.treatments.find(T=>T.id===o.deletingTreatmentId))==null?void 0:R.treatment)||"Treatment","?"]}),p("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"This action cannot be undone. The treatment will be permanently removed."})]}):x(Rn,{children:[x("p",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:["Delete ",o.patient.name,"?"]}),p("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"This action cannot be undone. All associated data will be permanently removed."})]})})]}),x("div",{className:"flex justify-end space-x-3",children:[p("button",{className:"px-4 py-2 bg-gray-200 text-gray-700 dark:bg-slate-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-slate-600 transition-colors text-sm font-medium",onClick:()=>a(T=>({...T,showDeleteModal:!1,deletingTreatmentId:null})),disabled:o.isDeleting,children:"Cancel"}),p("button",{className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm font-medium flex items-center",onClick:d,disabled:o.isDeleting,children:o.isDeleting?x(Rn,{children:[x("svg",{className:"animate-spin h-4 w-4 mr-2",viewBox:"0 0 24 24",children:[p("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Deleting..."]}):"Delete"})]})]})})]})},cp=10,N6=()=>{xn();const{currentUser:t}=Sn(),{showError:e,showSuccess:n}=Vn(),{refreshNotifications:r}=Bh(),[i,s]=O.useState("all"),[o,a]=O.useState(""),[u,c]=O.useState([]),[d,h]=O.useState([]),[m,w]=O.useState(!0),[_,P]=O.useState(1);O.useEffect(()=>{if(!(t!=null&&t.uid)){e("You must be logged in to view follow-ups"),w(!1);return}(async()=>{try{const{followUps:T,error:b}=await En.getAll(t.uid);b?e(b):c(T);const{patients:W,error:H}=await lr.getAll(t.uid);H?e(H):h(W),w(!1)}catch(T){e(T.message),w(!1)}})()},[t,e]);const N=async(R,T)=>{if(!(t!=null&&t.uid)){e("Cannot update follow-up: please log in again");return}try{const b=await En.update(R,T,t.uid);if(b.error){e(`Failed to update follow-up: ${b.error}`);return}c(W=>W.map(H=>H.id===R?{...H,...T}:H)),n("Follow-up updated successfully!"),r()}catch(b){const W=b.message.includes("permission-denied")?"You do not have permission to update this follow-up. Please contact support.":`Failed to update follow-up: ${b.message}`;e(W)}},E=async R=>{if(!(t!=null&&t.uid)){e("Cannot delete follow-up: please log in again");return}try{const{error:T}=await En.delete(R,t.uid);if(T){e(`Failed to delete follow-up: ${T}`);return}c(b=>b.filter(W=>W.id!==R)),n("Follow-up deleted successfully!"),r()}catch(T){const b=T.message.includes("permission-denied")?"Permission denied: check Firestore rules":`Unexpected error deleting follow-up: ${T.message}`;e(b)}},k=u.map(R=>{const T=d.find(b=>b.id===R.patientId);return{...R,patientName:(T==null?void 0:T.name)||"Unknown",patientPhone:(T==null?void 0:T.phone)||"N/A"}}).filter(R=>{if(!(R.patientName.toLowerCase().includes(o.toLowerCase())||R.notes.toLowerCase().includes(o.toLowerCase())))return!1;switch(i){case"pending":return R.status==="pending";case"overdue":return R.status==="overdue";case"completed":return R.status==="completed";case"today":return Vt(R.scheduledDate)===Vt(new Date);default:return!0}}).sort((R,T)=>{const b={overdue:0,pending:1,completed:2},W=b[R.status],H=b[T.status];return W!==H?W-H:new Date(R.scheduledDate).getTime()-new Date(T.scheduledDate).getTime()}),D=Math.ceil(k.length/cp),M=k.slice((_-1)*cp,_*cp),V=({id:R,label:T,count:b})=>x("button",{onClick:()=>{s(R),P(1)},className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${i===R?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[T,b!==void 0&&p("span",{className:`ml-2 px-2 py-1 rounded-full text-xs ${i===R?"bg-white text-primary":"bg-gray-200 text-gray-600"}`,children:b})]}),I=u.filter(R=>R.status==="pending").length,v=u.filter(R=>R.status==="overdue").length,C=u.filter(R=>R.status==="completed").length,A=u.filter(R=>Vt(R.scheduledDate)===Vt(new Date)).length;return m?p(zh,{}):x("div",{className:"space-y-6",children:[x("div",{children:[p("h2",{className:"text-2xl font-bold text-gray-900",children:"Follow-ups"}),p("p",{className:"text-gray-600",children:"Manage patient follow-up communications"})]}),x("div",{className:"relative",children:[p(uN,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),p("input",{type:"text",placeholder:"Search follow-ups...",value:o,onChange:R=>{a(R.target.value),P(1)},className:"input-field pl-10"})]}),x("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:[p(V,{id:"all",label:"All",count:u.length}),p(V,{id:"overdue",label:"Overdue",count:v}),p(V,{id:"pending",label:"Pending",count:I}),p(V,{id:"today",label:"Today",count:A}),p(V,{id:"completed",label:"Completed",count:C})]}),x("div",{className:"flex items-center justify-between",children:[x("p",{className:"text-sm text-gray-600",children:[k.length," follow-up",k.length!==1?"s":""," found"]}),i!=="all"&&p("button",{onClick:()=>s("all"),className:"text-sm text-primary font-medium",children:"Clear filters"})]}),p("div",{className:"space-y-4",children:M.length>0?M.map(R=>p(Dx,{followUp:R,onUpdate:N,onDelete:E},`${R.patientId}-${R.id}`)):x("div",{className:"text-center py-8",children:[p(qi,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),p("p",{className:"text-gray-500 mb-2",children:"No follow-ups found"}),p("p",{className:"text-sm text-gray-400",children:o||i!=="all"?"Try adjusting your search or filters":"Schedule some follow-ups to get started"})]})}),D>1&&x("div",{className:"flex justify-center items-center space-x-2 pt-4",children:[p("button",{onClick:()=>P(R=>Math.max(R-1,1)),disabled:_===1,className:"px-3 py-1 bg-gray-200 rounded disabled:opacity-50",children:"Prev"}),x("span",{className:"text-sm",children:["Page ",_," of ",D]}),p("button",{onClick:()=>P(R=>Math.min(R+1,D)),disabled:_===D,className:"px-3 py-1 bg-gray-200 rounded disabled:opacity-50",children:"Next"})]}),k.length>0&&x("div",{className:"card bg-gray-50",children:[p("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Summary"}),x("div",{className:"grid grid-cols-2 gap-4",children:[x("div",{className:"text-center",children:[p("div",{className:"text-2xl font-bold text-red-600",children:v}),p("div",{className:"text-sm text-gray-600",children:"Overdue"})]}),x("div",{className:"text-center",children:[p("div",{className:"text-2xl font-bold text-yellow-600",children:I}),p("div",{className:"text-sm text-gray-600",children:"Pending"})]})]})]})]})},R6=()=>{const t=xn(),{currentUser:e}=Sn(),{showSuccess:n,showError:r}=Vn(),[i,s]=O.useState(!1),{register:o,handleSubmit:a,formState:{errors:u}}=Pu({defaultValues:{name:"",phone:"",email:"",dateOfBirth:"",gender:"",address:"",city:"",zipCode:"",emergencyContact:"",allergies:"",medications:"",medicalHistory:"",insuranceProvider:"",policyNumber:"",notes:"",nextAppointment:""}});return x("div",{className:"space-y-6",children:[x("div",{className:"flex items-center space-x-4",children:[p("button",{onClick:()=>t(-1),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:p(ia,{className:"w-5 h-5 text-gray-600"})}),x("div",{className:"flex-1",children:[p("h2",{className:"text-2xl font-bold text-gray-900",children:"Add New Patient"}),p("p",{className:"text-gray-600",children:"Register a new patient in your practice"})]})]}),x("form",{onSubmit:a(async d=>{var m,w,_,P,N,E,y,k,D,M,V,I,v,C,A;if(!e){console.error("No current user, cannot add patient. Auth state:",e),r("You must be logged in to add a patient");return}const h={name:d.name.trim(),email:((m=d.email)==null?void 0:m.trim())||null,phone:((w=d.phone)==null?void 0:w.trim())||null,dateOfBirth:((_=d.dateOfBirth)==null?void 0:_.trim())||null,gender:((P=d.gender)==null?void 0:P.trim())||null,address:((N=d.address)==null?void 0:N.trim())||null,city:((E=d.city)==null?void 0:E.trim())||null,zipCode:((y=d.zipCode)==null?void 0:y.trim())||null,emergencyContact:((k=d.emergencyContact)==null?void 0:k.trim())||null,allergies:((D=d.allergies)==null?void 0:D.trim())||null,medications:((M=d.medications)==null?void 0:M.trim())||null,medicalHistory:((V=d.medicalHistory)==null?void 0:V.trim())||null,insuranceProvider:((I=d.insuranceProvider)==null?void 0:I.trim())||null,policyNumber:((v=d.policyNumber)==null?void 0:v.trim())||null,notes:((C=d.notes)==null?void 0:C.trim())||null,nextAppointment:((A=d.nextAppointment)==null?void 0:A.trim())||null};console.log("Submitting patient with userId:",e.uid),console.log("Cleaned form data:",h),s(!0);try{const{id:R,error:T}=await lr.create(h,e.uid);T?(console.error("Patient creation error:",T,{userId:e.uid,data:h}),r(`Failed to add patient: ${T}`)):(console.log("Patient created successfully, id:",R),n("Patient added successfully!"),t("/patients"))}catch(R){console.error("Unexpected error creating patient:",R,{userId:e.uid,data:h}),r(`Unexpected error: ${R.message}`)}finally{s(!1)}}),className:"space-y-6",children:[x("div",{className:"card",children:[x("div",{className:"flex items-center space-x-2 mb-4",children:[p(Gi,{className:"w-5 h-5 text-primary"}),p("h3",{className:"text-lg font-semibold text-gray-900",children:"Personal Information"})]}),x("div",{className:"space-y-4",children:[x("div",{children:[p("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),p("input",{id:"name",type:"text",...o("name",{required:"Full name is required",minLength:{value:2,message:"Name must be at least 2 characters"}}),className:`input-field ${u.name?"border-red-500":""}`,placeholder:"Enter patient's full name"}),u.name&&p("p",{className:"text-red-500 text-sm mt-1",children:u.name.message})]}),x("div",{children:[p("label",{htmlFor:"dateOfBirth",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),p("input",{id:"dateOfBirth",type:"date",...o("dateOfBirth",{validate:d=>{if(!d)return!0;const h=N3(d,"yyyy-MM-dd",new Date),m=new Date;return m.setHours(0,0,0,0),LF(h,m)||"Date of birth must be before today"}}),className:`input-field ${u.dateOfBirth?"border-red-500":""}`}),u.dateOfBirth&&p("p",{className:"text-red-500 text-sm mt-1",children:u.dateOfBirth.message})]}),x("div",{children:[p("label",{htmlFor:"gender",className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender"}),x("select",{id:"gender",...o("gender"),className:"input-field",children:[p("option",{value:"",children:"Select gender"}),p("option",{value:"male",children:"Male"}),p("option",{value:"female",children:"Female"}),p("option",{value:"other",children:"Other"}),p("option",{value:"prefer-not-to-say",children:"Prefer not to say"})]})]})]})]}),x("div",{className:"card",children:[x("div",{className:"flex items-center space-x-2 mb-4",children:[p(ch,{className:"w-5 h-5 text-primary"}),p("h3",{className:"text-lg font-semibold text-gray-900",children:"Contact Information"})]}),x("div",{className:"space-y-4",children:[x("div",{children:[p("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),p("input",{id:"phone",type:"tel",...o("phone"),className:`input-field ${u.phone?"border-red-500":""}`,placeholder:"+1 (555) 123-4567"}),u.phone&&p("p",{className:"text-red-500 text-sm mt-1",children:u.phone.message})]}),x("div",{children:[p("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),p("input",{id:"email",type:"email",...o("email",{pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Please enter a valid email address"}}),className:`input-field ${u.email?"border-red-500":""}`,placeholder:"patient@email.com"}),u.email&&p("p",{className:"text-red-500 text-sm mt-1",children:u.email.message})]}),x("div",{children:[p("label",{htmlFor:"emergencyContact",className:"block text-sm font-medium text-gray-700 mb-2",children:"Emergency Contact"}),p("input",{id:"emergencyContact",type:"text",...o("emergencyContact"),className:"input-field",placeholder:"Emergency contact name and phone"})]})]})]}),x("div",{className:"card",children:[x("div",{className:"flex items-center space-x-2 mb-4",children:[p(su,{className:"w-5 h-5 text-primary"}),p("h3",{className:"text-lg font-semibold text-gray-900",children:"Address Information"})]}),x("div",{className:"space-y-4",children:[x("div",{children:[p("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-2",children:"Street Address"}),p("input",{id:"address",type:"text",...o("address"),className:"input-field",placeholder:"123 Main Street"})]}),x("div",{className:"grid grid-cols-2 gap-4",children:[x("div",{children:[p("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),p("input",{id:"city",type:"text",...o("city"),className:"input-field",placeholder:"City"})]}),x("div",{children:[p("label",{htmlFor:"zipCode",className:"block text-sm font-medium text-gray-700 mb-2",children:"ZIP Code"}),p("input",{id:"zipCode",type:"text",...o("zipCode"),className:"input-field",placeholder:"12345"})]})]})]})]}),x("div",{className:"card",children:[x("div",{className:"flex items-center space-x-2 mb-4",children:[p(uh,{className:"w-5 h-5 text-primary"}),p("h3",{className:"text-lg font-semibold text-gray-900",children:"Medical Information"})]}),x("div",{className:"space-y-4",children:[x("div",{children:[p("label",{htmlFor:"allergies",className:"block text-sm font-medium text-gray-700 mb-2",children:"Allergies"}),p("textarea",{id:"allergies",...o("allergies"),rows:3,className:"input-field resize-none",placeholder:"List any known allergies..."})]}),x("div",{children:[p("label",{htmlFor:"medications",className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Medications"}),p("textarea",{id:"medications",...o("medications"),rows:3,className:"input-field resize-none",placeholder:"List current medications..."})]}),x("div",{children:[p("label",{htmlFor:"medicalHistory",className:"block text-sm font-medium text-gray-700 mb-2",children:"Medical History"}),p("textarea",{id:"medicalHistory",...o("medicalHistory"),rows:4,className:"input-field resize-none",placeholder:"Relevant medical history..."})]})]})]}),x("div",{className:"card",children:[p("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Insurance Information"}),x("div",{className:"space-y-4",children:[x("div",{children:[p("label",{htmlFor:"insuranceProvider",className:"block text-sm font-medium text-gray-700 mb-2",children:"Insurance Provider"}),p("input",{id:"insuranceProvider",type:"text",...o("insuranceProvider"),className:"input-field",placeholder:"Insurance company name"})]}),x("div",{children:[p("label",{htmlFor:"policyNumber",className:"block text-sm font-medium text-gray-700 mb-2",children:"Policy Number"}),p("input",{id:"policyNumber",type:"text",...o("policyNumber"),className:"input-field",placeholder:"Policy/member number"})]})]})]}),x("div",{className:"card",children:[p("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Additional Information"}),x("div",{className:"space-y-4",children:[x("div",{children:[p("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),p("textarea",{id:"notes",...o("notes"),rows:4,className:"input-field resize-none",placeholder:"Any additional notes..."})]}),x("div",{children:[p("label",{htmlFor:"nextAppointment",className:"block text-sm font-medium text-gray-700 mb-2",children:"Next Appointment"}),p("input",{id:"nextAppointment",type:"date",...o("nextAppointment"),className:"input-field"})]})]})]}),x("div",{className:"flex space-x-4",children:[p("button",{type:"button",onClick:()=>t(-1),className:"flex-1 btn-secondary",disabled:i,children:"Cancel"}),p("button",{type:"submit",className:"flex-1 btn-primary",disabled:i,children:i?x("div",{className:"flex items-center justify-center",children:[p("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):x(Rn,{children:[p(ou,{className:"w-4 h-4 mr-2"}),"Save Patient"]})})]})]})]})},D6=()=>{const t=xn(),{id:e}=Bg(),{currentUser:n}=Sn(),{showSuccess:r,showError:i}=Vn(),[s,o]=O.useState(!1),[a,u]=O.useState(!0),{register:c,handleSubmit:d,formState:{errors:h},reset:m}=Pu({defaultValues:{name:"",phone:"",email:"",dateOfBirth:"",gender:"",address:"",city:"",zipCode:"",emergencyContact:"",allergies:"",medications:"",medicalHistory:"",insuranceProvider:"",policyNumber:""}});O.useEffect(()=>{if(!n||!e){console.error("No current user or patient ID",{currentUser:n,id:e}),i("You must be logged in to edit a patient"),u(!1);return}(async()=>{console.log("Fetching patient with id:",e,"userId:",n.uid);try{const{patient:P,error:N}=await lr.getById(e);if(N||!P){console.error("Error fetching patient:",N,{id:e,userId:n.uid}),i(`Failed to load patient: ${N}`),u(!1);return}if(P.userId!==n.uid){console.error("Unauthorized: patient userId does not match",{patientUserId:P.userId,userId:n.uid}),i("Unauthorized: you cannot edit this patient"),u(!1);return}console.log("Fetched patient data:",P),m({name:P.name||"",phone:P.phone||"",email:P.email||"",dateOfBirth:P.dateOfBirth||"",gender:P.gender||"",address:P.address||"",city:P.city||"",zipCode:P.zipCode||"",emergencyContact:P.emergencyContact||"",allergies:P.allergies||"",medications:P.medications||"",medicalHistory:P.medicalHistory||"",insuranceProvider:P.insuranceProvider||"",policyNumber:P.policyNumber||""}),u(!1)}catch(P){console.error("Unexpected error fetching patient:",P,{id:e,userId:n.uid}),i(`Unexpected error: ${P.message}`),u(!1)}})()},[n,e,m,i]);const w=async _=>{if(!n||!e){console.error("No current user or patient ID",{currentUser:n,id:e}),i("You must be logged in to edit a patient");return}console.log("Submitting update for patient id:",e,"userId:",n.uid),console.log("Form data:",_);const P=EI();sI(P,N=>{console.log("Current auth state in onSubmit:",(N==null?void 0:N.uid)||"null")}),o(!0);try{const{error:N}=await lr.update(e,_,n.uid);N?(console.error("Patient update error:",N,{id:e,userId:n.uid,data:_}),i(`Failed to update patient: ${N}`)):(console.log("Patient updated successfully, id:",e),r("Patient updated successfully!"),t("/patients",{replace:!0}))}catch(N){console.error("Unexpected error updating patient:",N,{id:e,userId:n.uid,data:_}),i(`Unexpected error: ${N.message}`)}finally{o(!1)}};return a?p("div",{children:"Loading..."}):x("div",{className:"space-y-6",children:[x("div",{className:"flex items-center space-x-4",children:[p("button",{onClick:()=>t(-1),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:p(ia,{className:"w-5 h-5 text-gray-600"})}),x("div",{className:"flex-1",children:[p("h2",{className:"text-2xl font-bold text-gray-900",children:"Edit Patient"}),p("p",{className:"text-gray-600",children:"Update patient information"})]})]}),x("form",{onSubmit:d(w),className:"space-y-6",children:[x("div",{className:"card",children:[x("div",{className:"flex items-center space-x-2 mb-4",children:[p(Gi,{className:"w-5 h-5 text-primary"}),p("h3",{className:"text-lg font-semibold text-gray-900",children:"Personal Information"})]}),x("div",{className:"space-y-4",children:[x("div",{children:[p("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),p("input",{id:"name",type:"text",...c("name",{required:"Full name is required",minLength:{value:2,message:"Name must be at least 2 characters"}}),className:`input-field ${h.name?"border-red-500":""}`,placeholder:"Enter patient's full name"}),h.name&&p("p",{className:"text-red-500 text-sm mt-1",children:h.name.message})]}),x("div",{children:[p("label",{htmlFor:"dateOfBirth",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth *"}),p("input",{id:"dateOfBirth",type:"date",...c("dateOfBirth",{required:"Date of birth is required"}),className:`input-field ${h.dateOfBirth?"border-red-500":""}`}),h.dateOfBirth&&p("p",{className:"text-red-500 text-sm mt-1",children:h.dateOfBirth.message})]}),x("div",{children:[p("label",{htmlFor:"gender",className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender"}),x("select",{id:"gender",...c("gender"),className:"input-field",children:[p("option",{value:"",children:"Select gender"}),p("option",{value:"male",children:"Male"}),p("option",{value:"female",children:"Female"}),p("option",{value:"other",children:"Other"}),p("option",{value:"prefer-not-to-say",children:"Prefer not to say"})]})]})]})]}),x("div",{className:"card",children:[x("div",{className:"flex items-center space-x-2 mb-4",children:[p(ch,{className:"w-5 h-5 text-primary"}),p("h3",{className:"text-lg font-semibold text-gray-900",children:"Contact Information"})]}),x("div",{className:"space-y-4",children:[x("div",{children:[p("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),p("input",{id:"phone",type:"tel",...c("phone",{required:"Phone number is required",pattern:{value:/^[\+]?[1-9][\d]{0,15}$/,message:"Please enter a valid phone number"}}),className:`input-field ${h.phone?"border-red-500":""}`,placeholder:"+1 (555) 123-4567"}),h.phone&&p("p",{className:"text-red-500 text-sm mt-1",children:h.phone.message})]}),x("div",{children:[p("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),p("input",{id:"email",type:"email",...c("email",{required:"Email address is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Please enter a valid email address"}}),className:`input-field ${h.email?"border-red-500":""}`,placeholder:"patient@email.com"}),h.email&&p("p",{className:"text-red-500 text-sm mt-1",children:h.email.message})]}),x("div",{children:[p("label",{htmlFor:"emergencyContact",className:"block text-sm font-medium text-gray-700 mb-2",children:"Emergency Contact"}),p("input",{id:"emergencyContact",type:"text",...c("emergencyContact"),className:"input-field",placeholder:"Emergency contact name and phone"})]})]})]}),x("div",{className:"card",children:[x("div",{className:"flex items-center space-x-2 mb-4",children:[p(su,{className:"w-5 h-5 text-primary"}),p("h3",{className:"text-lg font-semibold text-gray-900",children:"Address Information"})]}),x("div",{className:"space-y-4",children:[x("div",{children:[p("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-2",children:"Street Address"}),p("input",{id:"address",type:"text",...c("address"),className:"input-field",placeholder:"123 Main Street"})]}),x("div",{className:"grid grid-cols-2 gap-4",children:[x("div",{children:[p("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),p("input",{id:"city",type:"text",...c("city"),className:"input-field",placeholder:"City"})]}),x("div",{children:[p("label",{htmlFor:"zipCode",className:"block text-sm font-medium text-gray-700 mb-2",children:"ZIP Code"}),p("input",{id:"zipCode",type:"text",...c("zipCode"),className:"input-field",placeholder:"12345"})]})]})]})]}),x("div",{className:"card",children:[x("div",{className:"flex items-center space-x-2 mb-4",children:[p(uh,{className:"w-5 h-5 text-primary"}),p("h3",{className:"text-lg font-semibold text-gray-900",children:"Medical Information"})]}),x("div",{className:"space-y-4",children:[x("div",{children:[p("label",{htmlFor:"allergies",className:"block text-sm font-medium text-gray-700 mb-2",children:"Allergies"}),p("textarea",{id:"allergies",...c("allergies"),rows:3,className:"input-field resize-none",placeholder:"List any known allergies..."})]}),x("div",{children:[p("label",{htmlFor:"medications",className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Medications"}),p("textarea",{id:"medications",...c("medications"),rows:3,className:"input-field resize-none",placeholder:"List current medications..."})]}),x("div",{children:[p("label",{htmlFor:"medicalHistory",className:"block text-sm font-medium text-gray-700 mb-2",children:"Medical History"}),p("textarea",{id:"medicalHistory",...c("medicalHistory"),rows:4,className:"input-field resize-none",placeholder:"Relevant medical history..."})]})]})]}),x("div",{className:"card",children:[p("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Insurance Information"}),x("div",{className:"space-y-4",children:[x("div",{children:[p("label",{htmlFor:"insuranceProvider",className:"block text-sm font-medium text-gray-700 mb-2",children:"Insurance Provider"}),p("input",{id:"insuranceProvider",type:"text",...c("insuranceProvider"),className:"input-field",placeholder:"Insurance company name"})]}),x("div",{children:[p("label",{htmlFor:"policyNumber",className:"block text-sm font-medium text-gray-700 mb-2",children:"Policy Number"}),p("input",{id:"policyNumber",type:"text",...c("policyNumber"),className:"input-field",placeholder:"Policy/member number"})]})]})]}),x("div",{className:"flex space-x-4",children:[p("button",{type:"button",onClick:()=>t(-1),className:"flex-1 btn-secondary",disabled:s,children:"Cancel"}),p("button",{type:"submit",className:"flex-1 btn-primary",disabled:s,children:s?x("div",{className:"flex items-center justify-center",children:[p("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):x(Rn,{children:[p(ou,{className:"w-4 h-4 mr-2"}),"Update Patient"]})})]})]})]})},U1=[{id:"post-treatment",name:"Post-Treatment",description:"Follow-up after treatment",defaultDays:30},{id:"appointment-reminder",name:"Appointment Reminder",description:"Reminder for upcoming appointment",defaultDays:7},{id:"satisfaction-survey",name:"Satisfaction Survey",description:"Patient satisfaction survey",defaultDays:14},{id:"treatment-decision",name:"Treatment Decision",description:"Follow-up for treatment decisions",defaultDays:7},{id:"payment-reminder",name:"Payment Reminder",description:"Reminder for outstanding payments",defaultDays:30}],O6=()=>{var I;const t=xn(),e=lh(),{currentUser:n}=Sn(),{showSuccess:r,showError:i}=Vn(),{refreshNotifications:s}=Bh(),[o,a]=O.useState(!1),[u,c]=O.useState([]),[d,h]=O.useState(!0),m=(I=e.state)==null?void 0:I.patientId,{register:w,handleSubmit:_,watch:P,setValue:N,formState:{errors:E}}=Pu({defaultValues:{patientId:m||"",type:"",scheduledDate:"",scheduledTime:"",notes:"",priority:"normal",sendReminder:!1}}),y=P("patientId"),k=P("type");O.useEffect(()=>{if(!n){console.error("No current user, skipping patient fetch"),i("You must be logged in to schedule a follow-up"),h(!1);return}(async()=>{try{console.log("Fetching patients for userId:",n.uid);const{patients:C,error:A}=await lr.getAll(n.uid);A?(console.error("Patient fetch error:",A),i(A)):(console.log("Fetched patients:",C),c(C)),h(!1)}catch(C){console.error("Unexpected error fetching patients:",C),i(C.message),h(!1)}})()},[n,i]);const D=u.find(v=>v.id===y),M=U1.find(v=>v.id===k);O.useEffect(()=>{if(D&&M){const v=i6(D.lastVisit,M);v&&N("scheduledDate",Vt(v,"yyyy-MM-dd"))}},[D,M,N]);const V=async v=>{if(!n){console.error("No current user, cannot schedule follow-up"),i("You must be logged in to schedule a follow-up");return}if(!v.patientId){console.error("No patient selected"),i("Please select a patient");return}a(!0);try{console.log("Submitting follow-up for patientId:",v.patientId,"userId:",n.uid),console.log("Form data:",v);const{id:C,error:A}=await En.create(v,n.uid,v.patientId);A?(console.error("Follow-up creation error:",A,{userId:n.uid,patientId:v.patientId,data:v}),i(`Failed to schedule follow-up: ${A}`)):(console.log("Follow-up created successfully, id:",C),r("Follow-up scheduled successfully!"),s(),t(m?`/patients/${m}`:"/followups"))}catch(C){console.error("Unexpected error creating follow-up:",C,{userId:n.uid,patientId:v.patientId,data:v}),i(`Unexpected error: ${C.message}`)}finally{a(!1)}};return d?p("div",{children:"Loading..."}):x("div",{className:"space-y-6",children:[x("div",{className:"flex items-center space-x-4",children:[p("button",{onClick:()=>t(m?`/patients/${m}`:"/followups"),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:p(ia,{className:"w-5 h-5 text-gray-600"})}),x("div",{className:"flex-1",children:[p("h2",{className:"text-2xl font-bold text-gray-900",children:"Schedule Follow-up"}),p("p",{className:"text-gray-600",children:"Create a new follow-up reminder for a patient"})]})]}),x("form",{onSubmit:_(V),className:"space-y-6",children:[x("div",{className:"card",children:[x("div",{className:"flex items-center space-x-2 mb-4",children:[p(Gi,{className:"w-5 h-5 text-primary"}),p("h3",{className:"text-lg font-semibold text-gray-900",children:"Select Patient"})]}),x("div",{children:[p("label",{htmlFor:"patientId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Patient *"}),x("select",{id:"patientId",...w("patientId",{required:"Please select a patient"}),className:`input-field ${E.patientId?"border-red-500":""}`,disabled:m||o,children:[p("option",{value:"",children:"Choose a patient..."}),u.map(v=>x("option",{value:v.id,children:[v.name," - ",v.phone]},v.id))]}),E.patientId&&p("p",{className:"text-red-500 text-sm mt-1",children:E.patientId.message}),D&&p("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:x("div",{className:"flex items-center space-x-3",children:[p("div",{className:"w-10 h-10 bg-primary rounded-full flex items-center justify-center",children:p(Gi,{className:"w-5 h-5 text-white"})}),x("div",{children:[p("h4",{className:"font-medium text-gray-900",children:D.name}),p("p",{className:"text-sm text-gray-600",children:D.phone}),x("p",{className:"text-sm text-gray-600",children:["Last visit: ",D.lastVisit?Vt(D.lastVisit):"N/A"]})]})]})})]})]}),x("div",{className:"card",children:[x("div",{className:"flex items-center space-x-2 mb-4",children:[p(qi,{className:"w-5 h-5 text-primary"}),p("h3",{className:"text-lg font-semibold text-gray-900",children:"Follow-up Type"})]}),x("div",{children:[p("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700 mb-2",children:"Type of Follow-up *"}),x("select",{id:"type",...w("type",{required:"Please select a follow-up type"}),className:`input-field ${E.type?"border-red-500":""}`,children:[p("option",{value:"",children:"Choose follow-up type..."}),U1.map(v=>p("option",{value:v.id,children:v.name},v.id))]}),E.type&&p("p",{className:"text-red-500 text-sm mt-1",children:E.type.message}),M&&x("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[p("h4",{className:"font-medium text-gray-900 mb-2",children:M.name}),p("p",{className:"text-sm text-gray-600 mb-2",children:M.description}),x("p",{className:"text-sm text-gray-500",children:["Default timing: ",M.defaultDays," days after last treatment"]})]})]})]}),x("div",{className:"card",children:[x("div",{className:"flex items-center space-x-2 mb-4",children:[p(su,{className:"w-5 h-5 text-primary"}),p("h3",{className:"text-lg font-semibold text-gray-900",children:"Schedule"})]}),x("div",{className:"space-y-4",children:[x("div",{children:[p("label",{htmlFor:"scheduledDate",className:"block text-sm font-medium text-gray-700 mb-2",children:"Follow-up Date *"}),p("input",{id:"scheduledDate",type:"date",...w("scheduledDate",{required:"Please select a follow-up date"}),className:`input-field ${E.scheduledDate?"border-red-500":""}`,min:Vt(new Date,"yyyy-MM-dd")}),E.scheduledDate&&p("p",{className:"text-red-500 text-sm mt-1",children:E.scheduledDate.message})]}),x("div",{children:[p("label",{htmlFor:"scheduledTime",className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Time"}),x("select",{id:"scheduledTime",...w("scheduledTime"),className:"input-field",children:[p("option",{value:"",children:"Any time"}),p("option",{value:"morning",children:"Morning (9:00 AM - 12:00 PM)"}),p("option",{value:"afternoon",children:"Afternoon (12:00 PM - 5:00 PM)"}),p("option",{value:"evening",children:"Evening (5:00 PM - 8:00 PM)"})]})]})]})]}),x("div",{className:"card",children:[x("div",{className:"flex items-center space-x-2 mb-4",children:[p(Wg,{className:"w-5 h-5 text-primary"}),p("h3",{className:"text-lg font-semibold text-gray-900",children:"Notes & Instructions"})]}),x("div",{className:"space-y-4",children:[x("div",{children:[p("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Follow-up Notes *"}),p("textarea",{id:"notes",...w("notes",{required:"Please provide notes for this follow-up",minLength:{value:10,message:"Notes must be at least 10 characters"}}),rows:4,className:`input-field resize-none ${E.notes?"border-red-500":""}`,placeholder:"Describe what this follow-up is for and any specific instructions..."}),E.notes&&p("p",{className:"text-red-500 text-sm mt-1",children:E.notes.message})]}),x("div",{children:[p("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority Level"}),x("select",{id:"priority",...w("priority"),className:"input-field",children:[p("option",{value:"normal",children:"Normal"}),p("option",{value:"high",children:"High"}),p("option",{value:"urgent",children:"Urgent"})]})]}),x("div",{className:"flex items-center space-x-2",children:[p("input",{id:"sendReminder",type:"checkbox",...w("sendReminder"),className:"w-4 h-4 text-primary bg-gray-100 border-gray-300 rounded focus:ring-primary focus:ring-2"}),p("label",{htmlFor:"sendReminder",className:"text-sm font-medium text-gray-700",children:"Send automatic reminder to patient"})]})]})]}),x("div",{className:"flex space-x-4",children:[p("button",{type:"button",onClick:()=>t(m?`/patients/${m}`:"/followups"),className:"flex-1 btn-secondary",disabled:o,children:"Cancel"}),p("button",{type:"submit",className:"flex-1 btn-primary",disabled:o,children:o?x("div",{className:"flex items-center justify-center",children:[p("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Scheduling..."]}):x(Rn,{children:[p(ou,{className:"w-4 h-4 mr-2"}),"Schedule Follow-up"]})})]})]})]})},Ox=typeof document<"u"?we.useLayoutEffect:()=>{};var dp;const L6=(dp=we.useInsertionEffect)!==null&&dp!==void 0?dp:Ox;function M6(t){const e=O.useRef(null);return L6(()=>{e.current=t},[t]),O.useCallback((...n)=>{const r=e.current;return r==null?void 0:r(...n)},[])}const os=t=>{var e;return(e=t==null?void 0:t.ownerDocument)!==null&&e!==void 0?e:document},Ts=t=>t&&"window"in t&&t.window===t?t:os(t).defaultView||window;function V6(t){return t!==null&&typeof t=="object"&&"nodeType"in t&&typeof t.nodeType=="number"}function F6(t){return V6(t)&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in t}let U6=!1;function cv(){return U6}function Lx(t,e){if(!cv())return e&&t?t.contains(e):!1;if(!t||!e)return!1;let n=e;for(;n!==null;){if(n===t)return!0;n.tagName==="SLOT"&&n.assignedSlot?n=n.assignedSlot.parentNode:F6(n)?n=n.host:n=n.parentNode}return!1}const Um=(t=document)=>{var e;if(!cv())return t.activeElement;let n=t.activeElement;for(;n&&"shadowRoot"in n&&(!((e=n.shadowRoot)===null||e===void 0)&&e.activeElement);)n=n.shadowRoot.activeElement;return n};function Mx(t){return cv()&&t.target.shadowRoot&&t.composedPath?t.composedPath()[0]:t.target}function $6(t){var e;if(typeof window>"u"||window.navigator==null)return!1;let n=(e=window.navigator.userAgentData)===null||e===void 0?void 0:e.brands;return Array.isArray(n)&&n.some(r=>t.test(r.brand))||t.test(window.navigator.userAgent)}function j6(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function Vx(t){let e=null;return()=>(e==null&&(e=t()),e)}const B6=Vx(function(){return j6(/^Mac/i)}),z6=Vx(function(){return $6(/Android/i)});function Fx(){let t=O.useRef(new Map),e=O.useCallback((i,s,o,a)=>{let u=a!=null&&a.once?(...c)=>{t.current.delete(o),o(...c)}:o;t.current.set(o,{type:s,eventTarget:i,fn:u,options:a}),i.addEventListener(s,u,a)},[]),n=O.useCallback((i,s,o,a)=>{var u;let c=((u=t.current.get(o))===null||u===void 0?void 0:u.fn)||o;i.removeEventListener(s,c,a),t.current.delete(o)},[]),r=O.useCallback(()=>{t.current.forEach((i,s)=>{n(i.eventTarget,i.type,s,i.options)})},[n]);return O.useEffect(()=>r,[r]),{addGlobalListener:e,removeGlobalListener:n,removeAllGlobalListeners:r}}function W6(t){return t.mozInputSource===0&&t.isTrusted?!0:z6()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function Ux(t){let e=t;return e.nativeEvent=t,e.isDefaultPrevented=()=>e.defaultPrevented,e.isPropagationStopped=()=>e.cancelBubble,e.persist=()=>{},e}function H6(t,e){Object.defineProperty(t,"target",{value:e}),Object.defineProperty(t,"currentTarget",{value:e})}function $x(t){let e=O.useRef({isFocused:!1,observer:null});Ox(()=>{const r=e.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let n=M6(r=>{t==null||t(r)});return O.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){e.current.isFocused=!0;let i=r.target,s=o=>{if(e.current.isFocused=!1,i.disabled){let a=Ux(o);n(a)}e.current.observer&&(e.current.observer.disconnect(),e.current.observer=null)};i.addEventListener("focusout",s,{once:!0}),e.current.observer=new MutationObserver(()=>{if(e.current.isFocused&&i.disabled){var o;(o=e.current.observer)===null||o===void 0||o.disconnect();let a=i===document.activeElement?null:document.activeElement;i.dispatchEvent(new FocusEvent("blur",{relatedTarget:a})),i.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:a}))}}),e.current.observer.observe(i,{attributes:!0,attributeFilter:["disabled"]})}},[n])}let q6=!1,xu=null,$m=new Set,Tl=new Map,$s=!1,jm=!1;const G6={Tab:!0,Escape:!0};function dv(t,e){for(let n of $m)n(t,e)}function K6(t){return!(t.metaKey||!B6()&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function Bd(t){$s=!0,K6(t)&&(xu="keyboard",dv("keyboard",t))}function Mo(t){xu="pointer",(t.type==="mousedown"||t.type==="pointerdown")&&($s=!0,dv("pointer",t))}function jx(t){W6(t)&&($s=!0,xu="virtual")}function Bx(t){t.target===window||t.target===document||q6||!t.isTrusted||(!$s&&!jm&&(xu="virtual",dv("virtual",t)),$s=!1,jm=!1)}function zx(){$s=!1,jm=!0}function Bm(t){if(typeof window>"u"||typeof document>"u"||Tl.get(Ts(t)))return;const e=Ts(t),n=os(t);let r=e.HTMLElement.prototype.focus;e.HTMLElement.prototype.focus=function(){$s=!0,r.apply(this,arguments)},n.addEventListener("keydown",Bd,!0),n.addEventListener("keyup",Bd,!0),n.addEventListener("click",jx,!0),e.addEventListener("focus",Bx,!0),e.addEventListener("blur",zx,!1),typeof PointerEvent<"u"&&(n.addEventListener("pointerdown",Mo,!0),n.addEventListener("pointermove",Mo,!0),n.addEventListener("pointerup",Mo,!0)),e.addEventListener("beforeunload",()=>{Wx(t)},{once:!0}),Tl.set(e,{focus:r})}const Wx=(t,e)=>{const n=Ts(t),r=os(t);e&&r.removeEventListener("DOMContentLoaded",e),Tl.has(n)&&(n.HTMLElement.prototype.focus=Tl.get(n).focus,r.removeEventListener("keydown",Bd,!0),r.removeEventListener("keyup",Bd,!0),r.removeEventListener("click",jx,!0),n.removeEventListener("focus",Bx,!0),n.removeEventListener("blur",zx,!1),typeof PointerEvent<"u"&&(r.removeEventListener("pointerdown",Mo,!0),r.removeEventListener("pointermove",Mo,!0),r.removeEventListener("pointerup",Mo,!0)),Tl.delete(n))};function Y6(t){const e=os(t);let n;return e.readyState!=="loading"?Bm(t):(n=()=>{Bm(t)},e.addEventListener("DOMContentLoaded",n)),()=>Wx(t,n)}typeof document<"u"&&Y6();function Hx(){return xu!=="pointer"}const Q6=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function X6(t,e,n){let r=os(n==null?void 0:n.target);const i=typeof window<"u"?Ts(n==null?void 0:n.target).HTMLInputElement:HTMLInputElement,s=typeof window<"u"?Ts(n==null?void 0:n.target).HTMLTextAreaElement:HTMLTextAreaElement,o=typeof window<"u"?Ts(n==null?void 0:n.target).HTMLElement:HTMLElement,a=typeof window<"u"?Ts(n==null?void 0:n.target).KeyboardEvent:KeyboardEvent;return t=t||r.activeElement instanceof i&&!Q6.has(r.activeElement.type)||r.activeElement instanceof s||r.activeElement instanceof o&&r.activeElement.isContentEditable,!(t&&e==="keyboard"&&n instanceof a&&!G6[n.key])}function J6(t,e,n){Bm(),O.useEffect(()=>{let r=(i,s)=>{X6(!!(n!=null&&n.isTextInput),i,s)&&t(Hx())};return $m.add(r),()=>{$m.delete(r)}},e)}function Z6(t){let{isDisabled:e,onFocus:n,onBlur:r,onFocusChange:i}=t;const s=O.useCallback(u=>{if(u.target===u.currentTarget)return r&&r(u),i&&i(!1),!0},[r,i]),o=$x(s),a=O.useCallback(u=>{const c=os(u.target),d=c?Um(c):Um();u.target===u.currentTarget&&d===Mx(u.nativeEvent)&&(n&&n(u),i&&i(!0),o(u))},[i,n,o]);return{focusProps:{onFocus:!e&&(n||i||r)?a:void 0,onBlur:!e&&(r||i)?s:void 0}}}function eU(t){let{isDisabled:e,onBlurWithin:n,onFocusWithin:r,onFocusWithinChange:i}=t,s=O.useRef({isFocusWithin:!1}),{addGlobalListener:o,removeAllGlobalListeners:a}=Fx(),u=O.useCallback(h=>{h.currentTarget.contains(h.target)&&s.current.isFocusWithin&&!h.currentTarget.contains(h.relatedTarget)&&(s.current.isFocusWithin=!1,a(),n&&n(h),i&&i(!1))},[n,i,s,a]),c=$x(u),d=O.useCallback(h=>{if(!h.currentTarget.contains(h.target))return;const m=os(h.target),w=Um(m);if(!s.current.isFocusWithin&&w===Mx(h.nativeEvent)){r&&r(h),i&&i(!0),s.current.isFocusWithin=!0,c(h);let _=h.currentTarget;o(m,"focus",P=>{if(s.current.isFocusWithin&&!Lx(_,P.target)){let N=new m.defaultView.FocusEvent("blur",{relatedTarget:P.target});H6(N,_);let E=Ux(N);u(E)}},{capture:!0})}},[r,i,c,o,u]);return e?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:d,onBlur:u}}}let zm=!1,gc=0;function tU(){zm=!0,setTimeout(()=>{zm=!1},50)}function $1(t){t.pointerType==="touch"&&tU()}function nU(){if(!(typeof document>"u"))return gc===0&&typeof PointerEvent<"u"&&document.addEventListener("pointerup",$1),gc++,()=>{gc--,!(gc>0)&&typeof PointerEvent<"u"&&document.removeEventListener("pointerup",$1)}}function rU(t){let{onHoverStart:e,onHoverChange:n,onHoverEnd:r,isDisabled:i}=t,[s,o]=O.useState(!1),a=O.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;O.useEffect(nU,[]);let{addGlobalListener:u,removeAllGlobalListeners:c}=Fx(),{hoverProps:d,triggerHoverEnd:h}=O.useMemo(()=>{let m=(P,N)=>{if(a.pointerType=N,i||N==="touch"||a.isHovered||!P.currentTarget.contains(P.target))return;a.isHovered=!0;let E=P.currentTarget;a.target=E,u(os(P.target),"pointerover",y=>{a.isHovered&&a.target&&!Lx(a.target,y.target)&&w(y,y.pointerType)},{capture:!0}),e&&e({type:"hoverstart",target:E,pointerType:N}),n&&n(!0),o(!0)},w=(P,N)=>{let E=a.target;a.pointerType="",a.target=null,!(N==="touch"||!a.isHovered||!E)&&(a.isHovered=!1,c(),r&&r({type:"hoverend",target:E,pointerType:N}),n&&n(!1),o(!1))},_={};return typeof PointerEvent<"u"&&(_.onPointerEnter=P=>{zm&&P.pointerType==="mouse"||m(P,P.pointerType)},_.onPointerLeave=P=>{!i&&P.currentTarget.contains(P.target)&&w(P,P.pointerType)}),{hoverProps:_,triggerHoverEnd:w}},[e,n,r,i,a,u,c]);return O.useEffect(()=>{i&&h({currentTarget:a.target},a.pointerType)},[i]),{hoverProps:d,isHovered:s}}function iU(t={}){let{autoFocus:e=!1,isTextInput:n,within:r}=t,i=O.useRef({isFocused:!1,isFocusVisible:e||Hx()}),[s,o]=O.useState(!1),[a,u]=O.useState(()=>i.current.isFocused&&i.current.isFocusVisible),c=O.useCallback(()=>u(i.current.isFocused&&i.current.isFocusVisible),[]),d=O.useCallback(w=>{i.current.isFocused=w,o(w),c()},[c]);J6(w=>{i.current.isFocusVisible=w,c()},[],{isTextInput:n});let{focusProps:h}=Z6({isDisabled:r,onFocusChange:d}),{focusWithinProps:m}=eU({isDisabled:!r,onFocusWithinChange:d});return{isFocused:s,isFocusVisible:a,focusProps:r?m:h}}var sU=Object.defineProperty,oU=(t,e,n)=>e in t?sU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hp=(t,e,n)=>(oU(t,typeof e!="symbol"?e+"":e,n),n);let aU=class{constructor(){hp(this,"current",this.detect()),hp(this,"handoffState","pending"),hp(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},qx=new aU;function lU(t){var e,n;return qx.isServer?null:t?"ownerDocument"in t?t.ownerDocument:"current"in t?(n=(e=t.current)==null?void 0:e.ownerDocument)!=null?n:document:null:document}function uU(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function Gx(){let t=[],e={addEventListener(n,r,i,s){return n.addEventListener(r,i,s),e.add(()=>n.removeEventListener(r,i,s))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return e.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return e.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return uU(()=>{r.current&&n[0]()}),e.add(()=>{r.current=!1})},style(n,r,i){let s=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:i}),this.add(()=>{Object.assign(n.style,{[r]:s})})},group(n){let r=Gx();return n(r),this.add(()=>r.dispose())},add(n){return t.includes(n)||t.push(n),()=>{let r=t.indexOf(n);if(r>=0)for(let i of t.splice(r,1))i()}},dispose(){for(let n of t.splice(0))n()}};return e}function hv(){let[t]=O.useState(Gx);return O.useEffect(()=>()=>t.dispose(),[t]),t}let fv=(t,e)=>{qx.isServer?O.useEffect(t,e):O.useLayoutEffect(t,e)};function cU(t){let e=O.useRef(t);return fv(()=>{e.current=t},[t]),e}let sr=function(t){let e=cU(t);return we.useCallback((...n)=>e.current(...n),[e])};function dU(t){let e=t.width/2,n=t.height/2;return{top:t.clientY-n,right:t.clientX+e,bottom:t.clientY+n,left:t.clientX-e}}function hU(t,e){return!(!t||!e||t.right<e.left||t.left>e.right||t.bottom<e.top||t.top>e.bottom)}function fU({disabled:t=!1}={}){let e=O.useRef(null),[n,r]=O.useState(!1),i=hv(),s=sr(()=>{e.current=null,r(!1),i.dispose()}),o=sr(a=>{if(i.dispose(),e.current===null){e.current=a.currentTarget,r(!0);{let u=lU(a.currentTarget);i.addEventListener(u,"pointerup",s,!1),i.addEventListener(u,"pointermove",c=>{if(e.current){let d=dU(c);r(hU(d,e.current.getBoundingClientRect()))}},!1),i.addEventListener(u,"pointercancel",s,!1)}}});return{pressed:n,pressProps:t?{}:{onPointerDown:o,onPointerUp:s,onClick:s}}}let pU=O.createContext(void 0);function pv(){return O.useContext(pU)}function j1(...t){return Array.from(new Set(t.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}function Kx(t,e,...n){if(t in e){let i=e[t];return typeof i=="function"?i(...n):i}let r=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Kx),r}var mU=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(mU||{}),gU=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(gU||{});function Su(){let t=vU();return O.useCallback(e=>yU({mergeRefs:t,...e}),[t])}function yU({ourProps:t,theirProps:e,slot:n,defaultTag:r,features:i,visible:s=!0,name:o,mergeRefs:a}){a=a??wU;let u=Yx(e,t);if(s)return yc(u,n,r,o,a);let c=i??0;if(c&2){let{static:d=!1,...h}=u;if(d)return yc(h,n,r,o,a)}if(c&1){let{unmount:d=!0,...h}=u;return Kx(d?0:1,{0(){return null},1(){return yc({...h,hidden:!0,style:{display:"none"}},n,r,o,a)}})}return yc(u,n,r,o,a)}function yc(t,e={},n,r,i){let{as:s=n,children:o,refName:a="ref",...u}=fp(t,["unmount","static"]),c=t.ref!==void 0?{[a]:t.ref}:{},d=typeof o=="function"?o(e):o;"className"in u&&u.className&&typeof u.className=="function"&&(u.className=u.className(e)),u["aria-labelledby"]&&u["aria-labelledby"]===u.id&&(u["aria-labelledby"]=void 0);let h={};if(e){let m=!1,w=[];for(let[_,P]of Object.entries(e))typeof P=="boolean"&&(m=!0),P===!0&&w.push(_.replace(/([A-Z])/g,N=>`-${N.toLowerCase()}`));if(m){h["data-headlessui-state"]=w.join(" ");for(let _ of w)h[`data-${_}`]=""}}if(s===O.Fragment&&(Object.keys(ys(u)).length>0||Object.keys(ys(h)).length>0))if(!O.isValidElement(d)||Array.isArray(d)&&d.length>1){if(Object.keys(ys(u)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(ys(u)).concat(Object.keys(ys(h))).map(m=>`  - ${m}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(m=>`  - ${m}`).join(`
`)].join(`
`))}else{let m=d.props,w=m==null?void 0:m.className,_=typeof w=="function"?(...E)=>j1(w(...E),u.className):j1(w,u.className),P=_?{className:_}:{},N=Yx(d.props,ys(fp(u,["ref"])));for(let E in h)E in N&&delete h[E];return O.cloneElement(d,Object.assign({},N,h,c,{ref:i(EU(d),c.ref)},P))}return O.createElement(s,Object.assign({},fp(u,["ref"]),s!==O.Fragment&&c,s!==O.Fragment&&h),d)}function vU(){let t=O.useRef([]),e=O.useCallback(n=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return t.current=n,e}}function wU(...t){return t.every(e=>e==null)?void 0:e=>{for(let n of t)n!=null&&(typeof n=="function"?n(e):n.current=e)}}function Yx(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):e[i]=r[i];if(e.disabled||e["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[i=>{var s;return(s=i==null?void 0:i.preventDefault)==null?void 0:s.call(i)}]);for(let r in n)Object.assign(e,{[r](i,...s){let o=n[r];for(let a of o){if((i instanceof Event||(i==null?void 0:i.nativeEvent)instanceof Event)&&i.defaultPrevented)return;a(i,...s)}}});return e}function _U(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):e[i]=r[i];for(let r in n)Object.assign(e,{[r](...i){let s=n[r];for(let o of s)o==null||o(...i)}});return e}function Hh(t){var e;return Object.assign(O.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function ys(t){let e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function fp(t,e=[]){let n=Object.assign({},t);for(let r of e)r in n&&delete n[r];return n}function EU(t){return we.version.split(".")[0]>="19"?t.props.ref:t.ref}function TU(t,e,n){let[r,i]=O.useState(n),s=t!==void 0,o=O.useRef(s),a=O.useRef(!1),u=O.useRef(!1);return s&&!o.current&&!a.current?(a.current=!0,o.current=s,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!s&&o.current&&!u.current&&(u.current=!0,o.current=s,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[s?t:r,sr(c=>(s||i(c),e==null?void 0:e(c)))]}function bU(t){let[e]=O.useState(t);return e}function Qx(t={},e=null,n=[]){for(let[r,i]of Object.entries(t))Jx(n,Xx(e,r),i);return n}function Xx(t,e){return t?t+"["+e+"]":e}function Jx(t,e,n){if(Array.isArray(n))for(let[r,i]of n.entries())Jx(t,Xx(e,r.toString()),i);else n instanceof Date?t.push([e,n.toISOString()]):typeof n=="boolean"?t.push([e,n?"1":"0"]):typeof n=="string"?t.push([e,n]):typeof n=="number"?t.push([e,`${n}`]):n==null?t.push([e,""]):Qx(n,e,t)}function IU(t){var e,n;let r=(e=t==null?void 0:t.form)!=null?e:t.closest("form");if(r){for(let i of r.elements)if(i!==t&&(i.tagName==="INPUT"&&i.type==="submit"||i.tagName==="BUTTON"&&i.type==="submit"||i.nodeName==="INPUT"&&i.type==="image")){i.click();return}(n=r.requestSubmit)==null||n.call(r)}}let PU="span";var mv=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(mv||{});function xU(t,e){var n;let{features:r=1,...i}=t,s={ref:e,"aria-hidden":(r&2)===2?!0:(n=i["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return Su()({ourProps:s,theirProps:i,slot:{},defaultTag:PU,name:"Hidden"})}let Zx=Hh(xU),SU=O.createContext(null);function CU({children:t}){let e=O.useContext(SU);if(!e)return we.createElement(we.Fragment,null,t);let{target:n}=e;return n?nb.createPortal(we.createElement(we.Fragment,null,t),n):null}function kU({data:t,form:e,disabled:n,onReset:r,overrides:i}){let[s,o]=O.useState(null),a=hv();return O.useEffect(()=>{if(r&&s)return a.addEventListener(s,"reset",r)},[s,e,r]),we.createElement(CU,null,we.createElement(AU,{setForm:o,formId:e}),Qx(t).map(([u,c])=>we.createElement(Zx,{features:mv.Hidden,...ys({key:u,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:e,disabled:n,name:u,value:c,...i})})))}function AU({setForm:t,formId:e}){return O.useEffect(()=>{if(e){let n=document.getElementById(e);n&&t(n)}},[t,e]),e?null:we.createElement(Zx,{features:mv.Hidden,as:"input",type:"hidden",hidden:!0,readOnly:!0,ref:n=>{if(!n)return;let r=n.closest("form");r&&t(r)}})}let NU=O.createContext(void 0);function eS(){return O.useContext(NU)}function RU(t){return typeof t!="object"||t===null?!1:"nodeType"in t}function tS(t){return RU(t)&&"tagName"in t}function qh(t){return tS(t)&&"accessKey"in t}function DU(t){return qh(t)&&t.nodeName==="INPUT"}function Wm(t){return qh(t)&&t.nodeName==="LABEL"}function OU(t){return qh(t)&&t.nodeName==="FIELDSET"}function nS(t){return qh(t)&&t.nodeName==="LEGEND"}function LU(t){return tS(t)?t.matches('a[href],audio[controls],button,details,embed,iframe,img[usemap],input:not([type="hidden"]),label,select,textarea,video[controls]'):!1}function MU(t){let e=t.parentElement,n=null;for(;e&&!OU(e);)nS(e)&&(n=e),e=e.parentElement;let r=(e==null?void 0:e.getAttribute("disabled"))==="";return r&&VU(n)?!1:r}function VU(t){if(!t)return!1;let e=t.previousElementSibling;for(;e!==null;){if(nS(e))return!1;e=e.previousElementSibling}return!0}let FU=Symbol();function gv(...t){let e=O.useRef(t);O.useEffect(()=>{e.current=t},[t]);let n=sr(r=>{for(let i of e.current)i!=null&&(typeof i=="function"?i(r):i.current=r)});return t.every(r=>r==null||(r==null?void 0:r[FU]))?void 0:n}let Gh=O.createContext(null);Gh.displayName="DescriptionContext";function rS(){let t=O.useContext(Gh);if(t===null){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,rS),e}return t}function UU(){var t,e;return(e=(t=O.useContext(Gh))==null?void 0:t.value)!=null?e:void 0}function $U(){let[t,e]=O.useState([]);return[t.length>0?t.join(" "):void 0,O.useMemo(()=>function(n){let r=sr(s=>(e(o=>[...o,s]),()=>e(o=>{let a=o.slice(),u=a.indexOf(s);return u!==-1&&a.splice(u,1),a}))),i=O.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return we.createElement(Gh.Provider,{value:i},n.children)},[e])]}let jU="p";function BU(t,e){let n=O.useId(),r=pv(),{id:i=`headlessui-description-${n}`,...s}=t,o=rS(),a=gv(e);fv(()=>o.register(i),[i,o.register]);let u=r||!1,c=O.useMemo(()=>({...o.slot,disabled:u}),[o.slot,u]),d={ref:a,...o.props,id:i};return Su()({ourProps:d,theirProps:s,slot:c,defaultTag:jU,name:o.name||"Description"})}let zU=Hh(BU),WU=Object.assign(zU,{});var Hm=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(Hm||{});let Kh=O.createContext(null);Kh.displayName="LabelContext";function iS(){let t=O.useContext(Kh);if(t===null){let e=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,iS),e}return t}function sS(t){var e,n,r;let i=(n=(e=O.useContext(Kh))==null?void 0:e.value)!=null?n:void 0;return((r=t==null?void 0:t.length)!=null?r:0)>0?[i,...t].filter(Boolean).join(" "):i}function HU({inherit:t=!1}={}){let e=sS(),[n,r]=O.useState([]),i=t?[e,...n].filter(Boolean):n;return[i.length>0?i.join(" "):void 0,O.useMemo(()=>function(s){let o=sr(u=>(r(c=>[...c,u]),()=>r(c=>{let d=c.slice(),h=d.indexOf(u);return h!==-1&&d.splice(h,1),d}))),a=O.useMemo(()=>({register:o,slot:s.slot,name:s.name,props:s.props,value:s.value}),[o,s.slot,s.name,s.props,s.value]);return we.createElement(Kh.Provider,{value:a},s.children)},[r])]}let qU="label";function GU(t,e){var n;let r=O.useId(),i=iS(),s=eS(),o=pv(),{id:a=`headlessui-label-${r}`,htmlFor:u=s??((n=i.props)==null?void 0:n.htmlFor),passive:c=!1,...d}=t,h=gv(e);fv(()=>i.register(a),[a,i.register]);let m=sr(N=>{let E=N.currentTarget;if(!(N.target!==N.currentTarget&&LU(N.target))&&(Wm(E)&&N.preventDefault(),i.props&&"onClick"in i.props&&typeof i.props.onClick=="function"&&i.props.onClick(N),Wm(E))){let y=document.getElementById(E.htmlFor);if(y){let k=y.getAttribute("disabled");if(k==="true"||k==="")return;let D=y.getAttribute("aria-disabled");if(D==="true"||D==="")return;(DU(y)&&(y.type==="file"||y.type==="radio"||y.type==="checkbox")||y.role==="radio"||y.role==="checkbox"||y.role==="switch")&&y.click(),y.focus({preventScroll:!0})}}}),w=o||!1,_=O.useMemo(()=>({...i.slot,disabled:w}),[i.slot,w]),P={ref:h,...i.props,id:a,htmlFor:u,onClick:m};return c&&("onClick"in P&&(delete P.htmlFor,delete P.onClick),"onClick"in d&&delete d.onClick),Su()({ourProps:P,theirProps:d,slot:_,defaultTag:u?qU:"div",name:i.name||"Label"})}let KU=Hh(GU),YU=Object.assign(KU,{});function QU(t,e){return O.useMemo(()=>{var n;if(t.type)return t.type;let r=(n=t.as)!=null?n:"button";if(typeof r=="string"&&r.toLowerCase()==="button"||(e==null?void 0:e.tagName)==="BUTTON"&&!e.hasAttribute("type"))return"button"},[t.type,t.as,e])}let yv=O.createContext(null);yv.displayName="GroupContext";let XU=O.Fragment;function JU(t){var e;let[n,r]=O.useState(null),[i,s]=HU(),[o,a]=$U(),u=O.useMemo(()=>({switch:n,setSwitch:r}),[n,r]),c={},d=t,h=Su();return we.createElement(a,{name:"Switch.Description",value:o},we.createElement(s,{name:"Switch.Label",value:i,props:{htmlFor:(e=u.switch)==null?void 0:e.id,onClick(m){n&&(Wm(m.currentTarget)&&m.preventDefault(),n.click(),n.focus({preventScroll:!0}))}}},we.createElement(yv.Provider,{value:u},h({ourProps:c,theirProps:d,slot:{},defaultTag:XU,name:"Switch.Group"}))))}let ZU="button";function e5(t,e){var n;let r=O.useId(),i=eS(),s=pv(),{id:o=i||`headlessui-switch-${r}`,disabled:a=s||!1,checked:u,defaultChecked:c,onChange:d,name:h,value:m,form:w,autoFocus:_=!1,...P}=t,N=O.useContext(yv),[E,y]=O.useState(null),k=O.useRef(null),D=gv(k,e,N===null?null:N.setSwitch,y),M=bU(c),[V,I]=TU(u,d,M??!1),v=hv(),[C,A]=O.useState(!1),R=sr(()=>{A(!0),I==null||I(!V),v.nextFrame(()=>{A(!1)})}),T=sr(xe=>{if(MU(xe.currentTarget))return xe.preventDefault();xe.preventDefault(),R()}),b=sr(xe=>{xe.key===Hm.Space?(xe.preventDefault(),R()):xe.key===Hm.Enter&&IU(xe.currentTarget)}),W=sr(xe=>xe.preventDefault()),H=sS(),ue=UU(),{isFocusVisible:me,focusProps:K}=iU({autoFocus:_}),{isHovered:oe,hoverProps:ne}=rU({isDisabled:a}),{pressed:he,pressProps:ce}=fU({disabled:a}),ve=O.useMemo(()=>({checked:V,disabled:a,hover:oe,focus:me,active:he,autofocus:_,changing:C}),[V,oe,me,he,a,C,_]),$e=_U({id:o,ref:D,role:"switch",type:QU(t,E),tabIndex:t.tabIndex===-1?0:(n=t.tabIndex)!=null?n:0,"aria-checked":V,"aria-labelledby":H,"aria-describedby":ue,disabled:a||void 0,autoFocus:_,onClick:T,onKeyUp:b,onKeyPress:W},K,ne,ce),je=O.useCallback(()=>{if(M!==void 0)return I==null?void 0:I(M)},[I,M]),Ze=Su();return we.createElement(we.Fragment,null,h!=null&&we.createElement(kU,{disabled:a,data:{[h]:m||"on"},overrides:{type:"checkbox",checked:V},form:w,onReset:je}),Ze({ourProps:$e,theirProps:P,slot:ve,defaultTag:ZU,name:"Switch"}))}let t5=Hh(e5),n5=JU,r5=YU,i5=WU,s5=Object.assign(t5,{Group:n5,Label:r5,Description:i5});const o5=()=>{var E;const t=xn(),{isDarkMode:e,currentColor:n,customColor:r,toggleDarkMode:i,changeColorTheme:s,setCustomColorTheme:o,getCurrentColors:a}=hN(),[u,c]=O.useState(!1),[d,h]=O.useState({primary:"#2563eb",secondary:"#06b6d4",accent:"#3b82f6"}),m=(y,k)=>{h(D=>({...D,[y]:k}))},w=()=>{o({name:"Custom Theme",...d}),c(!1)},_=()=>{const y=document.documentElement;y.style.setProperty("--color-primary",d.primary),y.style.setProperty("--color-secondary",d.secondary),y.style.setProperty("--color-accent",d.accent)},P=()=>{const y=a(),k=document.documentElement;k.style.setProperty("--color-primary",y.primary),k.style.setProperty("--color-secondary",y.secondary),k.style.setProperty("--color-accent",y.accent)},N=({colorKey:y,colors:k,isSelected:D,isCustom:M=!1})=>x("button",{onClick:()=>!M&&s(y),className:`relative p-4 rounded-xl border-2 transition-all duration-200 ${D?"border-primary shadow-lg scale-105":"border-gray-200 dark:border-slate-600 hover:border-gray-300 dark:hover:border-slate-500"} ${M?"cursor-default":"cursor-pointer"}`,children:[x("div",{className:"flex items-center space-x-3 mb-3",children:[x("div",{className:"flex space-x-1",children:[p("div",{className:"w-4 h-4 rounded-full border border-white shadow-sm",style:{backgroundColor:k.primary}}),p("div",{className:"w-4 h-4 rounded-full border border-white shadow-sm",style:{backgroundColor:k.secondary}}),p("div",{className:"w-4 h-4 rounded-full border border-white shadow-sm",style:{backgroundColor:k.accent}})]}),D&&p(Sw,{className:"w-5 h-5 text-primary"})]}),p("h3",{className:"font-medium text-gray-900 dark:text-gray-100 text-left",children:k.name}),M&&p("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-left mt-1",children:"Your custom colors"})]});return x("div",{className:"space-y-6",children:[x("div",{className:"flex items-center space-x-4",children:[p("button",{onClick:()=>t(-1),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors",children:p(ia,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),x("div",{className:"flex-1",children:[p("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Settings"}),p("p",{className:"text-gray-600 dark:text-gray-400",children:"Customize your app experience"})]})]}),p("div",{className:"card",children:x("div",{className:"flex items-center justify-between",children:[x("div",{className:"flex items-center space-x-3",children:[p("div",{className:"p-2 rounded-lg bg-primary-100 dark:bg-primary-900/30",children:e?p(lN,{className:"w-5 h-5 text-primary"}):p(dN,{className:"w-5 h-5 text-primary"})}),x("div",{children:[p("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Dark Mode"}),p("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e?"Dark theme is enabled":"Light theme is enabled"})]})]}),p(s5,{checked:e,onChange:i,className:`${e?"bg-primary":"bg-gray-200 dark:bg-slate-600"} relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 dark:focus:ring-offset-slate-800`,children:p("span",{className:`${e?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform`})})]})}),x("div",{className:"card",children:[x("div",{className:"flex items-center space-x-2 mb-6",children:[p(Nw,{className:"w-5 h-5 text-primary"}),p("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Color Themes"})]}),x("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[Object.entries(dl).map(([y,k])=>p(N,{colorKey:y,colors:k,isSelected:n===y&&!r},y)),r&&p(N,{colorKey:"custom",colors:r,isSelected:n==="custom",isCustom:!0})]}),x("div",{className:"border-t border-gray-200 dark:border-slate-600 pt-4",children:[x("button",{onClick:()=>c(!u),className:"w-full flex items-center justify-between p-3 rounded-lg bg-gray-50 dark:bg-slate-700 hover:bg-gray-100 dark:hover:bg-slate-600 transition-colors",children:[p("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Create Custom Theme"}),p(Nw,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})]}),u&&x("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-slate-700 rounded-lg space-y-4",children:[x("div",{className:"grid grid-cols-1 gap-4",children:[x("div",{children:[p("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Primary Color"}),x("div",{className:"flex items-center space-x-3",children:[p("input",{type:"color",value:d.primary,onChange:y=>m("primary",y.target.value),className:"w-12 h-10 rounded-lg border border-gray-300 dark:border-slate-500 cursor-pointer"}),p("input",{type:"text",value:d.primary,onChange:y=>m("primary",y.target.value),className:"flex-1 input-field text-sm",placeholder:"#2563eb"})]})]}),x("div",{children:[p("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Secondary Color"}),x("div",{className:"flex items-center space-x-3",children:[p("input",{type:"color",value:d.secondary,onChange:y=>m("secondary",y.target.value),className:"w-12 h-10 rounded-lg border border-gray-300 dark:border-slate-500 cursor-pointer"}),p("input",{type:"text",value:d.secondary,onChange:y=>m("secondary",y.target.value),className:"flex-1 input-field text-sm",placeholder:"#06b6d4"})]})]}),x("div",{children:[p("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Accent Color"}),x("div",{className:"flex items-center space-x-3",children:[p("input",{type:"color",value:d.accent,onChange:y=>m("accent",y.target.value),className:"w-12 h-10 rounded-lg border border-gray-300 dark:border-slate-500 cursor-pointer"}),p("input",{type:"text",value:d.accent,onChange:y=>m("accent",y.target.value),className:"flex-1 input-field text-sm",placeholder:"#3b82f6"})]})]})]}),x("div",{className:"flex space-x-3 pt-4",children:[x("button",{onClick:_,onMouseLeave:P,className:"flex-1 btn-secondary text-sm py-2",children:[p(pb,{className:"w-4 h-4 mr-2"}),"Preview"]}),x("button",{onClick:w,className:"flex-1 btn-primary text-sm py-2",children:[p(Sw,{className:"w-4 h-4 mr-2"}),"Apply Theme"]})]})]})]})]}),x("div",{className:"card",children:[p("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"About DentalCare"}),x("div",{className:"space-y-3 text-sm text-gray-600 dark:text-gray-400",children:[x("div",{className:"flex justify-between",children:[p("span",{children:"Version"}),p("span",{className:"font-medium",children:"1.0.0"})]}),x("div",{className:"flex justify-between",children:[p("span",{children:"Build"}),p("span",{className:"font-medium",children:"Production"})]}),x("div",{className:"flex justify-between",children:[p("span",{children:"Theme"}),x("span",{className:"font-medium capitalize",children:[r?"Custom":(E=dl[n])==null?void 0:E.name,e?" (Dark)":" (Light)"]})]})]})]}),x("div",{className:"card",children:[p("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Reset Settings"}),p("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"This will reset all your theme preferences to default values."}),p("button",{onClick:()=>{localStorage.removeItem("dental-app-theme"),window.location.reload()},className:"btn-secondary text-sm py-2 px-4",children:"Reset to Default"})]})]})},a5=()=>{const{patientId:t}=Bg(),e=xn(),{currentUser:n}=Sn(),{showSuccess:r,showError:i}=Vn(),s=w=>{console.log("AddTreatment: Showing error toast",{message:w,timestamp:new Date().toISOString()}),i(w)},o=w=>{console.log("AddTreatment: Showing success toast",{message:w,timestamp:new Date().toISOString()}),r(w)},[a,u]=O.useState(!1),{register:c,handleSubmit:d,formState:{errors:h}}=Pu({defaultValues:{treatment:"",date:new Date().toISOString().split("T")[0],cost:"",notes:""}});return O.useEffect(()=>(console.log("AddTreatment: Navigation triggered",{path:window.location.pathname,timestamp:new Date().toISOString()}),t||(console.error("AddTreatment: Invalid patientId, redirecting to /patients",{patientId:t}),s("Invalid patient ID"),e("/patients")),n||(console.error("AddTreatment: No authenticated user, redirecting to /login"),s("You must be logged in to add a treatment"),e("/login")),()=>console.log("AddTreatment: Component unmounted",{timestamp:new Date().toISOString()})),[t,n,e,s]),x("div",{className:"space-y-6 max-w-md mx-auto mt-8",children:[x("div",{className:"flex items-center space-x-4",children:[p("button",{onClick:()=>e(`/patients/${t||""}`),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",disabled:a,children:p(ia,{className:"w-5 h-5 text-gray-600"})}),x("div",{className:"flex-1",children:[p("h2",{className:"text-2xl font-bold text-gray-900",children:"Add Treatment"}),p("p",{className:"text-gray-600",children:"Add a new treatment for the patient"})]})]}),p("div",{className:"card",children:x("form",{onSubmit:d(async(w,_)=>{if(_==null||_.preventDefault(),console.log("AddTreatment: Form submitted",{data:w,timestamp:new Date().toISOString()}),!n){console.error("AddTreatment: No current user, cannot add treatment",{patientId:t}),s("You must be logged in to add a treatment"),e("/login");return}if(!t){console.error("AddTreatment: Invalid patient ID, cannot add treatment",{patientId:t,userId:n.uid}),s("Invalid patient ID"),e("/patients");return}u(!0);try{let P=null;if(w.cost){const k=Number(w.cost);if(isNaN(k)){console.error("AddTreatment: Invalid cost value",{cost:w.cost}),s("Cost must be a valid number"),u(!1);return}P=k}const N={patientId:t,treatment:w.treatment.trim(),date:w.date,cost:P,notes:w.notes?w.notes.trim():null};console.log("AddTreatment: treatmentData (raw):",N),console.log("AddTreatment: Submitting treatmentData",{treatmentData:JSON.stringify(N,null,2),userId:n.uid});const{id:E,error:y}=await el.create(N,n.uid);if(y!==null){console.error("AddTreatment: Error adding treatment:",y,{patientId:t,userId:n.uid,treatmentData:N}),s(`Failed to create treatment: ${y}`),u(!1);return}console.log("AddTreatment: Treatment created successfully",{id:E,timestamp:new Date().toISOString()}),o("Treatment added successfully!"),setTimeout(()=>{console.log("AddTreatment: Navigating to patient page",{patientId:t,timestamp:new Date().toISOString()}),e(`/patients/${t}`)},3e3)}catch(P){console.error("AddTreatment: Unexpected error adding treatment:",P,{patientId:t,userId:n.uid}),s(`Failed to add treatment: ${P.message||"Unknown error"}`),u(!1)}}),className:"space-y-4",noValidate:!0,children:[x("div",{children:[p("label",{htmlFor:"treatment",className:"block text-sm font-medium text-gray-700 mb-2",children:"Treatment *"}),p("input",{id:"treatment",type:"text",...c("treatment",{required:"Treatment is required",minLength:{value:1,message:"Treatment cannot be empty"}}),className:`input-field ${h.treatment?"border-red-500":""}`,placeholder:"Enter treatment name"}),h.treatment&&p("p",{className:"text-red-500 text-sm mt-1",children:h.treatment.message})]}),x("div",{children:[p("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date *"}),p("input",{id:"date",type:"date",...c("date",{required:"Date is required"}),className:`input-field ${h.date?"border-red-500":""}`,placeholder:"Enter treatment date"}),h.date&&p("p",{className:"text-red-500 text-sm mt-1",children:h.date.message})]}),x("div",{children:[p("label",{htmlFor:"cost",className:"block text-sm font-medium text-gray-700 mb-2",children:"Cost"}),p("input",{id:"cost",type:"number",step:"0.01",...c("cost",{validate:w=>!w||!isNaN(Number(w))||"Cost must be a valid number"}),className:`input-field ${h.cost?"border-red-500":""}`,placeholder:"Enter cost (optional)"}),h.cost&&p("p",{className:"text-red-500 text-sm mt-1",children:h.cost.message})]}),x("div",{children:[p("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),p("textarea",{id:"notes",...c("notes"),rows:4,className:`input-field resize-none ${h.notes?"border-red-500":""}`,placeholder:"Enter any additional notes (optional)"}),h.notes&&p("p",{className:"text-red-500 text-sm mt-1",children:h.notes.message})]}),x("div",{className:"flex space-x-4",children:[p("button",{type:"button",onClick:()=>e(`/patients/${t||""}`),className:"flex-1 btn-secondary",disabled:a,children:"Cancel"}),p("button",{type:"submit",className:"flex-1 btn-primary",disabled:a,children:a?x("div",{className:"flex items-center justify-center",children:[p("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):x(Rn,{children:[p(ou,{className:"w-4 h-4 mr-2"}),"Save Treatment"]})})]})]})})]})},oS=()=>{const t=xn(),{signInWithGoogle:e,signInWithEmail:n,signUpWithEmail:r}=Sn(),{showSuccess:i,showError:s,showInfo:o}=Vn(),[a,u]=O.useState(!1),[c,d]=O.useState(!1),[h,m]=O.useState(!1),[w,_]=O.useState(""),[P,N]=O.useState({email:"",password:"",displayName:"",confirmPassword:""}),E=async M=>{try{await Ai.requestPermissions(),await Ai.register(),Ai.addListener("registration",async V=>{console.log("FCM Token:",V.value);const I=BP();await Za(St(I,"users",M.uid),{email:M.email,displayName:M.displayName||P.displayName||"User",fcmToken:V.value,preferences:{notifications:!0,language:"en",theme:"light"},role:"dentist",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{merge:!0}),console.log(`User document and FCM token saved for ${M.uid}`)}),Ai.addListener("registrationError",V=>{console.error("FCM Registration Error:",V),s("Failed to register for notifications")})}catch(V){console.error("Push Notification Setup Error:",V),s("Failed to set up notifications")}},y=M=>{N({...P,[M.target.name]:M.target.value}),w&&_("")},k=async()=>{m(!0),_("");const{user:M,error:V,pending:I}=await e();V?(_(V),s(V),m(!1)):M?(await E(M),i("Successfully signed in with Google!"),t("/"),m(!1)):I?(o("Redirecting to Google Sign-In..."),_("Redirecting to Google Sign-In...")):m(!1)};return p("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-secondary-50 dark:from-slate-900 dark:to-slate-800 flex items-center justify-center px-4",children:x("div",{className:"max-w-md w-full",children:[x("div",{className:"text-center mb-8",children:[p("div",{className:"w-16 h-16 bg-primary rounded-2xl flex items-center justify-center mx-auto mb-4",children:p("div",{className:"w-8 h-8 bg-white rounded-full"})}),p("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"DentalCare"}),p("p",{className:"text-gray-600 dark:text-gray-400",children:a?"Create your account":"Sign in to your account"})]}),x("div",{className:"card mb-6",children:[w&&p("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg",children:p("p",{className:"text-red-700 dark:text-red-300 text-sm",children:w})}),x("form",{onSubmit:async M=>{if(M.preventDefault(),m(!0),_(""),!P.email||!P.password){_("Please fill in all required fields"),m(!1);return}if(a){if(!P.displayName){_("Please enter your full name"),m(!1);return}if(P.password!==P.confirmPassword){_("Passwords do not match"),m(!1);return}if(P.password.length<6){_("Password must be at least 6 characters"),m(!1);return}const{user:V,error:I}=await r(P.email,P.password,P.displayName);I?_(I):V&&(await E(V),t("/"))}else{const{user:V,error:I}=await n(P.email,P.password);I?_(I):V&&(await E(V),t("/"))}m(!1)},className:"space-y-4",children:[a&&x("div",{children:[p("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name"}),x("div",{className:"relative",children:[p(Gi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),p("input",{id:"displayName",name:"displayName",type:"text",value:P.displayName,onChange:y,className:"input-field pl-10",placeholder:"Enter your full name",disabled:h})]})]}),x("div",{children:[p("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),x("div",{className:"relative",children:[p(uh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),p("input",{id:"email",name:"email",type:"email",value:P.email,onChange:y,className:"input-field pl-10",placeholder:"Enter your email",disabled:h})]})]}),x("div",{children:[p("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),x("div",{className:"relative",children:[p(Aw,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),p("input",{id:"password",name:"password",type:c?"text":"password",value:P.password,onChange:y,className:"input-field pl-10 pr-10",placeholder:"Enter your password",disabled:h}),p("button",{type:"button",onClick:()=>d(!c),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",disabled:h,children:c?p(iN,{className:"w-5 h-5"}):p(pb,{className:"w-5 h-5"})})]})]}),a&&x("div",{children:[p("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm Password"}),x("div",{className:"relative",children:[p(Aw,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),p("input",{id:"confirmPassword",name:"confirmPassword",type:c?"text":"password",value:P.confirmPassword,onChange:y,className:"input-field pl-10",placeholder:"Confirm your password",disabled:h})]})]}),p("button",{type:"submit",className:"w-full btn-primary",disabled:h,children:h?x("div",{className:"flex items-center justify-center",children:[p("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),a?"Creating Account...":"Signing In..."]}):a?"Create Account":"Sign In"})]}),x("div",{className:"mt-6",children:[x("div",{className:"relative",children:[p("div",{className:"absolute inset-0 flex items-center",children:p("div",{className:"w-full border-t border-gray-300 dark:border-slate-600"})}),p("div",{className:"relative flex justify-center text-sm",children:p("span",{className:"px-2 bg-white dark:bg-slate-800 text-gray-500 dark:text-gray-400",children:"Or continue with"})})]}),p("button",{onClick:k,className:"w-full mt-4 btn-secondary flex items-center justify-center",disabled:h,children:h?x(Rn,{children:[p("div",{className:"w-5 h-5 border-2 border-primary border-t-transparent rounded-full animate-spin mr-2"}),"Signing In..."]}):x(Rn,{children:[x("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[p("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),p("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),p("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),p("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]})})]})]}),p("div",{className:"text-center",children:x("p",{className:"text-gray-600 dark:text-gray-400",children:[a?"Already have an account?":"Don't have an account?"," ",p("button",{onClick:()=>{u(!a),_(""),N({email:"",password:"",displayName:"",confirmPassword:""})},className:"text-primary font-medium hover:underline",disabled:h,children:a?"Sign In":"Sign Up"})]})}),w&&w.includes("cancelled")&&x("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/30 rounded-lg border border-blue-200 dark:border-blue-800",children:[p("h4",{className:"text-sm font-medium text-blue-900 dark:text-blue-100 mb-1",children:"Having trouble with Google Sign-In?"}),x("ul",{className:"text-xs text-blue-700 dark:text-blue-300 space-y-1",children:[p("li",{children:"• Make sure pop-ups are enabled in your browser"}),p("li",{children:"• Try refreshing the page and signing in again"}),p("li",{children:"• Use email/password as an alternative"})]})]}),x("div",{className:"mt-8 p-4 bg-gray-100 dark:bg-slate-700 rounded-lg",children:[p("h3",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Demo Credentials"}),p("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2",children:"For testing purposes, you can use:"}),x("div",{className:"text-xs text-gray-600 dark:text-gray-400 space-y-1",children:[x("p",{children:[p("strong",{children:"Email:"})," demo@dentalcare.com"]}),x("p",{children:[p("strong",{children:"Password:"})," demo123"]})]}),p("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Or use Google Sign-In for the best experience"})]})]})})},l5=({items:t,showAddMenu:e,setShowAddMenu:n,addMenuItems:r})=>{const i=xn(),s=lh(),o=c=>{c.isAction?n(!e):(i(c.path),n(!1))},a=c=>{i(c),n(!1)},u=c=>c==="/"?s.pathname==="/":s.pathname.startsWith(c);return x(Rn,{children:[e&&p("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>n(!1),children:p("div",{className:"absolute bottom-24 right-4 bg-white rounded-xl shadow-lg py-2 min-w-[160px]",children:r.map((c,d)=>p("button",{onClick:()=>a(c.path),className:"w-full text-left px-4 py-3 hover:bg-gray-50 transition-colors text-gray-700 font-medium",children:c.label},d))})}),p("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-slate-800 border-t border-gray-200 dark:border-slate-700 z-50 transition-colors duration-300",children:p("div",{className:"max-w-md mx-auto px-4",children:p("div",{className:"flex items-center justify-around py-2",children:t.map(c=>{const d=c.icon,h=!c.isAction&&u(c.path);return x("button",{onClick:()=>o(c),className:`flex flex-col items-center justify-center p-2 rounded-lg transition-all duration-200 ${c.isAction?e?"bg-red-500 text-white scale-110":"bg-primary text-white scale-110":h?"text-primary bg-primary-50 dark:bg-primary-900/30":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[c.isAction&&e?p(qg,{className:"w-6 h-6"}):p(d,{className:`w-5 h-5 ${c.isAction?"w-6 h-6":""}`}),p("span",{className:`text-xs mt-1 font-medium ${c.isAction?"text-xs":""}`,children:c.label})]},c.id)})})})})]})},u5=()=>{const t=xn(),{currentUser:e,userProfile:n,logout:r}=Sn(),{showSuccess:i,showError:s}=Vn(),{notifications:o,unreadCount:a,markAsRead:u}=Bh(),[c,d]=O.useState(!1),h=async()=>{try{const{error:w}=await r();w?s(w):i("Signed out successfully")}catch(w){s("Failed to sign out"),console.error("Logout error:",w)}},m=w=>{u(w.id),t(`/patients/${w.patientId}`),d(!1)};return O.useEffect(()=>{const w=_=>{c&&!_.target.closest(".notification-bell")&&d(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[c]),p("div",{className:"bg-white dark:bg-slate-800 shadow-sm border-b border-gray-100 dark:border-slate-700 sticky top-0 z-40 transition-colors duration-300",children:p("div",{className:"max-w-md mx-auto px-4 py-3",children:x("div",{className:"flex items-center justify-between",children:[x("div",{className:"flex items-center space-x-3",children:[p("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:p("div",{className:"w-4 h-4 bg-white rounded-full"})}),x("div",{children:[p("h1",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"DentalCare"}),p("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:(n==null?void 0:n.displayName)||(e==null?void 0:e.displayName)||"Follow-up Manager"})]})]}),x("div",{className:"flex items-center space-x-2",children:[x("div",{className:"relative notification-bell",children:[x("button",{onClick:()=>d(!c),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors relative",title:"Notifications",children:[p(qi,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),a>0&&p("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full text-xs text-white flex items-center justify-center",children:a})]}),c&&x("div",{className:"absolute right-0 mt-2 w-80 bg-white dark:bg-slate-800 rounded-xl shadow-lg border border-gray-200 dark:border-slate-700 z-50 max-h-96 overflow-y-auto",children:[p("div",{className:"p-4 border-b border-gray-200 dark:border-slate-700",children:p("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Notifications"})}),o.length===0?p("p",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:"No due follow-ups"}):o.map(w=>x("div",{onClick:()=>m(w),className:"p-4 border-b border-gray-100 dark:border-slate-700 hover:bg-gray-50 dark:hover:bg-slate-700 cursor-pointer transition-colors",children:[p("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:w.type.replace("-"," ")}),p("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:w.notes}),x("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:["Scheduled: ",Vt(w.scheduledDate)," ",w.scheduledTime?`(${w.scheduledTime})`:""]}),p("span",{className:`text-xs font-medium ${w.status==="overdue"?"text-red-500":"text-yellow-500"}`,children:w.status.toUpperCase()})]},w.id))]})]}),p("button",{onClick:h,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors",title:"Sign Out",children:p(aN,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]})]})})})},c5=Gs("SplashScreen",{web:()=>Xo(()=>import("./web-819d1dfa.js"),[]).then(t=>new t.SplashScreenWeb)}),d5=({centerX:t="50vw",centerY:e="40vh",color:n="#ffffff",durationMs:r=900,delayMs:i=50})=>{const[s,o]=O.useState(!1),[a,u]=O.useState(!1);return O.useEffect(()=>{Fs.isNativePlatform()&&c5.hide().catch(()=>{});const c=setTimeout(()=>o(!0),i),d=setTimeout(()=>u(!0),i+r+240);return()=>{clearTimeout(c),clearTimeout(d)}},[i,r]),a?null:p("div",{style:{clipPath:s?`circle(0 at ${t} ${e})`:`circle(150vmax at ${t} ${e})`,background:n,transition:`clip-path ${r}ms ease-out, opacity 240ms ease ${r}ms`,opacity:s?0:1},className:"fixed inset-0 z-[9999] pointer-events-none"})},Lr=({children:t})=>{const{currentUser:e}=Sn();return e?p(Rn,{children:t}):p(oS,{})},h5=()=>{const[t,e]=O.useState(!1),{currentUser:n}=Sn(),r=xn();return O.useEffect(()=>{var u;if(!!!((u=window.Capacitor)!=null&&u.isNativePlatform))return;(async()=>{try{await no.init("9c47d65f-8aaf-469b-92d2-9adeb619f287");const c=await no.Notifications.requestPermission(!0);console.log("User accepted notifications:",c);const d=await bV.getToken();d!=null&&d.token&&(console.log("FCM Token:",d.token),await no.User.addTag("FCM_Token",d.token)),n!=null&&n.uid&&(await no.login(n.uid),console.log("External User ID set:",n.uid)),no.Notifications.addForegroundWillDisplayListener(w=>{const _=w.getNotification();console.log("Foreground notification received:",_),w.preventDefault(),w.getNotification().display()}),no.Notifications.addNotificationOpenedListener(w=>{var N;const P=(((N=w.notification)==null?void 0:N.additionalData)||{}).route;P&&r(P),console.log("Notification clicked:",w)});const h=async()=>{if(console.log("DEBUG: Starting scheduleDailyNotification"),!(n!=null&&n.uid)){console.log("DEBUG: No currentUser.uid, skipping scheduling");return}const w=new Date;console.log("DEBUG: Current time:",w.toISOString());let _=K3(Y3(Q3(w,0),5),13);w>_&&(_=ax(_,1)),console.log("DEBUG: Scheduled time:",_.toISOString());const{followUps:P,error:N}=await En.getAll(n.uid);if(N){console.error("DEBUG: Error fetching follow-ups:",N);return}console.log("DEBUG: Fetched followUps count:",P.length);const E=P.filter(M=>SV(new Date(M.scheduledDate),w));if(console.log("DEBUG: Today follow-ups count:",E.length),E.length===0){console.log("DEBUG: No follow-ups today, no notification scheduled");return}const y="https://onesignal.com/api/v1/notifications",k={Authorization:`Basic ${{}.REACT_APP_ONESIGNAL_API_KEY||"os_v2_app_trd5mx4kv5djxewstlplmgpsq7tzor2lmjtesvvfuv37bz7ztmytpbmqkramlyytrg3tg4rnxj2t7mhvnb53fzrnk475kv7y6pcghhq"}`,"Content-Type":"application/json"};try{const M=await op.request({method:"GET",url:`${y}?app_id=9c47d65f-8aaf-469b-92d2-9adeb619f287&limit=1`,headers:k});console.log("DEBUG: Cancel response:",M.data);const V=JSON.parse(M.data).notifications||[];if(V.length>0){const I=await op.request({method:"DELETE",url:`${y}/${V[0].id}?app_id=9c47d65f-8aaf-469b-92d2-9adeb619f287`,headers:k});console.log("DEBUG: Deleted existing notification:",I.data)}else console.log("DEBUG: No existing notifications to delete")}catch(M){console.error("DEBUG: Error in cancel logic:",M)}const D={app_id:"9c47d65f-8aaf-469b-92d2-9adeb619f287",contents:{en:`You have ${E.length} follow-up${E.length>1?"s":""} today!`},headings:{en:"Daily Follow-up Reminder"},include_aliases:{external_id:[n.uid]},delayed_option:"timezone",delivery_time_of_day:"11:30",android_accent_color:"#FF5722",android_sound:"dental_drill_sound",android_vibrate:!0,data:{route:"/followups"}};console.log("DEBUG: Notification content prepared:",D);try{const M=await op.request({method:"POST",url:y,headers:k,data:D});console.log("DEBUG: Notification scheduled:",M.data)}catch(M){console.error("DEBUG: Error scheduling notification:",M)}};h();const m=w=>{w.isActive&&(console.log("DEBUG: App resumed, checking notification schedule"),h())};return E1.addListener("appStateChange",m),()=>{E1.removeAllListeners()}}catch(c){console.error("Push notification initialization error:",c)}})()},[r,n]),x("div",{className:"min-h-screen bg-gray-50 dark:bg-slate-900 pb-20 transition-colors duration-300",children:[p(u5,{}),p("main",{className:"px-4 py-6 max-w-md mx-auto",children:x(KA,{children:[p(Xn,{path:"/login",element:p(oS,{})}),p(Xn,{path:"/",element:p(Lr,{children:p(s6,{})})}),p(Xn,{path:"/patients",element:p(Lr,{children:p(o6,{})})}),p(Xn,{path:"/patients/:id",element:p(Lr,{children:p(A6,{})})}),p(Xn,{path:"/followups",element:p(Lr,{children:p(N6,{})})}),p(Xn,{path:"/add-patient",element:p(Lr,{children:p(R6,{})})}),p(Xn,{path:"/patients/:id/edit",element:p(Lr,{children:p(D6,{})})}),p(Xn,{path:"/add-followup",element:p(Lr,{children:p(O6,{})})}),p(Xn,{path:"/settings",element:p(Lr,{children:p(o5,{})})}),p(Xn,{path:"/patients/:patientId/treatments/new",element:p(Lr,{children:p(a5,{})})})]})}),n&&p(l5,{items:[{id:"dashboard",icon:sN,label:"Dashboard",path:"/"},{id:"patients",icon:um,label:"Patients",path:"/patients"},{id:"add",icon:pd,label:"Add",isAction:!0},{id:"followups",icon:qi,label:"Follow-ups",path:"/followups"},{id:"settings",icon:cN,label:"Settings",path:"/settings"}],showAddMenu:t,setShowAddMenu:e,addMenuItems:[{label:"Add Patient",path:"/add-patient"},{label:"Add Follow-up",path:"/add-followup"}]})]})},f5=()=>p(fN,{children:p(oV,{children:p(cV,{children:p(dV,{children:x(XA,{children:[p(h5,{}),p(d5,{centerX:"50vw",centerY:"40vh",color:"#ffffff",durationMs:900})]})})})})});document.addEventListener("touchstart",t=>{t.touches.length>1&&t.preventDefault()},{passive:!1});let B1=0;document.addEventListener("touchend",t=>{const e=new Date().getTime();e-B1<=300&&t.preventDefault(),B1=e},!1);pp.createRoot(document.getElementById("root")).render(p(we.StrictMode,{children:p(f5,{})}));export{V5 as $,T5 as A,p1 as B,Os as C,N5 as D,au as E,ii as F,Ei as G,g5 as H,v5 as I,uD as J,I5 as K,L5 as L,y5 as M,C5 as N,Rc as O,m1 as P,k5 as Q,O5 as R,hD as S,Ti as T,FR as U,S5 as V,tx as W,XD as X,qD as Y,F5 as Z,Wo as _,Yg as a,oD as a0,Zr as a1,A5 as a2,Gw as a3,LD as a4,uI as a5,bD as a6,p5 as b,Cb as c,m5 as d,z5 as e,EI as f,ye as g,E5 as h,ON as i,lD as j,_5 as k,D5 as l,P5 as m,eO as n,s2 as o,b5 as p,Ws as q,$i as r,_i as s,vr as t,M5 as u,LN as v,hR as w,R5 as x,x5 as y,w5 as z};
//# sourceMappingURL=index-90bc4e50.js.map
